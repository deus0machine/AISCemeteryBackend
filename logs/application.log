2025-06-13 00:10:52.758  INFO 2025-06-13 00:10:52,758 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 21184 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 00:10:52.767  INFO 2025-06-13 00:10:52,767 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 00:10:54.249  INFO 2025-06-13 00:10:54,249 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 00:10:54.495  INFO 2025-06-13 00:10:54,495 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 221 ms. Found 9 JPA repository interfaces.
2025-06-13 00:10:56.140  INFO 2025-06-13 00:10:56,140 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 00:10:56.156  INFO 2025-06-13 00:10:56,156 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 00:10:56.157  INFO 2025-06-13 00:10:56,157 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 00:10:56.245  INFO 2025-06-13 00:10:56,245 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 00:10:56.245  INFO 2025-06-13 00:10:56,245 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3440 ms
2025-06-13 00:10:56.286  INFO 2025-06-13 00:10:56,286 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 00:10:56.511  INFO 2025-06-13 00:10:56,511 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 00:10:56.512  INFO 2025-06-13 00:10:56,512 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 00:10:56.521  INFO 2025-06-13 00:10:56,521 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 00:10:56.634  INFO 2025-06-13 00:10:56,634 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 00:10:56.713  INFO 2025-06-13 00:10:56,713 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 00:10:56.770  INFO 2025-06-13 00:10:56,770 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 00:10:57.178  INFO 2025-06-13 00:10:57,178 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 00:10:58.557  INFO 2025-06-13 00:10:58,557 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 00:10:58.652  INFO 2025-06-13 00:10:58,652 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 00:10:59.060  INFO 2025-06-13 00:10:59,060 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 00:11:01.335  WARN 2025-06-13 00:11:01,335 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 00:11:01.404  INFO 2025-06-13 00:11:01,404 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 00:11:01.410  INFO 2025-06-13 00:11:01,410 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 00:11:01.412  WARN 2025-06-13 00:11:01,412 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 00:11:01.975  INFO 2025-06-13 00:11:01,975 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 00:11:02.503  INFO 2025-06-13 00:11:02,503 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 00:11:02.511  INFO 2025-06-13 00:11:02,511 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 10.114 seconds (process running for 10.845)
2025-06-13 00:11:02.515  INFO 2025-06-13 00:11:02,515 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 00:11:02.611  INFO 2025-06-13 00:11:02,611 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 00:11:02.885  INFO 2025-06-13 00:11:02,885 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 00:11:02.938  INFO 2025-06-13 00:11:02,938 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 00:11:02.981  INFO 2025-06-13 00:11:02,981 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 00:11:02.996  INFO 2025-06-13 00:11:02,996 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 00:11:03.059  INFO 2025-06-13 00:11:03,059 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 00:11:03.070  INFO 2025-06-13 00:11:03,070 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 00:11:03.070  INFO 2025-06-13 00:11:03,070 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 00:11:03.072  INFO 2025-06-13 00:11:03,072 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 00:19:44.494  INFO 2025-06-13 00:19:44,494 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 00:19:44.494  INFO 2025-06-13 00:19:44,494 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 00:19:44.495  INFO 2025-06-13 00:19:44,495 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 00:27:03.552  INFO 2025-06-13 00:27:03,552 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 00:27:03.556  INFO 2025-06-13 00:27:03,556 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 00:27:03.563  INFO 2025-06-13 00:27:03,563 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 00:27:16.104  INFO 2025-06-13 00:27:16,104 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 10548 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 00:27:16.107  INFO 2025-06-13 00:27:16,107 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 00:27:16.906  INFO 2025-06-13 00:27:16,906 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 00:27:16.966  INFO 2025-06-13 00:27:16,966 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 9 JPA repository interfaces.
2025-06-13 00:27:18.121  INFO 2025-06-13 00:27:18,121 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 00:27:18.142  INFO 2025-06-13 00:27:18,142 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 00:27:18.143  INFO 2025-06-13 00:27:18,143 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 00:27:18.232  INFO 2025-06-13 00:27:18,232 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 00:27:18.233  INFO 2025-06-13 00:27:18,233 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2076 ms
2025-06-13 00:27:18.283  INFO 2025-06-13 00:27:18,283 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 00:27:18.593  INFO 2025-06-13 00:27:18,593 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 00:27:18.596  INFO 2025-06-13 00:27:18,596 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 00:27:18.612  INFO 2025-06-13 00:27:18,612 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 00:27:18.763  INFO 2025-06-13 00:27:18,763 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 00:27:18.930  INFO 2025-06-13 00:27:18,930 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 00:27:18.993  INFO 2025-06-13 00:27:18,993 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 00:27:19.415  INFO 2025-06-13 00:27:19,415 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 00:27:21.118  INFO 2025-06-13 00:27:21,118 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 00:27:21.204  INFO 2025-06-13 00:27:21,204 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 00:27:21.703  INFO 2025-06-13 00:27:21,703 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 00:27:24.004  WARN 2025-06-13 00:27:24,004 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 00:27:24.038  INFO 2025-06-13 00:27:24,038 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 00:27:24.041  INFO 2025-06-13 00:27:24,041 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 00:27:24.042  WARN 2025-06-13 00:27:24,042 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 00:27:24.279  INFO 2025-06-13 00:27:24,279 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 00:27:24.307  INFO 2025-06-13 00:27:24,307 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 00:27:24.638  INFO 2025-06-13 00:27:24,638 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 00:27:24.644  INFO 2025-06-13 00:27:24,644 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 8.962 seconds (process running for 9.749)
2025-06-13 00:27:24.649  INFO 2025-06-13 00:27:24,649 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 00:27:24.649  INFO 2025-06-13 00:27:24,649 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 00:27:24.707  INFO 2025-06-13 00:27:24,707 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 00:27:24.921  INFO 2025-06-13 00:27:24,921 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 00:27:24.927  INFO 2025-06-13 00:27:24,927 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 00:27:24.960  INFO 2025-06-13 00:27:24,960 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 00:27:24.972  INFO 2025-06-13 00:27:24,972 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 00:27:25.023  INFO 2025-06-13 00:27:25,023 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 00:27:25.031  INFO 2025-06-13 00:27:25,031 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 00:27:25.031  INFO 2025-06-13 00:27:25,031 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 00:27:29.787  INFO 2025-06-13 00:27:29,787 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 00:27:29.788  INFO 2025-06-13 00:27:29,788 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 00:27:29.790  INFO 2025-06-13 00:27:29,790 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-13 00:27:29.892  INFO 2025-06-13 00:27:29,892 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 00:27:30.011  INFO 2025-06-13 00:27:30,011 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:27:30.085  INFO 2025-06-13 00:27:30,085 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 00:27:31.136  INFO 2025-06-13 00:27:31,136 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:27:31.302  INFO 2025-06-13 00:27:31,302 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:27:31.311  INFO 2025-06-13 00:27:31,311 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 00:27:31.313  INFO 2025-06-13 00:27:31,313 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 00:27:31.313  INFO 2025-06-13 00:27:31,313 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 00:27:31.313  INFO 2025-06-13 00:27:31,313 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 00:27:31.313  INFO 2025-06-13 00:27:31,313 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 00:27:31.316  INFO 2025-06-13 00:27:31,316 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 00:27:31.316  INFO 2025-06-13 00:27:31,316 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 00:27:31.320  INFO 2025-06-13 00:27:31,320 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:27:31.320  INFO 2025-06-13 00:27:31,320 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 00:27:31.346  INFO 2025-06-13 00:27:31,346 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 00:27:31.347  INFO 2025-06-13 00:27:31,347 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 00:27:33.707  INFO 2025-06-13 00:27:33,707 --- [nio-8080-exec-5] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 00:27:38.947  INFO 2025-06-13 00:27:38,947 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:27:39.086  INFO 2025-06-13 00:27:39,086 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:27:43.719  INFO 2025-06-13 00:27:43,719 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:27:43.723  INFO 2025-06-13 00:27:43,723 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 00:27:43.723  INFO 2025-06-13 00:27:43,723 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 00:27:43.723  INFO 2025-06-13 00:27:43,723 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 00:27:43.723  INFO 2025-06-13 00:27:43,723 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 00:27:43.723  INFO 2025-06-13 00:27:43,723 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 00:27:43.726  INFO 2025-06-13 00:27:43,726 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 00:27:43.726  INFO 2025-06-13 00:27:43,726 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 00:27:43.729  INFO 2025-06-13 00:27:43,729 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 00:27:43.733  INFO 2025-06-13 00:27:43,733 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 00:27:43.733  INFO 2025-06-13 00:27:43,733 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 00:27:43.867  INFO 2025-06-13 00:27:43,867 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:27:43.870  INFO 2025-06-13 00:27:43,870 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 00:27:43.870  INFO 2025-06-13 00:27:43,870 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 00:27:43.870  INFO 2025-06-13 00:27:43,870 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 00:27:43.870  INFO 2025-06-13 00:27:43,870 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 00:27:43.870  INFO 2025-06-13 00:27:43,870 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 00:27:43.872  INFO 2025-06-13 00:27:43,872 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 00:27:43.872  INFO 2025-06-13 00:27:43,872 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 00:27:43.873  INFO 2025-06-13 00:27:43,873 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 00:27:43.881  INFO 2025-06-13 00:27:43,881 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 00:27:43.881  INFO 2025-06-13 00:27:43,881 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 00:28:07.218  INFO 2025-06-13 00:28:07,218 --- [io-8080-exec-10] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 00:28:18.844  INFO 2025-06-13 00:28:18,844 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:28:18.869  INFO 2025-06-13 00:28:18,869 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:28:19.001  INFO 2025-06-13 00:28:19,001 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:28:19.789  INFO 2025-06-13 00:28:19,789 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:28:20.431  INFO 2025-06-13 00:28:20,431 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:28:31.698  INFO 2025-06-13 00:28:31,698 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:28:31.701  INFO 2025-06-13 00:28:31,701 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 00:28:31.701  INFO 2025-06-13 00:28:31,701 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 00:28:31.701  INFO 2025-06-13 00:28:31,701 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 00:28:31.701  INFO 2025-06-13 00:28:31,701 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 00:28:31.701  INFO 2025-06-13 00:28:31,701 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 00:28:31.702  INFO 2025-06-13 00:28:31,702 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 00:28:31.702  INFO 2025-06-13 00:28:31,702 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 00:28:31.703  INFO 2025-06-13 00:28:31,703 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 00:28:31.711  INFO 2025-06-13 00:28:31,711 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 00:28:31.711  INFO 2025-06-13 00:28:31,711 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 00:28:31.851  INFO 2025-06-13 00:28:31,851 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:28:31.855  INFO 2025-06-13 00:28:31,855 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 00:28:31.855  INFO 2025-06-13 00:28:31,855 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 00:28:31.855  INFO 2025-06-13 00:28:31,855 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 00:28:31.855  INFO 2025-06-13 00:28:31,855 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 00:28:31.855  INFO 2025-06-13 00:28:31,855 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 00:28:31.857  INFO 2025-06-13 00:28:31,857 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 00:28:31.857  INFO 2025-06-13 00:28:31,857 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 00:28:31.858  INFO 2025-06-13 00:28:31,858 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 00:28:31.862  INFO 2025-06-13 00:28:31,862 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 00:28:31.862  INFO 2025-06-13 00:28:31,862 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 00:29:31.303  INFO 2025-06-13 00:29:31,303 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 00:29:31.307  INFO 2025-06-13 00:29:31,307 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 00:29:31.314  INFO 2025-06-13 00:29:31,314 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 00:33:22.029  INFO 2025-06-13 00:33:22,029 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 14396 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 00:33:22.031  INFO 2025-06-13 00:33:22,031 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 00:33:22.917  INFO 2025-06-13 00:33:22,917 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 00:33:22.990  INFO 2025-06-13 00:33:22,990 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 65 ms. Found 9 JPA repository interfaces.
2025-06-13 00:33:23.748  INFO 2025-06-13 00:33:23,748 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 00:33:23.775  INFO 2025-06-13 00:33:23,775 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 00:33:23.776  INFO 2025-06-13 00:33:23,776 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 00:33:23.933  INFO 2025-06-13 00:33:23,933 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 00:33:23.934  INFO 2025-06-13 00:33:23,934 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1860 ms
2025-06-13 00:33:24.009  INFO 2025-06-13 00:33:24,009 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 00:33:24.202  INFO 2025-06-13 00:33:24,202 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 00:33:24.204  INFO 2025-06-13 00:33:24,204 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 00:33:24.215  INFO 2025-06-13 00:33:24,215 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 00:33:24.343  INFO 2025-06-13 00:33:24,343 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 00:33:24.406  INFO 2025-06-13 00:33:24,406 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 00:33:24.445  INFO 2025-06-13 00:33:24,445 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 00:33:24.726  INFO 2025-06-13 00:33:24,726 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 00:33:26.184  INFO 2025-06-13 00:33:26,184 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 00:33:26.287  INFO 2025-06-13 00:33:26,287 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 00:33:26.689  INFO 2025-06-13 00:33:26,689 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 00:33:28.970  WARN 2025-06-13 00:33:28,970 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 00:33:29.000  INFO 2025-06-13 00:33:29,000 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 00:33:29.003  INFO 2025-06-13 00:33:29,003 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 00:33:29.004  WARN 2025-06-13 00:33:29,004 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 00:33:29.250  INFO 2025-06-13 00:33:29,250 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 00:33:29.282  INFO 2025-06-13 00:33:29,282 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 00:33:29.621  INFO 2025-06-13 00:33:29,621 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 00:33:29.629  INFO 2025-06-13 00:33:29,629 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 8.073 seconds (process running for 8.915)
2025-06-13 00:33:29.633  INFO 2025-06-13 00:33:29,633 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 00:33:29.634  INFO 2025-06-13 00:33:29,634 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 00:33:29.691  INFO 2025-06-13 00:33:29,691 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 00:33:29.912  INFO 2025-06-13 00:33:29,912 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 00:33:29.919  INFO 2025-06-13 00:33:29,919 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 00:33:29.969  INFO 2025-06-13 00:33:29,969 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 00:33:29.986  INFO 2025-06-13 00:33:29,986 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 00:33:30.049  INFO 2025-06-13 00:33:30,049 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 00:33:30.065  INFO 2025-06-13 00:33:30,065 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 00:33:30.066  INFO 2025-06-13 00:33:30,066 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 00:33:50.254  INFO 2025-06-13 00:33:50,254 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 00:33:50.257  INFO 2025-06-13 00:33:50,257 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 00:33:50.261  INFO 2025-06-13 00:33:50,261 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 00:42:10.756  INFO 2025-06-13 00:42:10,756 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 20484 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 00:42:10.761  INFO 2025-06-13 00:42:10,761 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 00:42:11.788  INFO 2025-06-13 00:42:11,788 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 00:42:11.890  INFO 2025-06-13 00:42:11,890 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 92 ms. Found 9 JPA repository interfaces.
2025-06-13 00:42:13.164  INFO 2025-06-13 00:42:13,164 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 00:42:13.184  INFO 2025-06-13 00:42:13,184 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 00:42:13.184  INFO 2025-06-13 00:42:13,184 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 00:42:13.250  INFO 2025-06-13 00:42:13,250 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 00:42:13.251  INFO 2025-06-13 00:42:13,251 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2436 ms
2025-06-13 00:42:13.289  INFO 2025-06-13 00:42:13,289 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 00:42:13.514  INFO 2025-06-13 00:42:13,514 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 00:42:13.517  INFO 2025-06-13 00:42:13,517 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 00:42:13.527  INFO 2025-06-13 00:42:13,527 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 00:42:13.648  INFO 2025-06-13 00:42:13,648 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 00:42:13.717  INFO 2025-06-13 00:42:13,717 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 00:42:13.766  INFO 2025-06-13 00:42:13,766 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 00:42:14.108  INFO 2025-06-13 00:42:14,108 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 00:42:15.642  INFO 2025-06-13 00:42:15,642 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 00:42:15.734  INFO 2025-06-13 00:42:15,734 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 00:42:16.281  INFO 2025-06-13 00:42:16,281 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 00:42:18.992  WARN 2025-06-13 00:42:18,992 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 00:42:19.040  INFO 2025-06-13 00:42:19,040 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 00:42:19.045  INFO 2025-06-13 00:42:19,045 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 00:42:19.047  WARN 2025-06-13 00:42:19,047 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 00:42:19.416  INFO 2025-06-13 00:42:19,416 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 00:42:19.453  INFO 2025-06-13 00:42:19,453 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 00:42:19.952  INFO 2025-06-13 00:42:19,952 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 00:42:19.960  INFO 2025-06-13 00:42:19,960 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 9.793 seconds (process running for 10.781)
2025-06-13 00:42:20.156  INFO 2025-06-13 00:42:20,156 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 00:42:20.157  INFO 2025-06-13 00:42:20,157 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 00:42:20.165  INFO 2025-06-13 00:42:20,165 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 00:42:20.463  INFO 2025-06-13 00:42:20,463 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 00:42:20.481  INFO 2025-06-13 00:42:20,481 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 00:42:20.560  INFO 2025-06-13 00:42:20,560 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 00:42:20.579  INFO 2025-06-13 00:42:20,579 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 00:42:20.653  INFO 2025-06-13 00:42:20,653 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 00:42:20.670  INFO 2025-06-13 00:42:20,670 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 00:42:20.670  INFO 2025-06-13 00:42:20,670 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 00:44:48.579  INFO 2025-06-13 00:44:48,579 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 00:44:48.579  INFO 2025-06-13 00:44:48,579 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 00:44:48.581  INFO 2025-06-13 00:44:48,581 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-13 00:44:48.794  INFO 2025-06-13 00:44:48,794 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:44:48.794  INFO 2025-06-13 00:44:48,794 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:44:48.794  INFO 2025-06-13 00:44:48,794 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 00:44:48.835  INFO 2025-06-13 00:44:48,835 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 00:44:48.835  INFO 2025-06-13 00:44:48,835 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 00:44:48.835  INFO 2025-06-13 00:44:48,835 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 00:44:48.835  INFO 2025-06-13 00:44:48,835 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 00:44:48.836  INFO 2025-06-13 00:44:48,836 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 00:44:48.838  INFO 2025-06-13 00:44:48,838 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 00:44:48.838  INFO 2025-06-13 00:44:48,838 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 00:44:48.841  INFO 2025-06-13 00:44:48,841 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 00:44:48.864  INFO 2025-06-13 00:44:48,864 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 00:44:48.864  INFO 2025-06-13 00:44:48,864 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:15:45.343  INFO 2025-06-13 01:15:45,343 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:15:45.435  INFO 2025-06-13 01:15:45,435 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:15:45.446  INFO 2025-06-13 01:15:45,446 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:15:45.450  INFO 2025-06-13 01:15:45,450 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:15:45.451  INFO 2025-06-13 01:15:45,451 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:15:45.451  INFO 2025-06-13 01:15:45,451 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:15:45.451  INFO 2025-06-13 01:15:45,451 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:15:45.451  INFO 2025-06-13 01:15:45,451 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 01:15:45.454  INFO 2025-06-13 01:15:45,454 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 01:15:45.454  INFO 2025-06-13 01:15:45,454 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 01:15:45.455  INFO 2025-06-13 01:15:45,455 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 01:15:45.465  INFO 2025-06-13 01:15:45,465 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:15:45.466  INFO 2025-06-13 01:15:45,466 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:15:52.233  INFO 2025-06-13 01:15:52,233 --- [io-8080-exec-10] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 01:15:57.598  INFO 2025-06-13 01:15:57,598 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:15:57.606  INFO 2025-06-13 01:15:57,606 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Quick search: query=sdsf, limit=20
2025-06-13 01:15:57.606  INFO 2025-06-13 01:15:57,606 --- [nio-8080-exec-1] r.c.services.MemorialService             : Quick search for query: sdsf, limit: 20
2025-06-13 01:15:57.736  INFO 2025-06-13 01:15:57,736 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:15:59.067  INFO 2025-06-13 01:15:59,067 --- [nio-8080-exec-2] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 01:16:30.887  INFO 2025-06-13 01:16:30,887 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:16:30.894  INFO 2025-06-13 01:16:30,894 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Advanced search: query=null, firstName=null, lastName=null, middleName=null, location=null
2025-06-13 01:16:30.894  INFO 2025-06-13 01:16:30,894 --- [nio-8080-exec-4] r.c.services.MemorialService             : Advanced search with parameters: query=null, firstName=null, lastName=null, middleName=null, location=null
2025-06-13 01:17:14.238  INFO 2025-06-13 01:17:14,238 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:17:14.243  INFO 2025-06-13 01:17:14,243 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Advanced search: query=sdfdsf, firstName=sdfsd, lastName=ssdsd, middleName=sdds, location=null
2025-06-13 01:17:14.243  INFO 2025-06-13 01:17:14,243 --- [nio-8080-exec-6] r.c.services.MemorialService             : Advanced search with parameters: query=sdfdsf, firstName=sdfsd, lastName=ssdsd, middleName=sdds, location=null
2025-06-13 01:17:45.801  INFO 2025-06-13 01:17:45,801 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:17:45.804  INFO 2025-06-13 01:17:45,804 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:17:45.804  INFO 2025-06-13 01:17:45,804 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:17:45.804  INFO 2025-06-13 01:17:45,804 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:17:45.804  INFO 2025-06-13 01:17:45,804 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:17:45.804  INFO 2025-06-13 01:17:45,804 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 01:17:45.805  INFO 2025-06-13 01:17:45,805 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 01:17:45.806  INFO 2025-06-13 01:17:45,806 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 01:17:45.806  INFO 2025-06-13 01:17:45,806 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 01:17:45.812  INFO 2025-06-13 01:17:45,812 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:17:45.812  INFO 2025-06-13 01:17:45,812 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:17:46.399  INFO 2025-06-13 01:17:46,399 --- [nio-8080-exec-8] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 01:17:52.106  INFO 2025-06-13 01:17:52,106 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:17:52.111  INFO 2025-06-13 01:17:52,111 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Quick search: query=sdfsd, limit=20
2025-06-13 01:17:52.111  INFO 2025-06-13 01:17:52,111 --- [nio-8080-exec-9] r.c.services.MemorialService             : Quick search for query: sdfsd, limit: 20
2025-06-13 01:17:52.236  INFO 2025-06-13 01:17:52,236 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:17:54.717  INFO 2025-06-13 01:17:54,717 --- [nio-8080-exec-1] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 01:17:57.533  INFO 2025-06-13 01:17:57,533 --- [nio-8080-exec-3] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 01:18:21.387  INFO 2025-06-13 01:18:21,387 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:18:21.533  INFO 2025-06-13 01:18:21,533 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:18:24.656  INFO 2025-06-13 01:18:24,656 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:18:25.869  INFO 2025-06-13 01:18:25,869 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:18:25.874  INFO 2025-06-13 01:18:25,874 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:18:25.874  INFO 2025-06-13 01:18:25,874 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:18:25.874  INFO 2025-06-13 01:18:25,874 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:18:25.875  INFO 2025-06-13 01:18:25,875 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:18:25.875  INFO 2025-06-13 01:18:25,875 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 01:18:25.876  INFO 2025-06-13 01:18:25,876 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 01:18:25.877  INFO 2025-06-13 01:18:25,877 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 01:18:25.877  INFO 2025-06-13 01:18:25,877 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 01:18:25.885  INFO 2025-06-13 01:18:25,885 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:18:25.885  INFO 2025-06-13 01:18:25,885 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:18:26.009  INFO 2025-06-13 01:18:26,009 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:18:26.015  INFO 2025-06-13 01:18:26,015 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:18:26.015  INFO 2025-06-13 01:18:26,015 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:18:26.015  INFO 2025-06-13 01:18:26,015 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:18:26.015  INFO 2025-06-13 01:18:26,015 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:18:26.015  INFO 2025-06-13 01:18:26,015 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 01:18:26.017  INFO 2025-06-13 01:18:26,017 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 01:18:26.018  INFO 2025-06-13 01:18:26,018 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 01:18:26.018  INFO 2025-06-13 01:18:26,018 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 01:18:26.025  INFO 2025-06-13 01:18:26,025 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:18:26.025  INFO 2025-06-13 01:18:26,025 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:18:58.623  INFO 2025-06-13 01:18:58,623 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:18:58.713  INFO 2025-06-13 01:18:58,713 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:18:58.716  INFO 2025-06-13 01:18:58,716 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:18:58.716  INFO 2025-06-13 01:18:58,716 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:18:58.716  INFO 2025-06-13 01:18:58,716 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:18:58.716  INFO 2025-06-13 01:18:58,716 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:18:58.716  INFO 2025-06-13 01:18:58,716 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 01:18:58.718  INFO 2025-06-13 01:18:58,718 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 01:18:58.719  INFO 2025-06-13 01:18:58,719 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 01:18:58.720  INFO 2025-06-13 01:18:58,720 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 01:18:58.721  INFO 2025-06-13 01:18:58,721 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:18:58.723  INFO 2025-06-13 01:18:58,723 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:18:58.723  INFO 2025-06-13 01:18:58,723 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:19:26.913  INFO 2025-06-13 01:19:26,913 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:19:27.166  INFO 2025-06-13 01:19:27,166 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:19:28.387  INFO 2025-06-13 01:19:28,387 --- [nio-8080-exec-5] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 01:19:30.720  INFO 2025-06-13 01:19:30,720 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:19:31.144  INFO 2025-06-13 01:19:31,144 --- [nio-8080-exec-7] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 01:19:32.545  INFO 2025-06-13 01:19:32,545 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:22:24.668  INFO 2025-06-13 01:22:24,668 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:22:24.802  INFO 2025-06-13 01:22:24,802 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:22:24.808  INFO 2025-06-13 01:22:24,808 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:22:24.811  INFO 2025-06-13 01:22:24,811 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:22:24.811  INFO 2025-06-13 01:22:24,811 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:22:24.811  INFO 2025-06-13 01:22:24,811 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:22:24.811  INFO 2025-06-13 01:22:24,811 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:22:24.811  INFO 2025-06-13 01:22:24,811 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 01:22:24.813  INFO 2025-06-13 01:22:24,813 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 01:22:24.813  INFO 2025-06-13 01:22:24,813 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 01:22:24.814  INFO 2025-06-13 01:22:24,814 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 01:22:24.819  INFO 2025-06-13 01:22:24,819 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:22:24.819  INFO 2025-06-13 01:22:24,819 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:22:28.112  INFO 2025-06-13 01:22:28,112 --- [nio-8080-exec-4] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 01:22:31.780  INFO 2025-06-13 01:22:31,780 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:22:33.049  INFO 2025-06-13 01:22:33,049 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:22:33.052  INFO 2025-06-13 01:22:33,052 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Quick search: query=sadsdds, limit=20
2025-06-13 01:22:33.053  INFO 2025-06-13 01:22:33,053 --- [nio-8080-exec-6] r.c.services.MemorialService             : Quick search for query: sadsdds, limit: 20
2025-06-13 01:22:35.013  INFO 2025-06-13 01:22:35,013 --- [nio-8080-exec-7] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 01:22:36.872  INFO 2025-06-13 01:22:36,872 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:22:36.876  INFO 2025-06-13 01:22:36,876 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Quick search: query=sdsfdsfdsdfsd, limit=20
2025-06-13 01:22:36.876  INFO 2025-06-13 01:22:36,876 --- [nio-8080-exec-8] r.c.services.MemorialService             : Quick search for query: sdsfdsfdsdfsd, limit: 20
2025-06-13 01:22:37.004  INFO 2025-06-13 01:22:37,004 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:22:38.375  INFO 2025-06-13 01:22:38,375 --- [io-8080-exec-10] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 01:22:47.304  INFO 2025-06-13 01:22:47,304 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:22:47.306  INFO 2025-06-13 01:22:47,306 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:22:47.306  INFO 2025-06-13 01:22:47,306 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:22:47.307  INFO 2025-06-13 01:22:47,307 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:22:47.307  INFO 2025-06-13 01:22:47,307 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:22:47.307  INFO 2025-06-13 01:22:47,307 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 01:22:47.309  INFO 2025-06-13 01:22:47,309 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 01:22:47.309  INFO 2025-06-13 01:22:47,309 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 01:22:47.310  INFO 2025-06-13 01:22:47,310 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 01:22:47.315  INFO 2025-06-13 01:22:47,315 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:22:47.315  INFO 2025-06-13 01:22:47,315 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:22:47.940  INFO 2025-06-13 01:22:47,940 --- [nio-8080-exec-3] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 01:22:51.390  INFO 2025-06-13 01:22:51,390 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:22:51.536  INFO 2025-06-13 01:22:51,536 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:35.235  INFO 2025-06-13 01:24:35,235 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:35.326  INFO 2025-06-13 01:24:35,326 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:35.330  INFO 2025-06-13 01:24:35,330 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:24:35.330  INFO 2025-06-13 01:24:35,330 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:24:35.330  INFO 2025-06-13 01:24:35,330 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:24:35.330  INFO 2025-06-13 01:24:35,330 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:24:35.330  INFO 2025-06-13 01:24:35,330 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 01:24:35.332  INFO 2025-06-13 01:24:35,332 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 01:24:35.332  INFO 2025-06-13 01:24:35,332 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 01:24:35.332  INFO 2025-06-13 01:24:35,332 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 01:24:35.336  INFO 2025-06-13 01:24:35,336 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:35.338  INFO 2025-06-13 01:24:35,338 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:24:35.338  INFO 2025-06-13 01:24:35,338 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:24:37.585  INFO 2025-06-13 01:24:37,585 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:37.718  INFO 2025-06-13 01:24:37,718 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:39.265  INFO 2025-06-13 01:24:39,265 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:40.496  INFO 2025-06-13 01:24:40,496 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:40.499  INFO 2025-06-13 01:24:40,499 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:24:40.500  INFO 2025-06-13 01:24:40,500 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:24:40.500  INFO 2025-06-13 01:24:40,500 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:24:40.500  INFO 2025-06-13 01:24:40,500 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:24:40.500  INFO 2025-06-13 01:24:40,500 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 01:24:40.502  INFO 2025-06-13 01:24:40,502 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 01:24:40.502  INFO 2025-06-13 01:24:40,502 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 01:24:40.502  INFO 2025-06-13 01:24:40,502 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 01:24:40.506  INFO 2025-06-13 01:24:40,506 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:24:40.506  INFO 2025-06-13 01:24:40,506 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:24:40.653  INFO 2025-06-13 01:24:40,653 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:40.658  INFO 2025-06-13 01:24:40,658 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:24:40.659  INFO 2025-06-13 01:24:40,659 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:24:40.659  INFO 2025-06-13 01:24:40,659 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:24:40.659  INFO 2025-06-13 01:24:40,659 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:24:40.659  INFO 2025-06-13 01:24:40,659 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 01:24:40.661  INFO 2025-06-13 01:24:40,661 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 01:24:40.661  INFO 2025-06-13 01:24:40,661 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 01:24:40.661  INFO 2025-06-13 01:24:40,661 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 01:24:40.667  INFO 2025-06-13 01:24:40,667 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:24:40.667  INFO 2025-06-13 01:24:40,667 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:24:41.191  INFO 2025-06-13 01:24:41,191 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:41.199  INFO 2025-06-13 01:24:41,199 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:41.348  INFO 2025-06-13 01:24:41,348 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:42.131  INFO 2025-06-13 01:24:42,131 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:49.412  INFO 2025-06-13 01:24:49,412 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:49.416  INFO 2025-06-13 01:24:49,416 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:51.035  INFO 2025-06-13 01:24:51,035 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:24:51.787  INFO 2025-06-13 01:24:51,787 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:25:45.039  INFO 2025-06-13 01:25:45,039 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 01:25:45.042  INFO 2025-06-13 01:25:45,042 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 01:25:45.048  INFO 2025-06-13 01:25:45,048 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 01:25:49.373  INFO 2025-06-13 01:25:49,373 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 5792 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 01:25:49.375  INFO 2025-06-13 01:25:49,375 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 01:25:50.001  INFO 2025-06-13 01:25:50,001 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 01:25:50.062  INFO 2025-06-13 01:25:50,062 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54 ms. Found 9 JPA repository interfaces.
2025-06-13 01:25:50.772  INFO 2025-06-13 01:25:50,772 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 01:25:50.784  INFO 2025-06-13 01:25:50,784 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 01:25:50.785  INFO 2025-06-13 01:25:50,785 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 01:25:50.846  INFO 2025-06-13 01:25:50,846 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 01:25:50.846  INFO 2025-06-13 01:25:50,846 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1430 ms
2025-06-13 01:25:50.873  INFO 2025-06-13 01:25:50,873 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 01:25:51.137  INFO 2025-06-13 01:25:51,137 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 01:25:51.139  INFO 2025-06-13 01:25:51,139 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 01:25:51.156  INFO 2025-06-13 01:25:51,156 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 01:25:51.266  INFO 2025-06-13 01:25:51,266 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 01:25:51.345  INFO 2025-06-13 01:25:51,345 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 01:25:51.398  INFO 2025-06-13 01:25:51,398 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 01:25:51.758  INFO 2025-06-13 01:25:51,758 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 01:25:53.343  INFO 2025-06-13 01:25:53,343 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 01:25:53.434  INFO 2025-06-13 01:25:53,434 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 01:25:53.881  INFO 2025-06-13 01:25:53,881 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 01:25:56.668  WARN 2025-06-13 01:25:56,668 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 01:25:56.712  INFO 2025-06-13 01:25:56,712 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 01:25:56.717  INFO 2025-06-13 01:25:56,717 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 01:25:56.718  WARN 2025-06-13 01:25:56,718 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 01:25:56.999  INFO 2025-06-13 01:25:56,999 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 01:25:57.028  INFO 2025-06-13 01:25:57,028 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 01:25:57.436  INFO 2025-06-13 01:25:57,436 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 01:25:57.443  INFO 2025-06-13 01:25:57,443 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 8.44 seconds (process running for 9.19)
2025-06-13 01:25:57.449  INFO 2025-06-13 01:25:57,449 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 01:25:57.559  INFO 2025-06-13 01:25:57,559 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 01:25:57.561  INFO 2025-06-13 01:25:57,561 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 01:25:57.831  INFO 2025-06-13 01:25:57,831 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 01:25:57.844  INFO 2025-06-13 01:25:57,844 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 01:25:57.896  INFO 2025-06-13 01:25:57,896 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 01:25:57.909  INFO 2025-06-13 01:25:57,909 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 01:25:57.963  INFO 2025-06-13 01:25:57,963 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 01:25:57.975  INFO 2025-06-13 01:25:57,975 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 01:25:57.976  INFO 2025-06-13 01:25:57,976 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 01:26:02.983  INFO 2025-06-13 01:26:02,983 --- [nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 01:26:02.983  INFO 2025-06-13 01:26:02,983 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 01:26:02.984  INFO 2025-06-13 01:26:02,984 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 01:26:03.181  INFO 2025-06-13 01:26:03,181 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:26:08.984  INFO 2025-06-13 01:26:08,984 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:26:09.665  INFO 2025-06-13 01:26:09,665 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:34:46.405  INFO 2025-06-13 01:34:46,405 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:34:46.523  INFO 2025-06-13 01:34:46,523 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:34:46.535  INFO 2025-06-13 01:34:46,535 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:34:46.541  INFO 2025-06-13 01:34:46,541 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:34:46.541  INFO 2025-06-13 01:34:46,541 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:34:46.541  INFO 2025-06-13 01:34:46,541 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:34:46.541  INFO 2025-06-13 01:34:46,541 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:34:46.541  INFO 2025-06-13 01:34:46,541 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 01:34:46.544  INFO 2025-06-13 01:34:46,544 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 01:34:46.544  INFO 2025-06-13 01:34:46,544 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 01:34:46.548  INFO 2025-06-13 01:34:46,548 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 01:34:46.579  INFO 2025-06-13 01:34:46,579 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:34:46.580  INFO 2025-06-13 01:34:46,580 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:34:48.665  INFO 2025-06-13 01:34:48,665 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:34:48.813  INFO 2025-06-13 01:34:48,813 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:34:49.900  INFO 2025-06-13 01:34:49,900 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:34:50.937  INFO 2025-06-13 01:34:50,937 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:35:08.620  INFO 2025-06-13 01:35:08,620 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:35:08.641  INFO 2025-06-13 01:35:08,641 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:35:10.565  INFO 2025-06-13 01:35:10,565 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:35:41.382  INFO 2025-06-13 01:35:41,382 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:35:42.250  INFO 2025-06-13 01:35:42,250 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:39:12.823  INFO 2025-06-13 01:39:12,823 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 01:39:12.827  INFO 2025-06-13 01:39:12,827 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 01:39:12.831  INFO 2025-06-13 01:39:12,831 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 01:44:13.118  INFO 2025-06-13 01:44:13,118 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 21232 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 01:44:13.121  INFO 2025-06-13 01:44:13,121 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 01:44:14.421  INFO 2025-06-13 01:44:14,421 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 01:44:14.536  INFO 2025-06-13 01:44:14,536 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 104 ms. Found 10 JPA repository interfaces.
2025-06-13 01:44:15.698  INFO 2025-06-13 01:44:15,698 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 01:44:15.717  INFO 2025-06-13 01:44:15,717 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 01:44:15.718  INFO 2025-06-13 01:44:15,718 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 01:44:15.809  INFO 2025-06-13 01:44:15,809 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 01:44:15.809  INFO 2025-06-13 01:44:15,809 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2626 ms
2025-06-13 01:44:15.852  INFO 2025-06-13 01:44:15,852 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 01:44:16.100  INFO 2025-06-13 01:44:16,100 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 01:44:16.102  INFO 2025-06-13 01:44:16,102 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 01:44:16.111  INFO 2025-06-13 01:44:16,111 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 01:44:16.218  INFO 2025-06-13 01:44:16,218 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 01:44:16.285  INFO 2025-06-13 01:44:16,285 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 01:44:16.324  INFO 2025-06-13 01:44:16,324 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 01:44:16.624  INFO 2025-06-13 01:44:16,624 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 01:44:17.746  INFO 2025-06-13 01:44:17,746 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 01:44:17.819  INFO 2025-06-13 01:44:17,819 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 01:44:18.186  INFO 2025-06-13 01:44:18,186 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 01:44:20.101  WARN 2025-06-13 01:44:20,101 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 01:44:20.132  INFO 2025-06-13 01:44:20,132 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 01:44:20.135  INFO 2025-06-13 01:44:20,135 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 01:44:20.135  WARN 2025-06-13 01:44:20,135 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 01:44:20.374  INFO 2025-06-13 01:44:20,374 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 01:44:20.403  INFO 2025-06-13 01:44:20,403 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 01:44:20.747  INFO 2025-06-13 01:44:20,747 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 01:44:20.752  INFO 2025-06-13 01:44:20,752 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 8.154 seconds (process running for 9.067)
2025-06-13 01:44:20.755  INFO 2025-06-13 01:44:20,755 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 01:44:20.826  INFO 2025-06-13 01:44:20,826 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 01:44:21.038  INFO 2025-06-13 01:44:21,038 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 01:44:21.083  INFO 2025-06-13 01:44:21,083 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 01:44:21.115  INFO 2025-06-13 01:44:21,115 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 01:44:21.126  INFO 2025-06-13 01:44:21,126 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 01:44:21.178  INFO 2025-06-13 01:44:21,178 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 01:44:21.187  INFO 2025-06-13 01:44:21,187 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 01:44:21.187  INFO 2025-06-13 01:44:21,187 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 01:44:21.190  INFO 2025-06-13 01:44:21,190 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 01:44:51.494  INFO 2025-06-13 01:44:51,494 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 01:44:51.494  INFO 2025-06-13 01:44:51,494 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 01:44:51.495  INFO 2025-06-13 01:44:51,495 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 01:44:51.640  INFO 2025-06-13 01:44:51,640 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:44:51.640  INFO 2025-06-13 01:44:51,640 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:44:51.640  INFO 2025-06-13 01:44:51,640 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:44:51.684  INFO 2025-06-13 01:44:51,684 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:44:51.684  INFO 2025-06-13 01:44:51,684 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:44:51.684  INFO 2025-06-13 01:44:51,684 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:44:51.684  INFO 2025-06-13 01:44:51,684 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:44:51.684  INFO 2025-06-13 01:44:51,684 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 01:44:51.687  INFO 2025-06-13 01:44:51,687 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 01:44:51.688  INFO 2025-06-13 01:44:51,688 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 01:44:51.692  INFO 2025-06-13 01:44:51,692 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 01:44:51.717  INFO 2025-06-13 01:44:51,717 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:44:51.717  INFO 2025-06-13 01:44:51,717 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:44:58.798  INFO 2025-06-13 01:44:58,798 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:44:58.932  INFO 2025-06-13 01:44:58,932 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:44:59.967  INFO 2025-06-13 01:44:59,967 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:45:00.853  INFO 2025-06-13 01:45:00,853 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:45:09.348  INFO 2025-06-13 01:45:09,348 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:45:09.386 ERROR 2025-06-13 01:45:09,386 --- [nio-8080-exec-8] r.c.exceptions.GlobalExceptionHandler    : Runtime exception occurred
java.lang.NullPointerException: Cannot invoke "ru.cemeterysystem.models.User.getId()" because "requester" is null
	at ru.cemeterysystem.services.FamilyTreeAccessService.requestAccess(FamilyTreeAccessService.java:124)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeAccessService$$SpringCGLIB$$0.requestAccess(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeAccessController.requestAccess(FamilyTreeAccessController.java:70)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 01:46:02.882  INFO 2025-06-13 01:46:02,882 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 01:46:02.903  INFO 2025-06-13 01:46:02,903 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 01:46:02.910  INFO 2025-06-13 01:46:02,910 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 01:52:33.064  INFO 2025-06-13 01:52:33,064 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 19796 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 01:52:33.069  INFO 2025-06-13 01:52:33,069 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 01:52:34.829  INFO 2025-06-13 01:52:34,829 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 01:52:35.080  INFO 2025-06-13 01:52:35,080 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 224 ms. Found 10 JPA repository interfaces.
2025-06-13 01:52:37.322  INFO 2025-06-13 01:52:37,322 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 01:52:37.361  INFO 2025-06-13 01:52:37,361 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 01:52:37.361  INFO 2025-06-13 01:52:37,361 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 01:52:37.502  INFO 2025-06-13 01:52:37,502 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 01:52:37.503  INFO 2025-06-13 01:52:37,503 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4317 ms
2025-06-13 01:52:37.587  INFO 2025-06-13 01:52:37,587 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 01:52:38.011  INFO 2025-06-13 01:52:38,011 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 01:52:38.015  INFO 2025-06-13 01:52:38,015 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 01:52:38.034  INFO 2025-06-13 01:52:38,034 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 01:52:38.214  INFO 2025-06-13 01:52:38,214 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 01:52:38.353  INFO 2025-06-13 01:52:38,353 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 01:52:38.458  INFO 2025-06-13 01:52:38,458 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 01:52:39.065  INFO 2025-06-13 01:52:39,065 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 01:52:41.514  INFO 2025-06-13 01:52:41,514 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 01:52:41.666  INFO 2025-06-13 01:52:41,666 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 01:52:42.525  INFO 2025-06-13 01:52:42,525 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 01:52:46.541  WARN 2025-06-13 01:52:46,541 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 01:52:46.590  INFO 2025-06-13 01:52:46,590 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 01:52:46.595  INFO 2025-06-13 01:52:46,595 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 01:52:46.596  WARN 2025-06-13 01:52:46,596 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 01:52:47.109  INFO 2025-06-13 01:52:47,109 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 01:52:47.186  INFO 2025-06-13 01:52:47,186 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 01:52:47.879  INFO 2025-06-13 01:52:47,879 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 01:52:47.888  INFO 2025-06-13 01:52:47,888 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 15.648 seconds (process running for 17.046)
2025-06-13 01:52:47.895  INFO 2025-06-13 01:52:47,895 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 01:52:48.020  INFO 2025-06-13 01:52:48,020 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 01:52:48.294  INFO 2025-06-13 01:52:48,294 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 01:52:48.366  INFO 2025-06-13 01:52:48,366 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 01:52:48.429  INFO 2025-06-13 01:52:48,429 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 01:52:48.446  INFO 2025-06-13 01:52:48,446 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 01:52:48.560  INFO 2025-06-13 01:52:48,560 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 01:52:48.576  INFO 2025-06-13 01:52:48,576 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 01:52:48.576  INFO 2025-06-13 01:52:48,576 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 01:52:48.579  INFO 2025-06-13 01:52:48,579 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 01:53:15.170  INFO 2025-06-13 01:53:15,170 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 01:53:15.170  INFO 2025-06-13 01:53:15,170 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 01:53:15.172  INFO 2025-06-13 01:53:15,172 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 01:53:15.329  INFO 2025-06-13 01:53:15,329 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:53:15.329  INFO 2025-06-13 01:53:15,329 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:53:15.329  INFO 2025-06-13 01:53:15,329 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:53:15.376  INFO 2025-06-13 01:53:15,376 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:53:15.376  INFO 2025-06-13 01:53:15,376 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:53:15.377  INFO 2025-06-13 01:53:15,377 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:53:15.377  INFO 2025-06-13 01:53:15,377 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:53:15.377  INFO 2025-06-13 01:53:15,377 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 01:53:15.380  INFO 2025-06-13 01:53:15,380 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 01:53:15.380  INFO 2025-06-13 01:53:15,380 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 01:53:15.384  INFO 2025-06-13 01:53:15,384 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 01:53:15.418  INFO 2025-06-13 01:53:15,418 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:53:15.419  INFO 2025-06-13 01:53:15,419 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:53:21.773  INFO 2025-06-13 01:53:21,773 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:53:21.928  INFO 2025-06-13 01:53:21,928 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:53:22.899  INFO 2025-06-13 01:53:22,899 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:53:24.006  INFO 2025-06-13 01:53:24,006 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:53:35.056  INFO 2025-06-13 01:53:35,056 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:53:35.116  INFO 2025-06-13 01:53:35,116 --- [nio-8080-exec-7] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 01:53:35.117  INFO 2025-06-13 01:53:35,117 --- [nio-8080-exec-7] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 01:54:02.477  INFO 2025-06-13 01:54:02,477 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 01:54:02.567  INFO 2025-06-13 01:54:02,567 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 01:54:02.577  INFO 2025-06-13 01:54:02,577 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 01:54:03.135  INFO 2025-06-13 01:54:03,135 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 01:54:03.217  INFO 2025-06-13 01:54:03,217 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 01:54:03.435  INFO 2025-06-13 01:54:03,435 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 01:54:03.440  INFO 2025-06-13 01:54:03,440 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:54:03.441  INFO 2025-06-13 01:54:03,441 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:54:03.441  INFO 2025-06-13 01:54:03,441 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:54:03.441  INFO 2025-06-13 01:54:03,441 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:54:03.441  INFO 2025-06-13 01:54:03,441 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 01:54:03.443  INFO 2025-06-13 01:54:03,443 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 01:54:03.443  INFO 2025-06-13 01:54:03,443 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 01:54:03.444  INFO 2025-06-13 01:54:03,444 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 01:54:03.465  INFO 2025-06-13 01:54:03,465 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 01:54:03.466  INFO 2025-06-13 01:54:03,466 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 01:54:31.845  INFO 2025-06-13 01:54:31,845 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 01:54:31.848  INFO 2025-06-13 01:54:31,848 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 01:54:31.921  INFO 2025-06-13 01:54:31,921 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 01:54:31.955  INFO 2025-06-13 01:54:31,955 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 01:54:32.078  INFO 2025-06-13 01:54:32,078 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 01:54:32.080  INFO 2025-06-13 01:54:32,080 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 01:54:38.621  INFO 2025-06-13 01:54:38,621 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 01:54:44.378  INFO 2025-06-13 01:54:44,378 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 01:54:44.400  INFO 2025-06-13 01:54:44,400 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 01:54:44.400  INFO 2025-06-13 01:54:44,400 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 01:54:47.017  INFO 2025-06-13 01:54:47,017 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 01:54:47.215  INFO 2025-06-13 01:54:47,215 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 01:55:15.265  INFO 2025-06-13 01:55:15,265 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 01:55:15.369  INFO 2025-06-13 01:55:15,369 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:55:15.370  INFO 2025-06-13 01:55:15,370 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 01:55:15.953  INFO 2025-06-13 01:55:15,953 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:55:16.122  INFO 2025-06-13 01:55:16,122 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:55:16.197  INFO 2025-06-13 01:55:16,197 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:55:16.203  INFO 2025-06-13 01:55:16,203 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 01:55:16.203  INFO 2025-06-13 01:55:16,203 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 01:55:16.203  INFO 2025-06-13 01:55:16,203 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 01:55:16.204  INFO 2025-06-13 01:55:16,204 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 01:55:16.204  INFO 2025-06-13 01:55:16,204 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 01:55:16.207  INFO 2025-06-13 01:55:16,207 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 01:55:16.208  INFO 2025-06-13 01:55:16,208 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 01:55:16.209  INFO 2025-06-13 01:55:16,209 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 01:55:16.219  INFO 2025-06-13 01:55:16,219 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:55:16.220  INFO 2025-06-13 01:55:16,220 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 01:55:17.676  INFO 2025-06-13 01:55:17,676 --- [nio-8080-exec-2] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 01:55:19.851  INFO 2025-06-13 01:55:19,851 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:55:20.001  INFO 2025-06-13 01:55:20,001 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:55:21.288  INFO 2025-06-13 01:55:21,288 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:55:23.659  INFO 2025-06-13 01:55:23,659 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:55:26.135  INFO 2025-06-13 01:55:26,135 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:55:26.155  INFO 2025-06-13 01:55:26,155 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:55:38.101  INFO 2025-06-13 01:55:38,101 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:55:39.269  INFO 2025-06-13 01:55:39,269 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:55:43.081  INFO 2025-06-13 01:55:43,081 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 01:55:43.104 ERROR 2025-06-13 01:55:43,104 --- [nio-8080-exec-2] r.c.exceptions.GlobalExceptionHandler    : Runtime exception occurred
java.lang.RuntimeException: You already have access to this family tree
	at ru.cemeterysystem.services.FamilyTreeAccessService.requestAccess(FamilyTreeAccessService.java:130)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeAccessService$$SpringCGLIB$$0.requestAccess(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeAccessController.requestAccess(FamilyTreeAccessController.java:85)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 02:02:18.219  INFO 2025-06-13 02:02:18,219 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 02:02:18.229  INFO 2025-06-13 02:02:18,229 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 02:02:18.261  INFO 2025-06-13 02:02:18,261 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 02:04:48.775  INFO 2025-06-13 02:04:48,775 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 3064 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 02:04:48.780  INFO 2025-06-13 02:04:48,780 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 02:04:51.261  INFO 2025-06-13 02:04:51,261 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 02:04:51.577  INFO 2025-06-13 02:04:51,577 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 290 ms. Found 10 JPA repository interfaces.
2025-06-13 02:04:54.690  INFO 2025-06-13 02:04:54,690 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 02:04:54.733  INFO 2025-06-13 02:04:54,733 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 02:04:54.734  INFO 2025-06-13 02:04:54,734 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 02:04:54.934  INFO 2025-06-13 02:04:54,934 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 02:04:54.935  INFO 2025-06-13 02:04:54,935 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 6033 ms
2025-06-13 02:04:55.098  INFO 2025-06-13 02:04:55,098 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 02:04:55.967  INFO 2025-06-13 02:04:55,967 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 02:04:55.972  INFO 2025-06-13 02:04:55,972 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 02:04:56.022  INFO 2025-06-13 02:04:56,022 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 02:04:56.496  INFO 2025-06-13 02:04:56,496 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 02:04:56.824  INFO 2025-06-13 02:04:56,824 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 02:04:57.051  INFO 2025-06-13 02:04:57,051 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 02:04:59.051  INFO 2025-06-13 02:04:59,051 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 02:05:04.578  INFO 2025-06-13 02:05:04,578 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 02:05:04.751  INFO 2025-06-13 02:05:04,751 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 02:05:06.115  INFO 2025-06-13 02:05:06,115 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 02:05:12.133  WARN 2025-06-13 02:05:12,133 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 02:05:12.199  INFO 2025-06-13 02:05:12,199 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 02:05:12.203  INFO 2025-06-13 02:05:12,203 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 02:05:12.204  WARN 2025-06-13 02:05:12,204 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 02:05:12.680  INFO 2025-06-13 02:05:12,680 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 02:05:12.736  INFO 2025-06-13 02:05:12,736 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 02:05:13.846  INFO 2025-06-13 02:05:13,846 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 02:05:13.868  INFO 2025-06-13 02:05:13,868 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 26.078 seconds (process running for 28.036)
2025-06-13 02:05:13.877  INFO 2025-06-13 02:05:13,877 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 02:05:14.298  INFO 2025-06-13 02:05:14,298 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 02:05:14.666  INFO 2025-06-13 02:05:14,666 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 02:05:14.741  INFO 2025-06-13 02:05:14,741 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 02:05:14.806  INFO 2025-06-13 02:05:14,806 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 02:05:14.821  INFO 2025-06-13 02:05:14,821 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 02:05:14.898  INFO 2025-06-13 02:05:14,898 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 02:05:14.913  INFO 2025-06-13 02:05:14,913 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 02:05:14.913  INFO 2025-06-13 02:05:14,913 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 02:05:14.947  INFO 2025-06-13 02:05:14,947 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 02:10:30.669  INFO 2025-06-13 02:10:30,669 --- [nio-8080-exec-4] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 02:10:30.669  INFO 2025-06-13 02:10:30,669 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 02:10:30.671  INFO 2025-06-13 02:10:30,671 --- [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 02:10:30.778  INFO 2025-06-13 02:10:30,778 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:10:30.778  INFO 2025-06-13 02:10:30,778 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:10:30.778  INFO 2025-06-13 02:10:30,778 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:10:30.807  INFO 2025-06-13 02:10:30,807 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:10:30.808  INFO 2025-06-13 02:10:30,808 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:10:30.808  INFO 2025-06-13 02:10:30,808 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:10:30.808  INFO 2025-06-13 02:10:30,808 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:10:30.808  INFO 2025-06-13 02:10:30,808 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:10:30.810  INFO 2025-06-13 02:10:30,810 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:10:30.811  INFO 2025-06-13 02:10:30,811 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:10:30.814  INFO 2025-06-13 02:10:30,814 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:10:30.834  INFO 2025-06-13 02:10:30,834 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:10:30.834  INFO 2025-06-13 02:10:30,834 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:10:58.318  INFO 2025-06-13 02:10:58,318 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:10:58.403  INFO 2025-06-13 02:10:58,403 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:10:58.464  INFO 2025-06-13 02:10:58,464 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:10:58.555  INFO 2025-06-13 02:10:58,555 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:11:23.695  INFO 2025-06-13 02:11:23,695 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 02:11:23.697  INFO 2025-06-13 02:11:23,697 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 02:11:23.699  INFO 2025-06-13 02:11:23,699 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 02:11:25.607  INFO 2025-06-13 02:11:25,607 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 24600 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 02:11:25.609  INFO 2025-06-13 02:11:25,609 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 02:11:26.229  INFO 2025-06-13 02:11:26,229 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 02:11:26.289  INFO 2025-06-13 02:11:26,289 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 10 JPA repository interfaces.
2025-06-13 02:11:26.828  INFO 2025-06-13 02:11:26,828 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 02:11:26.839  INFO 2025-06-13 02:11:26,839 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 02:11:26.839  INFO 2025-06-13 02:11:26,839 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 02:11:26.887  INFO 2025-06-13 02:11:26,887 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 02:11:26.887  INFO 2025-06-13 02:11:26,887 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1244 ms
2025-06-13 02:11:26.920  INFO 2025-06-13 02:11:26,920 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 02:11:27.059  INFO 2025-06-13 02:11:27,059 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 02:11:27.060  INFO 2025-06-13 02:11:27,060 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 02:11:27.069  INFO 2025-06-13 02:11:27,069 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 02:11:27.160  INFO 2025-06-13 02:11:27,160 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 02:11:27.206  INFO 2025-06-13 02:11:27,206 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 02:11:27.231  INFO 2025-06-13 02:11:27,231 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 02:11:27.455  INFO 2025-06-13 02:11:27,455 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 02:11:28.448  INFO 2025-06-13 02:11:28,448 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 02:11:28.512  INFO 2025-06-13 02:11:28,512 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 02:11:28.835  INFO 2025-06-13 02:11:28,835 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 02:11:30.646  WARN 2025-06-13 02:11:30,646 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 02:11:30.677  INFO 2025-06-13 02:11:30,677 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 02:11:30.679  INFO 2025-06-13 02:11:30,679 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 02:11:30.680  WARN 2025-06-13 02:11:30,680 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 02:11:30.903  INFO 2025-06-13 02:11:30,903 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 02:11:30.927  INFO 2025-06-13 02:11:30,927 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 02:11:31.321  INFO 2025-06-13 02:11:31,321 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 02:11:31.329  INFO 2025-06-13 02:11:31,329 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 6.03 seconds (process running for 6.661)
2025-06-13 02:11:31.334  INFO 2025-06-13 02:11:31,334 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 02:11:31.422  INFO 2025-06-13 02:11:31,422 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 02:11:31.424  INFO 2025-06-13 02:11:31,424 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 02:11:31.647  INFO 2025-06-13 02:11:31,647 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 02:11:31.653  INFO 2025-06-13 02:11:31,653 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 02:11:31.687  INFO 2025-06-13 02:11:31,687 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 02:11:31.699  INFO 2025-06-13 02:11:31,699 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 02:11:31.746  INFO 2025-06-13 02:11:31,746 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 02:11:31.755  INFO 2025-06-13 02:11:31,755 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 02:11:31.755  INFO 2025-06-13 02:11:31,755 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 02:12:09.180  INFO 2025-06-13 02:12:09,180 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 02:12:09.180  INFO 2025-06-13 02:12:09,180 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 02:12:09.181  INFO 2025-06-13 02:12:09,181 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 02:12:09.334  INFO 2025-06-13 02:12:09,334 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:12:09.609  INFO 2025-06-13 02:12:09,609 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:12:09.648  INFO 2025-06-13 02:12:09,648 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:12:10.698  INFO 2025-06-13 02:12:10,698 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:12:11.333  INFO 2025-06-13 02:12:11,333 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:12:11.372  INFO 2025-06-13 02:12:11,372 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:13:32.901  INFO 2025-06-13 02:13:32,901 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:13:47.826  INFO 2025-06-13 02:13:47,826 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:13:47.859  INFO 2025-06-13 02:13:47,859 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:13:47.891  INFO 2025-06-13 02:13:47,891 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:13:47.892  INFO 2025-06-13 02:13:47,892 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:14:32.000  INFO 2025-06-13 02:14:32,000 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:14:32.734  INFO 2025-06-13 02:14:32,734 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:14:32.758  INFO 2025-06-13 02:14:32,758 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:14:41.634  INFO 2025-06-13 02:14:41,634 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:14:41.638  INFO 2025-06-13 02:14:41,638 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:14:41.639  INFO 2025-06-13 02:14:41,639 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:14:41.639  INFO 2025-06-13 02:14:41,639 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:14:41.639  INFO 2025-06-13 02:14:41,639 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:14:41.639  INFO 2025-06-13 02:14:41,639 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:14:41.641  INFO 2025-06-13 02:14:41,641 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:14:41.641  INFO 2025-06-13 02:14:41,641 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:14:41.644  INFO 2025-06-13 02:14:41,644 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:14:41.658  INFO 2025-06-13 02:14:41,658 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:14:41.658  INFO 2025-06-13 02:14:41,658 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:14:41.767  INFO 2025-06-13 02:14:41,767 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:14:41.769  INFO 2025-06-13 02:14:41,769 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:14:41.769  INFO 2025-06-13 02:14:41,769 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:14:41.769  INFO 2025-06-13 02:14:41,769 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:14:41.769  INFO 2025-06-13 02:14:41,769 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:14:41.769  INFO 2025-06-13 02:14:41,769 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:14:41.771  INFO 2025-06-13 02:14:41,771 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:14:41.771  INFO 2025-06-13 02:14:41,771 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:14:41.771  INFO 2025-06-13 02:14:41,771 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:14:41.775  INFO 2025-06-13 02:14:41,775 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:14:41.775  INFO 2025-06-13 02:14:41,775 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:15:35.562  INFO 2025-06-13 02:15:35,562 --- [nio-8080-exec-8] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 02:15:36.541  INFO 2025-06-13 02:15:36,541 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:15:36.544  INFO 2025-06-13 02:15:36,544 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:15:36.544  INFO 2025-06-13 02:15:36,544 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:15:36.544  INFO 2025-06-13 02:15:36,544 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:15:36.544  INFO 2025-06-13 02:15:36,544 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:15:36.544  INFO 2025-06-13 02:15:36,544 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:15:36.545  INFO 2025-06-13 02:15:36,545 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:15:36.546  INFO 2025-06-13 02:15:36,546 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:15:36.546  INFO 2025-06-13 02:15:36,546 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:15:36.550  INFO 2025-06-13 02:15:36,550 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:15:36.550  INFO 2025-06-13 02:15:36,550 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:15:37.603  INFO 2025-06-13 02:15:37,603 --- [nio-8080-exec-2] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 02:15:39.295  INFO 2025-06-13 02:15:39,295 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:15:39.295  INFO 2025-06-13 02:15:39,295 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:15:39.367  INFO 2025-06-13 02:15:39,367 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:15:39.368  INFO 2025-06-13 02:15:39,368 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:15:39.443  INFO 2025-06-13 02:15:39,443 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:15:39.501  INFO 2025-06-13 02:15:39,501 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:15:41.335  INFO 2025-06-13 02:15:41,335 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:15:42.067  INFO 2025-06-13 02:15:42,067 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:15:42.100  INFO 2025-06-13 02:15:42,100 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:16:12.398  INFO 2025-06-13 02:16:12,398 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 02:16:12.483  INFO 2025-06-13 02:16:12,483 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:16:12.490  INFO 2025-06-13 02:16:12,490 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 02:16:12.858  INFO 2025-06-13 02:16:12,858 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:16:12.939  INFO 2025-06-13 02:16:12,939 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:16:12.942  INFO 2025-06-13 02:16:12,942 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:16:12.943  INFO 2025-06-13 02:16:12,943 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:16:12.943  INFO 2025-06-13 02:16:12,943 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:16:12.943  INFO 2025-06-13 02:16:12,943 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:16:12.943  INFO 2025-06-13 02:16:12,943 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 02:16:12.945  INFO 2025-06-13 02:16:12,945 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 02:16:12.945  INFO 2025-06-13 02:16:12,945 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 02:16:12.946  INFO 2025-06-13 02:16:12,946 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 02:16:12.956  INFO 2025-06-13 02:16:12,956 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 02:16:12.956  INFO 2025-06-13 02:16:12,956 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 02:16:12.998  INFO 2025-06-13 02:16:12,998 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:16:16.004  INFO 2025-06-13 02:16:16,004 --- [nio-8080-exec-5] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 02:17:18.247  INFO 2025-06-13 02:17:18,247 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:17:18.251  INFO 2025-06-13 02:17:18,251 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:17:18.251  INFO 2025-06-13 02:17:18,251 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:17:18.251  INFO 2025-06-13 02:17:18,251 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:17:18.251  INFO 2025-06-13 02:17:18,251 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:17:18.251  INFO 2025-06-13 02:17:18,251 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 02:17:18.253  INFO 2025-06-13 02:17:18,253 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 02:17:18.253  INFO 2025-06-13 02:17:18,253 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 02:17:18.254  INFO 2025-06-13 02:17:18,254 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 02:17:18.262  INFO 2025-06-13 02:17:18,262 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 02:17:18.262  INFO 2025-06-13 02:17:18,262 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 02:17:18.778  INFO 2025-06-13 02:17:18,778 --- [nio-8080-exec-6] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 02:17:20.940  INFO 2025-06-13 02:17:20,940 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:17:21.012  INFO 2025-06-13 02:17:21,012 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:17:21.079  INFO 2025-06-13 02:17:21,079 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:17:21.152  INFO 2025-06-13 02:17:21,152 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:17:21.552  INFO 2025-06-13 02:17:21,552 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:17:22.183  INFO 2025-06-13 02:17:22,183 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:17:22.233  INFO 2025-06-13 02:17:22,233 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:17:23.213  INFO 2025-06-13 02:17:23,213 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:17:33.208  INFO 2025-06-13 02:17:33,208 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 02:17:33.283  INFO 2025-06-13 02:17:33,283 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:33.284  INFO 2025-06-13 02:17:33,284 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 02:17:33.588  INFO 2025-06-13 02:17:33,588 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:33.638  INFO 2025-06-13 02:17:33,638 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:33.642  INFO 2025-06-13 02:17:33,642 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:17:33.642  INFO 2025-06-13 02:17:33,642 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:17:33.642  INFO 2025-06-13 02:17:33,642 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:17:33.642  INFO 2025-06-13 02:17:33,642 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:17:33.642  INFO 2025-06-13 02:17:33,642 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:17:33.643  INFO 2025-06-13 02:17:33,643 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:17:33.643  INFO 2025-06-13 02:17:33,643 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:17:33.644  INFO 2025-06-13 02:17:33,644 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:17:33.648  INFO 2025-06-13 02:17:33,648 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:17:33.648  INFO 2025-06-13 02:17:33,648 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:17:33.671  INFO 2025-06-13 02:17:33,671 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:35.435  INFO 2025-06-13 02:17:35,435 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:35.469  INFO 2025-06-13 02:17:35,469 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:35.579  INFO 2025-06-13 02:17:35,579 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:35.612  INFO 2025-06-13 02:17:35,612 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:36.280  INFO 2025-06-13 02:17:36,280 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:37.599  INFO 2025-06-13 02:17:37,599 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:37.625  INFO 2025-06-13 02:17:37,625 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:38.256  INFO 2025-06-13 02:17:38,256 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:39.841  INFO 2025-06-13 02:17:39,841 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:39.870  INFO 2025-06-13 02:17:39,870 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:39.940  INFO 2025-06-13 02:17:39,940 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:39.946  INFO 2025-06-13 02:17:39,946 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:41.545  INFO 2025-06-13 02:17:41,545 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:42.813  INFO 2025-06-13 02:17:42,813 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:42.836  INFO 2025-06-13 02:17:42,836 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:17:43.814  INFO 2025-06-13 02:17:43,814 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:18:20.027  INFO 2025-06-13 02:18:20,027 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:18:20.032  INFO 2025-06-13 02:18:20,032 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:18:20.123  INFO 2025-06-13 02:18:20,123 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:18:20.129  INFO 2025-06-13 02:18:20,129 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:18:21.182  INFO 2025-06-13 02:18:21,182 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:18:24.625  INFO 2025-06-13 02:18:24,625 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:18:24.666  INFO 2025-06-13 02:18:24,666 --- [io-8080-exec-10] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 02:18:24.666  INFO 2025-06-13 02:18:24,666 --- [io-8080-exec-10] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 02:19:23.746  INFO 2025-06-13 02:19:23,746 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 02:19:23.822  INFO 2025-06-13 02:19:23,822 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:23.823  INFO 2025-06-13 02:19:23,823 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 02:19:24.168  INFO 2025-06-13 02:19:24,168 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:24.206  INFO 2025-06-13 02:19:24,206 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:24.206  INFO 2025-06-13 02:19:24,206 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:24.210  INFO 2025-06-13 02:19:24,210 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:19:24.210  INFO 2025-06-13 02:19:24,210 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:19:24.210  INFO 2025-06-13 02:19:24,210 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:19:24.210  INFO 2025-06-13 02:19:24,210 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:19:24.210  INFO 2025-06-13 02:19:24,210 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 02:19:24.212  INFO 2025-06-13 02:19:24,212 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 02:19:24.212  INFO 2025-06-13 02:19:24,212 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 02:19:24.213  INFO 2025-06-13 02:19:24,213 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 02:19:24.222  INFO 2025-06-13 02:19:24,222 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 02:19:24.222  INFO 2025-06-13 02:19:24,222 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 02:19:26.955  INFO 2025-06-13 02:19:26,955 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:26.994  INFO 2025-06-13 02:19:26,994 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:27.099  INFO 2025-06-13 02:19:27,099 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:27.129  INFO 2025-06-13 02:19:27,129 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:27.717  INFO 2025-06-13 02:19:27,717 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:27.720  INFO 2025-06-13 02:19:27,720 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:27.768  INFO 2025-06-13 02:19:27,768 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:27.772  INFO 2025-06-13 02:19:27,772 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:27.871  INFO 2025-06-13 02:19:27,871 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:27.875  INFO 2025-06-13 02:19:27,875 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:29.117  INFO 2025-06-13 02:19:29,117 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:32.747  INFO 2025-06-13 02:19:32,747 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:32.762  INFO 2025-06-13 02:19:32,762 --- [nio-8080-exec-2] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 02:19:32.762  INFO 2025-06-13 02:19:32,762 --- [nio-8080-exec-2] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 02:19:35.638  INFO 2025-06-13 02:19:35,638 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:35.644  INFO 2025-06-13 02:19:35,644 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:35.804  INFO 2025-06-13 02:19:35,804 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:35.804  INFO 2025-06-13 02:19:35,804 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:49.357  INFO 2025-06-13 02:19:49,357 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:19:49.533  INFO 2025-06-13 02:19:49,533 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:20:05.068  INFO 2025-06-13 02:20:05,068 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 02:20:05.142  INFO 2025-06-13 02:20:05,142 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:05.143  INFO 2025-06-13 02:20:05,143 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 02:20:05.437  INFO 2025-06-13 02:20:05,437 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:05.553  INFO 2025-06-13 02:20:05,553 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:05.555  INFO 2025-06-13 02:20:05,555 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:05.557  INFO 2025-06-13 02:20:05,557 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:20:05.557  INFO 2025-06-13 02:20:05,557 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:20:05.557  INFO 2025-06-13 02:20:05,557 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:20:05.557  INFO 2025-06-13 02:20:05,557 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:20:05.557  INFO 2025-06-13 02:20:05,557 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:20:05.558  INFO 2025-06-13 02:20:05,558 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:20:05.558  INFO 2025-06-13 02:20:05,558 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:20:05.559  INFO 2025-06-13 02:20:05,559 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:20:05.566  INFO 2025-06-13 02:20:05,566 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:20:05.566  INFO 2025-06-13 02:20:05,566 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:20:07.301  INFO 2025-06-13 02:20:07,301 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:07.335  INFO 2025-06-13 02:20:07,335 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:07.448  INFO 2025-06-13 02:20:07,448 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:07.469  INFO 2025-06-13 02:20:07,469 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:08.264  INFO 2025-06-13 02:20:08,264 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:08.880  INFO 2025-06-13 02:20:08,880 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:08.904  INFO 2025-06-13 02:20:08,904 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:09.449  INFO 2025-06-13 02:20:09,449 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:11.284  INFO 2025-06-13 02:20:11,284 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:11.297  INFO 2025-06-13 02:20:11,297 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:11.341  INFO 2025-06-13 02:20:11,341 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:20:11.344  INFO 2025-06-13 02:20:11,344 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:26:24.452  INFO 2025-06-13 02:26:24,452 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 02:26:24.456  INFO 2025-06-13 02:26:24,456 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 02:26:24.494  INFO 2025-06-13 02:26:24,494 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 02:26:34.980  INFO 2025-06-13 02:26:34,980 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 13924 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 02:26:34.982  INFO 2025-06-13 02:26:34,982 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 02:26:37.532  INFO 2025-06-13 02:26:37,532 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 02:26:37.667  INFO 2025-06-13 02:26:37,667 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 121 ms. Found 10 JPA repository interfaces.
2025-06-13 02:26:38.910  INFO 2025-06-13 02:26:38,910 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 02:26:38.932  INFO 2025-06-13 02:26:38,932 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 02:26:38.933  INFO 2025-06-13 02:26:38,933 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 02:26:39.038  INFO 2025-06-13 02:26:39,038 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 02:26:39.040  INFO 2025-06-13 02:26:39,040 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3903 ms
2025-06-13 02:26:39.100  INFO 2025-06-13 02:26:39,100 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 02:26:39.346  INFO 2025-06-13 02:26:39,346 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 02:26:39.352  INFO 2025-06-13 02:26:39,352 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 02:26:39.384  INFO 2025-06-13 02:26:39,384 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 02:26:39.664  INFO 2025-06-13 02:26:39,664 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 02:26:39.803  INFO 2025-06-13 02:26:39,803 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 02:26:39.920  INFO 2025-06-13 02:26:39,920 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 02:26:40.767  INFO 2025-06-13 02:26:40,767 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 02:26:43.583  INFO 2025-06-13 02:26:43,583 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 02:26:43.757  INFO 2025-06-13 02:26:43,757 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 02:26:44.662  INFO 2025-06-13 02:26:44,662 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 02:26:49.089  WARN 2025-06-13 02:26:49,089 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 02:26:49.134  INFO 2025-06-13 02:26:49,134 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 02:26:49.138  INFO 2025-06-13 02:26:49,138 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 02:26:49.142  WARN 2025-06-13 02:26:49,142 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 02:26:49.561  INFO 2025-06-13 02:26:49,561 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 02:26:49.610  INFO 2025-06-13 02:26:49,610 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 02:26:50.318  INFO 2025-06-13 02:26:50,318 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 02:26:50.332  INFO 2025-06-13 02:26:50,332 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 16.4 seconds (process running for 17.528)
2025-06-13 02:26:50.341  INFO 2025-06-13 02:26:50,341 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 02:26:50.524  INFO 2025-06-13 02:26:50,524 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 02:26:50.532  INFO 2025-06-13 02:26:50,532 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 02:26:50.532  INFO 2025-06-13 02:26:50,532 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 02:26:50.534  INFO 2025-06-13 02:26:50,534 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-13 02:26:50.837 ERROR 2025-06-13 02:26:50,837 --- [nio-8080-exec-1] r.c.security.JwtAuthenticationFilter     : Error processing JWT token: User not found
org.springframework.security.core.userdetails.UsernameNotFoundException: User not found
	at ru.cemeterysystem.services.UserService.lambda$loadUserByUsername$0(UserService.java:82)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at ru.cemeterysystem.services.UserService.loadUserByUsername(UserService.java:82)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.UserService$$SpringCGLIB$$0.loadUserByUsername(<generated>)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 02:26:50.838 ERROR 2025-06-13 02:26:50,838 --- [nio-8080-exec-3] r.c.security.JwtAuthenticationFilter     : Error processing JWT token: User not found
org.springframework.security.core.userdetails.UsernameNotFoundException: User not found
	at ru.cemeterysystem.services.UserService.lambda$loadUserByUsername$0(UserService.java:82)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at ru.cemeterysystem.services.UserService.loadUserByUsername(UserService.java:82)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.UserService$$SpringCGLIB$$0.loadUserByUsername(<generated>)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 02:26:50.838 ERROR 2025-06-13 02:26:50,838 --- [nio-8080-exec-4] r.c.security.JwtAuthenticationFilter     : Error processing JWT token: User not found
org.springframework.security.core.userdetails.UsernameNotFoundException: User not found
	at ru.cemeterysystem.services.UserService.lambda$loadUserByUsername$0(UserService.java:82)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at ru.cemeterysystem.services.UserService.loadUserByUsername(UserService.java:82)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.UserService$$SpringCGLIB$$0.loadUserByUsername(<generated>)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 02:26:50.940  INFO 2025-06-13 02:26:50,940 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 02:26:51.022  INFO 2025-06-13 02:26:51,022 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 02:26:51.145  INFO 2025-06-13 02:26:51,145 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 02:26:51.179  INFO 2025-06-13 02:26:51,179 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 02:26:51.300  INFO 2025-06-13 02:26:51,300 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 02:26:51.320  INFO 2025-06-13 02:26:51,320 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 02:26:51.321  INFO 2025-06-13 02:26:51,321 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 02:26:51.324  INFO 2025-06-13 02:26:51,324 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 02:26:55.486  INFO 2025-06-13 02:26:55,486 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:26:55.507  INFO 2025-06-13 02:26:55,507 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:26:55.507  INFO 2025-06-13 02:26:55,507 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:26:55.508  INFO 2025-06-13 02:26:55,508 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:26:55.508  INFO 2025-06-13 02:26:55,508 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:26:55.508  INFO 2025-06-13 02:26:55,508 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:26:55.512  INFO 2025-06-13 02:26:55,512 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:26:55.512  INFO 2025-06-13 02:26:55,512 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:26:55.517  INFO 2025-06-13 02:26:55,517 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:26:55.547  INFO 2025-06-13 02:26:55,547 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:26:55.548  INFO 2025-06-13 02:26:55,548 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:26:56.719  INFO 2025-06-13 02:26:56,719 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:26:56.804  INFO 2025-06-13 02:26:56,804 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:26:56.883  INFO 2025-06-13 02:26:56,883 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:26:56.985  INFO 2025-06-13 02:26:56,985 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:26:57.802  INFO 2025-06-13 02:26:57,802 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:26:59.041  INFO 2025-06-13 02:26:59,041 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:27:06.411  INFO 2025-06-13 02:27:06,411 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:27:06.483  INFO 2025-06-13 02:27:06,483 --- [nio-8080-exec-4] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 02:27:06.483  INFO 2025-06-13 02:27:06,483 --- [nio-8080-exec-4] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 02:27:12.124  INFO 2025-06-13 02:27:12,124 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:27:12.134  INFO 2025-06-13 02:27:12,134 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:27:12.202  INFO 2025-06-13 02:27:12,202 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:27:12.209  INFO 2025-06-13 02:27:12,209 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:27:12.312  INFO 2025-06-13 02:27:12,312 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:27:12.316  INFO 2025-06-13 02:27:12,316 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:27:13.088  INFO 2025-06-13 02:27:13,088 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:27:13.272  INFO 2025-06-13 02:27:13,272 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:27:22.135  INFO 2025-06-13 02:27:22,135 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 02:27:22.223  INFO 2025-06-13 02:27:22,223 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:22.233  INFO 2025-06-13 02:27:22,233 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 02:27:22.729  INFO 2025-06-13 02:27:22,729 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:22.949  INFO 2025-06-13 02:27:22,949 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:22.955  INFO 2025-06-13 02:27:22,955 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:27:22.956  INFO 2025-06-13 02:27:22,956 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:27:22.956  INFO 2025-06-13 02:27:22,956 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:27:22.956  INFO 2025-06-13 02:27:22,956 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:27:22.956  INFO 2025-06-13 02:27:22,956 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 02:27:22.960  INFO 2025-06-13 02:27:22,960 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 02:27:22.960  INFO 2025-06-13 02:27:22,960 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 02:27:22.961  INFO 2025-06-13 02:27:22,961 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 02:27:22.976  INFO 2025-06-13 02:27:22,976 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 02:27:22.976  INFO 2025-06-13 02:27:22,976 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 02:27:23.067  INFO 2025-06-13 02:27:23,067 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:25.491  INFO 2025-06-13 02:27:25,491 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:25.500  INFO 2025-06-13 02:27:25,500 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:25.606  INFO 2025-06-13 02:27:25,606 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:25.621  INFO 2025-06-13 02:27:25,621 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:25.852  INFO 2025-06-13 02:27:25,852 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:25.894  INFO 2025-06-13 02:27:25,894 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:27.363  INFO 2025-06-13 02:27:27,363 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:27.533  INFO 2025-06-13 02:27:27,533 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:27.543  INFO 2025-06-13 02:27:27,543 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:27.657  INFO 2025-06-13 02:27:27,657 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:28.538  INFO 2025-06-13 02:27:28,538 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:30.438  INFO 2025-06-13 02:27:30,438 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:31.122  INFO 2025-06-13 02:27:31,122 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:33.185  INFO 2025-06-13 02:27:33,185 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:33.185  INFO 2025-06-13 02:27:33,185 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:33.351  INFO 2025-06-13 02:27:33,351 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:33.383  INFO 2025-06-13 02:27:33,383 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:36.053  INFO 2025-06-13 02:27:36,053 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:27:36.072  INFO 2025-06-13 02:27:36,072 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 02:27:36.072  INFO 2025-06-13 02:27:36,072 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 02:28:17.072  INFO 2025-06-13 02:28:17,072 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 02:28:17.185  INFO 2025-06-13 02:28:17,185 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:17.187  INFO 2025-06-13 02:28:17,187 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 02:28:17.937  INFO 2025-06-13 02:28:17,937 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:18.037  INFO 2025-06-13 02:28:18,037 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:18.083  INFO 2025-06-13 02:28:18,083 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:18.087  INFO 2025-06-13 02:28:18,087 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:28:18.087  INFO 2025-06-13 02:28:18,087 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:28:18.087  INFO 2025-06-13 02:28:18,087 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:28:18.087  INFO 2025-06-13 02:28:18,087 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:28:18.087  INFO 2025-06-13 02:28:18,087 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:28:18.089  INFO 2025-06-13 02:28:18,089 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:28:18.089  INFO 2025-06-13 02:28:18,089 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:28:18.090  INFO 2025-06-13 02:28:18,090 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:28:18.099  INFO 2025-06-13 02:28:18,099 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:28:18.099  INFO 2025-06-13 02:28:18,099 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:28:21.311  INFO 2025-06-13 02:28:21,311 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:21.504  INFO 2025-06-13 02:28:21,504 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:21.542  INFO 2025-06-13 02:28:21,542 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:21.719  INFO 2025-06-13 02:28:21,719 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:22.347  INFO 2025-06-13 02:28:22,347 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:22.349  INFO 2025-06-13 02:28:22,349 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:22.391  INFO 2025-06-13 02:28:22,391 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:22.439  INFO 2025-06-13 02:28:22,439 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:22.510  INFO 2025-06-13 02:28:22,510 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:22.516  INFO 2025-06-13 02:28:22,516 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:24.006  INFO 2025-06-13 02:28:24,006 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:24.009  INFO 2025-06-13 02:28:24,009 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:24.104  INFO 2025-06-13 02:28:24,104 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:24.104  INFO 2025-06-13 02:28:24,104 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:24.176  INFO 2025-06-13 02:28:24,176 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:24.277  INFO 2025-06-13 02:28:24,277 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:25.367  INFO 2025-06-13 02:28:25,367 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:27.516  INFO 2025-06-13 02:28:27,516 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:27.565  INFO 2025-06-13 02:28:27,565 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:27.697  INFO 2025-06-13 02:28:27,697 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:27.712  INFO 2025-06-13 02:28:27,712 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:32.722  INFO 2025-06-13 02:28:32,722 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:33.476  INFO 2025-06-13 02:28:33,476 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:34.706  INFO 2025-06-13 02:28:34,706 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:34.726  INFO 2025-06-13 02:28:34,726 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:34.944  INFO 2025-06-13 02:28:34,944 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:34.973  INFO 2025-06-13 02:28:34,973 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:42.536  INFO 2025-06-13 02:28:42,536 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:42.733  INFO 2025-06-13 02:28:42,733 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:42.744  INFO 2025-06-13 02:28:42,744 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:42.914  INFO 2025-06-13 02:28:42,914 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:28:42.923  INFO 2025-06-13 02:28:42,923 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:13.461  INFO 2025-06-13 02:29:13,461 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 02:29:13.467  INFO 2025-06-13 02:29:13,467 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 02:29:13.471  INFO 2025-06-13 02:29:13,471 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 02:29:17.593  INFO 2025-06-13 02:29:17,593 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 25164 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 02:29:17.597  INFO 2025-06-13 02:29:17,597 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 02:29:18.989  INFO 2025-06-13 02:29:18,989 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 02:29:19.369  INFO 2025-06-13 02:29:19,369 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 303 ms. Found 10 JPA repository interfaces.
2025-06-13 02:29:20.769  INFO 2025-06-13 02:29:20,769 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 02:29:20.787  INFO 2025-06-13 02:29:20,787 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 02:29:20.788  INFO 2025-06-13 02:29:20,788 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 02:29:20.866  INFO 2025-06-13 02:29:20,866 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 02:29:20.867  INFO 2025-06-13 02:29:20,867 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3199 ms
2025-06-13 02:29:20.919  INFO 2025-06-13 02:29:20,919 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 02:29:21.128  INFO 2025-06-13 02:29:21,128 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 02:29:21.129  INFO 2025-06-13 02:29:21,129 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 02:29:21.144  INFO 2025-06-13 02:29:21,144 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 02:29:21.269  INFO 2025-06-13 02:29:21,269 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 02:29:21.361  INFO 2025-06-13 02:29:21,361 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 02:29:21.435  INFO 2025-06-13 02:29:21,435 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 02:29:21.808  INFO 2025-06-13 02:29:21,808 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 02:29:23.687  INFO 2025-06-13 02:29:23,687 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 02:29:23.788  INFO 2025-06-13 02:29:23,788 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 02:29:24.389  INFO 2025-06-13 02:29:24,389 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 02:29:26.910  WARN 2025-06-13 02:29:26,910 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 02:29:26.950  INFO 2025-06-13 02:29:26,950 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 02:29:26.955  INFO 2025-06-13 02:29:26,955 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 02:29:26.956  WARN 2025-06-13 02:29:26,956 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 02:29:27.347  INFO 2025-06-13 02:29:27,347 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 02:29:27.392  INFO 2025-06-13 02:29:27,392 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 02:29:27.914  INFO 2025-06-13 02:29:27,914 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 02:29:27.925  INFO 2025-06-13 02:29:27,925 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 11.294 seconds (process running for 12.622)
2025-06-13 02:29:28.062  INFO 2025-06-13 02:29:28,062 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 02:29:28.063  INFO 2025-06-13 02:29:28,063 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 02:29:28.065  INFO 2025-06-13 02:29:28,065 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-13 02:29:28.136  INFO 2025-06-13 02:29:28,136 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 02:29:28.137  INFO 2025-06-13 02:29:28,137 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 02:29:28.142  INFO 2025-06-13 02:29:28,142 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 02:29:28.252 ERROR 2025-06-13 02:29:28,252 --- [nio-8080-exec-1] r.c.security.JwtAuthenticationFilter     : Error processing JWT token: User not found
org.springframework.security.core.userdetails.UsernameNotFoundException: User not found
	at ru.cemeterysystem.services.UserService.lambda$loadUserByUsername$0(UserService.java:82)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at ru.cemeterysystem.services.UserService.loadUserByUsername(UserService.java:82)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.UserService$$SpringCGLIB$$0.loadUserByUsername(<generated>)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 02:29:28.252 ERROR 2025-06-13 02:29:28,252 --- [nio-8080-exec-2] r.c.security.JwtAuthenticationFilter     : Error processing JWT token: User not found
org.springframework.security.core.userdetails.UsernameNotFoundException: User not found
	at ru.cemeterysystem.services.UserService.lambda$loadUserByUsername$0(UserService.java:82)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at ru.cemeterysystem.services.UserService.loadUserByUsername(UserService.java:82)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.UserService$$SpringCGLIB$$0.loadUserByUsername(<generated>)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 02:29:28.446  INFO 2025-06-13 02:29:28,446 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 02:29:28.459  INFO 2025-06-13 02:29:28,459 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 02:29:28.526  INFO 2025-06-13 02:29:28,526 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 02:29:28.543  INFO 2025-06-13 02:29:28,543 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 02:29:28.614  INFO 2025-06-13 02:29:28,614 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 02:29:28.629  INFO 2025-06-13 02:29:28,629 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 02:29:28.629  INFO 2025-06-13 02:29:28,629 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 02:29:29.135  INFO 2025-06-13 02:29:29,135 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:31.500  INFO 2025-06-13 02:29:31,500 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:31.543  INFO 2025-06-13 02:29:31,543 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:38.754  INFO 2025-06-13 02:29:38,754 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:40.094  INFO 2025-06-13 02:29:40,094 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:46.314  INFO 2025-06-13 02:29:46,314 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:46.374  INFO 2025-06-13 02:29:46,374 --- [nio-8080-exec-8] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 02:29:46.374  INFO 2025-06-13 02:29:46,374 --- [nio-8080-exec-8] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 02:29:49.849  INFO 2025-06-13 02:29:49,849 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:49.859  INFO 2025-06-13 02:29:49,859 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:49.919  INFO 2025-06-13 02:29:49,919 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:49.921  INFO 2025-06-13 02:29:49,921 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:51.241  INFO 2025-06-13 02:29:51,241 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:51.241  INFO 2025-06-13 02:29:51,241 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:51.309  INFO 2025-06-13 02:29:51,309 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:51.333  INFO 2025-06-13 02:29:51,333 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:51.383  INFO 2025-06-13 02:29:51,383 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:29:51.397  INFO 2025-06-13 02:29:51,397 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:01.984  INFO 2025-06-13 02:30:01,984 --- [io-8080-exec-10] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 02:30:02.066  INFO 2025-06-13 02:30:02,066 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:02.076  INFO 2025-06-13 02:30:02,076 --- [io-8080-exec-10] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 02:30:02.467  INFO 2025-06-13 02:30:02,467 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:02.601  INFO 2025-06-13 02:30:02,601 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:02.602  INFO 2025-06-13 02:30:02,602 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:02.608  INFO 2025-06-13 02:30:02,608 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:30:02.608  INFO 2025-06-13 02:30:02,608 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:30:02.608  INFO 2025-06-13 02:30:02,608 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:30:02.608  INFO 2025-06-13 02:30:02,608 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:30:02.608  INFO 2025-06-13 02:30:02,608 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 02:30:02.612  INFO 2025-06-13 02:30:02,612 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 02:30:02.612  INFO 2025-06-13 02:30:02,612 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 02:30:02.615  INFO 2025-06-13 02:30:02,615 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 02:30:02.636  INFO 2025-06-13 02:30:02,636 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 02:30:02.636  INFO 2025-06-13 02:30:02,636 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 02:30:08.008  INFO 2025-06-13 02:30:08,008 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:08.080  INFO 2025-06-13 02:30:08,080 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:08.186  INFO 2025-06-13 02:30:08,186 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:08.247  INFO 2025-06-13 02:30:08,247 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:11.349  INFO 2025-06-13 02:30:11,349 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:11.351  INFO 2025-06-13 02:30:11,351 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:11.386  INFO 2025-06-13 02:30:11,386 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:11.446  INFO 2025-06-13 02:30:11,446 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:11.514  INFO 2025-06-13 02:30:11,514 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:11.518  INFO 2025-06-13 02:30:11,518 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:14.119  INFO 2025-06-13 02:30:14,119 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:14.137  INFO 2025-06-13 02:30:14,137 --- [nio-8080-exec-4] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 02:30:14.137  INFO 2025-06-13 02:30:14,137 --- [nio-8080-exec-4] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 02:30:14.211  INFO 2025-06-13 02:30:14,211 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:30:24.720  INFO 2025-06-13 02:30:24,720 --- [nio-8080-exec-6] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 02:30:24.815  INFO 2025-06-13 02:30:24,815 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:24.816  INFO 2025-06-13 02:30:24,816 --- [nio-8080-exec-6] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 02:30:25.458  INFO 2025-06-13 02:30:25,458 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:25.520  INFO 2025-06-13 02:30:25,520 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:25.520  INFO 2025-06-13 02:30:25,520 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:25.525  INFO 2025-06-13 02:30:25,525 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:30:25.525  INFO 2025-06-13 02:30:25,525 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:30:25.525  INFO 2025-06-13 02:30:25,525 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:30:25.525  INFO 2025-06-13 02:30:25,525 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:30:25.525  INFO 2025-06-13 02:30:25,525 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:30:25.527  INFO 2025-06-13 02:30:25,527 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:30:25.527  INFO 2025-06-13 02:30:25,527 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:30:25.530  INFO 2025-06-13 02:30:25,530 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:30:25.539  INFO 2025-06-13 02:30:25,539 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:30:25.540  INFO 2025-06-13 02:30:25,540 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:30:27.334  INFO 2025-06-13 02:30:27,334 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:27.420  INFO 2025-06-13 02:30:27,420 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:27.509  INFO 2025-06-13 02:30:27,509 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:27.613  INFO 2025-06-13 02:30:27,613 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:29.321  INFO 2025-06-13 02:30:29,321 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:30.682  INFO 2025-06-13 02:30:30,682 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:30.691  INFO 2025-06-13 02:30:30,691 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:30.738  INFO 2025-06-13 02:30:30,738 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:30.741  INFO 2025-06-13 02:30:30,741 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:34.011  INFO 2025-06-13 02:30:34,011 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:34.011  INFO 2025-06-13 02:30:34,011 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:34.094  INFO 2025-06-13 02:30:34,094 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:34.102  INFO 2025-06-13 02:30:34,102 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:34.201  INFO 2025-06-13 02:30:34,201 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:34.203  INFO 2025-06-13 02:30:34,203 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:35.627  INFO 2025-06-13 02:30:35,627 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:35.809  INFO 2025-06-13 02:30:35,809 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:30:36.798  INFO 2025-06-13 02:30:36,798 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:33:48.124  INFO 2025-06-13 02:33:48,124 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:33:48.301  INFO 2025-06-13 02:33:48,301 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:33:48.306  INFO 2025-06-13 02:33:48,306 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:33:48.306  INFO 2025-06-13 02:33:48,306 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:33:48.306  INFO 2025-06-13 02:33:48,306 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:33:48.306  INFO 2025-06-13 02:33:48,306 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:33:48.306  INFO 2025-06-13 02:33:48,306 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:33:48.308  INFO 2025-06-13 02:33:48,308 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:33:48.309  INFO 2025-06-13 02:33:48,309 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:33:48.309  INFO 2025-06-13 02:33:48,309 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:33:48.310  INFO 2025-06-13 02:33:48,310 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:33:48.315  INFO 2025-06-13 02:33:48,315 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:33:48.315  INFO 2025-06-13 02:33:48,315 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:33:52.499  INFO 2025-06-13 02:33:52,499 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:33:52.649  INFO 2025-06-13 02:33:52,649 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:33:52.654  INFO 2025-06-13 02:33:52,654 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:33:52.740  INFO 2025-06-13 02:33:52,740 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:33:55.500  INFO 2025-06-13 02:33:55,500 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:09.517  INFO 2025-06-13 02:34:09,517 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:09.537  INFO 2025-06-13 02:34:09,537 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:09.596  INFO 2025-06-13 02:34:09,596 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:09.601  INFO 2025-06-13 02:34:09,601 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:11.995  INFO 2025-06-13 02:34:11,995 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:12.999  INFO 2025-06-13 02:34:12,999 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:13.090  INFO 2025-06-13 02:34:13,090 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:14.532  INFO 2025-06-13 02:34:14,532 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:14.537  INFO 2025-06-13 02:34:14,537 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:14.601  INFO 2025-06-13 02:34:14,601 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:14.603  INFO 2025-06-13 02:34:14,603 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:14.684  INFO 2025-06-13 02:34:14,684 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:14.688  INFO 2025-06-13 02:34:14,688 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:15.459  INFO 2025-06-13 02:34:15,459 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:15.460  INFO 2025-06-13 02:34:15,460 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:15.595  INFO 2025-06-13 02:34:15,595 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:15.596  INFO 2025-06-13 02:34:15,596 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:15.667  INFO 2025-06-13 02:34:15,667 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:15.754  INFO 2025-06-13 02:34:15,754 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:16.430  INFO 2025-06-13 02:34:16,430 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:24.750  INFO 2025-06-13 02:34:24,750 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:24.778  INFO 2025-06-13 02:34:24,778 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:24.871  INFO 2025-06-13 02:34:24,871 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:24.875  INFO 2025-06-13 02:34:24,875 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:33.314  INFO 2025-06-13 02:34:33,314 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:33.314  INFO 2025-06-13 02:34:33,314 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:33.457  INFO 2025-06-13 02:34:33,457 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:33.500  INFO 2025-06-13 02:34:33,500 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:33.575  INFO 2025-06-13 02:34:33,575 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:33.697  INFO 2025-06-13 02:34:33,697 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:34:34.901  INFO 2025-06-13 02:34:34,901 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:37:08.728  INFO 2025-06-13 02:37:08,728 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 02:37:08.776  INFO 2025-06-13 02:37:08,776 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 02:37:08.805  INFO 2025-06-13 02:37:08,805 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 02:38:34.237  INFO 2025-06-13 02:38:34,237 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 21048 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 02:38:34.238  INFO 2025-06-13 02:38:34,238 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 02:38:34.941  INFO 2025-06-13 02:38:34,941 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 02:38:35.009  INFO 2025-06-13 02:38:35,009 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 62 ms. Found 10 JPA repository interfaces.
2025-06-13 02:38:35.649  INFO 2025-06-13 02:38:35,649 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 02:38:35.662  INFO 2025-06-13 02:38:35,662 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 02:38:35.662  INFO 2025-06-13 02:38:35,662 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 02:38:35.717  INFO 2025-06-13 02:38:35,717 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 02:38:35.717  INFO 2025-06-13 02:38:35,717 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1431 ms
2025-06-13 02:38:35.749  INFO 2025-06-13 02:38:35,749 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 02:38:35.926  INFO 2025-06-13 02:38:35,926 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 02:38:35.927  INFO 2025-06-13 02:38:35,927 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 02:38:35.937  INFO 2025-06-13 02:38:35,937 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 02:38:36.034  INFO 2025-06-13 02:38:36,034 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 02:38:36.083  INFO 2025-06-13 02:38:36,083 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 02:38:36.113  INFO 2025-06-13 02:38:36,113 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 02:38:36.382  INFO 2025-06-13 02:38:36,382 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 02:38:38.301  INFO 2025-06-13 02:38:38,301 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 02:38:38.413  INFO 2025-06-13 02:38:38,413 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 02:38:38.929  INFO 2025-06-13 02:38:38,929 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 02:38:42.824  WARN 2025-06-13 02:38:42,824 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 02:38:42.864  INFO 2025-06-13 02:38:42,864 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 02:38:42.867  INFO 2025-06-13 02:38:42,867 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 02:38:42.868  WARN 2025-06-13 02:38:42,868 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 02:38:43.183  INFO 2025-06-13 02:38:43,183 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 02:38:43.231  INFO 2025-06-13 02:38:43,231 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 02:38:43.724  INFO 2025-06-13 02:38:43,724 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 02:38:43.735  INFO 2025-06-13 02:38:43,735 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 9.898 seconds (process running for 10.531)
2025-06-13 02:38:43.739  INFO 2025-06-13 02:38:43,739 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 02:38:43.849  INFO 2025-06-13 02:38:43,849 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 02:38:44.096  INFO 2025-06-13 02:38:44,096 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 02:38:44.145  INFO 2025-06-13 02:38:44,145 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 02:38:44.184  INFO 2025-06-13 02:38:44,184 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 02:38:44.199  INFO 2025-06-13 02:38:44,199 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 02:38:44.262  INFO 2025-06-13 02:38:44,262 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 02:38:44.276  INFO 2025-06-13 02:38:44,276 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 02:38:44.276  INFO 2025-06-13 02:38:44,276 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 02:38:44.278  INFO 2025-06-13 02:38:44,278 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 02:38:57.493  INFO 2025-06-13 02:38:57,493 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 02:38:57.493  INFO 2025-06-13 02:38:57,493 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 02:38:57.494  INFO 2025-06-13 02:38:57,494 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 02:38:57.661  INFO 2025-06-13 02:38:57,661 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:38:57.661  INFO 2025-06-13 02:38:57,661 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:38:57.662  INFO 2025-06-13 02:38:57,662 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:38:57.706  INFO 2025-06-13 02:38:57,706 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:38:57.707  INFO 2025-06-13 02:38:57,707 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:38:57.707  INFO 2025-06-13 02:38:57,707 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:38:57.707  INFO 2025-06-13 02:38:57,707 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:38:57.707  INFO 2025-06-13 02:38:57,707 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:38:57.712  INFO 2025-06-13 02:38:57,712 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:38:57.712  INFO 2025-06-13 02:38:57,712 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:38:57.720  INFO 2025-06-13 02:38:57,720 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:38:57.747  INFO 2025-06-13 02:38:57,747 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:38:57.748  INFO 2025-06-13 02:38:57,748 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:39:05.331  INFO 2025-06-13 02:39:05,331 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:39:05.427  INFO 2025-06-13 02:39:05,427 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:39:05.483  INFO 2025-06-13 02:39:05,483 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:39:05.568  INFO 2025-06-13 02:39:05,568 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:39:06.453  INFO 2025-06-13 02:39:06,453 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:39:07.344  INFO 2025-06-13 02:39:07,344 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:39:13.510  INFO 2025-06-13 02:39:13,510 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:39:13.571  INFO 2025-06-13 02:39:13,571 --- [io-8080-exec-10] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 02:39:13.572  INFO 2025-06-13 02:39:13,572 --- [io-8080-exec-10] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 02:39:17.455  INFO 2025-06-13 02:39:17,455 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:39:25.001  INFO 2025-06-13 02:39:25,001 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 02:39:25.122  INFO 2025-06-13 02:39:25,122 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:25.142  INFO 2025-06-13 02:39:25,142 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 02:39:25.717  INFO 2025-06-13 02:39:25,717 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:25.863  INFO 2025-06-13 02:39:25,863 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:25.875  INFO 2025-06-13 02:39:25,875 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:25.883  INFO 2025-06-13 02:39:25,883 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:39:25.883  INFO 2025-06-13 02:39:25,883 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:39:25.883  INFO 2025-06-13 02:39:25,883 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:39:25.883  INFO 2025-06-13 02:39:25,883 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:39:25.883  INFO 2025-06-13 02:39:25,883 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 02:39:25.885  INFO 2025-06-13 02:39:25,885 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 02:39:25.886  INFO 2025-06-13 02:39:25,886 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 02:39:25.886  INFO 2025-06-13 02:39:25,886 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 02:39:25.902  INFO 2025-06-13 02:39:25,902 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 02:39:25.902  INFO 2025-06-13 02:39:25,902 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 02:39:30.636  INFO 2025-06-13 02:39:30,636 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:30.646  INFO 2025-06-13 02:39:30,646 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:30.731  INFO 2025-06-13 02:39:30,731 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:30.741  INFO 2025-06-13 02:39:30,741 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:30.899  INFO 2025-06-13 02:39:30,899 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:30.907  INFO 2025-06-13 02:39:30,907 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:34.299  INFO 2025-06-13 02:39:34,299 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:34.317  INFO 2025-06-13 02:39:34,317 --- [nio-8080-exec-1] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 02:39:34.318  INFO 2025-06-13 02:39:34,318 --- [nio-8080-exec-1] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 02:39:34.441  INFO 2025-06-13 02:39:34,441 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:35.808  INFO 2025-06-13 02:39:35,808 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:35.922  INFO 2025-06-13 02:39:35,922 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:36.025  INFO 2025-06-13 02:39:36,025 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:36.121  INFO 2025-06-13 02:39:36,121 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:39.587  INFO 2025-06-13 02:39:39,587 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:39:54.886  INFO 2025-06-13 02:39:54,886 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 02:39:54.973  INFO 2025-06-13 02:39:54,973 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:39:54.974  INFO 2025-06-13 02:39:54,974 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 02:39:55.527  INFO 2025-06-13 02:39:55,527 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:39:55.616  INFO 2025-06-13 02:39:55,616 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:39:55.631  INFO 2025-06-13 02:39:55,631 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:39:55.634  INFO 2025-06-13 02:39:55,634 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:39:55.635  INFO 2025-06-13 02:39:55,635 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:39:55.635  INFO 2025-06-13 02:39:55,635 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:39:55.635  INFO 2025-06-13 02:39:55,635 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:39:55.635  INFO 2025-06-13 02:39:55,635 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:39:55.637  INFO 2025-06-13 02:39:55,637 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:39:55.638  INFO 2025-06-13 02:39:55,638 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:39:55.638  INFO 2025-06-13 02:39:55,638 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:39:55.646  INFO 2025-06-13 02:39:55,646 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:39:55.647  INFO 2025-06-13 02:39:55,647 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:40:00.314  INFO 2025-06-13 02:40:00,314 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:00.425  INFO 2025-06-13 02:40:00,425 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:00.488  INFO 2025-06-13 02:40:00,488 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:00.591  INFO 2025-06-13 02:40:00,591 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:03.551  INFO 2025-06-13 02:40:03,551 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:04.649  INFO 2025-06-13 02:40:04,649 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:04.721  INFO 2025-06-13 02:40:04,721 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:05.930  INFO 2025-06-13 02:40:05,930 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:09.713  INFO 2025-06-13 02:40:09,713 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:11.625  INFO 2025-06-13 02:40:11,625 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:11.661  INFO 2025-06-13 02:40:11,661 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:11.740  INFO 2025-06-13 02:40:11,740 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:11.740  INFO 2025-06-13 02:40:11,740 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:13.063  INFO 2025-06-13 02:40:13,063 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:13.179  INFO 2025-06-13 02:40:13,179 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:13.267  INFO 2025-06-13 02:40:13,267 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:13.551  INFO 2025-06-13 02:40:13,551 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:13.555  INFO 2025-06-13 02:40:13,555 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:40:13.555  INFO 2025-06-13 02:40:13,555 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:40:13.556  INFO 2025-06-13 02:40:13,556 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:40:13.556  INFO 2025-06-13 02:40:13,556 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:40:13.556  INFO 2025-06-13 02:40:13,556 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:40:13.558  INFO 2025-06-13 02:40:13,558 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:40:13.559  INFO 2025-06-13 02:40:13,559 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 02:40:13.559  INFO 2025-06-13 02:40:13,559 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 02:40:13.567  INFO 2025-06-13 02:40:13,567 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:40:13.567  INFO 2025-06-13 02:40:13,567 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:40:15.546  INFO 2025-06-13 02:40:15,546 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:15.585  INFO 2025-06-13 02:40:15,585 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:15.665  INFO 2025-06-13 02:40:15,665 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:15.669  INFO 2025-06-13 02:40:15,669 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:16.506  INFO 2025-06-13 02:40:16,506 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:18.099  INFO 2025-06-13 02:40:18,099 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:18.181  INFO 2025-06-13 02:40:18,181 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:18.255  INFO 2025-06-13 02:40:18,255 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:18.433  INFO 2025-06-13 02:40:18,433 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:18.438  INFO 2025-06-13 02:40:18,438 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:40:18.438  INFO 2025-06-13 02:40:18,438 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:40:18.438  INFO 2025-06-13 02:40:18,438 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:40:18.438  INFO 2025-06-13 02:40:18,438 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:40:18.438  INFO 2025-06-13 02:40:18,438 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:40:18.439  INFO 2025-06-13 02:40:18,439 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:40:18.440  INFO 2025-06-13 02:40:18,440 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 02:40:18.440  INFO 2025-06-13 02:40:18,440 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 02:40:18.447  INFO 2025-06-13 02:40:18,447 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:40:18.447  INFO 2025-06-13 02:40:18,447 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:40:32.189  INFO 2025-06-13 02:40:32,189 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:32.198  INFO 2025-06-13 02:40:32,198 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:32.294  INFO 2025-06-13 02:40:32,294 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:32.300  INFO 2025-06-13 02:40:32,300 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:33.692  INFO 2025-06-13 02:40:33,692 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:33.695  INFO 2025-06-13 02:40:33,695 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:40:33.695  INFO 2025-06-13 02:40:33,695 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:40:33.695  INFO 2025-06-13 02:40:33,695 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:40:33.695  INFO 2025-06-13 02:40:33,695 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:40:33.695  INFO 2025-06-13 02:40:33,695 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:40:33.696  INFO 2025-06-13 02:40:33,696 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:40:33.696  INFO 2025-06-13 02:40:33,696 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:40:33.697  INFO 2025-06-13 02:40:33,697 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:40:33.700  INFO 2025-06-13 02:40:33,700 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:40:33.701  INFO 2025-06-13 02:40:33,701 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:40:33.969  INFO 2025-06-13 02:40:33,969 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:33.973  INFO 2025-06-13 02:40:33,973 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:40:33.973  INFO 2025-06-13 02:40:33,973 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:40:33.973  INFO 2025-06-13 02:40:33,973 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:40:33.973  INFO 2025-06-13 02:40:33,973 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:40:33.973  INFO 2025-06-13 02:40:33,973 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:40:33.976  INFO 2025-06-13 02:40:33,976 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:40:33.977  INFO 2025-06-13 02:40:33,977 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:40:33.978  INFO 2025-06-13 02:40:33,978 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:40:33.989  INFO 2025-06-13 02:40:33,989 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:40:33.989  INFO 2025-06-13 02:40:33,989 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:40:46.276  INFO 2025-06-13 02:40:46,276 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:46.283  INFO 2025-06-13 02:40:46,283 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:40:46.283  INFO 2025-06-13 02:40:46,283 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:40:46.284  INFO 2025-06-13 02:40:46,284 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:40:46.284  INFO 2025-06-13 02:40:46,284 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:40:46.285  INFO 2025-06-13 02:40:46,285 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:40:46.712  INFO 2025-06-13 02:40:46,712 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:46.716  INFO 2025-06-13 02:40:46,716 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:40:46.717  INFO 2025-06-13 02:40:46,717 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:40:46.717  INFO 2025-06-13 02:40:46,717 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:40:46.717  INFO 2025-06-13 02:40:46,717 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:40:46.718  INFO 2025-06-13 02:40:46,718 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:40:46.719  INFO 2025-06-13 02:40:46,719 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:40:46.720  INFO 2025-06-13 02:40:46,720 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:40:46.720  INFO 2025-06-13 02:40:46,720 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:40:46.728  INFO 2025-06-13 02:40:46,728 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 02:40:46.728  INFO 2025-06-13 02:40:46,728 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 02:40:46.735  INFO 2025-06-13 02:40:46,735 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:48.971  INFO 2025-06-13 02:40:48,971 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:49.018  INFO 2025-06-13 02:40:49,018 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:49.086  INFO 2025-06-13 02:40:49,086 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:49.169  INFO 2025-06-13 02:40:49,169 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:49.177  INFO 2025-06-13 02:40:49,177 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:49.315  INFO 2025-06-13 02:40:49,315 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:50.433  INFO 2025-06-13 02:40:50,433 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:50.518  INFO 2025-06-13 02:40:50,518 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:50.623  INFO 2025-06-13 02:40:50,623 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:50.843  INFO 2025-06-13 02:40:50,843 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:50.847  INFO 2025-06-13 02:40:50,847 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:40:50.847  INFO 2025-06-13 02:40:50,847 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:40:50.848  INFO 2025-06-13 02:40:50,848 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:40:50.848  INFO 2025-06-13 02:40:50,848 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:40:50.848  INFO 2025-06-13 02:40:50,848 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:40:50.851  INFO 2025-06-13 02:40:50,851 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:40:50.851  INFO 2025-06-13 02:40:50,851 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 02:40:50.851  INFO 2025-06-13 02:40:50,851 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 02:40:50.863  INFO 2025-06-13 02:40:50,863 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 02:40:50.864  INFO 2025-06-13 02:40:50,864 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 02:40:53.223  INFO 2025-06-13 02:40:53,223 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:40:53.350  INFO 2025-06-13 02:40:53,350 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:11.223  INFO 2025-06-13 02:41:11,223 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:11.231  INFO 2025-06-13 02:41:11,231 --- [nio-8080-exec-7] r.c.controllers.FamilyTreeController     : === START addRelation ===
2025-06-13 02:41:11.231  INFO 2025-06-13 02:41:11,231 --- [nio-8080-exec-7] r.c.controllers.FamilyTreeController     : Family Tree ID: 1
2025-06-13 02:41:11.232  INFO 2025-06-13 02:41:11,232 --- [nio-8080-exec-7] r.c.controllers.FamilyTreeController     : Incoming MemorialRelationDTO: MemorialRelationDTO(id=0, familyTreeId=null, sourceMemorial=TreeMemorialDTO(id=9, fio=sfddsdfs sdfdsfdfs dsdsdf, birthDate=2025-06-03, deathDate=null, biography=, photoUrl=null, isPublic=false), targetMemorial=TreeMemorialDTO(id=2, fio=Иванова Анна Сергеевна, birthDate=1990-07-30, deathDate=2023-02-10, biography=null, photoUrl=null, isPublic=false), relationType=CHILD)
2025-06-13 02:41:11.235  INFO 2025-06-13 02:41:11,235 --- [nio-8080-exec-7] r.c.controllers.FamilyTreeController     : RelationDTO.sourceMemorial: TreeMemorialDTO(id=9, fio=sfddsdfs sdfdsfdfs dsdsdf, birthDate=2025-06-03, deathDate=null, biography=, photoUrl=null, isPublic=false)
2025-06-13 02:41:11.235  INFO 2025-06-13 02:41:11,235 --- [nio-8080-exec-7] r.c.controllers.FamilyTreeController     : RelationDTO.targetMemorial: TreeMemorialDTO(id=2, fio=Иванова Анна Сергеевна, birthDate=1990-07-30, deathDate=2023-02-10, biography=null, photoUrl=null, isPublic=false)
2025-06-13 02:41:11.235  INFO 2025-06-13 02:41:11,235 --- [nio-8080-exec-7] r.c.controllers.FamilyTreeController     : RelationDTO.relationType: CHILD
2025-06-13 02:41:11.237  INFO 2025-06-13 02:41:11,237 --- [nio-8080-exec-7] r.c.controllers.FamilyTreeController     : Current user: 2222
2025-06-13 02:41:11.237  INFO 2025-06-13 02:41:11,237 --- [nio-8080-exec-7] r.c.controllers.FamilyTreeController     : Calling familyTreeService.addRelation...
2025-06-13 02:41:11.237  INFO 2025-06-13 02:41:11,237 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : === FamilyTreeService.addRelation START ===
2025-06-13 02:41:11.237  INFO 2025-06-13 02:41:11,237 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : TreeId: 1
2025-06-13 02:41:11.237  INFO 2025-06-13 02:41:11,237 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : User: 2222
2025-06-13 02:41:11.237  INFO 2025-06-13 02:41:11,237 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : RelationDTO: MemorialRelationDTO(id=0, familyTreeId=null, sourceMemorial=TreeMemorialDTO(id=9, fio=sfddsdfs sdfdsfdfs dsdsdf, birthDate=2025-06-03, deathDate=null, biography=, photoUrl=null, isPublic=false), targetMemorial=TreeMemorialDTO(id=2, fio=Иванова Анна Сергеевна, birthDate=1990-07-30, deathDate=2023-02-10, biography=null, photoUrl=null, isPublic=false), relationType=CHILD)
2025-06-13 02:41:11.237  INFO 2025-06-13 02:41:11,237 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Finding family tree with ID: 1
2025-06-13 02:41:11.238  INFO 2025-06-13 02:41:11,238 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Found family tree: Семья Ивановых
2025-06-13 02:41:11.238  INFO 2025-06-13 02:41:11,238 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Checking access permissions...
2025-06-13 02:41:11.242  INFO 2025-06-13 02:41:11,242 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Add relation access check - isOwner: false, hasExplicitAccess: true
2025-06-13 02:41:11.242  INFO 2025-06-13 02:41:11,242 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Access granted
2025-06-13 02:41:11.242  INFO 2025-06-13 02:41:11,242 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Finding source memorial...
2025-06-13 02:41:11.242  INFO 2025-06-13 02:41:11,242 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Source memorial ID: 9
2025-06-13 02:41:11.243  INFO 2025-06-13 02:41:11,243 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Found source memorial: sfddsdfs sdfdsfdfs dsdsdf
2025-06-13 02:41:11.243  INFO 2025-06-13 02:41:11,243 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Finding target memorial...
2025-06-13 02:41:11.243  INFO 2025-06-13 02:41:11,243 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Target memorial ID: 2
2025-06-13 02:41:11.244  INFO 2025-06-13 02:41:11,244 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Found target memorial: Иванова Анна Сергеевна
2025-06-13 02:41:11.244  INFO 2025-06-13 02:41:11,244 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Converting relation type: CHILD
2025-06-13 02:41:11.244  INFO 2025-06-13 02:41:11,244 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Converted to: CHILD
2025-06-13 02:41:11.244  INFO 2025-06-13 02:41:11,244 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Checking for existing relation...
2025-06-13 02:41:11.248  INFO 2025-06-13 02:41:11,248 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Creating new MemorialRelation...
2025-06-13 02:41:11.249  INFO 2025-06-13 02:41:11,249 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Saving MemorialRelation...
2025-06-13 02:41:11.250  INFO 2025-06-13 02:41:11,250 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Successfully saved relation with ID: 14
2025-06-13 02:41:11.250  INFO 2025-06-13 02:41:11,250 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : === FamilyTreeService.addRelation SUCCESS ===
2025-06-13 02:41:11.252  INFO 2025-06-13 02:41:11,252 --- [nio-8080-exec-7] r.c.controllers.FamilyTreeController     : Successfully created relation with ID: 14
2025-06-13 02:41:11.252  INFO 2025-06-13 02:41:11,252 --- [nio-8080-exec-7] r.c.controllers.FamilyTreeController     : Returning response with relation: [FAILED toString()]
2025-06-13 02:41:11.310  INFO 2025-06-13 02:41:11,310 --- [nio-8080-exec-7] r.c.controllers.FamilyTreeController     : === END addRelation SUCCESS ===
2025-06-13 02:41:11.426  INFO 2025-06-13 02:41:11,426 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:14.345  INFO 2025-06-13 02:41:14,345 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:14.368  INFO 2025-06-13 02:41:14,368 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:14.478  INFO 2025-06-13 02:41:14,478 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:14.478  INFO 2025-06-13 02:41:14,478 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:15.646  INFO 2025-06-13 02:41:15,646 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:19.201  INFO 2025-06-13 02:41:19,201 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:52.722  INFO 2025-06-13 02:41:52,722 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:52.736  INFO 2025-06-13 02:41:52,736 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:53.000  INFO 2025-06-13 02:41:53,000 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:53.000  INFO 2025-06-13 02:41:53,000 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:55.770  INFO 2025-06-13 02:41:55,770 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:55.853  INFO 2025-06-13 02:41:55,853 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:55.945  INFO 2025-06-13 02:41:55,945 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:56.116  INFO 2025-06-13 02:41:56,116 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:41:56.120  INFO 2025-06-13 02:41:56,120 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:41:56.120  INFO 2025-06-13 02:41:56,120 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:41:56.120  INFO 2025-06-13 02:41:56,120 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:41:56.120  INFO 2025-06-13 02:41:56,120 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:41:56.120  INFO 2025-06-13 02:41:56,120 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:41:56.122  INFO 2025-06-13 02:41:56,122 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:41:56.122  INFO 2025-06-13 02:41:56,122 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 02:41:56.122  INFO 2025-06-13 02:41:56,122 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 02:41:56.136  INFO 2025-06-13 02:41:56,136 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 02:41:56.136  INFO 2025-06-13 02:41:56,136 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 02:42:14.742  INFO 2025-06-13 02:42:14,742 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:42:14.773  INFO 2025-06-13 02:42:14,773 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:42:14.930  INFO 2025-06-13 02:42:14,930 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:42:14.935  INFO 2025-06-13 02:42:14,935 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:42:15.996  INFO 2025-06-13 02:42:15,996 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:42:17.237  INFO 2025-06-13 02:42:17,237 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:42:28.805  INFO 2025-06-13 02:42:28,805 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:42:28.896  INFO 2025-06-13 02:42:28,896 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:42:28.922  INFO 2025-06-13 02:42:28,922 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:42:29.118  INFO 2025-06-13 02:42:29,118 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:42:30.867  INFO 2025-06-13 02:42:30,867 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:42:30.992  INFO 2025-06-13 02:42:30,992 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:42:31.029  INFO 2025-06-13 02:42:31,029 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:42:31.255  INFO 2025-06-13 02:42:31,255 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:42:31.256  INFO 2025-06-13 02:42:31,256 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:42:31.256  INFO 2025-06-13 02:42:31,256 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:42:31.256  INFO 2025-06-13 02:42:31,256 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:42:31.256  INFO 2025-06-13 02:42:31,256 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:42:31.256  INFO 2025-06-13 02:42:31,256 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:42:31.257  INFO 2025-06-13 02:42:31,257 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:42:31.257  INFO 2025-06-13 02:42:31,257 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 02:42:31.257  INFO 2025-06-13 02:42:31,257 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 02:42:31.261  INFO 2025-06-13 02:42:31,261 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 02:42:31.261  INFO 2025-06-13 02:42:31,261 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 02:43:23.489  INFO 2025-06-13 02:43:23,489 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:43:23.493  INFO 2025-06-13 02:43:23,493 --- [io-8080-exec-10] r.c.controllers.FamilyTreeController     : === START addRelation ===
2025-06-13 02:43:23.493  INFO 2025-06-13 02:43:23,493 --- [io-8080-exec-10] r.c.controllers.FamilyTreeController     : Family Tree ID: 1
2025-06-13 02:43:23.493  INFO 2025-06-13 02:43:23,493 --- [io-8080-exec-10] r.c.controllers.FamilyTreeController     : Incoming MemorialRelationDTO: MemorialRelationDTO(id=0, familyTreeId=null, sourceMemorial=TreeMemorialDTO(id=9, fio=sfddsdfs sdfdsfdfs dsdsdf, birthDate=2025-06-03, deathDate=null, biography=, photoUrl=null, isPublic=false), targetMemorial=TreeMemorialDTO(id=5, fio=Сергеева Мария Петровна, birthDate=1955-08-12, deathDate=2022-03-05, biography=null, photoUrl=null, isPublic=false), relationType=CHILD)
2025-06-13 02:43:23.493  INFO 2025-06-13 02:43:23,493 --- [io-8080-exec-10] r.c.controllers.FamilyTreeController     : RelationDTO.sourceMemorial: TreeMemorialDTO(id=9, fio=sfddsdfs sdfdsfdfs dsdsdf, birthDate=2025-06-03, deathDate=null, biography=, photoUrl=null, isPublic=false)
2025-06-13 02:43:23.493  INFO 2025-06-13 02:43:23,493 --- [io-8080-exec-10] r.c.controllers.FamilyTreeController     : RelationDTO.targetMemorial: TreeMemorialDTO(id=5, fio=Сергеева Мария Петровна, birthDate=1955-08-12, deathDate=2022-03-05, biography=null, photoUrl=null, isPublic=false)
2025-06-13 02:43:23.493  INFO 2025-06-13 02:43:23,493 --- [io-8080-exec-10] r.c.controllers.FamilyTreeController     : RelationDTO.relationType: CHILD
2025-06-13 02:43:23.494  INFO 2025-06-13 02:43:23,494 --- [io-8080-exec-10] r.c.controllers.FamilyTreeController     : Current user: 2222
2025-06-13 02:43:23.494  INFO 2025-06-13 02:43:23,494 --- [io-8080-exec-10] r.c.controllers.FamilyTreeController     : Calling familyTreeService.addRelation...
2025-06-13 02:43:23.494  INFO 2025-06-13 02:43:23,494 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : === FamilyTreeService.addRelation START ===
2025-06-13 02:43:23.494  INFO 2025-06-13 02:43:23,494 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : TreeId: 1
2025-06-13 02:43:23.494  INFO 2025-06-13 02:43:23,494 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : User: 2222
2025-06-13 02:43:23.494  INFO 2025-06-13 02:43:23,494 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : RelationDTO: MemorialRelationDTO(id=0, familyTreeId=null, sourceMemorial=TreeMemorialDTO(id=9, fio=sfddsdfs sdfdsfdfs dsdsdf, birthDate=2025-06-03, deathDate=null, biography=, photoUrl=null, isPublic=false), targetMemorial=TreeMemorialDTO(id=5, fio=Сергеева Мария Петровна, birthDate=1955-08-12, deathDate=2022-03-05, biography=null, photoUrl=null, isPublic=false), relationType=CHILD)
2025-06-13 02:43:23.494  INFO 2025-06-13 02:43:23,494 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Finding family tree with ID: 1
2025-06-13 02:43:23.495  INFO 2025-06-13 02:43:23,495 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Found family tree: Семья Ивановых
2025-06-13 02:43:23.496  INFO 2025-06-13 02:43:23,496 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Checking access permissions...
2025-06-13 02:43:23.501  INFO 2025-06-13 02:43:23,501 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Add relation access check - isOwner: false, hasExplicitAccess: true
2025-06-13 02:43:23.501  INFO 2025-06-13 02:43:23,501 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Access granted
2025-06-13 02:43:23.501  INFO 2025-06-13 02:43:23,501 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Finding source memorial...
2025-06-13 02:43:23.501  INFO 2025-06-13 02:43:23,501 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Source memorial ID: 9
2025-06-13 02:43:23.502  INFO 2025-06-13 02:43:23,502 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Found source memorial: sfddsdfs sdfdsfdfs dsdsdf
2025-06-13 02:43:23.502  INFO 2025-06-13 02:43:23,502 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Finding target memorial...
2025-06-13 02:43:23.502  INFO 2025-06-13 02:43:23,502 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Target memorial ID: 5
2025-06-13 02:43:23.503  INFO 2025-06-13 02:43:23,503 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Found target memorial: Сергеева Мария Петровна
2025-06-13 02:43:23.503  INFO 2025-06-13 02:43:23,503 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Converting relation type: CHILD
2025-06-13 02:43:23.503  INFO 2025-06-13 02:43:23,503 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Converted to: CHILD
2025-06-13 02:43:23.503  INFO 2025-06-13 02:43:23,503 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Checking for existing relation...
2025-06-13 02:43:23.506  INFO 2025-06-13 02:43:23,506 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Creating new MemorialRelation...
2025-06-13 02:43:23.506  INFO 2025-06-13 02:43:23,506 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Saving MemorialRelation...
2025-06-13 02:43:23.508  INFO 2025-06-13 02:43:23,508 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : Successfully saved relation with ID: 15
2025-06-13 02:43:23.508  INFO 2025-06-13 02:43:23,508 --- [io-8080-exec-10] r.c.services.FamilyTreeService           : === FamilyTreeService.addRelation SUCCESS ===
2025-06-13 02:43:23.512  INFO 2025-06-13 02:43:23,512 --- [io-8080-exec-10] r.c.controllers.FamilyTreeController     : Successfully created relation with ID: 15
2025-06-13 02:43:23.512  INFO 2025-06-13 02:43:23,512 --- [io-8080-exec-10] r.c.controllers.FamilyTreeController     : Returning response with relation: [FAILED toString()]
2025-06-13 02:43:23.550  INFO 2025-06-13 02:43:23,550 --- [io-8080-exec-10] r.c.controllers.FamilyTreeController     : === END addRelation SUCCESS ===
2025-06-13 02:43:23.661  INFO 2025-06-13 02:43:23,661 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:43:26.847  INFO 2025-06-13 02:43:26,847 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:43:26.875  INFO 2025-06-13 02:43:26,875 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:43:26.956  INFO 2025-06-13 02:43:26,956 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:43:26.966  INFO 2025-06-13 02:43:26,966 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:43:28.152  INFO 2025-06-13 02:43:28,152 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:43:29.392  INFO 2025-06-13 02:43:29,392 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:43:39.714  INFO 2025-06-13 02:43:39,714 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:43:39.734  INFO 2025-06-13 02:43:39,734 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:43:39.786  INFO 2025-06-13 02:43:39,786 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:43:39.786  INFO 2025-06-13 02:43:39,786 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:44:10.875  INFO 2025-06-13 02:44:10,875 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:44:12.388  INFO 2025-06-13 02:44:12,388 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:44:12.455  INFO 2025-06-13 02:44:12,455 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:44:12.507  INFO 2025-06-13 02:44:12,507 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:44:12.659  INFO 2025-06-13 02:44:12,659 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:44:12.661  INFO 2025-06-13 02:44:12,661 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:44:12.661  INFO 2025-06-13 02:44:12,661 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:44:12.661  INFO 2025-06-13 02:44:12,661 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:44:12.661  INFO 2025-06-13 02:44:12,661 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:44:12.661  INFO 2025-06-13 02:44:12,661 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:44:12.662  INFO 2025-06-13 02:44:12,662 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:44:12.662  INFO 2025-06-13 02:44:12,662 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 02:44:12.663  INFO 2025-06-13 02:44:12,663 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 02:44:12.667  INFO 2025-06-13 02:44:12,667 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 02:44:12.667  INFO 2025-06-13 02:44:12,667 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 02:44:30.807  INFO 2025-06-13 02:44:30,807 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:44:30.834  INFO 2025-06-13 02:44:30,834 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:44:30.883  INFO 2025-06-13 02:44:30,883 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:44:30.884  INFO 2025-06-13 02:44:30,884 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:48:26.075  INFO 2025-06-13 02:48:26,075 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 02:48:26.077  INFO 2025-06-13 02:48:26,077 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 02:48:26.081  INFO 2025-06-13 02:48:26,081 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 02:55:10.069  INFO 2025-06-13 02:55:10,069 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 1600 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 02:55:10.071  INFO 2025-06-13 02:55:10,071 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 02:55:10.742  INFO 2025-06-13 02:55:10,742 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 02:55:10.824  INFO 2025-06-13 02:55:10,824 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76 ms. Found 12 JPA repository interfaces.
2025-06-13 02:55:11.493  INFO 2025-06-13 02:55:11,493 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 02:55:11.506  INFO 2025-06-13 02:55:11,506 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 02:55:11.508  INFO 2025-06-13 02:55:11,508 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 02:55:11.610  INFO 2025-06-13 02:55:11,610 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 02:55:11.611  INFO 2025-06-13 02:55:11,611 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1500 ms
2025-06-13 02:55:11.640  INFO 2025-06-13 02:55:11,640 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 02:55:11.785  INFO 2025-06-13 02:55:11,785 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 02:55:11.789  INFO 2025-06-13 02:55:11,789 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 02:55:11.802  INFO 2025-06-13 02:55:11,802 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 02:55:11.925  INFO 2025-06-13 02:55:11,925 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 02:55:11.988  INFO 2025-06-13 02:55:11,988 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 02:55:12.035  INFO 2025-06-13 02:55:12,035 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 02:55:12.268  INFO 2025-06-13 02:55:12,268 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 02:55:13.416  INFO 2025-06-13 02:55:13,416 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 02:55:13.489  INFO 2025-06-13 02:55:13,489 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 02:55:13.842  INFO 2025-06-13 02:55:13,842 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 02:55:16.066  WARN 2025-06-13 02:55:16,066 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 02:55:16.100  INFO 2025-06-13 02:55:16,100 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 02:55:16.103  INFO 2025-06-13 02:55:16,103 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 02:55:16.104  WARN 2025-06-13 02:55:16,104 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 02:55:16.391  INFO 2025-06-13 02:55:16,391 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 02:55:16.427  INFO 2025-06-13 02:55:16,427 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 02:55:16.898  INFO 2025-06-13 02:55:16,898 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 02:55:16.906  INFO 2025-06-13 02:55:16,906 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 7.319 seconds (process running for 8.097)
2025-06-13 02:55:17.058  INFO 2025-06-13 02:55:17,058 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 02:55:17.058  INFO 2025-06-13 02:55:17,058 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 02:55:17.061  INFO 2025-06-13 02:55:17,061 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 02:55:17.286  INFO 2025-06-13 02:55:17,286 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 02:55:17.294  INFO 2025-06-13 02:55:17,294 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 02:55:17.339  INFO 2025-06-13 02:55:17,339 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 02:55:17.353  INFO 2025-06-13 02:55:17,353 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 02:55:17.409  INFO 2025-06-13 02:55:17,409 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 02:55:17.420  INFO 2025-06-13 02:55:17,420 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 02:55:17.420  INFO 2025-06-13 02:55:17,420 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 02:55:42.440  INFO 2025-06-13 02:55:42,440 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 02:55:42.440  INFO 2025-06-13 02:55:42,440 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 02:55:42.442  INFO 2025-06-13 02:55:42,442 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 02:55:42.626  INFO 2025-06-13 02:55:42,626 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:55:42.626  INFO 2025-06-13 02:55:42,626 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:55:42.626  INFO 2025-06-13 02:55:42,626 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:55:42.683  INFO 2025-06-13 02:55:42,683 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:55:42.684  INFO 2025-06-13 02:55:42,684 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:55:42.684  INFO 2025-06-13 02:55:42,684 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:55:42.684  INFO 2025-06-13 02:55:42,684 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:55:42.684  INFO 2025-06-13 02:55:42,684 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:55:42.691  INFO 2025-06-13 02:55:42,691 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:55:42.692  INFO 2025-06-13 02:55:42,692 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:55:42.696  INFO 2025-06-13 02:55:42,696 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:55:42.723  INFO 2025-06-13 02:55:42,723 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:55:42.724  INFO 2025-06-13 02:55:42,724 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:55:45.346  INFO 2025-06-13 02:55:45,346 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:55:45.483  INFO 2025-06-13 02:55:45,483 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:55:45.532  INFO 2025-06-13 02:55:45,532 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:55:45.611  INFO 2025-06-13 02:55:45,611 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:55:46.909  INFO 2025-06-13 02:55:46,909 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:55:47.935  INFO 2025-06-13 02:55:47,935 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:55:54.940  INFO 2025-06-13 02:55:54,940 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:55:54.995  INFO 2025-06-13 02:55:54,995 --- [io-8080-exec-10] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 02:55:54.995  INFO 2025-06-13 02:55:54,995 --- [io-8080-exec-10] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 02:56:02.879  INFO 2025-06-13 02:56:02,879 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 02:56:02.974  INFO 2025-06-13 02:56:02,974 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:56:02.985  INFO 2025-06-13 02:56:02,985 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 02:56:03.563  INFO 2025-06-13 02:56:03,563 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:56:03.798  INFO 2025-06-13 02:56:03,798 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:56:03.843  INFO 2025-06-13 02:56:03,843 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:56:03.851  INFO 2025-06-13 02:56:03,851 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:56:03.851  INFO 2025-06-13 02:56:03,851 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:03.851  INFO 2025-06-13 02:56:03,851 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:03.851  INFO 2025-06-13 02:56:03,851 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:56:03.851  INFO 2025-06-13 02:56:03,851 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 02:56:03.853  INFO 2025-06-13 02:56:03,853 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 02:56:03.853  INFO 2025-06-13 02:56:03,853 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 02:56:03.854  INFO 2025-06-13 02:56:03,854 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 02:56:03.869  INFO 2025-06-13 02:56:03,869 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 02:56:03.870  INFO 2025-06-13 02:56:03,870 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 02:56:05.233  INFO 2025-06-13 02:56:05,233 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:56:05.267  INFO 2025-06-13 02:56:05,267 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:56:05.328  INFO 2025-06-13 02:56:05,328 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:56:05.343  INFO 2025-06-13 02:56:05,343 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:56:05.499  INFO 2025-06-13 02:56:05,499 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:56:05.507  INFO 2025-06-13 02:56:05,507 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:56:08.122  INFO 2025-06-13 02:56:08,122 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:56:08.142  INFO 2025-06-13 02:56:08,142 --- [nio-8080-exec-1] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 02:56:08.143  INFO 2025-06-13 02:56:08,143 --- [nio-8080-exec-1] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 02:56:08.319  INFO 2025-06-13 02:56:08,319 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 02:56:15.013  INFO 2025-06-13 02:56:15,013 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 02:56:15.112  INFO 2025-06-13 02:56:15,112 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:15.113  INFO 2025-06-13 02:56:15,113 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 02:56:15.616  INFO 2025-06-13 02:56:15,616 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:15.738  INFO 2025-06-13 02:56:15,738 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:15.832  INFO 2025-06-13 02:56:15,832 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:15.836  INFO 2025-06-13 02:56:15,836 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:56:15.837  INFO 2025-06-13 02:56:15,837 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:15.837  INFO 2025-06-13 02:56:15,837 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:15.837  INFO 2025-06-13 02:56:15,837 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:56:15.837  INFO 2025-06-13 02:56:15,837 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:56:15.841  INFO 2025-06-13 02:56:15,841 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:56:15.841  INFO 2025-06-13 02:56:15,841 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:56:15.841  INFO 2025-06-13 02:56:15,841 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:56:15.848  INFO 2025-06-13 02:56:15,848 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:56:15.848  INFO 2025-06-13 02:56:15,848 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:56:18.052  INFO 2025-06-13 02:56:18,052 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:18.109  INFO 2025-06-13 02:56:18,109 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:18.213  INFO 2025-06-13 02:56:18,213 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:18.294  INFO 2025-06-13 02:56:18,294 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:19.339  INFO 2025-06-13 02:56:19,339 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:21.164  INFO 2025-06-13 02:56:21,164 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:21.285  INFO 2025-06-13 02:56:21,285 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:21.421  INFO 2025-06-13 02:56:21,421 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:21.663  INFO 2025-06-13 02:56:21,663 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:21.667  INFO 2025-06-13 02:56:21,667 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:56:21.668  INFO 2025-06-13 02:56:21,668 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:21.668  INFO 2025-06-13 02:56:21,668 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:21.668  INFO 2025-06-13 02:56:21,668 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:56:21.668  INFO 2025-06-13 02:56:21,668 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:56:21.669  INFO 2025-06-13 02:56:21,669 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:56:21.670  INFO 2025-06-13 02:56:21,670 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 02:56:21.670  INFO 2025-06-13 02:56:21,670 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 02:56:21.679  INFO 2025-06-13 02:56:21,679 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:56:21.679  INFO 2025-06-13 02:56:21,679 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:56:35.310  INFO 2025-06-13 02:56:35,310 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:35.338  INFO 2025-06-13 02:56:35,338 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:35.426  INFO 2025-06-13 02:56:35,426 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:35.431  INFO 2025-06-13 02:56:35,431 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:36.569  INFO 2025-06-13 02:56:36,569 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:36.572  INFO 2025-06-13 02:56:36,572 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:56:36.572  INFO 2025-06-13 02:56:36,572 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:36.572  INFO 2025-06-13 02:56:36,572 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:36.572  INFO 2025-06-13 02:56:36,572 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:56:36.572  INFO 2025-06-13 02:56:36,572 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:56:36.573  INFO 2025-06-13 02:56:36,573 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:56:36.573  INFO 2025-06-13 02:56:36,573 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:56:36.574  INFO 2025-06-13 02:56:36,574 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:56:36.579  INFO 2025-06-13 02:56:36,579 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:56:36.579  INFO 2025-06-13 02:56:36,579 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:56:36.734  INFO 2025-06-13 02:56:36,734 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:36.737  INFO 2025-06-13 02:56:36,737 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:56:36.737  INFO 2025-06-13 02:56:36,737 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:36.737  INFO 2025-06-13 02:56:36,737 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:36.737  INFO 2025-06-13 02:56:36,737 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:56:36.737  INFO 2025-06-13 02:56:36,737 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:56:36.739  INFO 2025-06-13 02:56:36,739 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:56:36.739  INFO 2025-06-13 02:56:36,739 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:56:36.739  INFO 2025-06-13 02:56:36,739 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:56:36.744  INFO 2025-06-13 02:56:36,744 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:56:36.744  INFO 2025-06-13 02:56:36,744 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 02:56:46.742  INFO 2025-06-13 02:56:46,742 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:46.751  INFO 2025-06-13 02:56:46,751 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:46.751  INFO 2025-06-13 02:56:46,751 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:46.751  INFO 2025-06-13 02:56:46,751 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:56:46.751  INFO 2025-06-13 02:56:46,751 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:56:46.753  INFO 2025-06-13 02:56:46,753 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:56:47.038  INFO 2025-06-13 02:56:47,038 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:47.128  INFO 2025-06-13 02:56:47,128 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:47.132  INFO 2025-06-13 02:56:47,132 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:56:47.132  INFO 2025-06-13 02:56:47,132 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:47.132  INFO 2025-06-13 02:56:47,132 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:47.132  INFO 2025-06-13 02:56:47,132 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:56:47.132  INFO 2025-06-13 02:56:47,132 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:56:47.134  INFO 2025-06-13 02:56:47,134 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:56:47.135  INFO 2025-06-13 02:56:47,135 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 02:56:47.135  INFO 2025-06-13 02:56:47,135 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 02:56:47.140  INFO 2025-06-13 02:56:47,140 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 02:56:47.140  INFO 2025-06-13 02:56:47,140 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 02:56:48.541  INFO 2025-06-13 02:56:48,541 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:48.541  INFO 2025-06-13 02:56:48,541 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:48.637  INFO 2025-06-13 02:56:48,637 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:48.640  INFO 2025-06-13 02:56:48,640 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:48.701  INFO 2025-06-13 02:56:48,701 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:48.795  INFO 2025-06-13 02:56:48,795 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:49.855  INFO 2025-06-13 02:56:49,855 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:51.453  INFO 2025-06-13 02:56:51,453 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:51.532  INFO 2025-06-13 02:56:51,532 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:51.640  INFO 2025-06-13 02:56:51,640 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:51.810  INFO 2025-06-13 02:56:51,810 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:51.813  INFO 2025-06-13 02:56:51,813 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 02:56:51.814  INFO 2025-06-13 02:56:51,814 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:51.814  INFO 2025-06-13 02:56:51,814 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 02:56:51.814  INFO 2025-06-13 02:56:51,814 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 02:56:51.814  INFO 2025-06-13 02:56:51,814 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 02:56:51.815  INFO 2025-06-13 02:56:51,815 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 02:56:51.815  INFO 2025-06-13 02:56:51,815 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 02:56:51.816  INFO 2025-06-13 02:56:51,816 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 02:56:51.822  INFO 2025-06-13 02:56:51,822 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 02:56:51.822  INFO 2025-06-13 02:56:51,822 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 02:56:58.399  INFO 2025-06-13 02:56:58,399 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:56:58.437  INFO 2025-06-13 02:56:58,437 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:14.448  INFO 2025-06-13 02:57:14,448 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:14.454  INFO 2025-06-13 02:57:14,454 --- [nio-8080-exec-5] r.c.controllers.FamilyTreeController     : === START addRelation ===
2025-06-13 02:57:14.455  INFO 2025-06-13 02:57:14,455 --- [nio-8080-exec-5] r.c.controllers.FamilyTreeController     : Family Tree ID: 1
2025-06-13 02:57:14.455  INFO 2025-06-13 02:57:14,455 --- [nio-8080-exec-5] r.c.controllers.FamilyTreeController     : Incoming MemorialRelationDTO: MemorialRelationDTO(id=0, familyTreeId=null, sourceMemorial=TreeMemorialDTO(id=9, fio=sfdsfdsfd dsfsddfs sfdsfdsfd, birthDate=2025-06-03, deathDate=null, biography=, photoUrl=null, isPublic=false), targetMemorial=TreeMemorialDTO(id=6, fio=Иванова Елена Ивановна, birthDate=2005-11-03, deathDate=2025-04-22, biography=null, photoUrl=null, isPublic=false), relationType=CHILD)
2025-06-13 02:57:14.458  INFO 2025-06-13 02:57:14,458 --- [nio-8080-exec-5] r.c.controllers.FamilyTreeController     : RelationDTO.sourceMemorial: TreeMemorialDTO(id=9, fio=sfdsfdsfd dsfsddfs sfdsfdsfd, birthDate=2025-06-03, deathDate=null, biography=, photoUrl=null, isPublic=false)
2025-06-13 02:57:14.458  INFO 2025-06-13 02:57:14,458 --- [nio-8080-exec-5] r.c.controllers.FamilyTreeController     : RelationDTO.targetMemorial: TreeMemorialDTO(id=6, fio=Иванова Елена Ивановна, birthDate=2005-11-03, deathDate=2025-04-22, biography=null, photoUrl=null, isPublic=false)
2025-06-13 02:57:14.458  INFO 2025-06-13 02:57:14,458 --- [nio-8080-exec-5] r.c.controllers.FamilyTreeController     : RelationDTO.relationType: CHILD
2025-06-13 02:57:14.460  INFO 2025-06-13 02:57:14,460 --- [nio-8080-exec-5] r.c.controllers.FamilyTreeController     : Current user: 2222
2025-06-13 02:57:14.460  INFO 2025-06-13 02:57:14,460 --- [nio-8080-exec-5] r.c.controllers.FamilyTreeController     : Calling familyTreeService.addRelation...
2025-06-13 02:57:14.461  INFO 2025-06-13 02:57:14,461 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : === FamilyTreeService.addRelation START ===
2025-06-13 02:57:14.461  INFO 2025-06-13 02:57:14,461 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : TreeId: 1
2025-06-13 02:57:14.461  INFO 2025-06-13 02:57:14,461 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : User: 2222
2025-06-13 02:57:14.461  INFO 2025-06-13 02:57:14,461 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : RelationDTO: MemorialRelationDTO(id=0, familyTreeId=null, sourceMemorial=TreeMemorialDTO(id=9, fio=sfdsfdsfd dsfsddfs sfdsfdsfd, birthDate=2025-06-03, deathDate=null, biography=, photoUrl=null, isPublic=false), targetMemorial=TreeMemorialDTO(id=6, fio=Иванова Елена Ивановна, birthDate=2005-11-03, deathDate=2025-04-22, biography=null, photoUrl=null, isPublic=false), relationType=CHILD)
2025-06-13 02:57:14.461  INFO 2025-06-13 02:57:14,461 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Finding family tree with ID: 1
2025-06-13 02:57:14.462  INFO 2025-06-13 02:57:14,462 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Found family tree: Семья Ивановых
2025-06-13 02:57:14.462  INFO 2025-06-13 02:57:14,462 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Checking access permissions...
2025-06-13 02:57:14.465  INFO 2025-06-13 02:57:14,465 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Add relation access check - isOwner: false, hasExplicitAccess: true
2025-06-13 02:57:14.465  INFO 2025-06-13 02:57:14,465 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Access granted
2025-06-13 02:57:14.465  INFO 2025-06-13 02:57:14,465 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Finding source memorial...
2025-06-13 02:57:14.465  INFO 2025-06-13 02:57:14,465 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Source memorial ID: 9
2025-06-13 02:57:14.466  INFO 2025-06-13 02:57:14,466 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Found source memorial: sfdsfdsfd dsfsddfs sfdsfdsfd
2025-06-13 02:57:14.466  INFO 2025-06-13 02:57:14,466 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Finding target memorial...
2025-06-13 02:57:14.466  INFO 2025-06-13 02:57:14,466 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Target memorial ID: 6
2025-06-13 02:57:14.466  INFO 2025-06-13 02:57:14,466 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Found target memorial: Иванова Елена Ивановна
2025-06-13 02:57:14.466  INFO 2025-06-13 02:57:14,466 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Converting relation type: CHILD
2025-06-13 02:57:14.467  INFO 2025-06-13 02:57:14,467 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Converted to: CHILD
2025-06-13 02:57:14.467  INFO 2025-06-13 02:57:14,467 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Checking for existing relation...
2025-06-13 02:57:14.469  INFO 2025-06-13 02:57:14,469 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Creating new MemorialRelation...
2025-06-13 02:57:14.469  INFO 2025-06-13 02:57:14,469 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Saving MemorialRelation...
2025-06-13 02:57:14.471  INFO 2025-06-13 02:57:14,471 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Successfully saved relation with ID: 14
2025-06-13 02:57:14.471  INFO 2025-06-13 02:57:14,471 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : === FamilyTreeService.addRelation SUCCESS ===
2025-06-13 02:57:14.473  INFO 2025-06-13 02:57:14,473 --- [nio-8080-exec-5] r.c.controllers.FamilyTreeController     : Successfully created relation with ID: 14
2025-06-13 02:57:14.473  INFO 2025-06-13 02:57:14,473 --- [nio-8080-exec-5] r.c.controllers.FamilyTreeController     : Returning response with relation: [FAILED toString()]
2025-06-13 02:57:14.522  INFO 2025-06-13 02:57:14,522 --- [nio-8080-exec-5] r.c.controllers.FamilyTreeController     : === END addRelation SUCCESS ===
2025-06-13 02:57:14.606  INFO 2025-06-13 02:57:14,606 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:17.605  INFO 2025-06-13 02:57:17,605 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:17.617  INFO 2025-06-13 02:57:17,617 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:17.683  INFO 2025-06-13 02:57:17,683 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:17.687  INFO 2025-06-13 02:57:17,687 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:19.593  INFO 2025-06-13 02:57:19,593 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:19.593  INFO 2025-06-13 02:57:19,593 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:19.643  INFO 2025-06-13 02:57:19,643 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:19.653  INFO 2025-06-13 02:57:19,653 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:19.772  INFO 2025-06-13 02:57:19,772 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:19.786  INFO 2025-06-13 02:57:19,786 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:20.869  INFO 2025-06-13 02:57:20,869 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:21.048  INFO 2025-06-13 02:57:21,048 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:22.155  INFO 2025-06-13 02:57:22,155 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:22.158  INFO 2025-06-13 02:57:22,158 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:22.225  INFO 2025-06-13 02:57:22,225 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:22.225  INFO 2025-06-13 02:57:22,225 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:22.328  INFO 2025-06-13 02:57:22,328 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:22.410  INFO 2025-06-13 02:57:22,410 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:23.157  INFO 2025-06-13 02:57:23,157 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:24.810  INFO 2025-06-13 02:57:24,810 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:32.174  INFO 2025-06-13 02:57:32,174 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:32.214  INFO 2025-06-13 02:57:32,214 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:32.321  INFO 2025-06-13 02:57:32,321 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:32.321  INFO 2025-06-13 02:57:32,321 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:34.757  INFO 2025-06-13 02:57:34,757 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:38.356  INFO 2025-06-13 02:57:38,356 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:38.366  WARN 2025-06-13 02:57:38,366 --- [nio-8080-exec-3] r.c.services.FamilyTreeService           : Access denied for user 3 to update family tree 1
2025-06-13 02:57:38.367 ERROR 2025-06-13 02:57:38,367 --- [nio-8080-exec-3] r.c.services.FamilyTreeService           : Error updating family tree 1: Insufficient permissions to update family tree
java.lang.RuntimeException: Insufficient permissions to update family tree
	at ru.cemeterysystem.services.FamilyTreeService.updateFamilyTree(FamilyTreeService.java:170)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.updateFamilyTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.updateFamilyTree(FamilyTreeController.java:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 02:57:38.375 ERROR 2025-06-13 02:57:38,375 --- [nio-8080-exec-3] r.c.controllers.FamilyTreeController     : Error updating family tree 1: Failed to update family tree
java.lang.RuntimeException: Failed to update family tree
	at ru.cemeterysystem.services.FamilyTreeService.updateFamilyTree(FamilyTreeService.java:189)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.updateFamilyTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.updateFamilyTree(FamilyTreeController.java:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.RuntimeException: Insufficient permissions to update family tree
	at ru.cemeterysystem.services.FamilyTreeService.updateFamilyTree(FamilyTreeService.java:170)
	... 114 common frames omitted
2025-06-13 02:57:38.385  INFO 2025-06-13 02:57:38,385 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 02:57:38.392  WARN 2025-06-13 02:57:38,392 --- [nio-8080-exec-2] r.c.services.FamilyTreeService           : Access denied for user 3 to update family tree 1
2025-06-13 02:57:38.393 ERROR 2025-06-13 02:57:38,393 --- [nio-8080-exec-2] r.c.services.FamilyTreeService           : Error updating family tree 1: Insufficient permissions to update family tree
java.lang.RuntimeException: Insufficient permissions to update family tree
	at ru.cemeterysystem.services.FamilyTreeService.updateFamilyTree(FamilyTreeService.java:170)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.updateFamilyTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.updateFamilyTree(FamilyTreeController.java:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 02:57:38.394 ERROR 2025-06-13 02:57:38,394 --- [nio-8080-exec-2] r.c.controllers.FamilyTreeController     : Error updating family tree 1: Failed to update family tree
java.lang.RuntimeException: Failed to update family tree
	at ru.cemeterysystem.services.FamilyTreeService.updateFamilyTree(FamilyTreeService.java:189)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.updateFamilyTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.updateFamilyTree(FamilyTreeController.java:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.RuntimeException: Insufficient permissions to update family tree
	at ru.cemeterysystem.services.FamilyTreeService.updateFamilyTree(FamilyTreeService.java:170)
	... 114 common frames omitted
2025-06-13 03:00:12.555  INFO 2025-06-13 03:00:12,555 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 03:00:12.557  INFO 2025-06-13 03:00:12,557 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 03:00:12.560  INFO 2025-06-13 03:00:12,560 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 03:05:44.225  INFO 2025-06-13 03:05:44,225 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 24524 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 03:05:44.228  INFO 2025-06-13 03:05:44,228 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 03:05:45.039  INFO 2025-06-13 03:05:45,039 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 03:05:45.116  INFO 2025-06-13 03:05:45,116 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 71 ms. Found 12 JPA repository interfaces.
2025-06-13 03:05:45.857  INFO 2025-06-13 03:05:45,857 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 03:05:45.868  INFO 2025-06-13 03:05:45,868 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 03:05:45.868  INFO 2025-06-13 03:05:45,868 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 03:05:45.920  INFO 2025-06-13 03:05:45,920 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 03:05:45.920  INFO 2025-06-13 03:05:45,920 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1649 ms
2025-06-13 03:05:45.948  INFO 2025-06-13 03:05:45,948 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 03:05:46.093  INFO 2025-06-13 03:05:46,093 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 03:05:46.094  INFO 2025-06-13 03:05:46,094 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 03:05:46.103  INFO 2025-06-13 03:05:46,103 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 03:05:46.190  INFO 2025-06-13 03:05:46,190 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 03:05:46.239  INFO 2025-06-13 03:05:46,239 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 03:05:46.265  INFO 2025-06-13 03:05:46,265 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 03:05:46.498  INFO 2025-06-13 03:05:46,498 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 03:05:47.597  INFO 2025-06-13 03:05:47,597 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 03:05:47.721  INFO 2025-06-13 03:05:47,721 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 03:05:48.256  INFO 2025-06-13 03:05:48,256 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 03:05:50.154  WARN 2025-06-13 03:05:50,154 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 03:05:50.182  INFO 2025-06-13 03:05:50,182 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 03:05:50.185  INFO 2025-06-13 03:05:50,185 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 03:05:50.186  WARN 2025-06-13 03:05:50,186 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 03:05:50.448  INFO 2025-06-13 03:05:50,448 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 03:05:50.473  INFO 2025-06-13 03:05:50,473 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 03:05:50.860  INFO 2025-06-13 03:05:50,860 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 03:05:50.867  INFO 2025-06-13 03:05:50,867 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 7.045 seconds (process running for 7.716)
2025-06-13 03:05:50.872  INFO 2025-06-13 03:05:50,872 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 03:05:50.872  INFO 2025-06-13 03:05:50,872 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 03:05:50.932  INFO 2025-06-13 03:05:50,932 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 03:05:51.144  INFO 2025-06-13 03:05:51,144 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 03:05:51.150  INFO 2025-06-13 03:05:51,150 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 03:05:51.184  INFO 2025-06-13 03:05:51,184 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 03:05:51.194  INFO 2025-06-13 03:05:51,194 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 03:05:51.250  INFO 2025-06-13 03:05:51,250 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 03:05:51.259  INFO 2025-06-13 03:05:51,259 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 03:05:51.259  INFO 2025-06-13 03:05:51,259 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 03:09:31.999  INFO 2025-06-13 03:09:31,999 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 03:09:31.999  INFO 2025-06-13 03:09:31,999 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 03:09:32.000  INFO 2025-06-13 03:09:32,000 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 03:09:32.158  INFO 2025-06-13 03:09:32,158 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:09:32.158  INFO 2025-06-13 03:09:32,158 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:09:32.158  INFO 2025-06-13 03:09:32,158 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:09:32.203  INFO 2025-06-13 03:09:32,203 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:09:32.203  INFO 2025-06-13 03:09:32,203 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:09:32.204  INFO 2025-06-13 03:09:32,204 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:09:32.204  INFO 2025-06-13 03:09:32,204 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:09:32.204  INFO 2025-06-13 03:09:32,204 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:09:32.207  INFO 2025-06-13 03:09:32,207 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:09:32.207  INFO 2025-06-13 03:09:32,207 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 03:09:32.212  INFO 2025-06-13 03:09:32,212 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 03:09:32.240  INFO 2025-06-13 03:09:32,240 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:09:32.240  INFO 2025-06-13 03:09:32,240 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:09:35.574  INFO 2025-06-13 03:09:35,574 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:09:35.640  INFO 2025-06-13 03:09:35,640 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:09:35.710  INFO 2025-06-13 03:09:35,710 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:09:35.789  INFO 2025-06-13 03:09:35,789 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:09:36.687  INFO 2025-06-13 03:09:36,687 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:09:37.698  INFO 2025-06-13 03:09:37,698 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:09:43.788  INFO 2025-06-13 03:09:43,788 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:09:43.855  INFO 2025-06-13 03:09:43,855 --- [io-8080-exec-10] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 03:09:43.855  INFO 2025-06-13 03:09:43,855 --- [io-8080-exec-10] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 03:09:45.737  INFO 2025-06-13 03:09:45,737 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:09:45.786  INFO 2025-06-13 03:09:45,786 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:09:45.819  INFO 2025-06-13 03:09:45,819 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:09:45.829  INFO 2025-06-13 03:09:45,829 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:09:53.340  INFO 2025-06-13 03:09:53,340 --- [nio-8080-exec-5] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 03:09:53.437  INFO 2025-06-13 03:09:53,437 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:09:53.451  INFO 2025-06-13 03:09:53,451 --- [nio-8080-exec-5] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 03:09:53.860  INFO 2025-06-13 03:09:53,860 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:09:53.994  INFO 2025-06-13 03:09:53,994 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:09:53.998  INFO 2025-06-13 03:09:53,998 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:09:53.999  INFO 2025-06-13 03:09:53,999 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:09:53.999  INFO 2025-06-13 03:09:53,999 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:09:53.999  INFO 2025-06-13 03:09:53,999 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:09:53.999  INFO 2025-06-13 03:09:53,999 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 03:09:54.002  INFO 2025-06-13 03:09:54,002 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 03:09:54.002  INFO 2025-06-13 03:09:54,002 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 03:09:54.003  INFO 2025-06-13 03:09:54,003 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 03:09:54.016  INFO 2025-06-13 03:09:54,016 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 03:09:54.017  INFO 2025-06-13 03:09:54,017 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 03:09:54.180  INFO 2025-06-13 03:09:54,180 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:09:56.403  INFO 2025-06-13 03:09:56,403 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:09:56.416  INFO 2025-06-13 03:09:56,416 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:09:56.497  INFO 2025-06-13 03:09:56,497 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:09:56.525  INFO 2025-06-13 03:09:56,525 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:09:56.680  INFO 2025-06-13 03:09:56,680 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:09:56.696  INFO 2025-06-13 03:09:56,696 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:09:59.151  INFO 2025-06-13 03:09:59,151 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:09:59.170  INFO 2025-06-13 03:09:59,170 --- [nio-8080-exec-5] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 03:09:59.170  INFO 2025-06-13 03:09:59,170 --- [nio-8080-exec-5] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 03:09:59.282  INFO 2025-06-13 03:09:59,282 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:10:06.620  INFO 2025-06-13 03:10:06,620 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 03:10:06.705  INFO 2025-06-13 03:10:06,705 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:10:06.706  INFO 2025-06-13 03:10:06,706 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 03:10:07.284  INFO 2025-06-13 03:10:07,284 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:10:07.537  INFO 2025-06-13 03:10:07,537 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:10:07.567  INFO 2025-06-13 03:10:07,567 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:10:07.571  INFO 2025-06-13 03:10:07,571 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:10:07.571  INFO 2025-06-13 03:10:07,571 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:10:07.571  INFO 2025-06-13 03:10:07,571 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:10:07.571  INFO 2025-06-13 03:10:07,571 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:10:07.571  INFO 2025-06-13 03:10:07,571 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:10:07.574  INFO 2025-06-13 03:10:07,574 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:10:07.574  INFO 2025-06-13 03:10:07,574 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 03:10:07.575  INFO 2025-06-13 03:10:07,575 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 03:10:07.582  INFO 2025-06-13 03:10:07,582 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:10:07.582  INFO 2025-06-13 03:10:07,582 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:11:16.907  INFO 2025-06-13 03:11:16,907 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:17.014  INFO 2025-06-13 03:11:17,014 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:17.061  INFO 2025-06-13 03:11:17,061 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:17.148  INFO 2025-06-13 03:11:17,148 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:24.952  INFO 2025-06-13 03:11:24,952 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:28.159  INFO 2025-06-13 03:11:28,159 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:31.663  INFO 2025-06-13 03:11:31,663 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:31.695  INFO 2025-06-13 03:11:31,695 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:31.756  INFO 2025-06-13 03:11:31,756 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:31.757  INFO 2025-06-13 03:11:31,757 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:31.835  INFO 2025-06-13 03:11:31,835 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:31.841  INFO 2025-06-13 03:11:31,841 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:33.421  INFO 2025-06-13 03:11:33,421 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:33.600  INFO 2025-06-13 03:11:33,600 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:34.369  INFO 2025-06-13 03:11:34,369 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:35.708  INFO 2025-06-13 03:11:35,708 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:35.711  INFO 2025-06-13 03:11:35,711 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:35.854  INFO 2025-06-13 03:11:35,854 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:35.856  INFO 2025-06-13 03:11:35,856 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:35.950  INFO 2025-06-13 03:11:35,950 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:36.029  INFO 2025-06-13 03:11:36,029 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:36.613  INFO 2025-06-13 03:11:36,613 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:38.977  INFO 2025-06-13 03:11:38,977 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:39.111  INFO 2025-06-13 03:11:39,111 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:39.209  INFO 2025-06-13 03:11:39,209 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:39.457  INFO 2025-06-13 03:11:39,457 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:39.460  INFO 2025-06-13 03:11:39,460 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:11:39.460  INFO 2025-06-13 03:11:39,460 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:39.460  INFO 2025-06-13 03:11:39,460 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:39.460  INFO 2025-06-13 03:11:39,460 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:11:39.460  INFO 2025-06-13 03:11:39,460 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:11:39.462  INFO 2025-06-13 03:11:39,462 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:11:39.462  INFO 2025-06-13 03:11:39,462 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 03:11:39.463  INFO 2025-06-13 03:11:39,463 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 03:11:39.472  INFO 2025-06-13 03:11:39,472 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:11:39.472  INFO 2025-06-13 03:11:39,472 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:11:46.530  INFO 2025-06-13 03:11:46,530 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:46.533  INFO 2025-06-13 03:11:46,533 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:11:46.533  INFO 2025-06-13 03:11:46,533 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:46.533  INFO 2025-06-13 03:11:46,533 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:46.533  INFO 2025-06-13 03:11:46,533 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:11:46.533  INFO 2025-06-13 03:11:46,533 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:11:46.535  INFO 2025-06-13 03:11:46,535 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:11:46.535  INFO 2025-06-13 03:11:46,535 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 03:11:46.535  INFO 2025-06-13 03:11:46,535 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 03:11:46.540  INFO 2025-06-13 03:11:46,540 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:11:46.541  INFO 2025-06-13 03:11:46,541 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:11:46.683  INFO 2025-06-13 03:11:46,683 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:46.685  INFO 2025-06-13 03:11:46,685 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:11:46.685  INFO 2025-06-13 03:11:46,685 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:46.685  INFO 2025-06-13 03:11:46,685 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:46.685  INFO 2025-06-13 03:11:46,685 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:11:46.685  INFO 2025-06-13 03:11:46,685 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:11:46.686  INFO 2025-06-13 03:11:46,686 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:11:46.686  INFO 2025-06-13 03:11:46,686 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 03:11:46.687  INFO 2025-06-13 03:11:46,687 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 03:11:46.689  INFO 2025-06-13 03:11:46,689 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:11:46.689  INFO 2025-06-13 03:11:46,689 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:11:48.073  INFO 2025-06-13 03:11:48,073 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:48.299  INFO 2025-06-13 03:11:48,299 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:48.374  INFO 2025-06-13 03:11:48,374 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:48.490  INFO 2025-06-13 03:11:48,490 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:48.494  INFO 2025-06-13 03:11:48,494 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:11:48.495  INFO 2025-06-13 03:11:48,495 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:48.495  INFO 2025-06-13 03:11:48,495 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:48.495  INFO 2025-06-13 03:11:48,495 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:11:48.495  INFO 2025-06-13 03:11:48,495 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:11:48.498  INFO 2025-06-13 03:11:48,498 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:11:48.498  INFO 2025-06-13 03:11:48,498 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 03:11:48.498  INFO 2025-06-13 03:11:48,498 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 03:11:48.504  INFO 2025-06-13 03:11:48,504 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:11:48.504  INFO 2025-06-13 03:11:48,504 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:11:48.868  INFO 2025-06-13 03:11:48,868 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:48.870  INFO 2025-06-13 03:11:48,870 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:11:48.871  INFO 2025-06-13 03:11:48,871 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:48.871  INFO 2025-06-13 03:11:48,871 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:48.871  INFO 2025-06-13 03:11:48,871 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:11:48.871  INFO 2025-06-13 03:11:48,871 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:11:48.873  INFO 2025-06-13 03:11:48,873 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:11:48.873  INFO 2025-06-13 03:11:48,873 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 03:11:48.873  INFO 2025-06-13 03:11:48,873 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 03:11:48.876  INFO 2025-06-13 03:11:48,876 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:11:48.876  INFO 2025-06-13 03:11:48,876 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:11:49.031  INFO 2025-06-13 03:11:49,031 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:49.035  INFO 2025-06-13 03:11:49,035 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:11:49.035  INFO 2025-06-13 03:11:49,035 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:49.035  INFO 2025-06-13 03:11:49,035 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:49.035  INFO 2025-06-13 03:11:49,035 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:11:49.035  INFO 2025-06-13 03:11:49,035 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:11:49.037  INFO 2025-06-13 03:11:49,037 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:11:49.037  INFO 2025-06-13 03:11:49,037 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 03:11:49.037  INFO 2025-06-13 03:11:49,037 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 03:11:49.042  INFO 2025-06-13 03:11:49,042 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:11:49.043  INFO 2025-06-13 03:11:49,043 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:11:58.529  INFO 2025-06-13 03:11:58,529 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:58.541  INFO 2025-06-13 03:11:58,541 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:58.541  INFO 2025-06-13 03:11:58,541 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:58.541  INFO 2025-06-13 03:11:58,541 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:11:58.541  INFO 2025-06-13 03:11:58,541 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:11:58.543  INFO 2025-06-13 03:11:58,543 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:11:58.953  INFO 2025-06-13 03:11:58,953 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:58.984  INFO 2025-06-13 03:11:58,984 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:59.003  INFO 2025-06-13 03:11:59,003 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:11:59.006  INFO 2025-06-13 03:11:59,006 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:11:59.006  INFO 2025-06-13 03:11:59,006 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:59.006  INFO 2025-06-13 03:11:59,006 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:11:59.006  INFO 2025-06-13 03:11:59,006 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:11:59.006  INFO 2025-06-13 03:11:59,006 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:11:59.008  INFO 2025-06-13 03:11:59,008 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:11:59.008  INFO 2025-06-13 03:11:59,008 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 03:11:59.009  INFO 2025-06-13 03:11:59,009 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 03:11:59.018  INFO 2025-06-13 03:11:59,018 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 03:11:59.019  INFO 2025-06-13 03:11:59,019 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 03:12:00.859  INFO 2025-06-13 03:12:00,859 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:01.125  INFO 2025-06-13 03:12:01,125 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:01.241  INFO 2025-06-13 03:12:01,241 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:01.415  INFO 2025-06-13 03:12:01,415 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:01.419  INFO 2025-06-13 03:12:01,419 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:12:01.419  INFO 2025-06-13 03:12:01,419 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:12:01.419  INFO 2025-06-13 03:12:01,419 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:12:01.419  INFO 2025-06-13 03:12:01,419 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:12:01.419  INFO 2025-06-13 03:12:01,419 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:12:01.420  INFO 2025-06-13 03:12:01,420 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:12:01.420  INFO 2025-06-13 03:12:01,420 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 03:12:01.421  INFO 2025-06-13 03:12:01,421 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 03:12:01.429  INFO 2025-06-13 03:12:01,429 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 03:12:01.429  INFO 2025-06-13 03:12:01,429 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 03:12:04.220  INFO 2025-06-13 03:12:04,220 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:04.234  INFO 2025-06-13 03:12:04,234 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Editor 3 attempting direct memorial addition to tree 1 - should use draft system instead
2025-06-13 03:12:04.234 ERROR 2025-06-13 03:12:04,234 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Error adding memorial 9 to tree 1: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
java.lang.RuntimeException: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
	at ru.cemeterysystem.services.FamilyTreeService.addMemorialToTree(FamilyTreeService.java:467)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.addMemorialToTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.addMemorialToTree(FamilyTreeController.java:302)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 03:12:04.247 ERROR 2025-06-13 03:12:04,247 --- [nio-8080-exec-5] r.c.controllers.FamilyTreeController     : Error adding memorial 9 to tree 1: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
java.lang.RuntimeException: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
	at ru.cemeterysystem.services.FamilyTreeService.addMemorialToTree(FamilyTreeService.java:467)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.addMemorialToTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.addMemorialToTree(FamilyTreeController.java:302)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 03:12:04.297  INFO 2025-06-13 03:12:04,297 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:08.330  INFO 2025-06-13 03:12:08,330 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:08.336  INFO 2025-06-13 03:12:08,336 --- [nio-8080-exec-6] r.c.services.FamilyTreeService           : Editor 3 attempting direct memorial addition to tree 1 - should use draft system instead
2025-06-13 03:12:08.336 ERROR 2025-06-13 03:12:08,336 --- [nio-8080-exec-6] r.c.services.FamilyTreeService           : Error adding memorial 9 to tree 1: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
java.lang.RuntimeException: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
	at ru.cemeterysystem.services.FamilyTreeService.addMemorialToTree(FamilyTreeService.java:467)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.addMemorialToTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.addMemorialToTree(FamilyTreeController.java:302)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 03:12:08.337 ERROR 2025-06-13 03:12:08,337 --- [nio-8080-exec-6] r.c.controllers.FamilyTreeController     : Error adding memorial 9 to tree 1: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
java.lang.RuntimeException: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
	at ru.cemeterysystem.services.FamilyTreeService.addMemorialToTree(FamilyTreeService.java:467)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.addMemorialToTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.addMemorialToTree(FamilyTreeController.java:302)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 03:12:08.372  INFO 2025-06-13 03:12:08,372 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:16.803  INFO 2025-06-13 03:12:16,803 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:16.804  INFO 2025-06-13 03:12:16,804 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:16.882  INFO 2025-06-13 03:12:16,882 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:16.908  INFO 2025-06-13 03:12:16,908 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:16.940  INFO 2025-06-13 03:12:16,940 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:16.972  INFO 2025-06-13 03:12:16,972 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:18.489  INFO 2025-06-13 03:12:18,489 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:18.563  INFO 2025-06-13 03:12:18,563 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:18.651  INFO 2025-06-13 03:12:18,651 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:18.833  INFO 2025-06-13 03:12:18,833 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:18.837  INFO 2025-06-13 03:12:18,837 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:12:18.837  INFO 2025-06-13 03:12:18,837 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:12:18.837  INFO 2025-06-13 03:12:18,837 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:12:18.838  INFO 2025-06-13 03:12:18,838 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:12:18.838  INFO 2025-06-13 03:12:18,838 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:12:18.839  INFO 2025-06-13 03:12:18,839 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:12:18.839  INFO 2025-06-13 03:12:18,839 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 03:12:18.840  INFO 2025-06-13 03:12:18,840 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 03:12:18.847  INFO 2025-06-13 03:12:18,847 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 03:12:18.847  INFO 2025-06-13 03:12:18,847 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 03:12:20.736  INFO 2025-06-13 03:12:20,736 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:20.745  INFO 2025-06-13 03:12:20,745 --- [nio-8080-exec-1] r.c.services.FamilyTreeService           : Editor 3 attempting direct memorial addition to tree 1 - should use draft system instead
2025-06-13 03:12:20.745 ERROR 2025-06-13 03:12:20,745 --- [nio-8080-exec-1] r.c.services.FamilyTreeService           : Error adding memorial 9 to tree 1: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
java.lang.RuntimeException: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
	at ru.cemeterysystem.services.FamilyTreeService.addMemorialToTree(FamilyTreeService.java:467)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.addMemorialToTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.addMemorialToTree(FamilyTreeController.java:302)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 03:12:20.746 ERROR 2025-06-13 03:12:20,746 --- [nio-8080-exec-1] r.c.controllers.FamilyTreeController     : Error adding memorial 9 to tree 1: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
java.lang.RuntimeException: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
	at ru.cemeterysystem.services.FamilyTreeService.addMemorialToTree(FamilyTreeService.java:467)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.addMemorialToTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.addMemorialToTree(FamilyTreeController.java:302)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 03:12:20.813  INFO 2025-06-13 03:12:20,813 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:40.490  INFO 2025-06-13 03:12:40,490 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:40.539  INFO 2025-06-13 03:12:40,539 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:40.654  INFO 2025-06-13 03:12:40,654 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:40.656  INFO 2025-06-13 03:12:40,656 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:42.329  INFO 2025-06-13 03:12:42,329 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:42.400  INFO 2025-06-13 03:12:42,400 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:42.483  INFO 2025-06-13 03:12:42,483 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:42.656  INFO 2025-06-13 03:12:42,656 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:42.659  INFO 2025-06-13 03:12:42,659 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:12:42.659  INFO 2025-06-13 03:12:42,659 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:12:42.659  INFO 2025-06-13 03:12:42,659 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:12:42.659  INFO 2025-06-13 03:12:42,659 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:12:42.659  INFO 2025-06-13 03:12:42,659 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:12:42.661  INFO 2025-06-13 03:12:42,661 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:12:42.661  INFO 2025-06-13 03:12:42,661 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 03:12:42.662  INFO 2025-06-13 03:12:42,662 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 03:12:42.669  INFO 2025-06-13 03:12:42,669 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 03:12:42.669  INFO 2025-06-13 03:12:42,669 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 03:12:43.658  INFO 2025-06-13 03:12:43,658 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:43.676  INFO 2025-06-13 03:12:43,676 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:43.840  INFO 2025-06-13 03:12:43,840 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:43.908  INFO 2025-06-13 03:12:43,908 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:12:56.239  INFO 2025-06-13 03:12:56,239 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:15:02.626  INFO 2025-06-13 03:15:02,626 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 03:15:02.635  INFO 2025-06-13 03:15:02,635 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 03:15:02.652  INFO 2025-06-13 03:15:02,652 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 03:26:48.336  INFO 2025-06-13 03:26:48,336 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 23112 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 03:26:48.339  INFO 2025-06-13 03:26:48,339 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 03:26:49.289  INFO 2025-06-13 03:26:49,289 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 03:26:49.391  INFO 2025-06-13 03:26:49,391 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 93 ms. Found 11 JPA repository interfaces.
2025-06-13 03:26:50.240  INFO 2025-06-13 03:26:50,240 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 03:26:50.258  INFO 2025-06-13 03:26:50,258 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 03:26:50.258  INFO 2025-06-13 03:26:50,258 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 03:26:50.333  INFO 2025-06-13 03:26:50,333 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 03:26:50.334  INFO 2025-06-13 03:26:50,334 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1946 ms
2025-06-13 03:26:50.366  INFO 2025-06-13 03:26:50,366 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 03:26:50.590  INFO 2025-06-13 03:26:50,590 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 03:26:50.592  INFO 2025-06-13 03:26:50,592 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 03:26:50.613  INFO 2025-06-13 03:26:50,613 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 03:26:50.735  INFO 2025-06-13 03:26:50,735 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 03:26:50.833  INFO 2025-06-13 03:26:50,833 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 03:26:50.886  INFO 2025-06-13 03:26:50,886 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 03:26:51.208  INFO 2025-06-13 03:26:51,208 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 03:26:52.818  INFO 2025-06-13 03:26:52,818 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 03:26:52.965  INFO 2025-06-13 03:26:52,965 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 03:26:53.554  INFO 2025-06-13 03:26:53,554 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 03:26:56.260  WARN 2025-06-13 03:26:56,260 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 03:26:56.319  INFO 2025-06-13 03:26:56,319 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 03:26:56.327  INFO 2025-06-13 03:26:56,327 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 03:26:56.328  WARN 2025-06-13 03:26:56,328 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 03:26:56.797  INFO 2025-06-13 03:26:56,797 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 03:26:56.831  INFO 2025-06-13 03:26:56,831 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 03:26:57.481  INFO 2025-06-13 03:26:57,481 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 03:26:57.490  INFO 2025-06-13 03:26:57,490 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 9.807 seconds (process running for 10.791)
2025-06-13 03:26:57.498  INFO 2025-06-13 03:26:57,498 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 03:26:57.627  INFO 2025-06-13 03:26:57,627 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 03:26:57.630  INFO 2025-06-13 03:26:57,630 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 03:26:57.915  INFO 2025-06-13 03:26:57,915 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 03:26:57.923  INFO 2025-06-13 03:26:57,923 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 03:26:57.972  INFO 2025-06-13 03:26:57,972 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 03:26:57.988  INFO 2025-06-13 03:26:57,988 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 03:26:58.052  INFO 2025-06-13 03:26:58,052 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 03:26:58.065  INFO 2025-06-13 03:26:58,065 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 03:26:58.065  INFO 2025-06-13 03:26:58,065 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 03:32:13.161  INFO 2025-06-13 03:32:13,161 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 03:32:13.174  INFO 2025-06-13 03:32:13,174 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 03:32:13.329  INFO 2025-06-13 03:32:13,329 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 03:32:46.453  INFO 2025-06-13 03:32:46,453 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 25224 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 03:32:46.457  INFO 2025-06-13 03:32:46,457 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 03:32:47.510  INFO 2025-06-13 03:32:47,510 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 03:32:47.645  INFO 2025-06-13 03:32:47,645 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 124 ms. Found 11 JPA repository interfaces.
2025-06-13 03:32:48.780  INFO 2025-06-13 03:32:48,780 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 03:32:48.825  INFO 2025-06-13 03:32:48,825 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 03:32:48.826  INFO 2025-06-13 03:32:48,826 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 03:32:48.977  INFO 2025-06-13 03:32:48,977 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 03:32:48.978  INFO 2025-06-13 03:32:48,978 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2471 ms
2025-06-13 03:32:49.053  INFO 2025-06-13 03:32:49,053 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 03:32:49.361  INFO 2025-06-13 03:32:49,361 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 03:32:49.363  INFO 2025-06-13 03:32:49,363 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 03:32:49.379  INFO 2025-06-13 03:32:49,379 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 03:32:49.522  INFO 2025-06-13 03:32:49,522 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 03:32:49.638  INFO 2025-06-13 03:32:49,638 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 03:32:49.725  INFO 2025-06-13 03:32:49,725 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 03:32:50.278  INFO 2025-06-13 03:32:50,278 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 03:32:52.512  INFO 2025-06-13 03:32:52,512 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 03:32:52.626  INFO 2025-06-13 03:32:52,626 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 03:32:53.119  INFO 2025-06-13 03:32:53,119 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 03:32:56.398  WARN 2025-06-13 03:32:56,398 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 03:32:56.438  INFO 2025-06-13 03:32:56,438 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 03:32:56.442  INFO 2025-06-13 03:32:56,442 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 03:32:56.444  WARN 2025-06-13 03:32:56,444 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 03:32:56.841  INFO 2025-06-13 03:32:56,841 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 03:32:56.892  INFO 2025-06-13 03:32:56,892 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 03:32:57.441  INFO 2025-06-13 03:32:57,441 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 03:32:57.450  INFO 2025-06-13 03:32:57,450 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 11.499 seconds (process running for 16.113)
2025-06-13 03:32:57.455  INFO 2025-06-13 03:32:57,455 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 03:32:57.578  INFO 2025-06-13 03:32:57,578 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 03:32:57.893  INFO 2025-06-13 03:32:57,893 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 03:32:57.976  INFO 2025-06-13 03:32:57,976 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 03:32:58.029  INFO 2025-06-13 03:32:58,029 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 03:32:58.051  INFO 2025-06-13 03:32:58,051 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 03:32:58.153  INFO 2025-06-13 03:32:58,153 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 03:32:58.169  INFO 2025-06-13 03:32:58,169 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 03:32:58.169  INFO 2025-06-13 03:32:58,169 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 03:32:58.172  INFO 2025-06-13 03:32:58,172 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 03:33:00.501  INFO 2025-06-13 03:33:00,501 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 03:33:00.505  INFO 2025-06-13 03:33:00,505 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 03:33:00.510  INFO 2025-06-13 03:33:00,510 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 03:38:52.657  INFO 2025-06-13 03:38:52,657 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 16784 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 03:38:52.660  INFO 2025-06-13 03:38:52,660 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 03:38:53.722  INFO 2025-06-13 03:38:53,722 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 03:38:53.826  INFO 2025-06-13 03:38:53,826 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 95 ms. Found 11 JPA repository interfaces.
2025-06-13 03:38:54.870  INFO 2025-06-13 03:38:54,870 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 03:38:54.887  INFO 2025-06-13 03:38:54,887 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 03:38:54.887  INFO 2025-06-13 03:38:54,887 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 03:38:54.957  INFO 2025-06-13 03:38:54,957 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 03:38:54.957  INFO 2025-06-13 03:38:54,957 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2204 ms
2025-06-13 03:38:54.997  INFO 2025-06-13 03:38:54,997 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 03:38:55.212  INFO 2025-06-13 03:38:55,212 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 03:38:55.214  INFO 2025-06-13 03:38:55,214 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 03:38:55.226  INFO 2025-06-13 03:38:55,226 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 03:38:55.351  INFO 2025-06-13 03:38:55,351 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 03:38:55.407  INFO 2025-06-13 03:38:55,407 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 03:38:55.445  INFO 2025-06-13 03:38:55,445 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 03:38:55.770  INFO 2025-06-13 03:38:55,770 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 03:38:57.342  INFO 2025-06-13 03:38:57,342 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 03:38:57.455  INFO 2025-06-13 03:38:57,455 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 03:38:57.914  INFO 2025-06-13 03:38:57,914 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 03:39:00.557  WARN 2025-06-13 03:39:00,557 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 03:39:00.610  INFO 2025-06-13 03:39:00,610 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 03:39:00.616  INFO 2025-06-13 03:39:00,616 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 03:39:00.618  WARN 2025-06-13 03:39:00,618 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 03:39:00.976  INFO 2025-06-13 03:39:00,976 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 03:39:01.026  INFO 2025-06-13 03:39:01,026 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 03:39:01.583  INFO 2025-06-13 03:39:01,583 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 03:39:01.593  INFO 2025-06-13 03:39:01,593 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 9.364 seconds (process running for 14.83)
2025-06-13 03:39:01.598  INFO 2025-06-13 03:39:01,598 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 03:39:01.709  INFO 2025-06-13 03:39:01,709 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 03:39:02.002  INFO 2025-06-13 03:39:02,002 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 03:39:02.054  INFO 2025-06-13 03:39:02,054 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 03:39:02.106  INFO 2025-06-13 03:39:02,106 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 03:39:02.121  INFO 2025-06-13 03:39:02,121 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 03:39:02.192  INFO 2025-06-13 03:39:02,192 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 03:39:02.207  INFO 2025-06-13 03:39:02,207 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 03:39:02.207  INFO 2025-06-13 03:39:02,207 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 03:39:02.210  INFO 2025-06-13 03:39:02,210 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 03:50:41.321  INFO 2025-06-13 03:50:41,321 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 03:50:41.321  INFO 2025-06-13 03:50:41,321 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 03:50:41.327  INFO 2025-06-13 03:50:41,327 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2025-06-13 03:50:41.609  INFO 2025-06-13 03:50:41,609 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:50:41.610  INFO 2025-06-13 03:50:41,610 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:50:41.609  INFO 2025-06-13 03:50:41,609 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:50:41.675  INFO 2025-06-13 03:50:41,675 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:50:41.675  INFO 2025-06-13 03:50:41,675 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:50:41.675  INFO 2025-06-13 03:50:41,675 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:50:41.675  INFO 2025-06-13 03:50:41,675 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:50:41.675  INFO 2025-06-13 03:50:41,675 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:50:41.679  INFO 2025-06-13 03:50:41,679 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:50:41.679  INFO 2025-06-13 03:50:41,679 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 03:50:41.684  INFO 2025-06-13 03:50:41,684 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 03:50:41.711  INFO 2025-06-13 03:50:41,711 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:50:41.712  INFO 2025-06-13 03:50:41,712 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:50:46.021  INFO 2025-06-13 03:50:46,021 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:50:46.120  INFO 2025-06-13 03:50:46,120 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:50:46.188  INFO 2025-06-13 03:50:46,188 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:50:46.299  INFO 2025-06-13 03:50:46,299 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:50:46.839  INFO 2025-06-13 03:50:46,839 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:50:48.071  INFO 2025-06-13 03:50:48,071 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:50:55.393  INFO 2025-06-13 03:50:55,393 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:50:55.456  INFO 2025-06-13 03:50:55,456 --- [io-8080-exec-10] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 03:50:55.456  INFO 2025-06-13 03:50:55,456 --- [io-8080-exec-10] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 03:51:04.529  INFO 2025-06-13 03:51:04,529 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 03:51:04.618  INFO 2025-06-13 03:51:04,618 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:04.630  INFO 2025-06-13 03:51:04,630 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 03:51:05.284  INFO 2025-06-13 03:51:05,284 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:05.457  INFO 2025-06-13 03:51:05,457 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:05.463  INFO 2025-06-13 03:51:05,463 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:51:05.463  INFO 2025-06-13 03:51:05,463 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:51:05.463  INFO 2025-06-13 03:51:05,463 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:51:05.463  INFO 2025-06-13 03:51:05,463 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:51:05.463  INFO 2025-06-13 03:51:05,463 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 03:51:05.465  INFO 2025-06-13 03:51:05,465 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 03:51:05.465  INFO 2025-06-13 03:51:05,465 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 03:51:05.466  INFO 2025-06-13 03:51:05,466 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 03:51:05.479  INFO 2025-06-13 03:51:05,479 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 03:51:05.479  INFO 2025-06-13 03:51:05,479 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 03:51:05.506  INFO 2025-06-13 03:51:05,506 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:07.669  INFO 2025-06-13 03:51:07,669 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:07.826  INFO 2025-06-13 03:51:07,826 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:07.866  INFO 2025-06-13 03:51:07,866 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:08.039  INFO 2025-06-13 03:51:08,039 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:08.658  INFO 2025-06-13 03:51:08,658 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:08.658  INFO 2025-06-13 03:51:08,658 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:08.772  INFO 2025-06-13 03:51:08,772 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:08.772  INFO 2025-06-13 03:51:08,772 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:08.933  INFO 2025-06-13 03:51:08,933 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:08.936  INFO 2025-06-13 03:51:08,936 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:10.058  INFO 2025-06-13 03:51:10,058 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:10.240  INFO 2025-06-13 03:51:10,240 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:10.931  INFO 2025-06-13 03:51:10,931 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:13.170  INFO 2025-06-13 03:51:13,170 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:13.194  INFO 2025-06-13 03:51:13,194 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 03:51:13.194  INFO 2025-06-13 03:51:13,194 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 03:51:13.287  INFO 2025-06-13 03:51:13,287 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:15.154  INFO 2025-06-13 03:51:15,154 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 03:51:22.828  INFO 2025-06-13 03:51:22,828 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 03:51:22.926  INFO 2025-06-13 03:51:22,926 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:22.927  INFO 2025-06-13 03:51:22,927 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 03:51:23.571  INFO 2025-06-13 03:51:23,571 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:23.744  INFO 2025-06-13 03:51:23,744 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:23.805  INFO 2025-06-13 03:51:23,805 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:23.810  INFO 2025-06-13 03:51:23,810 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:51:23.811  INFO 2025-06-13 03:51:23,811 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:51:23.811  INFO 2025-06-13 03:51:23,811 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:51:23.811  INFO 2025-06-13 03:51:23,811 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:51:23.811  INFO 2025-06-13 03:51:23,811 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:51:23.813  INFO 2025-06-13 03:51:23,813 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:51:23.813  INFO 2025-06-13 03:51:23,813 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 03:51:23.814  INFO 2025-06-13 03:51:23,814 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 03:51:23.822  INFO 2025-06-13 03:51:23,822 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:51:23.823  INFO 2025-06-13 03:51:23,823 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:51:29.840  INFO 2025-06-13 03:51:29,840 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:29.906  INFO 2025-06-13 03:51:29,906 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:30.040  INFO 2025-06-13 03:51:30,040 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:30.097  INFO 2025-06-13 03:51:30,097 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:31.472  INFO 2025-06-13 03:51:31,472 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:35.181  INFO 2025-06-13 03:51:35,181 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:35.297  INFO 2025-06-13 03:51:35,297 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:35.372  INFO 2025-06-13 03:51:35,372 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:35.526  INFO 2025-06-13 03:51:35,526 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:35.531  INFO 2025-06-13 03:51:35,531 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:51:35.531  INFO 2025-06-13 03:51:35,531 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:51:35.531  INFO 2025-06-13 03:51:35,531 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:51:35.531  INFO 2025-06-13 03:51:35,531 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:51:35.531  INFO 2025-06-13 03:51:35,531 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:51:35.534  INFO 2025-06-13 03:51:35,534 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:51:35.534  INFO 2025-06-13 03:51:35,534 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 03:51:35.535  INFO 2025-06-13 03:51:35,535 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 03:51:35.543  INFO 2025-06-13 03:51:35,543 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:51:35.543  INFO 2025-06-13 03:51:35,543 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:51:41.002  INFO 2025-06-13 03:51:41,002 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:41.013  INFO 2025-06-13 03:51:41,013 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:41.121  INFO 2025-06-13 03:51:41,121 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:41.122  INFO 2025-06-13 03:51:41,122 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:41.995  INFO 2025-06-13 03:51:41,995 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:41.999  INFO 2025-06-13 03:51:41,999 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:51:41.999  INFO 2025-06-13 03:51:41,999 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:51:41.999  INFO 2025-06-13 03:51:41,999 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:51:41.999  INFO 2025-06-13 03:51:41,999 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:51:41.999  INFO 2025-06-13 03:51:41,999 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:51:42.001  INFO 2025-06-13 03:51:42,001 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:51:42.002  INFO 2025-06-13 03:51:42,002 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 03:51:42.002  INFO 2025-06-13 03:51:42,002 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 03:51:42.008  INFO 2025-06-13 03:51:42,008 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:51:42.008  INFO 2025-06-13 03:51:42,008 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:51:42.168  INFO 2025-06-13 03:51:42,168 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:51:42.172  INFO 2025-06-13 03:51:42,172 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:51:42.172  INFO 2025-06-13 03:51:42,172 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:51:42.172  INFO 2025-06-13 03:51:42,172 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:51:42.172  INFO 2025-06-13 03:51:42,172 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:51:42.172  INFO 2025-06-13 03:51:42,172 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:51:42.174  INFO 2025-06-13 03:51:42,174 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:51:42.174  INFO 2025-06-13 03:51:42,174 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 03:51:42.174  INFO 2025-06-13 03:51:42,174 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 03:51:42.179  INFO 2025-06-13 03:51:42,179 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:51:42.179  INFO 2025-06-13 03:51:42,179 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 03:52:36.125  INFO 2025-06-13 03:52:36,125 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:36.135  INFO 2025-06-13 03:52:36,135 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:52:36.135  INFO 2025-06-13 03:52:36,135 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:52:36.135  INFO 2025-06-13 03:52:36,135 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:52:36.135  INFO 2025-06-13 03:52:36,135 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:52:36.137  INFO 2025-06-13 03:52:36,137 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:52:36.856  INFO 2025-06-13 03:52:36,856 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:36.859  INFO 2025-06-13 03:52:36,859 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:52:36.859  INFO 2025-06-13 03:52:36,859 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:52:36.860  INFO 2025-06-13 03:52:36,860 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:52:36.860  INFO 2025-06-13 03:52:36,860 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:52:36.860  INFO 2025-06-13 03:52:36,860 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:52:36.861  INFO 2025-06-13 03:52:36,861 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:52:36.862  INFO 2025-06-13 03:52:36,862 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 03:52:36.862  INFO 2025-06-13 03:52:36,862 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 03:52:36.870  INFO 2025-06-13 03:52:36,870 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 03:52:36.871  INFO 2025-06-13 03:52:36,871 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 03:52:36.901  INFO 2025-06-13 03:52:36,901 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:41.188  INFO 2025-06-13 03:52:41,188 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:41.188  INFO 2025-06-13 03:52:41,188 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:41.402  INFO 2025-06-13 03:52:41,402 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:41.405  INFO 2025-06-13 03:52:41,405 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:41.469  INFO 2025-06-13 03:52:41,469 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:41.594  INFO 2025-06-13 03:52:41,594 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:43.822  INFO 2025-06-13 03:52:43,822 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:46.334  INFO 2025-06-13 03:52:46,334 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:46.530  INFO 2025-06-13 03:52:46,530 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:46.777  INFO 2025-06-13 03:52:46,777 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:47.595  INFO 2025-06-13 03:52:47,595 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:47.599  INFO 2025-06-13 03:52:47,599 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 03:52:47.599  INFO 2025-06-13 03:52:47,599 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 03:52:47.599  INFO 2025-06-13 03:52:47,599 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 03:52:47.599  INFO 2025-06-13 03:52:47,599 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 03:52:47.599  INFO 2025-06-13 03:52:47,599 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 03:52:47.601  INFO 2025-06-13 03:52:47,601 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 03:52:47.602  INFO 2025-06-13 03:52:47,602 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 03:52:47.602  INFO 2025-06-13 03:52:47,602 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 03:52:47.610  INFO 2025-06-13 03:52:47,610 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 03:52:47.610  INFO 2025-06-13 03:52:47,610 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 03:52:50.618  INFO 2025-06-13 03:52:50,618 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:52:50.631  INFO 2025-06-13 03:52:50,631 --- [nio-8080-exec-3] r.c.services.FamilyTreeService           : Editor 3 attempting direct memorial addition to tree 1 - should use draft system instead
2025-06-13 03:52:50.631 ERROR 2025-06-13 03:52:50,631 --- [nio-8080-exec-3] r.c.services.FamilyTreeService           : Error adding memorial 9 to tree 1: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
java.lang.RuntimeException: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
	at ru.cemeterysystem.services.FamilyTreeService.addMemorialToTree(FamilyTreeService.java:467)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.addMemorialToTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.addMemorialToTree(FamilyTreeController.java:302)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 03:52:50.641 ERROR 2025-06-13 03:52:50,641 --- [nio-8080-exec-3] r.c.controllers.FamilyTreeController     : Error adding memorial 9 to tree 1: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
java.lang.RuntimeException: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
	at ru.cemeterysystem.services.FamilyTreeService.addMemorialToTree(FamilyTreeService.java:467)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.addMemorialToTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.addMemorialToTree(FamilyTreeController.java:302)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 03:52:50.682  INFO 2025-06-13 03:52:50,682 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:53:14.534  INFO 2025-06-13 03:53:14,534 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:53:14.544  INFO 2025-06-13 03:53:14,544 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Editor 3 attempting direct memorial addition to tree 1 - should use draft system instead
2025-06-13 03:53:14.544 ERROR 2025-06-13 03:53:14,544 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Error adding memorial 9 to tree 1: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
java.lang.RuntimeException: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
	at ru.cemeterysystem.services.FamilyTreeService.addMemorialToTree(FamilyTreeService.java:467)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.addMemorialToTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.addMemorialToTree(FamilyTreeController.java:302)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 03:53:14.545 ERROR 2025-06-13 03:53:14,545 --- [nio-8080-exec-5] r.c.controllers.FamilyTreeController     : Error adding memorial 9 to tree 1: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
java.lang.RuntimeException: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
	at ru.cemeterysystem.services.FamilyTreeService.addMemorialToTree(FamilyTreeService.java:467)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.addMemorialToTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.addMemorialToTree(FamilyTreeController.java:302)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 03:53:14.670  INFO 2025-06-13 03:53:14,670 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 03:59:02.103  INFO 2025-06-13 03:59:02,103 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 03:59:02.291  INFO 2025-06-13 03:59:02,291 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 03:59:02.504  INFO 2025-06-13 03:59:02,504 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 04:04:12.544  INFO 2025-06-13 04:04:12,544 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 26604 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 04:04:12.548  INFO 2025-06-13 04:04:12,548 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 04:04:14.046  INFO 2025-06-13 04:04:14,046 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 04:04:14.229  INFO 2025-06-13 04:04:14,229 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 168 ms. Found 11 JPA repository interfaces.
2025-06-13 04:04:15.713  INFO 2025-06-13 04:04:15,713 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 04:04:15.733  INFO 2025-06-13 04:04:15,733 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 04:04:15.734  INFO 2025-06-13 04:04:15,734 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 04:04:15.839  INFO 2025-06-13 04:04:15,839 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 04:04:15.839  INFO 2025-06-13 04:04:15,839 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3217 ms
2025-06-13 04:04:15.886  INFO 2025-06-13 04:04:15,886 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 04:04:16.269  INFO 2025-06-13 04:04:16,269 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 04:04:16.271  INFO 2025-06-13 04:04:16,271 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 04:04:16.289  INFO 2025-06-13 04:04:16,289 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 04:04:16.483  INFO 2025-06-13 04:04:16,483 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 04:04:16.671  INFO 2025-06-13 04:04:16,671 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 04:04:16.763  INFO 2025-06-13 04:04:16,763 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 04:04:17.399  INFO 2025-06-13 04:04:17,399 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 04:04:20.981  INFO 2025-06-13 04:04:20,981 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 04:04:21.145  INFO 2025-06-13 04:04:21,145 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 04:04:22.045  INFO 2025-06-13 04:04:22,045 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 04:04:27.086  WARN 2025-06-13 04:04:27,086 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 04:04:27.166  INFO 2025-06-13 04:04:27,166 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 04:04:27.184  INFO 2025-06-13 04:04:27,184 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 04:04:27.185  WARN 2025-06-13 04:04:27,185 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 04:04:27.827  INFO 2025-06-13 04:04:27,827 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 04:04:27.886  INFO 2025-06-13 04:04:27,886 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 04:04:28.766  INFO 2025-06-13 04:04:28,766 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 04:04:28.779  INFO 2025-06-13 04:04:28,779 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 17.049 seconds (process running for 18.322)
2025-06-13 04:04:28.784  INFO 2025-06-13 04:04:28,784 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 04:04:28.911  INFO 2025-06-13 04:04:28,911 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 04:04:29.222  INFO 2025-06-13 04:04:29,222 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 04:04:29.298  INFO 2025-06-13 04:04:29,298 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 04:04:29.367  INFO 2025-06-13 04:04:29,367 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 04:04:29.385  INFO 2025-06-13 04:04:29,385 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 04:04:29.499  INFO 2025-06-13 04:04:29,499 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 04:04:29.516  INFO 2025-06-13 04:04:29,516 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 04:04:29.516  INFO 2025-06-13 04:04:29,516 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 04:04:29.552  INFO 2025-06-13 04:04:29,552 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 04:07:57.303  INFO 2025-06-13 04:07:57,303 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 04:07:57.303  INFO 2025-06-13 04:07:57,303 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 04:07:57.304  INFO 2025-06-13 04:07:57,304 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 04:07:57.469  INFO 2025-06-13 04:07:57,469 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:07:57.469  INFO 2025-06-13 04:07:57,469 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:07:57.469  INFO 2025-06-13 04:07:57,469 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:07:57.518  INFO 2025-06-13 04:07:57,518 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:07:57.518  INFO 2025-06-13 04:07:57,518 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:07:57.518  INFO 2025-06-13 04:07:57,518 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:07:57.518  INFO 2025-06-13 04:07:57,518 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:07:57.518  INFO 2025-06-13 04:07:57,518 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:07:57.523  INFO 2025-06-13 04:07:57,523 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:07:57.523  INFO 2025-06-13 04:07:57,523 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 04:07:57.529  INFO 2025-06-13 04:07:57,529 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 04:07:57.556  INFO 2025-06-13 04:07:57,556 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:07:57.557  INFO 2025-06-13 04:07:57,557 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:08:02.282  INFO 2025-06-13 04:08:02,282 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:02.490  INFO 2025-06-13 04:08:02,490 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:02.623  INFO 2025-06-13 04:08:02,623 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:02.677  INFO 2025-06-13 04:08:02,677 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:03.569  INFO 2025-06-13 04:08:03,569 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:05.058  INFO 2025-06-13 04:08:05,058 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:17.992  INFO 2025-06-13 04:08:17,992 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:18.040  INFO 2025-06-13 04:08:18,040 --- [io-8080-exec-10] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 04:08:18.040  INFO 2025-06-13 04:08:18,040 --- [io-8080-exec-10] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 04:08:26.601  INFO 2025-06-13 04:08:26,601 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 04:08:26.683  INFO 2025-06-13 04:08:26,683 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:08:26.691  INFO 2025-06-13 04:08:26,691 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 04:08:27.035  INFO 2025-06-13 04:08:27,035 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:08:27.123  INFO 2025-06-13 04:08:27,123 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:08:27.166  INFO 2025-06-13 04:08:27,166 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:08:27.169  INFO 2025-06-13 04:08:27,169 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:08:27.169  INFO 2025-06-13 04:08:27,169 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:08:27.170  INFO 2025-06-13 04:08:27,170 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:08:27.170  INFO 2025-06-13 04:08:27,170 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:08:27.170  INFO 2025-06-13 04:08:27,170 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 04:08:27.171  INFO 2025-06-13 04:08:27,171 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 04:08:27.172  INFO 2025-06-13 04:08:27,172 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 04:08:27.172  INFO 2025-06-13 04:08:27,172 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 04:08:27.185  INFO 2025-06-13 04:08:27,185 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:08:27.186  INFO 2025-06-13 04:08:27,186 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:08:29.422  INFO 2025-06-13 04:08:29,422 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:08:29.426  INFO 2025-06-13 04:08:29,426 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:08:29.507  INFO 2025-06-13 04:08:29,507 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:08:29.508  INFO 2025-06-13 04:08:29,508 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:08:29.612  INFO 2025-06-13 04:08:29,612 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:08:29.615  INFO 2025-06-13 04:08:29,615 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:08:31.894  INFO 2025-06-13 04:08:31,894 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:08:31.912  INFO 2025-06-13 04:08:31,912 --- [nio-8080-exec-1] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 04:08:31.912  INFO 2025-06-13 04:08:31,912 --- [nio-8080-exec-1] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 04:08:31.987  INFO 2025-06-13 04:08:31,987 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:08:40.025  INFO 2025-06-13 04:08:40,025 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 04:08:40.116  INFO 2025-06-13 04:08:40,116 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:40.117  INFO 2025-06-13 04:08:40,117 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 04:08:40.592  INFO 2025-06-13 04:08:40,592 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:40.655  INFO 2025-06-13 04:08:40,655 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:40.727  INFO 2025-06-13 04:08:40,727 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:40.731  INFO 2025-06-13 04:08:40,731 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:08:40.731  INFO 2025-06-13 04:08:40,731 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:08:40.731  INFO 2025-06-13 04:08:40,731 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:08:40.731  INFO 2025-06-13 04:08:40,731 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:08:40.731  INFO 2025-06-13 04:08:40,731 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:08:40.733  INFO 2025-06-13 04:08:40,733 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:08:40.733  INFO 2025-06-13 04:08:40,733 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 04:08:40.733  INFO 2025-06-13 04:08:40,733 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 04:08:40.741  INFO 2025-06-13 04:08:40,741 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:08:40.741  INFO 2025-06-13 04:08:40,741 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:08:42.295  INFO 2025-06-13 04:08:42,295 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:42.334  INFO 2025-06-13 04:08:42,334 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:42.456  INFO 2025-06-13 04:08:42,456 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:42.488  INFO 2025-06-13 04:08:42,488 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:43.440  INFO 2025-06-13 04:08:43,440 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:45.161  INFO 2025-06-13 04:08:45,161 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:45.223  INFO 2025-06-13 04:08:45,223 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:45.301  INFO 2025-06-13 04:08:45,301 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:45.425  INFO 2025-06-13 04:08:45,425 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:45.429  INFO 2025-06-13 04:08:45,429 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:08:45.429  INFO 2025-06-13 04:08:45,429 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:08:45.429  INFO 2025-06-13 04:08:45,429 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:08:45.429  INFO 2025-06-13 04:08:45,429 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:08:45.429  INFO 2025-06-13 04:08:45,429 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:08:45.431  INFO 2025-06-13 04:08:45,431 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:08:45.431  INFO 2025-06-13 04:08:45,431 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:08:45.432  INFO 2025-06-13 04:08:45,432 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:08:45.440  INFO 2025-06-13 04:08:45,440 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:08:45.440  INFO 2025-06-13 04:08:45,440 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:08:55.254  INFO 2025-06-13 04:08:55,254 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:55.263  INFO 2025-06-13 04:08:55,263 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:55.339  INFO 2025-06-13 04:08:55,339 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:55.342  INFO 2025-06-13 04:08:55,342 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:08:59.340  INFO 2025-06-13 04:08:59,340 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:05.298  INFO 2025-06-13 04:09:05,298 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:05.314  INFO 2025-06-13 04:09:05,314 --- [nio-8080-exec-4] r.c.services.FamilyTreeService           : Editor 3 attempting direct update of tree 1 - should use draft system instead
2025-06-13 04:09:05.314 ERROR 2025-06-13 04:09:05,314 --- [nio-8080-exec-4] r.c.services.FamilyTreeService           : Error updating family tree 1: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
java.lang.RuntimeException: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
	at ru.cemeterysystem.services.FamilyTreeService.updateFamilyTree(FamilyTreeService.java:191)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.updateFamilyTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.updateFamilyTree(FamilyTreeController.java:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 04:09:05.322 ERROR 2025-06-13 04:09:05,322 --- [nio-8080-exec-4] r.c.controllers.FamilyTreeController     : Error updating family tree 1: Failed to update family tree
java.lang.RuntimeException: Failed to update family tree
	at ru.cemeterysystem.services.FamilyTreeService.updateFamilyTree(FamilyTreeService.java:200)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.updateFamilyTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.updateFamilyTree(FamilyTreeController.java:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.RuntimeException: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
	at ru.cemeterysystem.services.FamilyTreeService.updateFamilyTree(FamilyTreeService.java:191)
	... 114 common frames omitted
2025-06-13 04:09:15.951  INFO 2025-06-13 04:09:15,951 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:15.994  INFO 2025-06-13 04:09:15,994 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:16.041  INFO 2025-06-13 04:09:16,041 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:16.178  INFO 2025-06-13 04:09:16,178 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:16.181  INFO 2025-06-13 04:09:16,181 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:09:16.182  INFO 2025-06-13 04:09:16,182 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:09:16.182  INFO 2025-06-13 04:09:16,182 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:09:16.182  INFO 2025-06-13 04:09:16,182 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:09:16.182  INFO 2025-06-13 04:09:16,182 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:09:16.183  INFO 2025-06-13 04:09:16,183 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:09:16.183  INFO 2025-06-13 04:09:16,183 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:09:16.184  INFO 2025-06-13 04:09:16,184 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:09:16.190  INFO 2025-06-13 04:09:16,190 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:09:16.191  INFO 2025-06-13 04:09:16,191 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:09:17.125  INFO 2025-06-13 04:09:17,125 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:17.128  INFO 2025-06-13 04:09:17,128 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:09:17.128  INFO 2025-06-13 04:09:17,128 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:09:17.128  INFO 2025-06-13 04:09:17,128 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:09:17.128  INFO 2025-06-13 04:09:17,128 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:09:17.128  INFO 2025-06-13 04:09:17,128 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:09:17.130  INFO 2025-06-13 04:09:17,130 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:09:17.130  INFO 2025-06-13 04:09:17,130 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 04:09:17.131  INFO 2025-06-13 04:09:17,131 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 04:09:17.137  INFO 2025-06-13 04:09:17,137 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:09:17.137  INFO 2025-06-13 04:09:17,137 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:09:17.274  INFO 2025-06-13 04:09:17,274 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:17.277  INFO 2025-06-13 04:09:17,277 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:09:17.277  INFO 2025-06-13 04:09:17,277 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:09:17.277  INFO 2025-06-13 04:09:17,277 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:09:17.277  INFO 2025-06-13 04:09:17,277 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:09:17.277  INFO 2025-06-13 04:09:17,277 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:09:17.279  INFO 2025-06-13 04:09:17,279 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:09:17.279  INFO 2025-06-13 04:09:17,279 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 04:09:17.279  INFO 2025-06-13 04:09:17,279 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 04:09:17.284  INFO 2025-06-13 04:09:17,284 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:09:17.284  INFO 2025-06-13 04:09:17,284 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:09:27.036  INFO 2025-06-13 04:09:27,036 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:27.042  INFO 2025-06-13 04:09:27,042 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:09:27.043  INFO 2025-06-13 04:09:27,043 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:09:27.043  INFO 2025-06-13 04:09:27,043 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:09:27.043  INFO 2025-06-13 04:09:27,043 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:09:27.044  INFO 2025-06-13 04:09:27,044 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:09:27.216  INFO 2025-06-13 04:09:27,216 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:27.216  INFO 2025-06-13 04:09:27,216 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:27.222  INFO 2025-06-13 04:09:27,222 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:09:27.222  INFO 2025-06-13 04:09:27,222 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:09:27.222  INFO 2025-06-13 04:09:27,222 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:09:27.222  INFO 2025-06-13 04:09:27,222 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:09:27.222  INFO 2025-06-13 04:09:27,222 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:09:27.223  INFO 2025-06-13 04:09:27,223 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:09:27.223  INFO 2025-06-13 04:09:27,223 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 04:09:27.224  INFO 2025-06-13 04:09:27,224 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 04:09:27.229  INFO 2025-06-13 04:09:27,229 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:09:27.229  INFO 2025-06-13 04:09:27,229 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:09:29.298  INFO 2025-06-13 04:09:29,298 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:29.454  INFO 2025-06-13 04:09:29,454 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:29.492  INFO 2025-06-13 04:09:29,492 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:29.572  INFO 2025-06-13 04:09:29,572 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:29.576  INFO 2025-06-13 04:09:29,576 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:09:29.576  INFO 2025-06-13 04:09:29,576 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:09:29.576  INFO 2025-06-13 04:09:29,576 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:09:29.576  INFO 2025-06-13 04:09:29,576 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:09:29.576  INFO 2025-06-13 04:09:29,576 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:09:29.579  INFO 2025-06-13 04:09:29,579 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:09:29.579  INFO 2025-06-13 04:09:29,579 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:09:29.579  INFO 2025-06-13 04:09:29,579 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:09:29.586  INFO 2025-06-13 04:09:29,586 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:09:29.587  INFO 2025-06-13 04:09:29,587 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:09:31.354  INFO 2025-06-13 04:09:31,354 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:31.371  INFO 2025-06-13 04:09:31,371 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Created new draft for tree 1 by editor 3
2025-06-13 04:09:31.380  INFO 2025-06-13 04:09:31,380 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft for tree 1 by editor 3
2025-06-13 04:09:42.358  INFO 2025-06-13 04:09:42,358 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:42.370  INFO 2025-06-13 04:09:42,370 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:42.382  INFO 2025-06-13 04:09:42,382 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:42.441  INFO 2025-06-13 04:09:42,441 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:42.443  INFO 2025-06-13 04:09:42,443 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:42.443  INFO 2025-06-13 04:09:42,443 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:43.367  INFO 2025-06-13 04:09:43,367 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:44.718  INFO 2025-06-13 04:09:44,718 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:44.777  INFO 2025-06-13 04:09:44,777 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:44.817  INFO 2025-06-13 04:09:44,817 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:44.964  INFO 2025-06-13 04:09:44,964 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:09:44.968  INFO 2025-06-13 04:09:44,968 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:09:44.968  INFO 2025-06-13 04:09:44,968 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:09:44.968  INFO 2025-06-13 04:09:44,968 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:09:44.968  INFO 2025-06-13 04:09:44,968 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:09:44.968  INFO 2025-06-13 04:09:44,968 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:09:44.970  INFO 2025-06-13 04:09:44,970 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:09:44.970  INFO 2025-06-13 04:09:44,970 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:09:44.971  INFO 2025-06-13 04:09:44,971 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:09:44.992  INFO 2025-06-13 04:09:44,992 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:09:44.993  INFO 2025-06-13 04:09:44,993 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:10:14.863  INFO 2025-06-13 04:10:14,863 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:14.879  INFO 2025-06-13 04:10:14,879 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Added relation to draft for tree 1 by editor 3
2025-06-13 04:10:22.703  INFO 2025-06-13 04:10:22,703 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:22.713  INFO 2025-06-13 04:10:22,713 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:22.771  INFO 2025-06-13 04:10:22,771 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:22.775  INFO 2025-06-13 04:10:22,775 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:23.777  INFO 2025-06-13 04:10:23,777 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:24.898  INFO 2025-06-13 04:10:24,898 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:24.955  INFO 2025-06-13 04:10:24,955 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:24.993  INFO 2025-06-13 04:10:24,993 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:25.105  INFO 2025-06-13 04:10:25,105 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:25.111  INFO 2025-06-13 04:10:25,111 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:10:25.111  INFO 2025-06-13 04:10:25,111 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:10:25.111  INFO 2025-06-13 04:10:25,111 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:10:25.111  INFO 2025-06-13 04:10:25,111 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:10:25.111  INFO 2025-06-13 04:10:25,111 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:10:25.115  INFO 2025-06-13 04:10:25,115 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:10:25.116  INFO 2025-06-13 04:10:25,116 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:10:25.117  INFO 2025-06-13 04:10:25,117 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:10:25.124  INFO 2025-06-13 04:10:25,124 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:10:25.124  INFO 2025-06-13 04:10:25,124 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:10:28.590  INFO 2025-06-13 04:10:28,590 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:28.608  INFO 2025-06-13 04:10:28,608 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:28.656  INFO 2025-06-13 04:10:28,656 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:28.659  INFO 2025-06-13 04:10:28,659 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:35.158  INFO 2025-06-13 04:10:35,158 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:35.195  INFO 2025-06-13 04:10:35,195 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:35.241  INFO 2025-06-13 04:10:35,241 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:35.385  INFO 2025-06-13 04:10:35,385 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:35.389  INFO 2025-06-13 04:10:35,389 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:10:35.389  INFO 2025-06-13 04:10:35,389 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:10:35.390  INFO 2025-06-13 04:10:35,390 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:10:35.390  INFO 2025-06-13 04:10:35,390 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:10:35.390  INFO 2025-06-13 04:10:35,390 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:10:35.391  INFO 2025-06-13 04:10:35,391 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:10:35.391  INFO 2025-06-13 04:10:35,391 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:10:35.391  INFO 2025-06-13 04:10:35,391 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:10:35.397  INFO 2025-06-13 04:10:35,397 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:10:35.397  INFO 2025-06-13 04:10:35,397 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:10:36.491  INFO 2025-06-13 04:10:36,491 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:36.491  INFO 2025-06-13 04:10:36,491 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:36.565  INFO 2025-06-13 04:10:36,565 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:36.565  INFO 2025-06-13 04:10:36,565 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:37.199  INFO 2025-06-13 04:10:37,199 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:38.553  INFO 2025-06-13 04:10:38,553 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:41.354  INFO 2025-06-13 04:10:41,354 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:41.367  INFO 2025-06-13 04:10:41,367 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:41.418  INFO 2025-06-13 04:10:41,418 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:10:41.421  INFO 2025-06-13 04:10:41,421 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:06.498  INFO 2025-06-13 04:13:06,498 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:06.616  INFO 2025-06-13 04:13:06,616 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:06.745  INFO 2025-06-13 04:13:06,745 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:06.755  INFO 2025-06-13 04:13:06,755 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:06.995  INFO 2025-06-13 04:13:06,995 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:07.009  INFO 2025-06-13 04:13:07,009 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:08.118  INFO 2025-06-13 04:13:08,118 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:08.296  INFO 2025-06-13 04:13:08,296 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:09.553  INFO 2025-06-13 04:13:09,553 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:09.554  INFO 2025-06-13 04:13:09,554 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:09.699  INFO 2025-06-13 04:13:09,699 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:09.752  INFO 2025-06-13 04:13:09,752 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:09.757  INFO 2025-06-13 04:13:09,757 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:09.832  INFO 2025-06-13 04:13:09,832 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:10.744  INFO 2025-06-13 04:13:10,744 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:13.889  INFO 2025-06-13 04:13:13,889 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:13.981  INFO 2025-06-13 04:13:13,981 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:14.088  INFO 2025-06-13 04:13:14,088 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:14.285  INFO 2025-06-13 04:13:14,285 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:14.289  INFO 2025-06-13 04:13:14,289 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:13:14.289  INFO 2025-06-13 04:13:14,289 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:13:14.289  INFO 2025-06-13 04:13:14,289 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:13:14.289  INFO 2025-06-13 04:13:14,289 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:13:14.290  INFO 2025-06-13 04:13:14,290 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:13:14.291  INFO 2025-06-13 04:13:14,291 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:13:14.291  INFO 2025-06-13 04:13:14,291 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:13:14.292  INFO 2025-06-13 04:13:14,292 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:13:14.299  INFO 2025-06-13 04:13:14,299 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:13:14.299  INFO 2025-06-13 04:13:14,299 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:13:21.346  INFO 2025-06-13 04:13:21,346 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:25.074  INFO 2025-06-13 04:13:25,074 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:25.378  INFO 2025-06-13 04:13:25,378 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:25.450  INFO 2025-06-13 04:13:25,450 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:25.612  INFO 2025-06-13 04:13:25,612 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:25.616  INFO 2025-06-13 04:13:25,616 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:13:25.616  INFO 2025-06-13 04:13:25,616 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:13:25.617  INFO 2025-06-13 04:13:25,617 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:13:25.617  INFO 2025-06-13 04:13:25,617 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:13:25.617  INFO 2025-06-13 04:13:25,617 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:13:25.619  INFO 2025-06-13 04:13:25,619 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:13:25.619  INFO 2025-06-13 04:13:25,619 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:13:25.620  INFO 2025-06-13 04:13:25,620 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:13:25.628  INFO 2025-06-13 04:13:25,628 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:13:25.629  INFO 2025-06-13 04:13:25,629 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:13:27.272  INFO 2025-06-13 04:13:27,272 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:27.277  INFO 2025-06-13 04:13:27,277 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:27.462  INFO 2025-06-13 04:13:27,462 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:27.466  INFO 2025-06-13 04:13:27,466 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:28.543  INFO 2025-06-13 04:13:28,543 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:29.086  INFO 2025-06-13 04:13:29,086 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:30.923  INFO 2025-06-13 04:13:30,923 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:31.193  INFO 2025-06-13 04:13:31,193 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:31.241  INFO 2025-06-13 04:13:31,241 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:31.348  INFO 2025-06-13 04:13:31,348 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:31.357  INFO 2025-06-13 04:13:31,357 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:13:31.357  INFO 2025-06-13 04:13:31,357 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:13:31.357  INFO 2025-06-13 04:13:31,357 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:13:31.357  INFO 2025-06-13 04:13:31,357 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:13:31.357  INFO 2025-06-13 04:13:31,357 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:13:31.361  INFO 2025-06-13 04:13:31,361 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:13:31.361  INFO 2025-06-13 04:13:31,361 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:13:31.362  INFO 2025-06-13 04:13:31,362 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:13:31.369  INFO 2025-06-13 04:13:31,369 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:13:31.370  INFO 2025-06-13 04:13:31,370 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:13:40.039  INFO 2025-06-13 04:13:40,039 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:13:58.221  INFO 2025-06-13 04:13:58,221 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 04:13:58.345  INFO 2025-06-13 04:13:58,345 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:13:58.346  INFO 2025-06-13 04:13:58,346 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 04:13:59.793  INFO 2025-06-13 04:13:59,793 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:13:59.893  INFO 2025-06-13 04:13:59,893 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:00.032  INFO 2025-06-13 04:14:00,032 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:00.038  INFO 2025-06-13 04:14:00,038 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:14:00.038  INFO 2025-06-13 04:14:00,038 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:14:00.038  INFO 2025-06-13 04:14:00,038 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:14:00.038  INFO 2025-06-13 04:14:00,038 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:14:00.038  INFO 2025-06-13 04:14:00,038 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 04:14:00.040  INFO 2025-06-13 04:14:00,040 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 04:14:00.041  INFO 2025-06-13 04:14:00,041 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 04:14:00.042  INFO 2025-06-13 04:14:00,042 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 04:14:00.054  INFO 2025-06-13 04:14:00,054 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:14:00.054  INFO 2025-06-13 04:14:00,054 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:14:04.685  INFO 2025-06-13 04:14:04,685 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:04.695  INFO 2025-06-13 04:14:04,695 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:04.746  INFO 2025-06-13 04:14:04,746 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:04.770  INFO 2025-06-13 04:14:04,770 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:04.924  INFO 2025-06-13 04:14:04,924 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:04.926  INFO 2025-06-13 04:14:04,926 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:05.795  INFO 2025-06-13 04:14:05,795 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:55.381  INFO 2025-06-13 04:14:55,381 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:55.482  INFO 2025-06-13 04:14:55,482 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:55.490  INFO 2025-06-13 04:14:55,490 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:55.493  INFO 2025-06-13 04:14:55,493 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:14:55.493  INFO 2025-06-13 04:14:55,493 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:14:55.493  INFO 2025-06-13 04:14:55,493 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:14:55.493  INFO 2025-06-13 04:14:55,493 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:14:55.494  INFO 2025-06-13 04:14:55,494 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 04:14:55.495  INFO 2025-06-13 04:14:55,495 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 04:14:55.495  INFO 2025-06-13 04:14:55,495 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 04:14:55.497  INFO 2025-06-13 04:14:55,497 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 04:14:55.502  INFO 2025-06-13 04:14:55,502 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:14:55.502  INFO 2025-06-13 04:14:55,502 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:14:59.276  INFO 2025-06-13 04:14:59,276 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:59.372  INFO 2025-06-13 04:14:59,372 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:59.438  INFO 2025-06-13 04:14:59,438 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:14:59.493  INFO 2025-06-13 04:14:59,493 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:00.920  INFO 2025-06-13 04:15:00,920 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:00.992  INFO 2025-06-13 04:15:00,992 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:01.045  INFO 2025-06-13 04:15:01,045 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:01.221  INFO 2025-06-13 04:15:01,221 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:01.223  INFO 2025-06-13 04:15:01,223 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:15:01.224  INFO 2025-06-13 04:15:01,224 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:15:01.224  INFO 2025-06-13 04:15:01,224 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:15:01.224  INFO 2025-06-13 04:15:01,224 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:15:01.224  INFO 2025-06-13 04:15:01,224 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 04:15:01.225  INFO 2025-06-13 04:15:01,225 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 04:15:01.225  INFO 2025-06-13 04:15:01,225 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 1000)
2025-06-13 04:15:01.226  INFO 2025-06-13 04:15:01,226 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=1000
2025-06-13 04:15:01.232  INFO 2025-06-13 04:15:01,232 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:15:01.232  INFO 2025-06-13 04:15:01,232 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:15:05.293  INFO 2025-06-13 04:15:05,293 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:05.342  INFO 2025-06-13 04:15:05,342 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:05.373  INFO 2025-06-13 04:15:05,373 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:08.503  INFO 2025-06-13 04:15:08,503 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:08.531  INFO 2025-06-13 04:15:08,531 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:08.575  INFO 2025-06-13 04:15:08,575 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:08.601  INFO 2025-06-13 04:15:08,601 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:09.598  INFO 2025-06-13 04:15:09,598 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:09.657  INFO 2025-06-13 04:15:09,657 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:09.709  INFO 2025-06-13 04:15:09,709 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:09.816  INFO 2025-06-13 04:15:09,816 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:09.820  INFO 2025-06-13 04:15:09,820 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:15:09.821  INFO 2025-06-13 04:15:09,821 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:15:09.821  INFO 2025-06-13 04:15:09,821 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:15:09.821  INFO 2025-06-13 04:15:09,821 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:15:09.821  INFO 2025-06-13 04:15:09,821 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 04:15:09.822  INFO 2025-06-13 04:15:09,822 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 04:15:09.822  INFO 2025-06-13 04:15:09,822 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 1000)
2025-06-13 04:15:09.822  INFO 2025-06-13 04:15:09,822 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=1000
2025-06-13 04:15:09.827  INFO 2025-06-13 04:15:09,827 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:15:09.827  INFO 2025-06-13 04:15:09,827 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:15:15.825  INFO 2025-06-13 04:15:15,825 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:15.837  INFO 2025-06-13 04:15:15,837 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:15.926  INFO 2025-06-13 04:15:15,926 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:15.936  INFO 2025-06-13 04:15:15,936 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:16.782  INFO 2025-06-13 04:15:16,782 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:16.785  INFO 2025-06-13 04:15:16,785 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:15:16.786  INFO 2025-06-13 04:15:16,786 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:15:16.786  INFO 2025-06-13 04:15:16,786 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:15:16.786  INFO 2025-06-13 04:15:16,786 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:15:16.786  INFO 2025-06-13 04:15:16,786 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 04:15:16.786  INFO 2025-06-13 04:15:16,786 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 04:15:16.786  INFO 2025-06-13 04:15:16,786 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 04:15:16.786  INFO 2025-06-13 04:15:16,786 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 04:15:16.789  INFO 2025-06-13 04:15:16,789 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:15:16.789  INFO 2025-06-13 04:15:16,789 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:15:16.967  INFO 2025-06-13 04:15:16,967 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:15:16.969  INFO 2025-06-13 04:15:16,969 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:15:16.969  INFO 2025-06-13 04:15:16,969 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:15:16.969  INFO 2025-06-13 04:15:16,969 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:15:16.969  INFO 2025-06-13 04:15:16,969 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:15:16.969  INFO 2025-06-13 04:15:16,969 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 04:15:16.970  INFO 2025-06-13 04:15:16,970 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 04:15:16.970  INFO 2025-06-13 04:15:16,970 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 04:15:16.971  INFO 2025-06-13 04:15:16,971 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 04:15:16.986  INFO 2025-06-13 04:15:16,986 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:15:16.986  INFO 2025-06-13 04:15:16,986 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:15:24.970  INFO 2025-06-13 04:15:24,970 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 04:15:25.051  INFO 2025-06-13 04:15:25,051 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:25.052  INFO 2025-06-13 04:15:25,052 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 04:15:25.525  INFO 2025-06-13 04:15:25,525 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:25.668  INFO 2025-06-13 04:15:25,668 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:25.722  INFO 2025-06-13 04:15:25,722 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:25.726  INFO 2025-06-13 04:15:25,726 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:15:25.726  INFO 2025-06-13 04:15:25,726 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:15:25.726  INFO 2025-06-13 04:15:25,726 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:15:25.726  INFO 2025-06-13 04:15:25,726 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:15:25.726  INFO 2025-06-13 04:15:25,726 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:15:25.727  INFO 2025-06-13 04:15:25,727 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:15:25.727  INFO 2025-06-13 04:15:25,727 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 04:15:25.728  INFO 2025-06-13 04:15:25,728 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 04:15:25.731  INFO 2025-06-13 04:15:25,731 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:15:25.731  INFO 2025-06-13 04:15:25,731 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:15:27.989  INFO 2025-06-13 04:15:27,989 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:28.036  INFO 2025-06-13 04:15:28,036 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:28.138  INFO 2025-06-13 04:15:28,138 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:28.173  INFO 2025-06-13 04:15:28,173 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:29.005  INFO 2025-06-13 04:15:29,005 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:29.034  INFO 2025-06-13 04:15:29,034 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:29.074  INFO 2025-06-13 04:15:29,074 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:29.089  INFO 2025-06-13 04:15:29,089 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:29.164  INFO 2025-06-13 04:15:29,164 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:29.169  INFO 2025-06-13 04:15:29,169 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:30.104  INFO 2025-06-13 04:15:30,104 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:30.287  INFO 2025-06-13 04:15:30,287 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:30.804  INFO 2025-06-13 04:15:30,804 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:31.334  INFO 2025-06-13 04:15:31,334 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:31.335  INFO 2025-06-13 04:15:31,335 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:31.404  INFO 2025-06-13 04:15:31,404 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:31.407  INFO 2025-06-13 04:15:31,407 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:31.516  INFO 2025-06-13 04:15:31,516 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:31.550  INFO 2025-06-13 04:15:31,550 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:32.602  INFO 2025-06-13 04:15:32,602 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:32.644  INFO 2025-06-13 04:15:32,644 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:32.691  INFO 2025-06-13 04:15:32,691 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:32.789  INFO 2025-06-13 04:15:32,789 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:32.791  INFO 2025-06-13 04:15:32,791 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:15:32.791  INFO 2025-06-13 04:15:32,791 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:15:32.791  INFO 2025-06-13 04:15:32,791 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:15:32.791  INFO 2025-06-13 04:15:32,791 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:15:32.791  INFO 2025-06-13 04:15:32,791 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:15:32.792  INFO 2025-06-13 04:15:32,792 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:15:32.792  INFO 2025-06-13 04:15:32,792 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:15:32.792  INFO 2025-06-13 04:15:32,792 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:15:32.797  INFO 2025-06-13 04:15:32,797 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:15:32.797  INFO 2025-06-13 04:15:32,797 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:15:35.671  INFO 2025-06-13 04:15:35,671 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:15:35.678  INFO 2025-06-13 04:15:35,678 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft for tree 1 by editor 3
2025-06-13 04:24:34.692  INFO 2025-06-13 04:24:34,692 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:24:34.802  INFO 2025-06-13 04:24:34,802 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:24:34.805  INFO 2025-06-13 04:24:34,805 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:24:34.805  INFO 2025-06-13 04:24:34,805 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:24:34.805  INFO 2025-06-13 04:24:34,805 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:24:34.805  INFO 2025-06-13 04:24:34,805 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:24:34.805  INFO 2025-06-13 04:24:34,805 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:24:34.806  INFO 2025-06-13 04:24:34,806 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:24:34.806  INFO 2025-06-13 04:24:34,806 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 04:24:34.807  INFO 2025-06-13 04:24:34,807 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 04:24:34.811  INFO 2025-06-13 04:24:34,811 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:24:34.811  INFO 2025-06-13 04:24:34,811 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:24:34.814  INFO 2025-06-13 04:24:34,814 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:24:38.091  INFO 2025-06-13 04:24:38,091 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:24:38.177  INFO 2025-06-13 04:24:38,177 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:24:38.233  INFO 2025-06-13 04:24:38,233 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:24:38.337  INFO 2025-06-13 04:24:38,337 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:24:39.648  INFO 2025-06-13 04:24:39,648 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:24:49.289  INFO 2025-06-13 04:24:49,289 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:24:49.360  INFO 2025-06-13 04:24:49,360 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:24:49.399  INFO 2025-06-13 04:24:49,399 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:24:49.601  INFO 2025-06-13 04:24:49,601 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:24:49.605  INFO 2025-06-13 04:24:49,605 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:24:49.605  INFO 2025-06-13 04:24:49,605 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:24:49.605  INFO 2025-06-13 04:24:49,605 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:24:49.605  INFO 2025-06-13 04:24:49,605 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:24:49.605  INFO 2025-06-13 04:24:49,605 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:24:49.606  INFO 2025-06-13 04:24:49,606 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:24:49.606  INFO 2025-06-13 04:24:49,606 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:24:49.606  INFO 2025-06-13 04:24:49,606 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:24:49.609  INFO 2025-06-13 04:24:49,609 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:24:49.609  INFO 2025-06-13 04:24:49,609 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:24:56.068  INFO 2025-06-13 04:24:56,068 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:24:56.076  INFO 2025-06-13 04:24:56,076 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Removed memorial 9 from draft for tree 1 by editor 3
2025-06-13 04:24:56.116  INFO 2025-06-13 04:24:56,116 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:24:56.154  INFO 2025-06-13 04:24:56,154 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:00.399  INFO 2025-06-13 04:25:00,399 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:00.491  INFO 2025-06-13 04:25:00,491 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:00.555  INFO 2025-06-13 04:25:00,555 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:00.641  INFO 2025-06-13 04:25:00,641 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:00.644  INFO 2025-06-13 04:25:00,644 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:25:00.644  INFO 2025-06-13 04:25:00,644 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:25:00.644  INFO 2025-06-13 04:25:00,644 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:25:00.644  INFO 2025-06-13 04:25:00,644 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:25:00.644  INFO 2025-06-13 04:25:00,644 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:25:00.645  INFO 2025-06-13 04:25:00,645 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:25:00.646  INFO 2025-06-13 04:25:00,646 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:25:00.646  INFO 2025-06-13 04:25:00,646 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:25:00.650  INFO 2025-06-13 04:25:00,650 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:25:00.651  INFO 2025-06-13 04:25:00,651 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:25:01.520  INFO 2025-06-13 04:25:01,520 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:01.528  INFO 2025-06-13 04:25:01,528 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft for tree 1 by editor 3
2025-06-13 04:25:01.555  INFO 2025-06-13 04:25:01,555 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:05.596  INFO 2025-06-13 04:25:05,596 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:05.621  INFO 2025-06-13 04:25:05,621 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:05.625  INFO 2025-06-13 04:25:05,625 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:05.721  INFO 2025-06-13 04:25:05,721 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:05.725  INFO 2025-06-13 04:25:05,725 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:05.750  INFO 2025-06-13 04:25:05,750 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:07.774  INFO 2025-06-13 04:25:07,774 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:08.535  INFO 2025-06-13 04:25:08,535 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:10.882  INFO 2025-06-13 04:25:10,882 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:16.101  INFO 2025-06-13 04:25:16,101 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:16.117  INFO 2025-06-13 04:25:16,117 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:16.155  INFO 2025-06-13 04:25:16,155 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:16.163  INFO 2025-06-13 04:25:16,163 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:19.356  INFO 2025-06-13 04:25:19,356 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:20.150  INFO 2025-06-13 04:25:20,150 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:20.177  INFO 2025-06-13 04:25:20,177 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:28.391  INFO 2025-06-13 04:25:28,391 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:28.397  INFO 2025-06-13 04:25:28,397 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:28.451  INFO 2025-06-13 04:25:28,451 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:28.453  INFO 2025-06-13 04:25:28,453 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:28.539  INFO 2025-06-13 04:25:28,539 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:28.573  INFO 2025-06-13 04:25:28,573 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:35.380  INFO 2025-06-13 04:25:35,380 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:35.383  INFO 2025-06-13 04:25:35,383 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:35.441  INFO 2025-06-13 04:25:35,441 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:35.441  INFO 2025-06-13 04:25:35,441 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:35.535  INFO 2025-06-13 04:25:35,535 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:35.572  INFO 2025-06-13 04:25:35,572 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:36.400  INFO 2025-06-13 04:25:36,400 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:36.454  INFO 2025-06-13 04:25:36,454 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:36.491  INFO 2025-06-13 04:25:36,491 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:36.614  INFO 2025-06-13 04:25:36,614 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:36.618  INFO 2025-06-13 04:25:36,618 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:25:36.618  INFO 2025-06-13 04:25:36,618 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:25:36.618  INFO 2025-06-13 04:25:36,618 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:25:36.618  INFO 2025-06-13 04:25:36,618 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:25:36.618  INFO 2025-06-13 04:25:36,618 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:25:36.619  INFO 2025-06-13 04:25:36,619 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:25:36.619  INFO 2025-06-13 04:25:36,619 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:25:36.619  INFO 2025-06-13 04:25:36,619 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:25:36.623  INFO 2025-06-13 04:25:36,623 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:25:36.623  INFO 2025-06-13 04:25:36,623 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:25:51.810  INFO 2025-06-13 04:25:51,810 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:51.819  INFO 2025-06-13 04:25:51,819 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Added relation to draft for tree 1 by editor 3
2025-06-13 04:25:51.859  INFO 2025-06-13 04:25:51,859 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:54.277  INFO 2025-06-13 04:25:54,277 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:54.305  INFO 2025-06-13 04:25:54,305 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:54.358  INFO 2025-06-13 04:25:54,358 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:54.360  INFO 2025-06-13 04:25:54,360 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:56.116  INFO 2025-06-13 04:25:56,116 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:25:57.969  INFO 2025-06-13 04:25:57,969 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:26:01.408  INFO 2025-06-13 04:26:01,408 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:26:01.420  INFO 2025-06-13 04:26:01,420 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:26:01.469  INFO 2025-06-13 04:26:01,469 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:26:01.472  INFO 2025-06-13 04:26:01,472 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:26:02.152  INFO 2025-06-13 04:26:02,152 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:26:02.766  INFO 2025-06-13 04:26:02,766 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:26:04.046  INFO 2025-06-13 04:26:04,046 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:26:06.001  INFO 2025-06-13 04:26:06,001 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:26:06.017  INFO 2025-06-13 04:26:06,017 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:26:06.054  INFO 2025-06-13 04:26:06,054 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:26:06.062  INFO 2025-06-13 04:26:06,062 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:26:13.723  INFO 2025-06-13 04:26:13,723 --- [nio-8080-exec-5] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 04:26:13.813  INFO 2025-06-13 04:26:13,813 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:26:13.815  INFO 2025-06-13 04:26:13,815 --- [nio-8080-exec-5] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 04:26:14.384  INFO 2025-06-13 04:26:14,384 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:26:14.387  INFO 2025-06-13 04:26:14,387 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:26:14.387  INFO 2025-06-13 04:26:14,387 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:26:14.387  INFO 2025-06-13 04:26:14,387 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:26:14.387  INFO 2025-06-13 04:26:14,387 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:26:14.387  INFO 2025-06-13 04:26:14,387 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 04:26:14.388  INFO 2025-06-13 04:26:14,388 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 04:26:14.388  INFO 2025-06-13 04:26:14,388 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 04:26:14.388  INFO 2025-06-13 04:26:14,388 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 04:26:14.393  INFO 2025-06-13 04:26:14,393 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:26:14.393  INFO 2025-06-13 04:26:14,393 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:26:14.401  INFO 2025-06-13 04:26:14,401 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:26:14.418  INFO 2025-06-13 04:26:14,418 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:26:17.476  INFO 2025-06-13 04:26:17,476 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:26:17.526  INFO 2025-06-13 04:26:17,526 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:26:17.634  INFO 2025-06-13 04:26:17,634 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:26:17.688  INFO 2025-06-13 04:26:17,688 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:26:18.352  INFO 2025-06-13 04:26:18,352 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:26:19.235  INFO 2025-06-13 04:26:19,235 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:26:20.901  INFO 2025-06-13 04:26:20,901 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:26:23.622  INFO 2025-06-13 04:26:23,622 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:26:23.637  INFO 2025-06-13 04:26:23,637 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:26:23.682  INFO 2025-06-13 04:26:23,682 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:26:23.686  INFO 2025-06-13 04:26:23,686 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:29:31.384  INFO 2025-06-13 04:29:31,384 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 04:29:31.458  INFO 2025-06-13 04:29:31,458 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 04:29:31.466  INFO 2025-06-13 04:29:31,466 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 04:38:57.008  INFO 2025-06-13 04:38:57,008 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 23628 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 04:38:57.012  INFO 2025-06-13 04:38:57,012 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 04:38:58.194  INFO 2025-06-13 04:38:58,194 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 04:38:58.288  INFO 2025-06-13 04:38:58,288 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 86 ms. Found 11 JPA repository interfaces.
2025-06-13 04:39:00.078  INFO 2025-06-13 04:39:00,078 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 04:39:00.120  INFO 2025-06-13 04:39:00,120 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 04:39:00.121  INFO 2025-06-13 04:39:00,121 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 04:39:00.328  INFO 2025-06-13 04:39:00,328 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 04:39:00.329  INFO 2025-06-13 04:39:00,329 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3249 ms
2025-06-13 04:39:00.408  INFO 2025-06-13 04:39:00,408 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 04:39:00.854  INFO 2025-06-13 04:39:00,854 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 04:39:00.857  INFO 2025-06-13 04:39:00,857 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 04:39:00.877  INFO 2025-06-13 04:39:00,877 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 04:39:01.081  INFO 2025-06-13 04:39:01,081 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 04:39:01.306  INFO 2025-06-13 04:39:01,306 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 04:39:01.416  INFO 2025-06-13 04:39:01,416 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 04:39:02.219  INFO 2025-06-13 04:39:02,219 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 04:39:04.820  INFO 2025-06-13 04:39:04,820 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 04:39:04.936  INFO 2025-06-13 04:39:04,936 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 04:39:05.498  INFO 2025-06-13 04:39:05,498 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 04:39:09.021  WARN 2025-06-13 04:39:09,021 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 04:39:09.065  INFO 2025-06-13 04:39:09,065 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 04:39:09.070  INFO 2025-06-13 04:39:09,070 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 04:39:09.072  WARN 2025-06-13 04:39:09,072 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 04:39:09.337  INFO 2025-06-13 04:39:09,337 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 04:39:09.372  INFO 2025-06-13 04:39:09,372 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 04:39:09.842  INFO 2025-06-13 04:39:09,842 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 04:39:09.849  INFO 2025-06-13 04:39:09,849 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 13.769 seconds (process running for 15.173)
2025-06-13 04:39:09.856  INFO 2025-06-13 04:39:09,856 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 04:39:09.958  INFO 2025-06-13 04:39:09,958 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 04:39:09.960  INFO 2025-06-13 04:39:09,960 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 04:39:10.208  INFO 2025-06-13 04:39:10,208 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 04:39:10.216  INFO 2025-06-13 04:39:10,216 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 04:39:10.274  INFO 2025-06-13 04:39:10,274 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 04:39:10.293  INFO 2025-06-13 04:39:10,293 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 04:39:10.375  INFO 2025-06-13 04:39:10,375 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 04:39:10.390  INFO 2025-06-13 04:39:10,390 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 04:39:10.390  INFO 2025-06-13 04:39:10,390 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 04:39:19.700  INFO 2025-06-13 04:39:19,700 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 04:39:19.707  INFO 2025-06-13 04:39:19,707 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 04:39:19.787  INFO 2025-06-13 04:39:19,787 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 04:39:26.472  INFO 2025-06-13 04:39:26,472 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 3320 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 04:39:26.477  INFO 2025-06-13 04:39:26,477 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 04:39:27.904  INFO 2025-06-13 04:39:27,904 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 04:39:28.044  INFO 2025-06-13 04:39:28,044 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 125 ms. Found 11 JPA repository interfaces.
2025-06-13 04:39:29.473  INFO 2025-06-13 04:39:29,473 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 04:39:29.507  INFO 2025-06-13 04:39:29,507 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 04:39:29.508  INFO 2025-06-13 04:39:29,508 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 04:39:29.604  INFO 2025-06-13 04:39:29,604 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 04:39:29.605  INFO 2025-06-13 04:39:29,605 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3054 ms
2025-06-13 04:39:29.646  INFO 2025-06-13 04:39:29,646 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 04:39:29.864  INFO 2025-06-13 04:39:29,864 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 04:39:29.866  INFO 2025-06-13 04:39:29,866 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 04:39:29.878  INFO 2025-06-13 04:39:29,878 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 04:39:30.032  INFO 2025-06-13 04:39:30,032 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 04:39:30.163  INFO 2025-06-13 04:39:30,163 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 04:39:30.247  INFO 2025-06-13 04:39:30,247 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 04:39:31.108  INFO 2025-06-13 04:39:31,108 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 04:39:33.006  INFO 2025-06-13 04:39:33,006 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 04:39:33.119  INFO 2025-06-13 04:39:33,119 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 04:39:33.854  INFO 2025-06-13 04:39:33,854 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 04:39:37.333  WARN 2025-06-13 04:39:37,333 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 04:39:37.379  INFO 2025-06-13 04:39:37,379 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 04:39:37.382  INFO 2025-06-13 04:39:37,382 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 04:39:37.384  WARN 2025-06-13 04:39:37,384 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 04:39:37.735  INFO 2025-06-13 04:39:37,735 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 04:39:37.783  INFO 2025-06-13 04:39:37,783 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 04:39:38.306  INFO 2025-06-13 04:39:38,306 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 04:39:38.318  INFO 2025-06-13 04:39:38,318 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 12.697 seconds (process running for 13.956)
2025-06-13 04:39:38.542  INFO 2025-06-13 04:39:38,542 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 04:39:38.544  INFO 2025-06-13 04:39:38,544 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 04:39:38.795  INFO 2025-06-13 04:39:38,795 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 04:39:38.802  INFO 2025-06-13 04:39:38,802 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 04:39:38.846  INFO 2025-06-13 04:39:38,846 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 04:39:38.863  INFO 2025-06-13 04:39:38,863 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 04:39:38.915  INFO 2025-06-13 04:39:38,915 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 04:39:38.927  INFO 2025-06-13 04:39:38,927 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 04:39:38.927  INFO 2025-06-13 04:39:38,927 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 04:39:38.930  INFO 2025-06-13 04:39:38,930 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 04:43:58.026  INFO 2025-06-13 04:43:58,026 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 04:43:58.026  INFO 2025-06-13 04:43:58,026 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 04:43:58.029  INFO 2025-06-13 04:43:58,029 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-06-13 04:43:58.167  INFO 2025-06-13 04:43:58,167 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 04:43:58.303  INFO 2025-06-13 04:43:58,303 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:43:58.400  INFO 2025-06-13 04:43:58,400 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 04:43:59.960  INFO 2025-06-13 04:43:59,960 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:00.109  INFO 2025-06-13 04:44:00,109 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:00.153  INFO 2025-06-13 04:44:00,153 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:00.161  INFO 2025-06-13 04:44:00,161 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:44:00.162  INFO 2025-06-13 04:44:00,162 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:44:00.162  INFO 2025-06-13 04:44:00,162 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:44:00.162  INFO 2025-06-13 04:44:00,162 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:44:00.162  INFO 2025-06-13 04:44:00,162 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:44:00.166  INFO 2025-06-13 04:44:00,166 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:44:00.166  INFO 2025-06-13 04:44:00,166 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 04:44:00.171  INFO 2025-06-13 04:44:00,171 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 04:44:00.206  INFO 2025-06-13 04:44:00,206 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:44:00.207  INFO 2025-06-13 04:44:00,207 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:44:02.603  INFO 2025-06-13 04:44:02,603 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:02.699  INFO 2025-06-13 04:44:02,699 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:02.813  INFO 2025-06-13 04:44:02,813 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:02.853  INFO 2025-06-13 04:44:02,853 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:02.939  INFO 2025-06-13 04:44:02,939 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:03.017  INFO 2025-06-13 04:44:03,017 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:03.811  INFO 2025-06-13 04:44:03,811 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:05.042  INFO 2025-06-13 04:44:05,042 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:12.625  INFO 2025-06-13 04:44:12,625 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:12.700  INFO 2025-06-13 04:44:12,700 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 04:44:12.700  INFO 2025-06-13 04:44:12,700 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 04:44:14.425  INFO 2025-06-13 04:44:14,425 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:14.433  INFO 2025-06-13 04:44:14,433 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:44:14.434  INFO 2025-06-13 04:44:14,434 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:44:14.434  INFO 2025-06-13 04:44:14,434 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:44:14.434  INFO 2025-06-13 04:44:14,434 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:44:14.434  INFO 2025-06-13 04:44:14,434 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:44:14.436  INFO 2025-06-13 04:44:14,436 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:44:14.437  INFO 2025-06-13 04:44:14,437 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 04:44:14.437  INFO 2025-06-13 04:44:14,437 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 04:44:14.445  INFO 2025-06-13 04:44:14,445 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:44:14.445  INFO 2025-06-13 04:44:14,445 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:44:14.627  INFO 2025-06-13 04:44:14,627 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:14.635  INFO 2025-06-13 04:44:14,635 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:44:14.636  INFO 2025-06-13 04:44:14,636 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:44:14.636  INFO 2025-06-13 04:44:14,636 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:44:14.636  INFO 2025-06-13 04:44:14,636 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:44:14.636  INFO 2025-06-13 04:44:14,636 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:44:14.638  INFO 2025-06-13 04:44:14,638 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:44:14.639  INFO 2025-06-13 04:44:14,639 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 04:44:14.639  INFO 2025-06-13 04:44:14,639 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 04:44:14.663  INFO 2025-06-13 04:44:14,663 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:44:14.663  INFO 2025-06-13 04:44:14,663 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 04:44:25.276  INFO 2025-06-13 04:44:25,276 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:25.289  INFO 2025-06-13 04:44:25,289 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:44:25.290  INFO 2025-06-13 04:44:25,290 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:44:25.290  INFO 2025-06-13 04:44:25,290 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:44:25.290  INFO 2025-06-13 04:44:25,290 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:44:25.292  INFO 2025-06-13 04:44:25,292 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:44:25.621  INFO 2025-06-13 04:44:25,621 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:25.626  INFO 2025-06-13 04:44:25,626 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:44:25.626  INFO 2025-06-13 04:44:25,626 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:44:25.626  INFO 2025-06-13 04:44:25,626 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:44:25.626  INFO 2025-06-13 04:44:25,626 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:44:25.626  INFO 2025-06-13 04:44:25,626 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:44:25.628  INFO 2025-06-13 04:44:25,628 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:44:25.628  INFO 2025-06-13 04:44:25,628 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 04:44:25.629  INFO 2025-06-13 04:44:25,629 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 04:44:25.633  INFO 2025-06-13 04:44:25,633 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:44:25.642  INFO 2025-06-13 04:44:25,642 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:44:25.643  INFO 2025-06-13 04:44:25,643 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:44:33.505  INFO 2025-06-13 04:44:33,505 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 04:44:33.608  INFO 2025-06-13 04:44:33,608 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:44:33.610  INFO 2025-06-13 04:44:33,610 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 04:44:33.983  INFO 2025-06-13 04:44:33,983 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:44:34.201  INFO 2025-06-13 04:44:34,201 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:44:34.206  INFO 2025-06-13 04:44:34,206 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:44:34.206  INFO 2025-06-13 04:44:34,206 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:44:34.206  INFO 2025-06-13 04:44:34,206 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:44:34.206  INFO 2025-06-13 04:44:34,206 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:44:34.206  INFO 2025-06-13 04:44:34,206 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 04:44:34.208  INFO 2025-06-13 04:44:34,208 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 04:44:34.208  INFO 2025-06-13 04:44:34,208 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 04:44:34.209  INFO 2025-06-13 04:44:34,209 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 04:44:34.219  INFO 2025-06-13 04:44:34,219 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:44:34.219  INFO 2025-06-13 04:44:34,219 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:44:34.273  INFO 2025-06-13 04:44:34,273 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:44:37.231  INFO 2025-06-13 04:44:37,231 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:44:37.231  INFO 2025-06-13 04:44:37,231 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:44:37.325  INFO 2025-06-13 04:44:37,325 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:44:37.325  INFO 2025-06-13 04:44:37,325 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:44:37.428  INFO 2025-06-13 04:44:37,428 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:44:37.434  INFO 2025-06-13 04:44:37,434 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:44:40.222  INFO 2025-06-13 04:44:40,222 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:44:40.246  INFO 2025-06-13 04:44:40,246 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 04:44:40.246  INFO 2025-06-13 04:44:40,246 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 04:44:40.294  INFO 2025-06-13 04:44:40,294 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:45:13.911  INFO 2025-06-13 04:45:13,911 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 04:45:14.011  INFO 2025-06-13 04:45:14,011 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:45:14.013  INFO 2025-06-13 04:45:14,013 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 04:45:14.812  INFO 2025-06-13 04:45:14,812 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:45:15.009  INFO 2025-06-13 04:45:15,009 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:45:15.046  INFO 2025-06-13 04:45:15,046 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:45:15.052  INFO 2025-06-13 04:45:15,052 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:45:15.052  INFO 2025-06-13 04:45:15,052 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:45:15.052  INFO 2025-06-13 04:45:15,052 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:45:15.052  INFO 2025-06-13 04:45:15,052 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:45:15.052  INFO 2025-06-13 04:45:15,052 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:45:15.055  INFO 2025-06-13 04:45:15,055 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:45:15.055  INFO 2025-06-13 04:45:15,055 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 04:45:15.056  INFO 2025-06-13 04:45:15,056 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 04:45:15.067  INFO 2025-06-13 04:45:15,067 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:45:15.067  INFO 2025-06-13 04:45:15,067 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:47:38.016  INFO 2025-06-13 04:47:38,016 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:38.082  INFO 2025-06-13 04:47:38,082 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:38.143  INFO 2025-06-13 04:47:38,143 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:38.168  INFO 2025-06-13 04:47:38,168 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:38.229  INFO 2025-06-13 04:47:38,229 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:38.309  INFO 2025-06-13 04:47:38,309 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:39.167  INFO 2025-06-13 04:47:39,167 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:41.078  INFO 2025-06-13 04:47:41,078 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:41.219  INFO 2025-06-13 04:47:41,219 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:41.400  INFO 2025-06-13 04:47:41,400 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:41.628  INFO 2025-06-13 04:47:41,628 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:41.634  INFO 2025-06-13 04:47:41,634 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:47:41.634  INFO 2025-06-13 04:47:41,634 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:47:41.634  INFO 2025-06-13 04:47:41,634 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:47:41.634  INFO 2025-06-13 04:47:41,634 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:47:41.634  INFO 2025-06-13 04:47:41,634 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:47:41.639  INFO 2025-06-13 04:47:41,639 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:47:41.639  INFO 2025-06-13 04:47:41,639 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:47:41.639  INFO 2025-06-13 04:47:41,639 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:47:41.647  INFO 2025-06-13 04:47:41,647 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:47:41.647  INFO 2025-06-13 04:47:41,647 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:47:44.372  INFO 2025-06-13 04:47:44,372 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:44.400  INFO 2025-06-13 04:47:44,400 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Created new draft for tree 1 by editor 3
2025-06-13 04:47:44.415  INFO 2025-06-13 04:47:44,415 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft for tree 1 by editor 3
2025-06-13 04:47:44.450  INFO 2025-06-13 04:47:44,450 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:47.487  INFO 2025-06-13 04:47:47,487 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:47.504  INFO 2025-06-13 04:47:47,504 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:47.562  INFO 2025-06-13 04:47:47,562 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:47.565  INFO 2025-06-13 04:47:47,565 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:47.713  INFO 2025-06-13 04:47:47,713 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:47.714  INFO 2025-06-13 04:47:47,714 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:49.124  INFO 2025-06-13 04:47:49,124 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:51.187  INFO 2025-06-13 04:47:51,187 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:51.229  INFO 2025-06-13 04:47:51,229 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:51.299  INFO 2025-06-13 04:47:51,299 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:51.956  INFO 2025-06-13 04:47:51,956 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:55.246  INFO 2025-06-13 04:47:55,246 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:56.438  INFO 2025-06-13 04:47:56,438 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:56.491  INFO 2025-06-13 04:47:56,491 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:56.555  INFO 2025-06-13 04:47:56,555 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:56.837  INFO 2025-06-13 04:47:56,837 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:47:56.841  INFO 2025-06-13 04:47:56,841 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:47:56.841  INFO 2025-06-13 04:47:56,841 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:47:56.841  INFO 2025-06-13 04:47:56,841 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:47:56.841  INFO 2025-06-13 04:47:56,841 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:47:56.841  INFO 2025-06-13 04:47:56,841 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:47:56.844  INFO 2025-06-13 04:47:56,844 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:47:56.844  INFO 2025-06-13 04:47:56,844 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:47:56.845  INFO 2025-06-13 04:47:56,845 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:47:56.853  INFO 2025-06-13 04:47:56,853 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:47:56.853  INFO 2025-06-13 04:47:56,853 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:48:01.116  INFO 2025-06-13 04:48:01,116 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:01.139  INFO 2025-06-13 04:48:01,139 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:01.229  INFO 2025-06-13 04:48:01,229 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:01.233  INFO 2025-06-13 04:48:01,233 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:01.308  INFO 2025-06-13 04:48:01,308 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:01.351  INFO 2025-06-13 04:48:01,351 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:07.356  INFO 2025-06-13 04:48:07,356 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 04:48:07.462  INFO 2025-06-13 04:48:07,462 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:48:07.463  INFO 2025-06-13 04:48:07,463 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 04:48:08.065  INFO 2025-06-13 04:48:08,065 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:48:08.103  INFO 2025-06-13 04:48:08,103 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:48:08.107  INFO 2025-06-13 04:48:08,107 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:48:08.107  INFO 2025-06-13 04:48:08,107 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:48:08.107  INFO 2025-06-13 04:48:08,107 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:48:08.107  INFO 2025-06-13 04:48:08,107 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:48:08.107  INFO 2025-06-13 04:48:08,107 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 04:48:08.109  INFO 2025-06-13 04:48:08,109 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 04:48:08.109  INFO 2025-06-13 04:48:08,109 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 04:48:08.110  INFO 2025-06-13 04:48:08,110 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 04:48:08.118  INFO 2025-06-13 04:48:08,118 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:48:08.118  INFO 2025-06-13 04:48:08,118 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 04:48:08.130  INFO 2025-06-13 04:48:08,130 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:48:10.008  INFO 2025-06-13 04:48:10,008 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:48:10.097  INFO 2025-06-13 04:48:10,097 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:48:10.169  INFO 2025-06-13 04:48:10,169 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:48:10.191  INFO 2025-06-13 04:48:10,191 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:48:10.273  INFO 2025-06-13 04:48:10,273 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:48:10.354  INFO 2025-06-13 04:48:10,354 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:48:10.773  INFO 2025-06-13 04:48:10,773 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:48:13.324  INFO 2025-06-13 04:48:13,324 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:48:13.393  INFO 2025-06-13 04:48:13,393 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:48:13.449  INFO 2025-06-13 04:48:13,449 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 04:48:19.620  INFO 2025-06-13 04:48:19,620 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 04:48:19.711  INFO 2025-06-13 04:48:19,711 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:19.712  INFO 2025-06-13 04:48:19,712 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 04:48:20.128  INFO 2025-06-13 04:48:20,128 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:20.241  INFO 2025-06-13 04:48:20,241 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:20.306  INFO 2025-06-13 04:48:20,306 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:20.309  INFO 2025-06-13 04:48:20,309 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:48:20.310  INFO 2025-06-13 04:48:20,310 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:48:20.310  INFO 2025-06-13 04:48:20,310 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:48:20.310  INFO 2025-06-13 04:48:20,310 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:48:20.310  INFO 2025-06-13 04:48:20,310 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:48:20.312  INFO 2025-06-13 04:48:20,312 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:48:20.312  INFO 2025-06-13 04:48:20,312 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 04:48:20.312  INFO 2025-06-13 04:48:20,312 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 04:48:20.320  INFO 2025-06-13 04:48:20,320 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:48:20.320  INFO 2025-06-13 04:48:20,320 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:48:22.540  INFO 2025-06-13 04:48:22,540 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:22.616  INFO 2025-06-13 04:48:22,616 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:22.701  INFO 2025-06-13 04:48:22,701 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:22.715  INFO 2025-06-13 04:48:22,715 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:22.772  INFO 2025-06-13 04:48:22,772 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:22.881  INFO 2025-06-13 04:48:22,881 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:41.476  INFO 2025-06-13 04:48:41,476 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:42.296  INFO 2025-06-13 04:48:42,296 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:42.356  INFO 2025-06-13 04:48:42,356 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:48:42.423  INFO 2025-06-13 04:48:42,423 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:50:06.983  INFO 2025-06-13 04:50:06,983 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:09.893  INFO 2025-06-13 04:57:09,893 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:10.057  INFO 2025-06-13 04:57:10,057 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:10.060  INFO 2025-06-13 04:57:10,060 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:57:10.060  INFO 2025-06-13 04:57:10,060 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:57:10.060  INFO 2025-06-13 04:57:10,060 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:57:10.060  INFO 2025-06-13 04:57:10,060 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:57:10.060  INFO 2025-06-13 04:57:10,060 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:57:10.061  INFO 2025-06-13 04:57:10,061 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:57:10.062  INFO 2025-06-13 04:57:10,062 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 04:57:10.063  INFO 2025-06-13 04:57:10,063 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 04:57:10.068  INFO 2025-06-13 04:57:10,068 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:10.070  INFO 2025-06-13 04:57:10,070 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:57:10.070  INFO 2025-06-13 04:57:10,070 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:57:15.041  INFO 2025-06-13 04:57:15,041 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:15.165  INFO 2025-06-13 04:57:15,165 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:15.232  INFO 2025-06-13 04:57:15,232 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:15.283  INFO 2025-06-13 04:57:15,283 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:15.305  INFO 2025-06-13 04:57:15,305 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:15.443  INFO 2025-06-13 04:57:15,443 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:16.343  INFO 2025-06-13 04:57:16,343 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:17.422  INFO 2025-06-13 04:57:17,422 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:17.463  INFO 2025-06-13 04:57:17,463 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:17.526  INFO 2025-06-13 04:57:17,526 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:20.443  INFO 2025-06-13 04:57:20,443 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:22.346  INFO 2025-06-13 04:57:22,346 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:29.886  INFO 2025-06-13 04:57:29,886 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:29.903  INFO 2025-06-13 04:57:29,903 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:29.979  INFO 2025-06-13 04:57:29,979 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:29.980  INFO 2025-06-13 04:57:29,980 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:30.128  INFO 2025-06-13 04:57:30,128 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:30.144  INFO 2025-06-13 04:57:30,144 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:35.299  INFO 2025-06-13 04:57:35,299 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:36.726  INFO 2025-06-13 04:57:36,726 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:36.825  INFO 2025-06-13 04:57:36,825 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:36.960  INFO 2025-06-13 04:57:36,960 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:37.177  INFO 2025-06-13 04:57:37,177 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:37.181  INFO 2025-06-13 04:57:37,181 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 04:57:37.182  INFO 2025-06-13 04:57:37,182 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 04:57:37.182  INFO 2025-06-13 04:57:37,182 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 04:57:37.182  INFO 2025-06-13 04:57:37,182 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 04:57:37.182  INFO 2025-06-13 04:57:37,182 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 04:57:37.183  INFO 2025-06-13 04:57:37,183 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 04:57:37.183  INFO 2025-06-13 04:57:37,183 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 04:57:37.184  INFO 2025-06-13 04:57:37,184 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 04:57:37.190  INFO 2025-06-13 04:57:37,190 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:57:37.190  INFO 2025-06-13 04:57:37,190 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 04:57:43.880  INFO 2025-06-13 04:57:43,880 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:43.912  INFO 2025-06-13 04:57:43,912 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:43.974  INFO 2025-06-13 04:57:43,974 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:43.978  INFO 2025-06-13 04:57:43,978 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:44.081  INFO 2025-06-13 04:57:44,081 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:44.094  INFO 2025-06-13 04:57:44,094 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:57:54.755  INFO 2025-06-13 04:57:54,755 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:58:00.318  INFO 2025-06-13 04:58:00,318 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:58:01.576  INFO 2025-06-13 04:58:01,576 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:58:04.443  INFO 2025-06-13 04:58:04,443 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:58:04.457  INFO 2025-06-13 04:58:04,457 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:58:04.513  INFO 2025-06-13 04:58:04,513 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:58:04.513  INFO 2025-06-13 04:58:04,513 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:58:04.640  INFO 2025-06-13 04:58:04,640 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:58:04.644  INFO 2025-06-13 04:58:04,644 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:58:08.239  INFO 2025-06-13 04:58:08,239 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:58:39.741  INFO 2025-06-13 04:58:39,741 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:58:39.794  INFO 2025-06-13 04:58:39,794 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:58:39.839  INFO 2025-06-13 04:58:39,839 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:59:35.751  INFO 2025-06-13 04:59:35,751 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:59:36.791  INFO 2025-06-13 04:59:36,791 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:59:36.831  INFO 2025-06-13 04:59:36,831 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 04:59:36.895  INFO 2025-06-13 04:59:36,895 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:00:10.638  INFO 2025-06-13 05:00:10,638 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 05:00:10.641  INFO 2025-06-13 05:00:10,641 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 05:00:10.751  INFO 2025-06-13 05:00:10,751 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 05:00:16.652  INFO 2025-06-13 05:00:16,652 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 17528 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 05:00:16.655  INFO 2025-06-13 05:00:16,655 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 05:00:17.449  INFO 2025-06-13 05:00:17,449 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 05:00:17.522  INFO 2025-06-13 05:00:17,522 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 66 ms. Found 11 JPA repository interfaces.
2025-06-13 05:00:18.663  INFO 2025-06-13 05:00:18,663 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 05:00:18.719  INFO 2025-06-13 05:00:18,719 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 05:00:18.720  INFO 2025-06-13 05:00:18,720 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 05:00:18.843  INFO 2025-06-13 05:00:18,843 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 05:00:18.844  INFO 2025-06-13 05:00:18,844 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2139 ms
2025-06-13 05:00:18.898  INFO 2025-06-13 05:00:18,898 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 05:00:19.289  INFO 2025-06-13 05:00:19,289 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 05:00:19.292  INFO 2025-06-13 05:00:19,292 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 05:00:19.314  INFO 2025-06-13 05:00:19,314 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 05:00:19.489  INFO 2025-06-13 05:00:19,489 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 05:00:19.601  INFO 2025-06-13 05:00:19,601 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 05:00:19.662  INFO 2025-06-13 05:00:19,662 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 05:00:20.118  INFO 2025-06-13 05:00:20,118 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 05:00:22.009  INFO 2025-06-13 05:00:22,009 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 05:00:22.112  INFO 2025-06-13 05:00:22,112 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 05:00:22.700  INFO 2025-06-13 05:00:22,700 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 05:00:26.451  WARN 2025-06-13 05:00:26,451 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 05:00:26.527  INFO 2025-06-13 05:00:26,527 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 05:00:26.533  INFO 2025-06-13 05:00:26,533 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 05:00:26.534  WARN 2025-06-13 05:00:26,534 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 05:00:26.961  INFO 2025-06-13 05:00:26,961 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 05:00:27.043  INFO 2025-06-13 05:00:27,043 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 05:00:27.680  INFO 2025-06-13 05:00:27,680 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 05:00:27.688  INFO 2025-06-13 05:00:27,688 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 11.548 seconds (process running for 12.435)
2025-06-13 05:00:27.695  INFO 2025-06-13 05:00:27,695 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 05:00:27.695  INFO 2025-06-13 05:00:27,695 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 05:00:27.779  INFO 2025-06-13 05:00:27,779 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 05:00:28.078  INFO 2025-06-13 05:00:28,078 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 05:00:28.092  INFO 2025-06-13 05:00:28,092 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 05:00:28.153  INFO 2025-06-13 05:00:28,153 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 05:00:28.173  INFO 2025-06-13 05:00:28,173 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 05:00:28.274  INFO 2025-06-13 05:00:28,274 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 05:00:28.293  INFO 2025-06-13 05:00:28,293 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 05:00:28.293  INFO 2025-06-13 05:00:28,293 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 05:00:33.743  INFO 2025-06-13 05:00:33,743 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 05:00:33.743  INFO 2025-06-13 05:00:33,743 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 05:00:33.745  INFO 2025-06-13 05:00:33,745 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-13 05:00:33.921  INFO 2025-06-13 05:00:33,921 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:00:34.048  INFO 2025-06-13 05:00:34,048 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:00:34.048  INFO 2025-06-13 05:00:34,048 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:00:34.049  INFO 2025-06-13 05:00:34,049 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:00:34.049  INFO 2025-06-13 05:00:34,049 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:00:34.052  INFO 2025-06-13 05:00:34,052 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:00:34.375  INFO 2025-06-13 05:00:34,375 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:00:36.743  INFO 2025-06-13 05:00:36,743 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:00:36.797  INFO 2025-06-13 05:00:36,797 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:00:36.873  INFO 2025-06-13 05:00:36,873 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:00:36.874  INFO 2025-06-13 05:00:36,874 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:00:36.988  INFO 2025-06-13 05:00:36,988 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:00:36.988  INFO 2025-06-13 05:00:36,988 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:00:36.999  INFO 2025-06-13 05:00:36,999 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:00:37.067  INFO 2025-06-13 05:00:37,067 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:00:37.111  INFO 2025-06-13 05:00:37,111 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:07.449  INFO 2025-06-13 05:01:07,449 --- [nio-8080-exec-6] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 05:01:07.547  INFO 2025-06-13 05:01:07,547 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:07.559  INFO 2025-06-13 05:01:07,559 --- [nio-8080-exec-6] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 05:01:08.726  INFO 2025-06-13 05:01:08,726 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:08.960  INFO 2025-06-13 05:01:08,960 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:08.966  INFO 2025-06-13 05:01:08,966 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:01:08.966  INFO 2025-06-13 05:01:08,966 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:01:08.966  INFO 2025-06-13 05:01:08,966 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:01:08.967  INFO 2025-06-13 05:01:08,967 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:01:08.967  INFO 2025-06-13 05:01:08,967 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:01:08.969  INFO 2025-06-13 05:01:08,969 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:01:08.970  INFO 2025-06-13 05:01:08,970 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 05:01:08.972  INFO 2025-06-13 05:01:08,972 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 05:01:08.984  INFO 2025-06-13 05:01:08,984 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:08.994  INFO 2025-06-13 05:01:08,994 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:01:08.994  INFO 2025-06-13 05:01:08,994 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:01:11.684  INFO 2025-06-13 05:01:11,684 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:11.779  INFO 2025-06-13 05:01:11,779 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:11.839  INFO 2025-06-13 05:01:11,839 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:11.843  INFO 2025-06-13 05:01:11,843 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:11.897  INFO 2025-06-13 05:01:11,897 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:11.948  INFO 2025-06-13 05:01:11,948 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:13.171  INFO 2025-06-13 05:01:13,171 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:14.291  INFO 2025-06-13 05:01:14,291 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:21.387  INFO 2025-06-13 05:01:21,387 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:21.410  INFO 2025-06-13 05:01:21,410 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 05:01:21.410  INFO 2025-06-13 05:01:21,410 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 05:01:25.615  INFO 2025-06-13 05:01:25,615 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:25.618  INFO 2025-06-13 05:01:25,618 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:25.715  INFO 2025-06-13 05:01:25,715 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:25.715  INFO 2025-06-13 05:01:25,715 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:25.798  INFO 2025-06-13 05:01:25,798 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:25.802  INFO 2025-06-13 05:01:25,802 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:26.643  INFO 2025-06-13 05:01:26,643 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:27.574  INFO 2025-06-13 05:01:27,574 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:27.629  INFO 2025-06-13 05:01:27,629 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:27.677  INFO 2025-06-13 05:01:27,677 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:37.023  INFO 2025-06-13 05:01:37,023 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 05:01:37.114  INFO 2025-06-13 05:01:37,114 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:01:37.115  INFO 2025-06-13 05:01:37,115 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 05:01:37.644  INFO 2025-06-13 05:01:37,644 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:01:37.749  INFO 2025-06-13 05:01:37,749 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:01:37.814  INFO 2025-06-13 05:01:37,814 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:01:37.827  INFO 2025-06-13 05:01:37,827 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:01:37.827  INFO 2025-06-13 05:01:37,827 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:01:37.827  INFO 2025-06-13 05:01:37,827 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:01:37.827  INFO 2025-06-13 05:01:37,827 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:01:37.828  INFO 2025-06-13 05:01:37,828 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 05:01:37.832  INFO 2025-06-13 05:01:37,832 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 05:01:37.833  INFO 2025-06-13 05:01:37,833 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 05:01:37.834  INFO 2025-06-13 05:01:37,834 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 05:01:37.857  INFO 2025-06-13 05:01:37,857 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:01:37.857  INFO 2025-06-13 05:01:37,857 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:01:39.955  INFO 2025-06-13 05:01:39,955 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:01:39.955  INFO 2025-06-13 05:01:39,955 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:01:40.021  INFO 2025-06-13 05:01:40,021 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:01:40.027  INFO 2025-06-13 05:01:40,027 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:01:40.133  INFO 2025-06-13 05:01:40,133 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:01:40.135  INFO 2025-06-13 05:01:40,135 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:01:42.673  INFO 2025-06-13 05:01:42,673 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:01:42.691  INFO 2025-06-13 05:01:42,691 --- [nio-8080-exec-8] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 05:01:42.691  INFO 2025-06-13 05:01:42,691 --- [nio-8080-exec-8] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 05:01:42.783  INFO 2025-06-13 05:01:42,783 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:01:52.376  INFO 2025-06-13 05:01:52,376 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 05:01:52.463  INFO 2025-06-13 05:01:52,463 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:52.464  INFO 2025-06-13 05:01:52,464 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 05:01:52.960  INFO 2025-06-13 05:01:52,960 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:53.112  INFO 2025-06-13 05:01:53,112 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:53.339  INFO 2025-06-13 05:01:53,339 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:53.343  INFO 2025-06-13 05:01:53,343 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:01:53.343  INFO 2025-06-13 05:01:53,343 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:01:53.344  INFO 2025-06-13 05:01:53,344 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:01:53.344  INFO 2025-06-13 05:01:53,344 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:01:53.344  INFO 2025-06-13 05:01:53,344 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:01:53.346  INFO 2025-06-13 05:01:53,346 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:01:53.346  INFO 2025-06-13 05:01:53,346 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 05:01:53.346  INFO 2025-06-13 05:01:53,346 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 05:01:53.354  INFO 2025-06-13 05:01:53,354 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:01:53.354  INFO 2025-06-13 05:01:53,354 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:01:55.490  INFO 2025-06-13 05:01:55,490 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:55.589  INFO 2025-06-13 05:01:55,589 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:55.666  INFO 2025-06-13 05:01:55,666 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:55.720  INFO 2025-06-13 05:01:55,720 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:55.757  INFO 2025-06-13 05:01:55,757 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:55.852  INFO 2025-06-13 05:01:55,852 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:57.970  INFO 2025-06-13 05:01:57,970 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:59.239  INFO 2025-06-13 05:01:59,239 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:59.316  INFO 2025-06-13 05:01:59,316 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:01:59.360  INFO 2025-06-13 05:01:59,360 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:18.934  INFO 2025-06-13 05:02:18,934 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:21.387  INFO 2025-06-13 05:02:21,387 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:21.592  INFO 2025-06-13 05:02:21,592 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:21.682  INFO 2025-06-13 05:02:21,682 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:21.747  INFO 2025-06-13 05:02:21,747 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:21.913  INFO 2025-06-13 05:02:21,913 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:22.102  INFO 2025-06-13 05:02:22,102 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:22.107  INFO 2025-06-13 05:02:22,107 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:02:22.108  INFO 2025-06-13 05:02:22,108 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:02:22.108  INFO 2025-06-13 05:02:22,108 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:02:22.108  INFO 2025-06-13 05:02:22,108 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:02:22.108  INFO 2025-06-13 05:02:22,108 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:02:22.110  INFO 2025-06-13 05:02:22,110 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:02:22.110  INFO 2025-06-13 05:02:22,110 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 05:02:22.110  INFO 2025-06-13 05:02:22,110 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 05:02:22.120  INFO 2025-06-13 05:02:22,120 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:02:22.120  INFO 2025-06-13 05:02:22,120 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:02:25.454  INFO 2025-06-13 05:02:25,454 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:25.478  INFO 2025-06-13 05:02:25,478 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Created new draft for tree 1 by editor 3
2025-06-13 05:02:25.487  INFO 2025-06-13 05:02:25,487 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft for tree 1 by editor 3
2025-06-13 05:02:25.526  INFO 2025-06-13 05:02:25,526 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:49.438  INFO 2025-06-13 05:02:49,438 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:49.449  INFO 2025-06-13 05:02:49,449 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:49.523  INFO 2025-06-13 05:02:49,523 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:49.523  INFO 2025-06-13 05:02:49,523 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:49.632  INFO 2025-06-13 05:02:49,632 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:02:49.636  INFO 2025-06-13 05:02:49,636 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:03:00.289  INFO 2025-06-13 05:03:00,289 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:03:02.069  INFO 2025-06-13 05:03:02,069 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:03:02.118  INFO 2025-06-13 05:03:02,118 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:03:02.179  INFO 2025-06-13 05:03:02,179 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:04:10.699  INFO 2025-06-13 05:04:10,699 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:04:10.789  INFO 2025-06-13 05:04:10,789 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:04:10.885  INFO 2025-06-13 05:04:10,885 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:04:11.117  INFO 2025-06-13 05:04:11,117 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:04:11.124  INFO 2025-06-13 05:04:11,124 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:04:11.124  INFO 2025-06-13 05:04:11,124 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:04:11.124  INFO 2025-06-13 05:04:11,124 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:04:11.124  INFO 2025-06-13 05:04:11,124 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:04:11.124  INFO 2025-06-13 05:04:11,124 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:04:11.126  INFO 2025-06-13 05:04:11,126 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:04:11.127  INFO 2025-06-13 05:04:11,127 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 05:04:11.127  INFO 2025-06-13 05:04:11,127 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 05:04:11.142  INFO 2025-06-13 05:04:11,142 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:04:11.142  INFO 2025-06-13 05:04:11,142 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:04:59.011  INFO 2025-06-13 05:04:59,011 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:04:59.058  INFO 2025-06-13 05:04:59,058 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:04:59.112  INFO 2025-06-13 05:04:59,112 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:04:59.149  INFO 2025-06-13 05:04:59,149 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:04:59.272  INFO 2025-06-13 05:04:59,272 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:04:59.289  INFO 2025-06-13 05:04:59,289 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:05:00.570  INFO 2025-06-13 05:05:00,570 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:05:01.696  INFO 2025-06-13 05:05:01,696 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:05:45.139  INFO 2025-06-13 05:05:45,139 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:05:45.154  INFO 2025-06-13 05:05:45,154 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:05:45.211  INFO 2025-06-13 05:05:45,211 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:05:45.213  INFO 2025-06-13 05:05:45,213 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:05:45.326  INFO 2025-06-13 05:05:45,326 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:05:45.334  INFO 2025-06-13 05:05:45,334 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:12.843  INFO 2025-06-13 05:11:12,843 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:12.965  INFO 2025-06-13 05:11:12,965 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:12.967  INFO 2025-06-13 05:11:12,967 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:11:12.967  INFO 2025-06-13 05:11:12,967 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:11:12.967  INFO 2025-06-13 05:11:12,967 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:11:12.967  INFO 2025-06-13 05:11:12,967 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:11:12.967  INFO 2025-06-13 05:11:12,967 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:11:12.968  INFO 2025-06-13 05:11:12,968 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:11:12.968  INFO 2025-06-13 05:11:12,968 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 05:11:12.969  INFO 2025-06-13 05:11:12,969 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 05:11:12.973  INFO 2025-06-13 05:11:12,973 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:12.974  INFO 2025-06-13 05:11:12,974 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:11:12.974  INFO 2025-06-13 05:11:12,974 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:11:17.470  INFO 2025-06-13 05:11:17,470 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:17.585  INFO 2025-06-13 05:11:17,585 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:17.646  INFO 2025-06-13 05:11:17,646 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:17.699  INFO 2025-06-13 05:11:17,699 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:17.711  INFO 2025-06-13 05:11:17,711 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:17.946  INFO 2025-06-13 05:11:17,946 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:21.970  INFO 2025-06-13 05:11:21,970 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:22.055  INFO 2025-06-13 05:11:22,055 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:22.128  INFO 2025-06-13 05:11:22,128 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:22.200  INFO 2025-06-13 05:11:22,200 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:22.400  INFO 2025-06-13 05:11:22,400 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:22.403  INFO 2025-06-13 05:11:22,403 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:11:22.403  INFO 2025-06-13 05:11:22,403 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:11:22.403  INFO 2025-06-13 05:11:22,403 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:11:22.403  INFO 2025-06-13 05:11:22,403 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:11:22.403  INFO 2025-06-13 05:11:22,403 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:11:22.405  INFO 2025-06-13 05:11:22,405 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:11:22.405  INFO 2025-06-13 05:11:22,405 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 05:11:22.406  INFO 2025-06-13 05:11:22,406 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 05:11:22.410  INFO 2025-06-13 05:11:22,410 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:11:22.410  INFO 2025-06-13 05:11:22,410 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:11:36.236  INFO 2025-06-13 05:11:36,236 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:36.283  INFO 2025-06-13 05:11:36,283 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:36.384  INFO 2025-06-13 05:11:36,384 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:36.384  INFO 2025-06-13 05:11:36,384 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:36.523  INFO 2025-06-13 05:11:36,523 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:36.531  INFO 2025-06-13 05:11:36,531 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:37.556  INFO 2025-06-13 05:11:37,556 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:39.653  INFO 2025-06-13 05:11:39,653 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:47.267  INFO 2025-06-13 05:11:47,267 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:47.497  INFO 2025-06-13 05:11:47,497 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:47.647  INFO 2025-06-13 05:11:47,647 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:47.773  INFO 2025-06-13 05:11:47,773 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:48.018  INFO 2025-06-13 05:11:48,018 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:48.020  INFO 2025-06-13 05:11:48,020 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:11:48.020  INFO 2025-06-13 05:11:48,020 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:11:48.021  INFO 2025-06-13 05:11:48,021 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:11:48.021  INFO 2025-06-13 05:11:48,021 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:11:48.021  INFO 2025-06-13 05:11:48,021 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:11:48.022  INFO 2025-06-13 05:11:48,022 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:11:48.022  INFO 2025-06-13 05:11:48,022 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 05:11:48.022  INFO 2025-06-13 05:11:48,022 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 05:11:48.028  INFO 2025-06-13 05:11:48,028 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:11:48.029  INFO 2025-06-13 05:11:48,029 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:11:51.679  INFO 2025-06-13 05:11:51,679 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:51.713  INFO 2025-06-13 05:11:51,713 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:51.836  INFO 2025-06-13 05:11:51,836 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:51.842  INFO 2025-06-13 05:11:51,842 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:51.925  INFO 2025-06-13 05:11:51,925 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:51.932  INFO 2025-06-13 05:11:51,932 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:11:56.016  INFO 2025-06-13 05:11:56,016 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 05:11:56.019  INFO 2025-06-13 05:11:56,019 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 05:11:56.047  INFO 2025-06-13 05:11:56,047 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 05:12:00.377  INFO 2025-06-13 05:12:00,377 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 4452 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 05:12:00.379  INFO 2025-06-13 05:12:00,379 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 05:12:01.276  INFO 2025-06-13 05:12:01,276 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 05:12:01.528  INFO 2025-06-13 05:12:01,528 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 225 ms. Found 11 JPA repository interfaces.
2025-06-13 05:12:02.719  INFO 2025-06-13 05:12:02,719 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 05:12:02.731  INFO 2025-06-13 05:12:02,731 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 05:12:02.731  INFO 2025-06-13 05:12:02,731 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 05:12:02.789  INFO 2025-06-13 05:12:02,789 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 05:12:02.789  INFO 2025-06-13 05:12:02,789 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2361 ms
2025-06-13 05:12:02.822  INFO 2025-06-13 05:12:02,822 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 05:12:02.999  INFO 2025-06-13 05:12:02,999 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 05:12:03.001  INFO 2025-06-13 05:12:03,001 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 05:12:03.012  INFO 2025-06-13 05:12:03,012 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 05:12:03.107  INFO 2025-06-13 05:12:03,107 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 05:12:03.161  INFO 2025-06-13 05:12:03,161 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 05:12:03.191  INFO 2025-06-13 05:12:03,191 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 05:12:03.454  INFO 2025-06-13 05:12:03,454 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 05:12:04.715  INFO 2025-06-13 05:12:04,715 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 05:12:04.795  INFO 2025-06-13 05:12:04,795 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 05:12:05.214  INFO 2025-06-13 05:12:05,214 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 05:12:08.138  WARN 2025-06-13 05:12:08,138 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 05:12:08.190  INFO 2025-06-13 05:12:08,190 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 05:12:08.195  INFO 2025-06-13 05:12:08,195 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 05:12:08.197  WARN 2025-06-13 05:12:08,197 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 05:12:08.558  INFO 2025-06-13 05:12:08,558 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 05:12:08.594  INFO 2025-06-13 05:12:08,594 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 05:12:09.095  INFO 2025-06-13 05:12:09,095 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 05:12:09.106  INFO 2025-06-13 05:12:09,106 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 9.226 seconds (process running for 10.374)
2025-06-13 05:12:09.117  INFO 2025-06-13 05:12:09,117 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 05:12:09.117  INFO 2025-06-13 05:12:09,117 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 05:12:09.223  INFO 2025-06-13 05:12:09,223 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 05:12:09.505  INFO 2025-06-13 05:12:09,505 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 05:12:09.514  INFO 2025-06-13 05:12:09,514 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 05:12:09.572  INFO 2025-06-13 05:12:09,572 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 05:12:09.589  INFO 2025-06-13 05:12:09,589 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 05:12:09.677  INFO 2025-06-13 05:12:09,677 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 05:12:09.692  INFO 2025-06-13 05:12:09,692 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 05:12:09.692  INFO 2025-06-13 05:12:09,692 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 05:12:20.801  INFO 2025-06-13 05:12:20,801 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 05:12:20.801  INFO 2025-06-13 05:12:20,801 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 05:12:20.804  INFO 2025-06-13 05:12:20,804 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-06-13 05:12:20.995  INFO 2025-06-13 05:12:20,995 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:21.124  INFO 2025-06-13 05:12:21,124 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:12:21.125  INFO 2025-06-13 05:12:21,125 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:12:21.125  INFO 2025-06-13 05:12:21,125 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:12:21.125  INFO 2025-06-13 05:12:21,125 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:12:21.128  INFO 2025-06-13 05:12:21,128 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:12:21.438  INFO 2025-06-13 05:12:21,438 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:24.039  INFO 2025-06-13 05:12:24,039 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:24.051  INFO 2025-06-13 05:12:24,051 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:24.151  INFO 2025-06-13 05:12:24,151 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:24.201  INFO 2025-06-13 05:12:24,201 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:24.227  INFO 2025-06-13 05:12:24,227 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:24.254  INFO 2025-06-13 05:12:24,254 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:24.318  INFO 2025-06-13 05:12:24,318 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:24.318  INFO 2025-06-13 05:12:24,318 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:24.391  INFO 2025-06-13 05:12:24,391 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:28.198  INFO 2025-06-13 05:12:28,198 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:28.204  INFO 2025-06-13 05:12:28,204 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:28.292  INFO 2025-06-13 05:12:28,292 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:28.310  INFO 2025-06-13 05:12:28,310 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:28.384  INFO 2025-06-13 05:12:28,384 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:28.392  INFO 2025-06-13 05:12:28,392 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:28.448  INFO 2025-06-13 05:12:28,448 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:28.465  INFO 2025-06-13 05:12:28,465 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:28.550  INFO 2025-06-13 05:12:28,550 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:29.041  INFO 2025-06-13 05:12:29,041 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:30.025  INFO 2025-06-13 05:12:30,025 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:37.568  INFO 2025-06-13 05:12:37,568 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:37.591  INFO 2025-06-13 05:12:37,591 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 05:12:37.591  INFO 2025-06-13 05:12:37,591 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 05:12:39.273  INFO 2025-06-13 05:12:39,273 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:39.277  INFO 2025-06-13 05:12:39,277 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:39.352  INFO 2025-06-13 05:12:39,352 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:39.355  INFO 2025-06-13 05:12:39,355 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:39.454  INFO 2025-06-13 05:12:39,454 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:39.459  INFO 2025-06-13 05:12:39,459 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:41.910  INFO 2025-06-13 05:12:41,910 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:41.918  INFO 2025-06-13 05:12:41,918 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:12:41.918  INFO 2025-06-13 05:12:41,918 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:12:41.918  INFO 2025-06-13 05:12:41,918 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:12:41.919  INFO 2025-06-13 05:12:41,919 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:12:41.919  INFO 2025-06-13 05:12:41,919 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:12:41.921  INFO 2025-06-13 05:12:41,921 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:12:41.921  INFO 2025-06-13 05:12:41,921 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 05:12:41.926  INFO 2025-06-13 05:12:41,926 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 05:12:41.950  INFO 2025-06-13 05:12:41,950 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:12:41.950  INFO 2025-06-13 05:12:41,950 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:12:42.085  INFO 2025-06-13 05:12:42,085 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:12:42.088  INFO 2025-06-13 05:12:42,088 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:12:42.088  INFO 2025-06-13 05:12:42,088 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:12:42.088  INFO 2025-06-13 05:12:42,088 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:12:42.088  INFO 2025-06-13 05:12:42,088 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:12:42.088  INFO 2025-06-13 05:12:42,088 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:12:42.090  INFO 2025-06-13 05:12:42,090 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:12:42.091  INFO 2025-06-13 05:12:42,091 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 05:12:42.092  INFO 2025-06-13 05:12:42,092 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 05:12:42.101  INFO 2025-06-13 05:12:42,101 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:12:42.101  INFO 2025-06-13 05:12:42,101 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:12:52.405  INFO 2025-06-13 05:12:52,405 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 05:12:52.504  INFO 2025-06-13 05:12:52,504 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:52.516  INFO 2025-06-13 05:12:52,516 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 05:12:53.619  INFO 2025-06-13 05:12:53,619 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:53.722  INFO 2025-06-13 05:12:53,722 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:53.807  INFO 2025-06-13 05:12:53,807 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:53.811  INFO 2025-06-13 05:12:53,811 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:12:53.811  INFO 2025-06-13 05:12:53,811 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:12:53.812  INFO 2025-06-13 05:12:53,812 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:12:53.812  INFO 2025-06-13 05:12:53,812 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:12:53.812  INFO 2025-06-13 05:12:53,812 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 05:12:53.814  INFO 2025-06-13 05:12:53,814 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 05:12:53.814  INFO 2025-06-13 05:12:53,814 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 05:12:53.815  INFO 2025-06-13 05:12:53,815 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 05:12:53.837  INFO 2025-06-13 05:12:53,837 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:12:53.837  INFO 2025-06-13 05:12:53,837 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:12:56.175  INFO 2025-06-13 05:12:56,175 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:56.271  INFO 2025-06-13 05:12:56,271 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:56.341  INFO 2025-06-13 05:12:56,341 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:56.358  INFO 2025-06-13 05:12:56,358 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:56.462  INFO 2025-06-13 05:12:56,462 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:56.507  INFO 2025-06-13 05:12:56,507 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:57.025  INFO 2025-06-13 05:12:57,025 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:57.026  INFO 2025-06-13 05:12:57,026 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:57.078  INFO 2025-06-13 05:12:57,078 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:57.087  INFO 2025-06-13 05:12:57,087 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:57.216  INFO 2025-06-13 05:12:57,216 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:57.235  INFO 2025-06-13 05:12:57,235 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:58.623  INFO 2025-06-13 05:12:58,623 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:58.623  INFO 2025-06-13 05:12:58,623 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:58.710  INFO 2025-06-13 05:12:58,710 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:58.716  INFO 2025-06-13 05:12:58,716 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:58.787  INFO 2025-06-13 05:12:58,787 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:58.791  INFO 2025-06-13 05:12:58,791 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:58.834  INFO 2025-06-13 05:12:58,834 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:58.893  INFO 2025-06-13 05:12:58,893 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:12:58.955  INFO 2025-06-13 05:12:58,955 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:13:01.050  INFO 2025-06-13 05:13:01,050 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:13:01.077  INFO 2025-06-13 05:13:01,077 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:13:01.211  INFO 2025-06-13 05:13:01,211 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:13:01.214  INFO 2025-06-13 05:13:01,214 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:13:03.643  INFO 2025-06-13 05:13:03,643 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:13:03.659  INFO 2025-06-13 05:13:03,659 --- [nio-8080-exec-1] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 05:13:03.660  INFO 2025-06-13 05:13:03,660 --- [nio-8080-exec-1] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 05:13:03.756  INFO 2025-06-13 05:13:03,756 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:13:12.305  INFO 2025-06-13 05:13:12,305 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 05:13:12.397  INFO 2025-06-13 05:13:12,397 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:13:12.398  INFO 2025-06-13 05:13:12,398 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 05:13:12.972  INFO 2025-06-13 05:13:12,972 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:13:13.221  INFO 2025-06-13 05:13:13,221 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:13:13.270  INFO 2025-06-13 05:13:13,270 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:13:13.275  INFO 2025-06-13 05:13:13,275 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:13:13.276  INFO 2025-06-13 05:13:13,276 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:13:13.276  INFO 2025-06-13 05:13:13,276 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:13:13.276  INFO 2025-06-13 05:13:13,276 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:13:13.276  INFO 2025-06-13 05:13:13,276 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:13:13.278  INFO 2025-06-13 05:13:13,278 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:13:13.278  INFO 2025-06-13 05:13:13,278 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 05:13:13.279  INFO 2025-06-13 05:13:13,279 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 05:13:13.288  INFO 2025-06-13 05:13:13,288 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:13:13.288  INFO 2025-06-13 05:13:13,288 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:13:17.076  INFO 2025-06-13 05:13:17,076 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:13:17.157  INFO 2025-06-13 05:13:17,157 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:13:17.217  INFO 2025-06-13 05:13:17,217 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:13:17.268  INFO 2025-06-13 05:13:17,268 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:13:17.359  INFO 2025-06-13 05:13:17,359 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:13:17.420  INFO 2025-06-13 05:13:17,420 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:14:37.925  INFO 2025-06-13 05:14:37,925 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:14:38.691  INFO 2025-06-13 05:14:38,691 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:14:38.774  INFO 2025-06-13 05:14:38,774 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:14:38.907  INFO 2025-06-13 05:14:38,907 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:21.110  INFO 2025-06-13 05:17:21,110 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:21.115  INFO 2025-06-13 05:17:21,115 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:17:21.115  INFO 2025-06-13 05:17:21,115 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:17:21.116  INFO 2025-06-13 05:17:21,116 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:17:21.116  INFO 2025-06-13 05:17:21,116 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:17:21.116  INFO 2025-06-13 05:17:21,116 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:17:21.117  INFO 2025-06-13 05:17:21,117 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:17:21.117  INFO 2025-06-13 05:17:21,117 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 05:17:21.118  INFO 2025-06-13 05:17:21,118 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 05:17:21.128  INFO 2025-06-13 05:17:21,128 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:17:21.128  INFO 2025-06-13 05:17:21,128 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:17:33.195  INFO 2025-06-13 05:17:33,195 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:33.297  INFO 2025-06-13 05:17:33,297 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:33.301  INFO 2025-06-13 05:17:33,301 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:17:33.301  INFO 2025-06-13 05:17:33,301 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:17:33.301  INFO 2025-06-13 05:17:33,301 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:17:33.301  INFO 2025-06-13 05:17:33,301 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:17:33.301  INFO 2025-06-13 05:17:33,301 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:17:33.303  INFO 2025-06-13 05:17:33,303 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:17:33.303  INFO 2025-06-13 05:17:33,303 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 05:17:33.303  INFO 2025-06-13 05:17:33,303 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 05:17:33.308  INFO 2025-06-13 05:17:33,308 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:17:33.308  INFO 2025-06-13 05:17:33,308 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:17:33.309  INFO 2025-06-13 05:17:33,309 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:37.091  INFO 2025-06-13 05:17:37,091 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:37.186  INFO 2025-06-13 05:17:37,186 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:37.243  INFO 2025-06-13 05:17:37,243 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:37.444  INFO 2025-06-13 05:17:37,444 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:37.458  INFO 2025-06-13 05:17:37,458 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:37.503  INFO 2025-06-13 05:17:37,503 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:40.659  INFO 2025-06-13 05:17:40,659 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:42.157  INFO 2025-06-13 05:17:42,157 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:42.263  INFO 2025-06-13 05:17:42,263 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:42.379  INFO 2025-06-13 05:17:42,379 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:46.017  INFO 2025-06-13 05:17:46,017 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:48.039  INFO 2025-06-13 05:17:48,039 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:48.177  INFO 2025-06-13 05:17:48,177 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:48.238  INFO 2025-06-13 05:17:48,238 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:48.326  INFO 2025-06-13 05:17:48,326 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:48.550  INFO 2025-06-13 05:17:48,550 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:48.766  INFO 2025-06-13 05:17:48,766 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:48.769  INFO 2025-06-13 05:17:48,769 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:17:48.769  INFO 2025-06-13 05:17:48,769 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:17:48.769  INFO 2025-06-13 05:17:48,769 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:17:48.769  INFO 2025-06-13 05:17:48,769 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:17:48.769  INFO 2025-06-13 05:17:48,769 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:17:48.770  INFO 2025-06-13 05:17:48,770 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:17:48.771  INFO 2025-06-13 05:17:48,771 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 05:17:48.771  INFO 2025-06-13 05:17:48,771 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 05:17:48.778  INFO 2025-06-13 05:17:48,778 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:17:48.778  INFO 2025-06-13 05:17:48,778 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:17:50.605  INFO 2025-06-13 05:17:50,605 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:50.624  INFO 2025-06-13 05:17:50,624 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Created new draft for tree 1 by editor 3
2025-06-13 05:17:50.631  INFO 2025-06-13 05:17:50,631 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft for tree 1 by editor 3
2025-06-13 05:17:50.668  INFO 2025-06-13 05:17:50,668 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:50.749  INFO 2025-06-13 05:17:50,749 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:53.022  INFO 2025-06-13 05:17:53,022 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:53.022  INFO 2025-06-13 05:17:53,022 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:53.335  INFO 2025-06-13 05:17:53,335 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:53.335  INFO 2025-06-13 05:17:53,335 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:53.448  INFO 2025-06-13 05:17:53,448 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:53.457  INFO 2025-06-13 05:17:53,457 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:56.817  INFO 2025-06-13 05:17:56,817 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:58.652  INFO 2025-06-13 05:17:58,652 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:58.758  INFO 2025-06-13 05:17:58,758 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:17:58.894  INFO 2025-06-13 05:17:58,894 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:21:00.387  INFO 2025-06-13 05:21:00,387 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 05:21:00.391  INFO 2025-06-13 05:21:00,391 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 05:21:00.406  INFO 2025-06-13 05:21:00,406 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 05:31:02.661  INFO 2025-06-13 05:31:02,661 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 26580 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 05:31:02.666  INFO 2025-06-13 05:31:02,666 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 05:31:05.173  INFO 2025-06-13 05:31:05,173 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 05:31:05.360  INFO 2025-06-13 05:31:05,360 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 166 ms. Found 11 JPA repository interfaces.
2025-06-13 05:31:07.131  INFO 2025-06-13 05:31:07,131 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 05:31:07.171  INFO 2025-06-13 05:31:07,171 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 05:31:07.172  INFO 2025-06-13 05:31:07,172 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 05:31:07.340  INFO 2025-06-13 05:31:07,340 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 05:31:07.340  INFO 2025-06-13 05:31:07,340 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4569 ms
2025-06-13 05:31:07.429  INFO 2025-06-13 05:31:07,429 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 05:31:08.003  INFO 2025-06-13 05:31:08,003 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 05:31:08.007  INFO 2025-06-13 05:31:08,007 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 05:31:08.040  INFO 2025-06-13 05:31:08,040 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 05:31:08.293  INFO 2025-06-13 05:31:08,293 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 05:31:08.472  INFO 2025-06-13 05:31:08,472 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 05:31:08.601  INFO 2025-06-13 05:31:08,601 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 05:31:09.392  INFO 2025-06-13 05:31:09,392 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 05:31:13.036  INFO 2025-06-13 05:31:13,036 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 05:31:13.306  INFO 2025-06-13 05:31:13,306 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 05:31:14.970  INFO 2025-06-13 05:31:14,970 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 05:31:18.010  WARN 2025-06-13 05:31:18,010 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adminFamilyTreeController' defined in file [C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes\ru\cemeterysystem\controllers\admin\AdminFamilyTreeController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'familyTreeService' defined in file [C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes\ru\cemeterysystem\services\FamilyTreeService.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'familyTreeAccessService' defined in file [C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes\ru\cemeterysystem\services\FamilyTreeAccessService.class]: Unsatisfied dependency expressed through constructor parameter 4: Error creating bean with name 'familyTreeDraftService': Unsatisfied dependency expressed through field 'accessService': Error creating bean with name 'familyTreeAccessService': Requested bean is currently in creation: Is there an unresolvable circular reference?
2025-06-13 05:31:18.012  INFO 2025-06-13 05:31:18,012 --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 05:31:18.017  INFO 2025-06-13 05:31:18,017 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 05:31:18.020  INFO 2025-06-13 05:31:18,020 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 05:31:18.022  INFO 2025-06-13 05:31:18,022 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-06-13 05:31:18.038  INFO 2025-06-13 05:31:18,038 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-13 05:31:18.074 ERROR 2025-06-13 05:31:18,074 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

The dependencies of some of the beans in the application context form a cycle:

   adminFamilyTreeController defined in file [C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes\ru\cemeterysystem\controllers\admin\AdminFamilyTreeController.class]
      ↓
   familyTreeService defined in file [C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes\ru\cemeterysystem\services\FamilyTreeService.class]
┌─────┐
|  familyTreeAccessService defined in file [C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes\ru\cemeterysystem\services\FamilyTreeAccessService.class]
↑     ↓
|  familyTreeDraftService (field private ru.cemeterysystem.services.FamilyTreeAccessService ru.cemeterysystem.services.FamilyTreeDraftService.accessService)
└─────┘


Action:

Relying upon circular references is discouraged and they are prohibited by default. Update your application to remove the dependency cycle between beans. As a last resort, it may be possible to break the cycle automatically by setting spring.main.allow-circular-references to true.

2025-06-13 05:34:06.547  INFO 2025-06-13 05:34:06,547 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 24344 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 05:34:06.549  INFO 2025-06-13 05:34:06,549 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 05:34:07.512  INFO 2025-06-13 05:34:07,512 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 05:34:07.645  INFO 2025-06-13 05:34:07,645 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 121 ms. Found 11 JPA repository interfaces.
2025-06-13 05:34:08.577  INFO 2025-06-13 05:34:08,577 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 05:34:08.592  INFO 2025-06-13 05:34:08,592 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 05:34:08.593  INFO 2025-06-13 05:34:08,593 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 05:34:08.662  INFO 2025-06-13 05:34:08,662 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 05:34:08.664  INFO 2025-06-13 05:34:08,664 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2062 ms
2025-06-13 05:34:08.723  INFO 2025-06-13 05:34:08,723 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 05:34:08.950  INFO 2025-06-13 05:34:08,950 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 05:34:08.954  INFO 2025-06-13 05:34:08,954 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 05:34:08.968  INFO 2025-06-13 05:34:08,968 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 05:34:09.113  INFO 2025-06-13 05:34:09,113 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 05:34:09.193  INFO 2025-06-13 05:34:09,193 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 05:34:09.244  INFO 2025-06-13 05:34:09,244 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 05:34:09.803  INFO 2025-06-13 05:34:09,803 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 05:34:11.634  INFO 2025-06-13 05:34:11,634 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 05:34:11.741  INFO 2025-06-13 05:34:11,741 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 05:34:12.248  INFO 2025-06-13 05:34:12,248 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 05:34:23.810  WARN 2025-06-13 05:34:23,810 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 05:34:23.863  INFO 2025-06-13 05:34:23,863 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 05:34:23.867  INFO 2025-06-13 05:34:23,867 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 05:34:23.868  WARN 2025-06-13 05:34:23,868 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 05:34:24.260  INFO 2025-06-13 05:34:24,260 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 05:34:24.307  INFO 2025-06-13 05:34:24,307 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 05:34:24.842  INFO 2025-06-13 05:34:24,842 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 05:34:24.849  INFO 2025-06-13 05:34:24,849 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 18.865 seconds (process running for 19.744)
2025-06-13 05:34:24.857  INFO 2025-06-13 05:34:24,857 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 05:34:24.962  INFO 2025-06-13 05:34:24,962 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 05:34:24.964  INFO 2025-06-13 05:34:24,964 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 05:34:25.221  INFO 2025-06-13 05:34:25,221 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 05:34:25.228  INFO 2025-06-13 05:34:25,228 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 05:34:25.279  INFO 2025-06-13 05:34:25,279 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 05:34:25.294  INFO 2025-06-13 05:34:25,294 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 05:34:25.363  INFO 2025-06-13 05:34:25,363 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 05:34:25.376  INFO 2025-06-13 05:34:25,376 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 05:34:25.376  INFO 2025-06-13 05:34:25,376 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 05:34:30.610  INFO 2025-06-13 05:34:30,610 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 05:34:30.611  INFO 2025-06-13 05:34:30,611 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 05:34:30.613  INFO 2025-06-13 05:34:30,613 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-13 05:34:30.860  INFO 2025-06-13 05:34:30,860 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:31.022  INFO 2025-06-13 05:34:31,022 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:34:31.022  INFO 2025-06-13 05:34:31,022 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:34:31.022  INFO 2025-06-13 05:34:31,022 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:34:31.022  INFO 2025-06-13 05:34:31,022 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:34:31.027  INFO 2025-06-13 05:34:31,027 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:34:31.389  INFO 2025-06-13 05:34:31,389 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:31.469  INFO 2025-06-13 05:34:31,469 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:31.477  INFO 2025-06-13 05:34:31,477 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:34:31.477  INFO 2025-06-13 05:34:31,477 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:34:31.477  INFO 2025-06-13 05:34:31,477 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:34:31.478  INFO 2025-06-13 05:34:31,478 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:34:31.478  INFO 2025-06-13 05:34:31,478 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:34:31.480  INFO 2025-06-13 05:34:31,480 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:34:31.481  INFO 2025-06-13 05:34:31,481 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 05:34:31.483  INFO 2025-06-13 05:34:31,483 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 05:34:31.515  INFO 2025-06-13 05:34:31,515 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:34:31.515  INFO 2025-06-13 05:34:31,515 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:34:34.107  INFO 2025-06-13 05:34:34,107 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:34.206  INFO 2025-06-13 05:34:34,206 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:34.265  INFO 2025-06-13 05:34:34,265 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:34.314  INFO 2025-06-13 05:34:34,314 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:34.342  INFO 2025-06-13 05:34:34,342 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:34.441  INFO 2025-06-13 05:34:34,441 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:35.143  INFO 2025-06-13 05:34:35,143 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:36.596  INFO 2025-06-13 05:34:36,596 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:43.663  INFO 2025-06-13 05:34:43,663 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:43.695  INFO 2025-06-13 05:34:43,695 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 05:34:43.695  INFO 2025-06-13 05:34:43,695 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 05:34:45.493  INFO 2025-06-13 05:34:45,493 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:45.507  INFO 2025-06-13 05:34:45,507 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:45.747  INFO 2025-06-13 05:34:45,747 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:45.748  INFO 2025-06-13 05:34:45,748 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:45.887  INFO 2025-06-13 05:34:45,887 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:45.887  INFO 2025-06-13 05:34:45,887 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:34:53.685  INFO 2025-06-13 05:34:53,685 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 05:34:53.809  INFO 2025-06-13 05:34:53,809 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:34:53.830  INFO 2025-06-13 05:34:53,830 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 05:34:54.761  INFO 2025-06-13 05:34:54,761 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:34:55.029  INFO 2025-06-13 05:34:55,029 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:34:55.035  INFO 2025-06-13 05:34:55,035 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:34:55.035  INFO 2025-06-13 05:34:55,035 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:34:55.035  INFO 2025-06-13 05:34:55,035 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:34:55.035  INFO 2025-06-13 05:34:55,035 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:34:55.035  INFO 2025-06-13 05:34:55,035 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 05:34:55.038  INFO 2025-06-13 05:34:55,038 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 05:34:55.038  INFO 2025-06-13 05:34:55,038 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 05:34:55.039  INFO 2025-06-13 05:34:55,039 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 05:34:55.054  INFO 2025-06-13 05:34:55,054 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:34:55.055  INFO 2025-06-13 05:34:55,055 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:34:55.066  INFO 2025-06-13 05:34:55,066 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:34:58.081  INFO 2025-06-13 05:34:58,081 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:34:58.093  INFO 2025-06-13 05:34:58,093 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:34:58.219  INFO 2025-06-13 05:34:58,219 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:34:58.239  INFO 2025-06-13 05:34:58,239 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:34:58.422  INFO 2025-06-13 05:34:58,422 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:34:58.424  INFO 2025-06-13 05:34:58,424 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:35:01.446  INFO 2025-06-13 05:35:01,446 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:35:01.473  INFO 2025-06-13 05:35:01,473 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 05:35:01.476  INFO 2025-06-13 05:35:01,476 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 05:35:01.477  INFO 2025-06-13 05:35:01,477 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 05:35:01.620  INFO 2025-06-13 05:35:01,620 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:35:16.836  INFO 2025-06-13 05:35:16,836 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 05:35:16.971  INFO 2025-06-13 05:35:16,971 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:16.974  INFO 2025-06-13 05:35:16,974 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 05:35:17.787  INFO 2025-06-13 05:35:17,787 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:17.842  INFO 2025-06-13 05:35:17,842 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:17.848  INFO 2025-06-13 05:35:17,848 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:35:17.848  INFO 2025-06-13 05:35:17,848 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:35:17.848  INFO 2025-06-13 05:35:17,848 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:35:17.848  INFO 2025-06-13 05:35:17,848 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:35:17.848  INFO 2025-06-13 05:35:17,848 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:35:17.851  INFO 2025-06-13 05:35:17,851 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:35:17.851  INFO 2025-06-13 05:35:17,851 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 05:35:17.852  INFO 2025-06-13 05:35:17,852 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 05:35:17.863  INFO 2025-06-13 05:35:17,863 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:35:17.863  INFO 2025-06-13 05:35:17,863 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:35:17.917  INFO 2025-06-13 05:35:17,917 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:19.907  INFO 2025-06-13 05:35:19,907 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:20.044  INFO 2025-06-13 05:35:20,044 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:20.185  INFO 2025-06-13 05:35:20,185 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:20.304  INFO 2025-06-13 05:35:20,304 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:20.306  INFO 2025-06-13 05:35:20,306 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:20.461  INFO 2025-06-13 05:35:20,461 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:25.009  INFO 2025-06-13 05:35:25,009 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:27.916  INFO 2025-06-13 05:35:27,916 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:28.044  INFO 2025-06-13 05:35:28,044 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:28.159  INFO 2025-06-13 05:35:28,159 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:28.239  INFO 2025-06-13 05:35:28,239 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:28.446  INFO 2025-06-13 05:35:28,446 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:28.452  INFO 2025-06-13 05:35:28,452 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:35:28.452  INFO 2025-06-13 05:35:28,452 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:35:28.453  INFO 2025-06-13 05:35:28,453 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:35:28.453  INFO 2025-06-13 05:35:28,453 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:35:28.453  INFO 2025-06-13 05:35:28,453 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:35:28.456  INFO 2025-06-13 05:35:28,456 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:35:28.456  INFO 2025-06-13 05:35:28,456 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 05:35:28.457  INFO 2025-06-13 05:35:28,457 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 05:35:28.467  INFO 2025-06-13 05:35:28,467 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:35:28.468  INFO 2025-06-13 05:35:28,468 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:35:33.332  INFO 2025-06-13 05:35:33,332 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:33.340  INFO 2025-06-13 05:35:33,340 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:33.468  INFO 2025-06-13 05:35:33,468 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:33.478  INFO 2025-06-13 05:35:33,478 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:33.599  INFO 2025-06-13 05:35:33,599 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:33.628  INFO 2025-06-13 05:35:33,628 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:34.555  INFO 2025-06-13 05:35:34,555 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:36.105  INFO 2025-06-13 05:35:36,105 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:37.485  INFO 2025-06-13 05:35:37,485 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:37.558  INFO 2025-06-13 05:35:37,558 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:37.748  INFO 2025-06-13 05:35:37,748 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:37.850  INFO 2025-06-13 05:35:37,850 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:38.151  INFO 2025-06-13 05:35:38,151 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:38.154  INFO 2025-06-13 05:35:38,154 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:35:38.155  INFO 2025-06-13 05:35:38,155 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:35:38.155  INFO 2025-06-13 05:35:38,155 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:35:38.155  INFO 2025-06-13 05:35:38,155 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:35:38.155  INFO 2025-06-13 05:35:38,155 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:35:38.156  INFO 2025-06-13 05:35:38,156 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:35:38.156  INFO 2025-06-13 05:35:38,156 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 05:35:38.157  INFO 2025-06-13 05:35:38,157 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 05:35:38.166  INFO 2025-06-13 05:35:38,166 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:35:38.167  INFO 2025-06-13 05:35:38,167 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:35:40.546  INFO 2025-06-13 05:35:40,546 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:40.577  INFO 2025-06-13 05:35:40,577 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:40.685  INFO 2025-06-13 05:35:40,685 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:40.686  INFO 2025-06-13 05:35:40,686 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:40.820  INFO 2025-06-13 05:35:40,820 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:40.821  INFO 2025-06-13 05:35:40,821 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:35:47.720  INFO 2025-06-13 05:35:47,720 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 05:35:47.827  INFO 2025-06-13 05:35:47,827 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:35:47.828  INFO 2025-06-13 05:35:47,828 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 05:35:48.346  INFO 2025-06-13 05:35:48,346 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:35:48.412  INFO 2025-06-13 05:35:48,412 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:35:48.457  INFO 2025-06-13 05:35:48,457 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:35:48.460  INFO 2025-06-13 05:35:48,460 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:35:48.461  INFO 2025-06-13 05:35:48,461 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:35:48.461  INFO 2025-06-13 05:35:48,461 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:35:48.461  INFO 2025-06-13 05:35:48,461 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:35:48.461  INFO 2025-06-13 05:35:48,461 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 05:35:48.464  INFO 2025-06-13 05:35:48,464 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 05:35:48.464  INFO 2025-06-13 05:35:48,464 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 05:35:48.465  INFO 2025-06-13 05:35:48,465 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 05:35:48.472  INFO 2025-06-13 05:35:48,472 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:35:48.473  INFO 2025-06-13 05:35:48,473 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:35:57.093  INFO 2025-06-13 05:35:57,093 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:35:57.243  INFO 2025-06-13 05:35:57,243 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:35:57.248  INFO 2025-06-13 05:35:57,248 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:35:57.314  INFO 2025-06-13 05:35:57,314 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:35:57.360  INFO 2025-06-13 05:35:57,360 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:35:57.580  INFO 2025-06-13 05:35:57,580 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:06.566  INFO 2025-06-13 05:36:06,566 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:08.222  INFO 2025-06-13 05:36:08,222 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:08.438  INFO 2025-06-13 05:36:08,438 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:08.549  INFO 2025-06-13 05:36:08,549 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:08.765  INFO 2025-06-13 05:36:08,765 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:08.769  INFO 2025-06-13 05:36:08,769 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:36:08.769  INFO 2025-06-13 05:36:08,769 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:36:08.769  INFO 2025-06-13 05:36:08,769 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:36:08.769  INFO 2025-06-13 05:36:08,769 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:36:08.769  INFO 2025-06-13 05:36:08,769 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 05:36:08.772  INFO 2025-06-13 05:36:08,772 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 05:36:08.772  INFO 2025-06-13 05:36:08,772 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 1000)
2025-06-13 05:36:08.774  INFO 2025-06-13 05:36:08,774 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=1000
2025-06-13 05:36:08.784  INFO 2025-06-13 05:36:08,784 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:36:08.784  INFO 2025-06-13 05:36:08,784 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:36:47.038  INFO 2025-06-13 05:36:47,038 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:47.042  INFO 2025-06-13 05:36:47,042 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:47.264  INFO 2025-06-13 05:36:47,264 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:47.266  INFO 2025-06-13 05:36:47,266 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:47.404  INFO 2025-06-13 05:36:47,404 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:47.424  INFO 2025-06-13 05:36:47,424 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:48.114  INFO 2025-06-13 05:36:48,114 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:49.118  INFO 2025-06-13 05:36:49,118 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:50.604  INFO 2025-06-13 05:36:50,604 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:50.688  INFO 2025-06-13 05:36:50,688 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:50.781  INFO 2025-06-13 05:36:50,781 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:50.980  INFO 2025-06-13 05:36:50,980 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:50.985  INFO 2025-06-13 05:36:50,985 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:36:50.985  INFO 2025-06-13 05:36:50,985 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:36:50.986  INFO 2025-06-13 05:36:50,986 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:36:50.986  INFO 2025-06-13 05:36:50,986 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:36:50.986  INFO 2025-06-13 05:36:50,986 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 05:36:50.987  INFO 2025-06-13 05:36:50,987 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 05:36:50.987  INFO 2025-06-13 05:36:50,987 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 1000)
2025-06-13 05:36:50.988  INFO 2025-06-13 05:36:50,988 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=1000
2025-06-13 05:36:50.997  INFO 2025-06-13 05:36:50,997 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:36:50.997  INFO 2025-06-13 05:36:50,997 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:36:56.464  INFO 2025-06-13 05:36:56,464 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:56.471  INFO 2025-06-13 05:36:56,471 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:56.573  INFO 2025-06-13 05:36:56,573 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:56.620  INFO 2025-06-13 05:36:56,620 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:56.638  INFO 2025-06-13 05:36:56,638 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:36:56.670  INFO 2025-06-13 05:36:56,670 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:08.532  INFO 2025-06-13 05:45:08,532 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:08.669  INFO 2025-06-13 05:45:08,669 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:08.672  INFO 2025-06-13 05:45:08,672 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:45:08.672  INFO 2025-06-13 05:45:08,672 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:45:08.672  INFO 2025-06-13 05:45:08,672 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:45:08.672  INFO 2025-06-13 05:45:08,672 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:45:08.672  INFO 2025-06-13 05:45:08,672 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 05:45:08.673  INFO 2025-06-13 05:45:08,673 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 05:45:08.673  INFO 2025-06-13 05:45:08,673 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 05:45:08.674  INFO 2025-06-13 05:45:08,674 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 05:45:08.675  INFO 2025-06-13 05:45:08,675 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:08.679  INFO 2025-06-13 05:45:08,679 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:45:08.679  INFO 2025-06-13 05:45:08,679 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:45:17.430  INFO 2025-06-13 05:45:17,430 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:17.526  INFO 2025-06-13 05:45:17,526 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:17.573  INFO 2025-06-13 05:45:17,573 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:17.589  INFO 2025-06-13 05:45:17,589 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:17.683  INFO 2025-06-13 05:45:17,683 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:17.775  INFO 2025-06-13 05:45:17,775 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:21.891  INFO 2025-06-13 05:45:21,891 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:22.974  INFO 2025-06-13 05:45:22,974 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:23.048  INFO 2025-06-13 05:45:23,048 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:23.106  INFO 2025-06-13 05:45:23,106 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:24.872  INFO 2025-06-13 05:45:24,872 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:26.577  INFO 2025-06-13 05:45:26,577 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:26.662  INFO 2025-06-13 05:45:26,662 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:26.719  INFO 2025-06-13 05:45:26,719 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:26.893  INFO 2025-06-13 05:45:26,893 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:26.895  INFO 2025-06-13 05:45:26,895 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:45:26.896  INFO 2025-06-13 05:45:26,896 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:45:26.896  INFO 2025-06-13 05:45:26,896 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:45:26.896  INFO 2025-06-13 05:45:26,896 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:45:26.896  INFO 2025-06-13 05:45:26,896 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 05:45:26.896  INFO 2025-06-13 05:45:26,896 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 05:45:26.896  INFO 2025-06-13 05:45:26,896 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 1000)
2025-06-13 05:45:26.897  INFO 2025-06-13 05:45:26,897 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=1000
2025-06-13 05:45:26.901  INFO 2025-06-13 05:45:26,901 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:45:26.901  INFO 2025-06-13 05:45:26,901 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:45:28.309  INFO 2025-06-13 05:45:28,309 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:28.333  INFO 2025-06-13 05:45:28,333 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:28.431  INFO 2025-06-13 05:45:28,431 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:28.431  INFO 2025-06-13 05:45:28,431 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:28.500  INFO 2025-06-13 05:45:28,500 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:28.529  INFO 2025-06-13 05:45:28,529 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:45:35.850  INFO 2025-06-13 05:45:35,850 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 05:45:35.933  INFO 2025-06-13 05:45:35,933 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:45:35.935  INFO 2025-06-13 05:45:35,935 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 05:45:36.403  INFO 2025-06-13 05:45:36,403 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:45:36.508  INFO 2025-06-13 05:45:36,508 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:45:36.510  INFO 2025-06-13 05:45:36,510 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:45:36.510  INFO 2025-06-13 05:45:36,510 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:45:36.511  INFO 2025-06-13 05:45:36,511 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:45:36.511  INFO 2025-06-13 05:45:36,511 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:45:36.511  INFO 2025-06-13 05:45:36,511 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:45:36.511  INFO 2025-06-13 05:45:36,511 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:45:36.512  INFO 2025-06-13 05:45:36,512 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:45:36.512  INFO 2025-06-13 05:45:36,512 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 05:45:36.512  INFO 2025-06-13 05:45:36,512 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 05:45:36.516  INFO 2025-06-13 05:45:36,516 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:45:36.516  INFO 2025-06-13 05:45:36,516 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:45:41.499  INFO 2025-06-13 05:45:41,499 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:45:41.578  INFO 2025-06-13 05:45:41,578 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:45:41.647  INFO 2025-06-13 05:45:41,647 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:45:41.654  INFO 2025-06-13 05:45:41,654 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:45:41.694  INFO 2025-06-13 05:45:41,694 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:45:41.751  INFO 2025-06-13 05:45:41,751 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:45:57.419  INFO 2025-06-13 05:45:57,419 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:46:02.233  INFO 2025-06-13 05:46:02,233 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:46:02.268  INFO 2025-06-13 05:46:02,268 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:46:02.358  INFO 2025-06-13 05:46:02,358 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:46:03.423  INFO 2025-06-13 05:46:03,423 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:46:08.388  INFO 2025-06-13 05:46:08,388 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:46:08.470  INFO 2025-06-13 05:46:08,470 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:46:08.548  INFO 2025-06-13 05:46:08,548 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:46:08.603  INFO 2025-06-13 05:46:08,603 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:46:08.732  INFO 2025-06-13 05:46:08,732 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:46:08.734  INFO 2025-06-13 05:46:08,734 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:46:08.735  INFO 2025-06-13 05:46:08,735 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:46:08.735  INFO 2025-06-13 05:46:08,735 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:46:08.735  INFO 2025-06-13 05:46:08,735 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:46:08.735  INFO 2025-06-13 05:46:08,735 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:46:08.736  INFO 2025-06-13 05:46:08,736 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:46:08.736  INFO 2025-06-13 05:46:08,736 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 05:46:08.736  INFO 2025-06-13 05:46:08,736 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 05:46:08.742  INFO 2025-06-13 05:46:08,742 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:46:08.743  INFO 2025-06-13 05:46:08,743 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:47:01.377  INFO 2025-06-13 05:47:01,377 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:47:01.431  INFO 2025-06-13 05:47:01,431 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft for tree 1 by editor 3
2025-06-13 05:47:01.486  INFO 2025-06-13 05:47:01,486 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:47:01.581  INFO 2025-06-13 05:47:01,581 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:47:04.058  INFO 2025-06-13 05:47:04,058 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:47:04.107  INFO 2025-06-13 05:47:04,107 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:47:04.183  INFO 2025-06-13 05:47:04,183 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:47:04.199  INFO 2025-06-13 05:47:04,199 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:47:04.309  INFO 2025-06-13 05:47:04,309 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:47:04.320  INFO 2025-06-13 05:47:04,320 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:47:06.039  INFO 2025-06-13 05:47:06,039 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:47:16.709  INFO 2025-06-13 05:47:16,709 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 05:47:16.811  INFO 2025-06-13 05:47:16,811 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:47:16.812  INFO 2025-06-13 05:47:16,812 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 05:47:17.409  INFO 2025-06-13 05:47:17,409 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:47:17.523  INFO 2025-06-13 05:47:17,523 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:47:17.528  INFO 2025-06-13 05:47:17,528 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:47:17.528  INFO 2025-06-13 05:47:17,528 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:47:17.528  INFO 2025-06-13 05:47:17,528 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:47:17.528  INFO 2025-06-13 05:47:17,528 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:47:17.528  INFO 2025-06-13 05:47:17,528 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 05:47:17.529  INFO 2025-06-13 05:47:17,529 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 05:47:17.529  INFO 2025-06-13 05:47:17,529 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 05:47:17.529  INFO 2025-06-13 05:47:17,529 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 05:47:17.534  INFO 2025-06-13 05:47:17,534 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:47:17.535  INFO 2025-06-13 05:47:17,535 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:47:17.581  INFO 2025-06-13 05:47:17,581 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:47:29.817  INFO 2025-06-13 05:47:29,817 --- [nio-8080-exec-8] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 05:47:31.266  INFO 2025-06-13 05:47:31,266 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:47:31.385  INFO 2025-06-13 05:47:31,385 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:47:31.437  INFO 2025-06-13 05:47:31,437 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:47:31.472  INFO 2025-06-13 05:47:31,472 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:47:31.540  INFO 2025-06-13 05:47:31,540 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:47:31.602  INFO 2025-06-13 05:47:31,602 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:47:32.057  INFO 2025-06-13 05:47:32,057 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:47:33.272  INFO 2025-06-13 05:47:33,272 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:47:35.139  INFO 2025-06-13 05:47:35,139 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:47:35.210  INFO 2025-06-13 05:47:35,210 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:50:08.170  INFO 2025-06-13 05:50:08,170 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:50:08.291  INFO 2025-06-13 05:50:08,291 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:50:08.293  INFO 2025-06-13 05:50:08,293 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:50:08.293  INFO 2025-06-13 05:50:08,293 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:50:08.293  INFO 2025-06-13 05:50:08,293 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:50:08.293  INFO 2025-06-13 05:50:08,293 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:50:08.293  INFO 2025-06-13 05:50:08,293 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 05:50:08.294  INFO 2025-06-13 05:50:08,294 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 05:50:08.294  INFO 2025-06-13 05:50:08,294 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 05:50:08.295  INFO 2025-06-13 05:50:08,295 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 05:50:08.298  INFO 2025-06-13 05:50:08,298 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:50:08.298  INFO 2025-06-13 05:50:08,298 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:50:08.305  INFO 2025-06-13 05:50:08,305 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:50:11.038  INFO 2025-06-13 05:50:11,038 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:50:11.137  INFO 2025-06-13 05:50:11,137 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:50:11.172  INFO 2025-06-13 05:50:11,172 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:50:11.221  INFO 2025-06-13 05:50:11,221 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:50:11.246  INFO 2025-06-13 05:50:11,246 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:50:11.338  INFO 2025-06-13 05:50:11,338 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:50:15.243  INFO 2025-06-13 05:50:15,243 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:50:16.007  INFO 2025-06-13 05:50:16,007 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:50:16.069  INFO 2025-06-13 05:50:16,069 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:50:16.156  INFO 2025-06-13 05:50:16,156 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:50:27.462  INFO 2025-06-13 05:50:27,462 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 05:50:27.552  INFO 2025-06-13 05:50:27,552 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:27.553  INFO 2025-06-13 05:50:27,553 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 05:50:28.335  INFO 2025-06-13 05:50:28,335 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:28.426  INFO 2025-06-13 05:50:28,426 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:28.513  INFO 2025-06-13 05:50:28,513 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:28.516  INFO 2025-06-13 05:50:28,516 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:50:28.516  INFO 2025-06-13 05:50:28,516 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:50:28.516  INFO 2025-06-13 05:50:28,516 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:50:28.516  INFO 2025-06-13 05:50:28,516 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:50:28.516  INFO 2025-06-13 05:50:28,516 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:50:28.517  INFO 2025-06-13 05:50:28,517 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:50:28.517  INFO 2025-06-13 05:50:28,517 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 05:50:28.519  INFO 2025-06-13 05:50:28,519 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 05:50:28.523  INFO 2025-06-13 05:50:28,523 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:50:28.524  INFO 2025-06-13 05:50:28,524 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:50:31.917  INFO 2025-06-13 05:50:31,917 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:32.001  INFO 2025-06-13 05:50:32,001 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:32.081  INFO 2025-06-13 05:50:32,081 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:32.131  INFO 2025-06-13 05:50:32,131 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:32.197  INFO 2025-06-13 05:50:32,197 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:32.281  INFO 2025-06-13 05:50:32,281 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:33.520  INFO 2025-06-13 05:50:33,520 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:35.347  INFO 2025-06-13 05:50:35,347 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:35.521  INFO 2025-06-13 05:50:35,521 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:35.609  INFO 2025-06-13 05:50:35,609 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:35.681  INFO 2025-06-13 05:50:35,681 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:35.881  INFO 2025-06-13 05:50:35,881 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 05:50:35.884  INFO 2025-06-13 05:50:35,884 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:50:35.884  INFO 2025-06-13 05:50:35,884 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:50:35.884  INFO 2025-06-13 05:50:35,884 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:50:35.884  INFO 2025-06-13 05:50:35,884 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:50:35.884  INFO 2025-06-13 05:50:35,884 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 05:50:35.885  INFO 2025-06-13 05:50:35,885 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 05:50:35.885  INFO 2025-06-13 05:50:35,885 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 05:50:35.885  INFO 2025-06-13 05:50:35,885 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 05:50:35.889  INFO 2025-06-13 05:50:35,889 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:50:35.889  INFO 2025-06-13 05:50:35,889 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 05:51:05.377  INFO 2025-06-13 05:51:05,377 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 05:51:05.469  INFO 2025-06-13 05:51:05,469 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:05.470  INFO 2025-06-13 05:51:05,470 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 05:51:06.195  INFO 2025-06-13 05:51:06,195 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:06.318  INFO 2025-06-13 05:51:06,318 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:06.321  INFO 2025-06-13 05:51:06,321 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:51:06.321  INFO 2025-06-13 05:51:06,321 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:51:06.321  INFO 2025-06-13 05:51:06,321 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:51:06.321  INFO 2025-06-13 05:51:06,321 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:51:06.321  INFO 2025-06-13 05:51:06,321 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 05:51:06.322  INFO 2025-06-13 05:51:06,322 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 05:51:06.322  INFO 2025-06-13 05:51:06,322 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 05:51:06.322  INFO 2025-06-13 05:51:06,322 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 05:51:06.325  INFO 2025-06-13 05:51:06,325 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:06.325  INFO 2025-06-13 05:51:06,325 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:51:06.326  INFO 2025-06-13 05:51:06,326 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:51:09.932  INFO 2025-06-13 05:51:09,932 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:10.018  INFO 2025-06-13 05:51:10,018 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:10.087  INFO 2025-06-13 05:51:10,087 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:10.098  INFO 2025-06-13 05:51:10,098 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:10.192  INFO 2025-06-13 05:51:10,192 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:10.257  INFO 2025-06-13 05:51:10,257 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:11.003  INFO 2025-06-13 05:51:11,003 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:12.271  INFO 2025-06-13 05:51:12,271 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:14.054  INFO 2025-06-13 05:51:14,054 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:14.184  INFO 2025-06-13 05:51:14,184 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:14.257  INFO 2025-06-13 05:51:14,257 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:14.470  INFO 2025-06-13 05:51:14,470 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:14.473  INFO 2025-06-13 05:51:14,473 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 05:51:14.473  INFO 2025-06-13 05:51:14,473 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 05:51:14.474  INFO 2025-06-13 05:51:14,474 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 05:51:14.474  INFO 2025-06-13 05:51:14,474 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 05:51:14.474  INFO 2025-06-13 05:51:14,474 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 05:51:14.474  INFO 2025-06-13 05:51:14,474 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 05:51:14.474  INFO 2025-06-13 05:51:14,474 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 1000)
2025-06-13 05:51:14.475  INFO 2025-06-13 05:51:14,475 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=1000
2025-06-13 05:51:14.481  INFO 2025-06-13 05:51:14,481 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:51:14.481  INFO 2025-06-13 05:51:14,481 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 05:51:20.646  INFO 2025-06-13 05:51:20,646 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:20.652  INFO 2025-06-13 05:51:20,652 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:20.734  INFO 2025-06-13 05:51:20,734 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:20.736  INFO 2025-06-13 05:51:20,736 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:20.796  INFO 2025-06-13 05:51:20,796 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 05:51:20.813  INFO 2025-06-13 05:51:20,813 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:00:15.932  INFO 2025-06-13 06:00:15,932 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 06:00:15.939  INFO 2025-06-13 06:00:15,939 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 06:00:15.952  INFO 2025-06-13 06:00:15,952 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 06:03:01.770  INFO 2025-06-13 06:03:01,770 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 25908 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 06:03:01.772  INFO 2025-06-13 06:03:01,772 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 06:03:02.607  INFO 2025-06-13 06:03:02,607 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 06:03:02.676  INFO 2025-06-13 06:03:02,676 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 63 ms. Found 11 JPA repository interfaces.
2025-06-13 06:03:03.382  INFO 2025-06-13 06:03:03,382 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 06:03:03.400  INFO 2025-06-13 06:03:03,400 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 06:03:03.400  INFO 2025-06-13 06:03:03,400 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 06:03:03.470  INFO 2025-06-13 06:03:03,470 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 06:03:03.471  INFO 2025-06-13 06:03:03,471 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1661 ms
2025-06-13 06:03:03.503  INFO 2025-06-13 06:03:03,503 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 06:03:03.691  INFO 2025-06-13 06:03:03,691 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 06:03:03.693  INFO 2025-06-13 06:03:03,693 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 06:03:03.703  INFO 2025-06-13 06:03:03,703 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 06:03:03.797  INFO 2025-06-13 06:03:03,797 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 06:03:03.875  INFO 2025-06-13 06:03:03,875 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 06:03:03.914  INFO 2025-06-13 06:03:03,914 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 06:03:04.280  INFO 2025-06-13 06:03:04,280 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 06:03:06.349  INFO 2025-06-13 06:03:06,349 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 06:03:06.436  INFO 2025-06-13 06:03:06,436 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 06:03:06.850  INFO 2025-06-13 06:03:06,850 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 06:03:08.931  WARN 2025-06-13 06:03:08,931 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 06:03:08.961  INFO 2025-06-13 06:03:08,961 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 06:03:08.964  INFO 2025-06-13 06:03:08,964 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 06:03:08.965  WARN 2025-06-13 06:03:08,965 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 06:03:09.201  INFO 2025-06-13 06:03:09,201 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 06:03:09.230  INFO 2025-06-13 06:03:09,230 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 06:03:09.659  INFO 2025-06-13 06:03:09,659 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 06:03:09.665  INFO 2025-06-13 06:03:09,665 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 8.323 seconds (process running for 9.108)
2025-06-13 06:03:09.671  INFO 2025-06-13 06:03:09,671 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 06:03:09.671  INFO 2025-06-13 06:03:09,671 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 06:03:09.738  INFO 2025-06-13 06:03:09,738 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 06:03:09.959  INFO 2025-06-13 06:03:09,959 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 06:03:09.965  INFO 2025-06-13 06:03:09,965 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 06:03:10.000  INFO 2025-06-13 06:03:10,000 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 06:03:10.010  INFO 2025-06-13 06:03:10,010 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 06:03:10.071  INFO 2025-06-13 06:03:10,071 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 06:03:10.081  INFO 2025-06-13 06:03:10,081 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 06:03:10.081  INFO 2025-06-13 06:03:10,081 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 06:06:43.900  INFO 2025-06-13 06:06:43,900 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 06:06:43.901  INFO 2025-06-13 06:06:43,901 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 06:06:43.904  INFO 2025-06-13 06:06:43,904 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-06-13 06:06:44.008  INFO 2025-06-13 06:06:44,008 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 06:06:44.149  INFO 2025-06-13 06:06:44,149 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:06:44.215  INFO 2025-06-13 06:06:44,215 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 06:06:45.427  INFO 2025-06-13 06:06:45,427 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:06:45.575  INFO 2025-06-13 06:06:45,575 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:06:45.583  INFO 2025-06-13 06:06:45,583 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:06:45.583  INFO 2025-06-13 06:06:45,583 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:06:45.583  INFO 2025-06-13 06:06:45,583 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:06:45.583  INFO 2025-06-13 06:06:45,583 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:06:45.583  INFO 2025-06-13 06:06:45,583 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:06:45.586  INFO 2025-06-13 06:06:45,586 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:06:45.587  INFO 2025-06-13 06:06:45,587 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:06:45.590  INFO 2025-06-13 06:06:45,590 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:06:45.591  INFO 2025-06-13 06:06:45,591 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:06:45.613  INFO 2025-06-13 06:06:45,613 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:06:45.614  INFO 2025-06-13 06:06:45,614 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:06:58.541  INFO 2025-06-13 06:06:58,541 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:06:58.575  INFO 2025-06-13 06:06:58,575 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:06:58.575  INFO 2025-06-13 06:06:58,575 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:06:58.575  INFO 2025-06-13 06:06:58,575 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:06:58.575  INFO 2025-06-13 06:06:58,575 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:06:58.577  INFO 2025-06-13 06:06:58,577 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:06:58.849  INFO 2025-06-13 06:06:58,849 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:06:58.853  INFO 2025-06-13 06:06:58,853 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:06:58.858  INFO 2025-06-13 06:06:58,858 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:06:58.858  INFO 2025-06-13 06:06:58,858 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:06:58.858  INFO 2025-06-13 06:06:58,858 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:06:58.858  INFO 2025-06-13 06:06:58,858 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:06:58.858  INFO 2025-06-13 06:06:58,858 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:06:58.861  INFO 2025-06-13 06:06:58,861 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:06:58.861  INFO 2025-06-13 06:06:58,861 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:06:58.861  INFO 2025-06-13 06:06:58,861 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:06:58.870  INFO 2025-06-13 06:06:58,870 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:06:58.870  INFO 2025-06-13 06:06:58,870 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:07:00.966  INFO 2025-06-13 06:07:00,966 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:01.047  INFO 2025-06-13 06:07:01,047 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:01.191  INFO 2025-06-13 06:07:01,191 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:01.226  INFO 2025-06-13 06:07:01,226 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:01.277  INFO 2025-06-13 06:07:01,277 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:01.349  INFO 2025-06-13 06:07:01,349 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:02.587  INFO 2025-06-13 06:07:02,587 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:03.420  INFO 2025-06-13 06:07:03,420 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:08.444  INFO 2025-06-13 06:07:08,444 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:08.463  INFO 2025-06-13 06:07:08,463 --- [nio-8080-exec-8] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 06:07:08.463  INFO 2025-06-13 06:07:08,463 --- [nio-8080-exec-8] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 06:07:10.472  INFO 2025-06-13 06:07:10,472 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:10.495  INFO 2025-06-13 06:07:10,495 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:10.558  INFO 2025-06-13 06:07:10,558 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:10.562  INFO 2025-06-13 06:07:10,562 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:10.638  INFO 2025-06-13 06:07:10,638 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:10.641  INFO 2025-06-13 06:07:10,641 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:17.752  INFO 2025-06-13 06:07:17,752 --- [nio-8080-exec-6] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 06:07:17.845  INFO 2025-06-13 06:07:17,845 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:17.846  INFO 2025-06-13 06:07:17,846 --- [nio-8080-exec-6] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 06:07:18.400  INFO 2025-06-13 06:07:18,400 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:18.524  INFO 2025-06-13 06:07:18,524 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:18.538  INFO 2025-06-13 06:07:18,538 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:18.543  INFO 2025-06-13 06:07:18,543 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:07:18.543  INFO 2025-06-13 06:07:18,543 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:07:18.543  INFO 2025-06-13 06:07:18,543 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:07:18.543  INFO 2025-06-13 06:07:18,543 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:07:18.543  INFO 2025-06-13 06:07:18,543 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 06:07:18.546  INFO 2025-06-13 06:07:18,546 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 06:07:18.546  INFO 2025-06-13 06:07:18,546 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 06:07:18.546  INFO 2025-06-13 06:07:18,546 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 06:07:18.573  INFO 2025-06-13 06:07:18,573 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 06:07:18.573  INFO 2025-06-13 06:07:18,573 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 06:07:22.057  INFO 2025-06-13 06:07:22,057 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:22.058  INFO 2025-06-13 06:07:22,058 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:22.112  INFO 2025-06-13 06:07:22,112 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:22.119  INFO 2025-06-13 06:07:22,119 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:22.245  INFO 2025-06-13 06:07:22,245 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:22.246  INFO 2025-06-13 06:07:22,246 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:26.018  INFO 2025-06-13 06:07:26,018 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:26.062  INFO 2025-06-13 06:07:26,062 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:26.140  INFO 2025-06-13 06:07:26,140 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:26.187  INFO 2025-06-13 06:07:26,187 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:26.320  INFO 2025-06-13 06:07:26,320 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:26.382  INFO 2025-06-13 06:07:26,382 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:27.271  INFO 2025-06-13 06:07:27,271 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:28.598  INFO 2025-06-13 06:07:28,598 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:28.758  INFO 2025-06-13 06:07:28,758 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:28.810  INFO 2025-06-13 06:07:28,810 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:29.016  INFO 2025-06-13 06:07:29,016 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:29.020  INFO 2025-06-13 06:07:29,020 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:07:29.020  INFO 2025-06-13 06:07:29,020 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:07:29.021  INFO 2025-06-13 06:07:29,021 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:07:29.021  INFO 2025-06-13 06:07:29,021 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:07:29.021  INFO 2025-06-13 06:07:29,021 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 06:07:29.023  INFO 2025-06-13 06:07:29,023 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 06:07:29.023  INFO 2025-06-13 06:07:29,023 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 1000)
2025-06-13 06:07:29.024  INFO 2025-06-13 06:07:29,024 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=1000
2025-06-13 06:07:29.033  INFO 2025-06-13 06:07:29,033 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 06:07:29.034  INFO 2025-06-13 06:07:29,034 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 06:07:30.737  INFO 2025-06-13 06:07:30,737 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:30.748  INFO 2025-06-13 06:07:30,748 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:30.829  INFO 2025-06-13 06:07:30,829 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:30.832  INFO 2025-06-13 06:07:30,832 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:30.859  INFO 2025-06-13 06:07:30,859 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:30.861  INFO 2025-06-13 06:07:30,861 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:31.704  INFO 2025-06-13 06:07:31,704 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:31.708  INFO 2025-06-13 06:07:31,708 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:31.881  INFO 2025-06-13 06:07:31,881 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:31.881  INFO 2025-06-13 06:07:31,881 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:34.851  INFO 2025-06-13 06:07:34,851 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:34.877  INFO 2025-06-13 06:07:34,877 --- [nio-8080-exec-5] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 06:07:34.881  INFO 2025-06-13 06:07:34,881 --- [nio-8080-exec-5] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 06:07:34.881  INFO 2025-06-13 06:07:34,881 --- [nio-8080-exec-5] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 06:07:34.958  INFO 2025-06-13 06:07:34,958 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:07:41.908  INFO 2025-06-13 06:07:41,908 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 06:07:42.010  INFO 2025-06-13 06:07:42,010 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:42.011  INFO 2025-06-13 06:07:42,011 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 06:07:42.465  INFO 2025-06-13 06:07:42,465 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:42.530  INFO 2025-06-13 06:07:42,530 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:42.533  INFO 2025-06-13 06:07:42,533 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:42.534  INFO 2025-06-13 06:07:42,534 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:07:42.534  INFO 2025-06-13 06:07:42,534 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:07:42.534  INFO 2025-06-13 06:07:42,534 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:07:42.534  INFO 2025-06-13 06:07:42,534 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:07:42.534  INFO 2025-06-13 06:07:42,534 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:07:42.535  INFO 2025-06-13 06:07:42,535 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:07:42.535  INFO 2025-06-13 06:07:42,535 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:07:42.536  INFO 2025-06-13 06:07:42,536 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:07:42.542  INFO 2025-06-13 06:07:42,542 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:07:42.542  INFO 2025-06-13 06:07:42,542 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:07:45.305  INFO 2025-06-13 06:07:45,305 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:45.360  INFO 2025-06-13 06:07:45,360 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:45.465  INFO 2025-06-13 06:07:45,465 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:45.525  INFO 2025-06-13 06:07:45,525 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:45.525  INFO 2025-06-13 06:07:45,525 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:45.639  INFO 2025-06-13 06:07:45,639 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:47.573  INFO 2025-06-13 06:07:47,573 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:49.634  INFO 2025-06-13 06:07:49,634 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:50.908  INFO 2025-06-13 06:07:50,908 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:51.005  INFO 2025-06-13 06:07:51,005 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:51.128  INFO 2025-06-13 06:07:51,128 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:51.259  INFO 2025-06-13 06:07:51,259 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:51.263  INFO 2025-06-13 06:07:51,263 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:07:51.263  INFO 2025-06-13 06:07:51,263 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:07:51.263  INFO 2025-06-13 06:07:51,263 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:07:51.263  INFO 2025-06-13 06:07:51,263 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:07:51.263  INFO 2025-06-13 06:07:51,263 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:07:51.265  INFO 2025-06-13 06:07:51,265 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:07:51.265  INFO 2025-06-13 06:07:51,265 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:07:51.266  INFO 2025-06-13 06:07:51,266 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:07:51.272  INFO 2025-06-13 06:07:51,272 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:07:51.272  INFO 2025-06-13 06:07:51,272 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:07:54.271  INFO 2025-06-13 06:07:54,271 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:54.275  INFO 2025-06-13 06:07:54,275 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:54.337  INFO 2025-06-13 06:07:54,337 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:54.373  INFO 2025-06-13 06:07:54,373 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:54.431  INFO 2025-06-13 06:07:54,431 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:54.457  INFO 2025-06-13 06:07:54,457 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:57.103  INFO 2025-06-13 06:07:57,103 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:58.382  INFO 2025-06-13 06:07:58,382 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:58.458  INFO 2025-06-13 06:07:58,458 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:58.561  INFO 2025-06-13 06:07:58,561 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:58.789  INFO 2025-06-13 06:07:58,789 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:07:58.806  INFO 2025-06-13 06:07:58,806 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:07:58.806  INFO 2025-06-13 06:07:58,806 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:07:58.806  INFO 2025-06-13 06:07:58,806 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:07:58.806  INFO 2025-06-13 06:07:58,806 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:07:58.806  INFO 2025-06-13 06:07:58,806 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:07:58.811  INFO 2025-06-13 06:07:58,811 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:07:58.812  INFO 2025-06-13 06:07:58,812 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:07:58.813  INFO 2025-06-13 06:07:58,813 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:07:58.823  INFO 2025-06-13 06:07:58,823 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:07:58.823  INFO 2025-06-13 06:07:58,823 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:08:03.570  INFO 2025-06-13 06:08:03,570 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:03.594  INFO 2025-06-13 06:08:03,594 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft for tree 1 by editor 3
2025-06-13 06:08:03.644  INFO 2025-06-13 06:08:03,644 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:07.719  INFO 2025-06-13 06:08:07,719 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:07.725  INFO 2025-06-13 06:08:07,725 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:07.786  INFO 2025-06-13 06:08:07,786 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:07.788  INFO 2025-06-13 06:08:07,788 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:07.854  INFO 2025-06-13 06:08:07,854 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:07.881  INFO 2025-06-13 06:08:07,881 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:09.719  INFO 2025-06-13 06:08:09,719 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:11.238  INFO 2025-06-13 06:08:11,238 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:14.004  INFO 2025-06-13 06:08:14,004 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:15.624  INFO 2025-06-13 06:08:15,624 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:15.700  INFO 2025-06-13 06:08:15,700 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:15.768  INFO 2025-06-13 06:08:15,768 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:15.947  INFO 2025-06-13 06:08:15,947 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:15.950  INFO 2025-06-13 06:08:15,950 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:08:15.950  INFO 2025-06-13 06:08:15,950 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:08:15.950  INFO 2025-06-13 06:08:15,950 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:08:15.950  INFO 2025-06-13 06:08:15,950 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:08:15.950  INFO 2025-06-13 06:08:15,950 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:08:15.951  INFO 2025-06-13 06:08:15,951 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:08:15.951  INFO 2025-06-13 06:08:15,951 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:08:15.952  INFO 2025-06-13 06:08:15,952 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:08:15.957  INFO 2025-06-13 06:08:15,957 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:08:15.957  INFO 2025-06-13 06:08:15,957 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:08:17.755  INFO 2025-06-13 06:08:17,755 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:17.786  INFO 2025-06-13 06:08:17,786 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:17.837  INFO 2025-06-13 06:08:17,837 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:17.850  INFO 2025-06-13 06:08:17,850 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:17.911  INFO 2025-06-13 06:08:17,911 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:08:17.914  INFO 2025-06-13 06:08:17,914 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:09:01.878  INFO 2025-06-13 06:09:01,878 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 06:09:01.965  INFO 2025-06-13 06:09:01,965 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:09:01.966  INFO 2025-06-13 06:09:01,966 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 06:09:02.848  INFO 2025-06-13 06:09:02,848 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:09:02.852  INFO 2025-06-13 06:09:02,852 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:09:02.852  INFO 2025-06-13 06:09:02,852 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:09:02.852  INFO 2025-06-13 06:09:02,852 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:09:02.852  INFO 2025-06-13 06:09:02,852 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:09:02.852  INFO 2025-06-13 06:09:02,852 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 06:09:02.853  INFO 2025-06-13 06:09:02,853 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 06:09:02.854  INFO 2025-06-13 06:09:02,854 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 06:09:02.854  INFO 2025-06-13 06:09:02,854 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 06:09:02.860  INFO 2025-06-13 06:09:02,860 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 06:09:02.860  INFO 2025-06-13 06:09:02,860 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 06:09:02.866  INFO 2025-06-13 06:09:02,866 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:09:02.915  INFO 2025-06-13 06:09:02,915 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:09:14.974  INFO 2025-06-13 06:09:14,974 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:09:15.047  INFO 2025-06-13 06:09:15,047 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:09:15.119  INFO 2025-06-13 06:09:15,119 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:09:15.126  INFO 2025-06-13 06:09:15,126 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:09:15.204  INFO 2025-06-13 06:09:15,204 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:09:15.278  INFO 2025-06-13 06:09:15,278 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:09:17.067  INFO 2025-06-13 06:09:17,067 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:10:40.701  INFO 2025-06-13 06:10:40,701 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 06:10:40.706  INFO 2025-06-13 06:10:40,706 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 06:10:40.710  INFO 2025-06-13 06:10:40,710 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 06:13:05.654  INFO 2025-06-13 06:13:05,654 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 12800 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 06:13:05.657  INFO 2025-06-13 06:13:05,657 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 06:13:06.875  INFO 2025-06-13 06:13:06,875 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 06:13:07.011  INFO 2025-06-13 06:13:07,011 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 124 ms. Found 11 JPA repository interfaces.
2025-06-13 06:13:08.790  INFO 2025-06-13 06:13:08,790 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 06:13:08.813  INFO 2025-06-13 06:13:08,813 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 06:13:08.814  INFO 2025-06-13 06:13:08,814 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 06:13:08.918  INFO 2025-06-13 06:13:08,918 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 06:13:08.919  INFO 2025-06-13 06:13:08,919 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3197 ms
2025-06-13 06:13:08.975  INFO 2025-06-13 06:13:08,975 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 06:13:09.242  INFO 2025-06-13 06:13:09,242 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 06:13:09.245  INFO 2025-06-13 06:13:09,245 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 06:13:09.263  INFO 2025-06-13 06:13:09,263 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 06:13:09.425  INFO 2025-06-13 06:13:09,425 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 06:13:09.514  INFO 2025-06-13 06:13:09,514 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 06:13:09.568  INFO 2025-06-13 06:13:09,568 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 06:13:10.018  INFO 2025-06-13 06:13:10,018 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 06:13:11.748  INFO 2025-06-13 06:13:11,748 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 06:13:11.866  INFO 2025-06-13 06:13:11,866 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 06:13:12.456  INFO 2025-06-13 06:13:12,456 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 06:13:15.448  WARN 2025-06-13 06:13:15,448 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 06:13:15.491  INFO 2025-06-13 06:13:15,491 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 06:13:15.495  INFO 2025-06-13 06:13:15,495 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 06:13:15.497  WARN 2025-06-13 06:13:15,497 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 06:13:15.854  INFO 2025-06-13 06:13:15,854 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 06:13:15.897  INFO 2025-06-13 06:13:15,897 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 06:13:16.457  INFO 2025-06-13 06:13:16,457 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 06:13:16.467  INFO 2025-06-13 06:13:16,467 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 11.537 seconds (process running for 12.228)
2025-06-13 06:13:16.471  INFO 2025-06-13 06:13:16,471 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 06:13:16.575  INFO 2025-06-13 06:13:16,575 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 06:13:16.850  INFO 2025-06-13 06:13:16,850 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 06:13:16.912  INFO 2025-06-13 06:13:16,912 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 06:13:16.974  INFO 2025-06-13 06:13:16,974 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 06:13:16.990  INFO 2025-06-13 06:13:16,990 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 06:13:17.075  INFO 2025-06-13 06:13:17,075 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 06:13:17.090  INFO 2025-06-13 06:13:17,090 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 06:13:17.090  INFO 2025-06-13 06:13:17,090 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 06:13:17.122  INFO 2025-06-13 06:13:17,122 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 06:13:26.362  INFO 2025-06-13 06:13:26,362 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 06:13:26.363  INFO 2025-06-13 06:13:26,363 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 06:13:26.364  INFO 2025-06-13 06:13:26,364 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 06:13:26.500  INFO 2025-06-13 06:13:26,500 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:13:26.596  INFO 2025-06-13 06:13:26,596 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:13:26.597  INFO 2025-06-13 06:13:26,597 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:13:26.597  INFO 2025-06-13 06:13:26,597 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:13:26.597  INFO 2025-06-13 06:13:26,597 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 06:13:26.600  INFO 2025-06-13 06:13:26,600 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 06:13:27.034  INFO 2025-06-13 06:13:27,034 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:13:28.779  INFO 2025-06-13 06:13:28,779 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:13:28.899  INFO 2025-06-13 06:13:28,899 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:13:28.960  INFO 2025-06-13 06:13:28,960 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:13:28.986  INFO 2025-06-13 06:13:28,986 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:13:29.064  INFO 2025-06-13 06:13:29,064 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:13:29.157  INFO 2025-06-13 06:13:29,157 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:13:30.655  INFO 2025-06-13 06:13:30,655 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:13:31.524  INFO 2025-06-13 06:13:31,524 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:13:31.618  INFO 2025-06-13 06:13:31,618 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:13:31.725  INFO 2025-06-13 06:13:31,725 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:14:02.091  INFO 2025-06-13 06:14:02,091 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 06:14:02.101  INFO 2025-06-13 06:14:02,101 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 06:14:02.109  INFO 2025-06-13 06:14:02,109 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 06:16:06.434  INFO 2025-06-13 06:16:06,434 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 23436 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 06:16:06.436  INFO 2025-06-13 06:16:06,436 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 06:16:07.131  INFO 2025-06-13 06:16:07,131 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 06:16:07.204  INFO 2025-06-13 06:16:07,204 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 66 ms. Found 11 JPA repository interfaces.
2025-06-13 06:16:07.861  INFO 2025-06-13 06:16:07,861 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 06:16:07.874  INFO 2025-06-13 06:16:07,874 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 06:16:07.874  INFO 2025-06-13 06:16:07,874 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 06:16:07.926  INFO 2025-06-13 06:16:07,926 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 06:16:07.927  INFO 2025-06-13 06:16:07,927 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1449 ms
2025-06-13 06:16:07.956  INFO 2025-06-13 06:16:07,956 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 06:16:08.110  INFO 2025-06-13 06:16:08,110 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 06:16:08.111  INFO 2025-06-13 06:16:08,111 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 06:16:08.121  INFO 2025-06-13 06:16:08,121 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 06:16:08.210  INFO 2025-06-13 06:16:08,210 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 06:16:08.255  INFO 2025-06-13 06:16:08,255 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 06:16:08.284  INFO 2025-06-13 06:16:08,284 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 06:16:08.523  INFO 2025-06-13 06:16:08,523 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 06:16:09.816  INFO 2025-06-13 06:16:09,816 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 06:16:09.901  INFO 2025-06-13 06:16:09,901 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 06:16:10.325  INFO 2025-06-13 06:16:10,325 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 06:16:12.577  WARN 2025-06-13 06:16:12,577 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 06:16:12.609  INFO 2025-06-13 06:16:12,609 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 06:16:12.612  INFO 2025-06-13 06:16:12,612 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 06:16:12.613  WARN 2025-06-13 06:16:12,613 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 06:16:12.896  INFO 2025-06-13 06:16:12,896 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 06:16:12.933  INFO 2025-06-13 06:16:12,933 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 06:16:13.328  INFO 2025-06-13 06:16:13,328 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 06:16:13.334  INFO 2025-06-13 06:16:13,334 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 7.271 seconds (process running for 7.873)
2025-06-13 06:16:13.476  INFO 2025-06-13 06:16:13,476 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 06:16:13.478  INFO 2025-06-13 06:16:13,478 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 06:16:13.699  INFO 2025-06-13 06:16:13,699 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 06:16:13.706  INFO 2025-06-13 06:16:13,706 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 06:16:13.748  INFO 2025-06-13 06:16:13,748 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 06:16:13.762  INFO 2025-06-13 06:16:13,762 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 06:16:13.834  INFO 2025-06-13 06:16:13,834 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 06:16:13.848  INFO 2025-06-13 06:16:13,848 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 06:16:13.848  INFO 2025-06-13 06:16:13,848 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 06:16:13.850  INFO 2025-06-13 06:16:13,850 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 06:16:27.884  INFO 2025-06-13 06:16:27,884 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 06:16:27.884  INFO 2025-06-13 06:16:27,884 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 06:16:27.886  INFO 2025-06-13 06:16:27,886 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-13 06:16:27.979  INFO 2025-06-13 06:16:27,979 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 06:16:28.091  INFO 2025-06-13 06:16:28,091 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:28.180  INFO 2025-06-13 06:16:28,180 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 06:16:29.487  INFO 2025-06-13 06:16:29,487 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:29.618  INFO 2025-06-13 06:16:29,618 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:29.627  INFO 2025-06-13 06:16:29,627 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:16:29.627  INFO 2025-06-13 06:16:29,627 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:16:29.627  INFO 2025-06-13 06:16:29,627 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:16:29.627  INFO 2025-06-13 06:16:29,627 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:16:29.627  INFO 2025-06-13 06:16:29,627 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:16:29.631  INFO 2025-06-13 06:16:29,631 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:16:29.631  INFO 2025-06-13 06:16:29,631 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:16:29.634  INFO 2025-06-13 06:16:29,634 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:16:29.656  INFO 2025-06-13 06:16:29,656 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:16:29.657  INFO 2025-06-13 06:16:29,657 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:16:29.682  INFO 2025-06-13 06:16:29,682 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:45.250  INFO 2025-06-13 06:16:45,250 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:45.290  INFO 2025-06-13 06:16:45,290 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:16:45.290  INFO 2025-06-13 06:16:45,290 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:16:45.291  INFO 2025-06-13 06:16:45,291 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:16:45.291  INFO 2025-06-13 06:16:45,291 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:16:45.292  INFO 2025-06-13 06:16:45,292 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:16:45.660  INFO 2025-06-13 06:16:45,660 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:45.668  INFO 2025-06-13 06:16:45,668 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:45.673  INFO 2025-06-13 06:16:45,673 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:16:45.673  INFO 2025-06-13 06:16:45,673 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:16:45.673  INFO 2025-06-13 06:16:45,673 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:16:45.673  INFO 2025-06-13 06:16:45,673 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:16:45.673  INFO 2025-06-13 06:16:45,673 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:16:45.676  INFO 2025-06-13 06:16:45,676 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:16:45.676  INFO 2025-06-13 06:16:45,676 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:16:45.677  INFO 2025-06-13 06:16:45,677 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:16:45.686  INFO 2025-06-13 06:16:45,686 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:16:45.686  INFO 2025-06-13 06:16:45,686 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:16:47.449  INFO 2025-06-13 06:16:47,449 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:47.528  INFO 2025-06-13 06:16:47,528 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:47.612  INFO 2025-06-13 06:16:47,612 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:47.652  INFO 2025-06-13 06:16:47,652 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:47.703  INFO 2025-06-13 06:16:47,703 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:47.772  INFO 2025-06-13 06:16:47,772 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:48.307  INFO 2025-06-13 06:16:48,307 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:49.479  INFO 2025-06-13 06:16:49,479 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:55.311  INFO 2025-06-13 06:16:55,311 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:16:55.332  INFO 2025-06-13 06:16:55,332 --- [nio-8080-exec-4] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 06:16:55.332  INFO 2025-06-13 06:16:55,332 --- [nio-8080-exec-4] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 06:17:41.933  INFO 2025-06-13 06:17:41,933 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:17:42.261  INFO 2025-06-13 06:17:42,261 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:17:42.291  INFO 2025-06-13 06:17:42,291 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:17:42.295  INFO 2025-06-13 06:17:42,295 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:17:42.295  INFO 2025-06-13 06:17:42,295 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:17:42.295  INFO 2025-06-13 06:17:42,295 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:17:42.295  INFO 2025-06-13 06:17:42,295 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:17:42.295  INFO 2025-06-13 06:17:42,295 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:17:42.298  INFO 2025-06-13 06:17:42,298 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:17:42.298  INFO 2025-06-13 06:17:42,298 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:17:42.299  INFO 2025-06-13 06:17:42,299 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:17:42.308  INFO 2025-06-13 06:17:42,308 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:17:42.309  INFO 2025-06-13 06:17:42,309 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:17:42.962  INFO 2025-06-13 06:17:42,962 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:17:42.966  INFO 2025-06-13 06:17:42,966 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:17:42.967  INFO 2025-06-13 06:17:42,967 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:17:42.967  INFO 2025-06-13 06:17:42,967 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:17:42.967  INFO 2025-06-13 06:17:42,967 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:17:42.967  INFO 2025-06-13 06:17:42,967 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:17:42.969  INFO 2025-06-13 06:17:42,969 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:17:42.969  INFO 2025-06-13 06:17:42,969 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:17:42.969  INFO 2025-06-13 06:17:42,969 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:17:42.975  INFO 2025-06-13 06:17:42,975 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:17:42.976  INFO 2025-06-13 06:17:42,976 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:17:43.013  INFO 2025-06-13 06:17:43,013 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:17:53.696  INFO 2025-06-13 06:17:53,696 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 06:17:53.799  INFO 2025-06-13 06:17:53,799 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:17:53.800  INFO 2025-06-13 06:17:53,800 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 06:17:54.298  INFO 2025-06-13 06:17:54,298 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:17:54.531  INFO 2025-06-13 06:17:54,531 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:17:54.577  INFO 2025-06-13 06:17:54,577 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:17:54.582  INFO 2025-06-13 06:17:54,582 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:17:54.582  INFO 2025-06-13 06:17:54,582 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:17:54.582  INFO 2025-06-13 06:17:54,582 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:17:54.582  INFO 2025-06-13 06:17:54,582 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:17:54.582  INFO 2025-06-13 06:17:54,582 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 06:17:54.584  INFO 2025-06-13 06:17:54,584 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 06:17:54.584  INFO 2025-06-13 06:17:54,584 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 06:17:54.585  INFO 2025-06-13 06:17:54,585 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 06:17:54.598  INFO 2025-06-13 06:17:54,598 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 06:17:54.598  INFO 2025-06-13 06:17:54,598 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 06:17:57.662  INFO 2025-06-13 06:17:57,662 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:17:57.667  INFO 2025-06-13 06:17:57,667 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:17:57.821  INFO 2025-06-13 06:17:57,821 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:17:57.842  INFO 2025-06-13 06:17:57,842 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:17:57.978  INFO 2025-06-13 06:17:57,978 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:17:58.022  INFO 2025-06-13 06:17:58,022 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:18:00.369  INFO 2025-06-13 06:18:00,369 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:18:00.399  INFO 2025-06-13 06:18:00,399 --- [nio-8080-exec-4] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 06:18:00.403  INFO 2025-06-13 06:18:00,403 --- [nio-8080-exec-4] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 06:18:00.403  INFO 2025-06-13 06:18:00,403 --- [nio-8080-exec-4] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 06:18:00.505  INFO 2025-06-13 06:18:00,505 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:18:13.850  INFO 2025-06-13 06:18:13,850 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 06:18:13.929  INFO 2025-06-13 06:18:13,929 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:13.930  INFO 2025-06-13 06:18:13,930 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 06:18:14.299  INFO 2025-06-13 06:18:14,299 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:14.387  INFO 2025-06-13 06:18:14,387 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:14.392  INFO 2025-06-13 06:18:14,392 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:18:14.392  INFO 2025-06-13 06:18:14,392 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:18:14.392  INFO 2025-06-13 06:18:14,392 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:18:14.392  INFO 2025-06-13 06:18:14,392 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:18:14.392  INFO 2025-06-13 06:18:14,392 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:18:14.394  INFO 2025-06-13 06:18:14,394 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:14.394  INFO 2025-06-13 06:18:14,394 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:18:14.394  INFO 2025-06-13 06:18:14,394 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:18:14.394  INFO 2025-06-13 06:18:14,394 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:18:14.403  INFO 2025-06-13 06:18:14,403 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:18:14.403  INFO 2025-06-13 06:18:14,403 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:18:16.726  INFO 2025-06-13 06:18:16,726 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:16.772  INFO 2025-06-13 06:18:16,772 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:16.892  INFO 2025-06-13 06:18:16,892 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:16.906  INFO 2025-06-13 06:18:16,906 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:16.935  INFO 2025-06-13 06:18:16,935 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:17.021  INFO 2025-06-13 06:18:17,021 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:18.799  INFO 2025-06-13 06:18:18,799 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:19.833  INFO 2025-06-13 06:18:19,833 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:19.857  INFO 2025-06-13 06:18:19,857 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:19.903  INFO 2025-06-13 06:18:19,903 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:24.204  INFO 2025-06-13 06:18:24,204 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:25.612  INFO 2025-06-13 06:18:25,612 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:25.670  INFO 2025-06-13 06:18:25,670 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:25.724  INFO 2025-06-13 06:18:25,724 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:25.847  INFO 2025-06-13 06:18:25,847 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:25.850  INFO 2025-06-13 06:18:25,850 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:18:25.851  INFO 2025-06-13 06:18:25,851 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:18:25.851  INFO 2025-06-13 06:18:25,851 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:18:25.851  INFO 2025-06-13 06:18:25,851 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:18:25.851  INFO 2025-06-13 06:18:25,851 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:18:25.852  INFO 2025-06-13 06:18:25,852 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:18:25.852  INFO 2025-06-13 06:18:25,852 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:18:25.853  INFO 2025-06-13 06:18:25,853 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:18:25.861  INFO 2025-06-13 06:18:25,861 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:18:25.862  INFO 2025-06-13 06:18:25,862 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:18:28.784  INFO 2025-06-13 06:18:28,784 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:18:28.806  INFO 2025-06-13 06:18:28,806 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 06:18:28.830  INFO 2025-06-13 06:18:28,830 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:09.113  INFO 2025-06-13 06:19:09,113 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:09.122  INFO 2025-06-13 06:19:09,122 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:09.183  INFO 2025-06-13 06:19:09,183 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:09.185  INFO 2025-06-13 06:19:09,185 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:09.247  INFO 2025-06-13 06:19:09,247 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:09.251  INFO 2025-06-13 06:19:09,251 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:10.632  INFO 2025-06-13 06:19:10,632 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:12.270  INFO 2025-06-13 06:19:12,270 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:12.311  INFO 2025-06-13 06:19:12,311 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:12.341  INFO 2025-06-13 06:19:12,341 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:12.404  INFO 2025-06-13 06:19:12,404 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:12.409  INFO 2025-06-13 06:19:12,409 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:19:12.409  INFO 2025-06-13 06:19:12,409 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:19:12.409  INFO 2025-06-13 06:19:12,409 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:19:12.410  INFO 2025-06-13 06:19:12,410 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:19:12.410  INFO 2025-06-13 06:19:12,410 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:19:12.412  INFO 2025-06-13 06:19:12,412 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:19:12.412  INFO 2025-06-13 06:19:12,412 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:19:12.413  INFO 2025-06-13 06:19:12,413 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:19:12.419  INFO 2025-06-13 06:19:12,419 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:19:12.419  INFO 2025-06-13 06:19:12,419 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:19:13.758  INFO 2025-06-13 06:19:13,758 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:13.769  INFO 2025-06-13 06:19:13,769 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:13.834  INFO 2025-06-13 06:19:13,834 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:13.834  INFO 2025-06-13 06:19:13,834 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:13.891  INFO 2025-06-13 06:19:13,891 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:13.904  INFO 2025-06-13 06:19:13,904 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:16.621  INFO 2025-06-13 06:19:16,621 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:17.854  INFO 2025-06-13 06:19:17,854 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:17.905  INFO 2025-06-13 06:19:17,905 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:17.959  INFO 2025-06-13 06:19:17,959 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:18.021  INFO 2025-06-13 06:19:18,021 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:18.025  INFO 2025-06-13 06:19:18,025 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:19:18.025  INFO 2025-06-13 06:19:18,025 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:19:18.025  INFO 2025-06-13 06:19:18,025 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:19:18.025  INFO 2025-06-13 06:19:18,025 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:19:18.025  INFO 2025-06-13 06:19:18,025 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:19:18.027  INFO 2025-06-13 06:19:18,027 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:19:18.028  INFO 2025-06-13 06:19:18,028 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:19:18.030  INFO 2025-06-13 06:19:18,030 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:19:18.035  INFO 2025-06-13 06:19:18,035 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:19:18.035  INFO 2025-06-13 06:19:18,035 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:19:19.046  INFO 2025-06-13 06:19:19,046 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:19.052  INFO 2025-06-13 06:19:19,052 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:19.118  INFO 2025-06-13 06:19:19,118 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:19.118  INFO 2025-06-13 06:19:19,118 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:19.207  INFO 2025-06-13 06:19:19,207 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:19.207  INFO 2025-06-13 06:19:19,207 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:19.774  INFO 2025-06-13 06:19:19,774 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:19:20.817  INFO 2025-06-13 06:19:20,817 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:22:45.158  INFO 2025-06-13 06:22:45,158 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 06:22:45.161  INFO 2025-06-13 06:22:45,161 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 06:22:45.165  INFO 2025-06-13 06:22:45,165 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 06:22:50.280  INFO 2025-06-13 06:22:50,280 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 21500 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 06:22:50.282  INFO 2025-06-13 06:22:50,282 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 06:22:51.845  INFO 2025-06-13 06:22:51,845 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 06:22:52.047  INFO 2025-06-13 06:22:52,047 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 194 ms. Found 11 JPA repository interfaces.
2025-06-13 06:22:53.247  INFO 2025-06-13 06:22:53,247 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 06:22:53.265  INFO 2025-06-13 06:22:53,265 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 06:22:53.265  INFO 2025-06-13 06:22:53,265 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 06:22:53.346  INFO 2025-06-13 06:22:53,346 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 06:22:53.347  INFO 2025-06-13 06:22:53,347 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3019 ms
2025-06-13 06:22:53.383  INFO 2025-06-13 06:22:53,383 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 06:22:53.632  INFO 2025-06-13 06:22:53,632 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 06:22:53.636  INFO 2025-06-13 06:22:53,636 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 06:22:53.653  INFO 2025-06-13 06:22:53,653 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 06:22:53.801  INFO 2025-06-13 06:22:53,801 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 06:22:53.940  INFO 2025-06-13 06:22:53,940 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 06:22:54.021  INFO 2025-06-13 06:22:54,021 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 06:22:54.547  INFO 2025-06-13 06:22:54,547 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 06:22:56.404  INFO 2025-06-13 06:22:56,404 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 06:22:56.537  INFO 2025-06-13 06:22:56,537 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 06:22:57.165  INFO 2025-06-13 06:22:57,165 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 06:22:59.791  WARN 2025-06-13 06:22:59,791 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 06:22:59.835  INFO 2025-06-13 06:22:59,835 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 06:22:59.839  INFO 2025-06-13 06:22:59,839 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 06:22:59.840  WARN 2025-06-13 06:22:59,840 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 06:23:00.206  INFO 2025-06-13 06:23:00,206 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 06:23:00.251  INFO 2025-06-13 06:23:00,251 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 06:23:00.682  INFO 2025-06-13 06:23:00,682 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 06:23:00.689  INFO 2025-06-13 06:23:00,689 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 10.83 seconds (process running for 11.612)
2025-06-13 06:23:00.840  INFO 2025-06-13 06:23:00,840 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 06:23:00.841  INFO 2025-06-13 06:23:00,841 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 06:23:00.843  INFO 2025-06-13 06:23:00,843 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 06:23:01.071  INFO 2025-06-13 06:23:01,071 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 06:23:01.077  INFO 2025-06-13 06:23:01,077 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 06:23:01.111  INFO 2025-06-13 06:23:01,111 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 06:23:01.120  INFO 2025-06-13 06:23:01,120 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 06:23:01.166  INFO 2025-06-13 06:23:01,166 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 06:23:01.175  INFO 2025-06-13 06:23:01,175 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 06:23:01.175  INFO 2025-06-13 06:23:01,175 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 06:23:12.329  INFO 2025-06-13 06:23:12,329 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 06:23:12.330  INFO 2025-06-13 06:23:12,330 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 06:23:12.331  INFO 2025-06-13 06:23:12,331 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 06:23:12.450  INFO 2025-06-13 06:23:12,450 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:12.527  INFO 2025-06-13 06:23:12,527 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:23:12.528  INFO 2025-06-13 06:23:12,528 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:23:12.528  INFO 2025-06-13 06:23:12,528 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:23:12.528  INFO 2025-06-13 06:23:12,528 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:23:12.531  INFO 2025-06-13 06:23:12,531 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:23:12.869  INFO 2025-06-13 06:23:12,869 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:14.889  INFO 2025-06-13 06:23:14,889 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:14.954  INFO 2025-06-13 06:23:14,954 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:15.001  INFO 2025-06-13 06:23:15,001 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:15.039  INFO 2025-06-13 06:23:15,039 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:15.089  INFO 2025-06-13 06:23:15,089 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:15.142  INFO 2025-06-13 06:23:15,142 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:15.585  INFO 2025-06-13 06:23:15,585 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:16.201  INFO 2025-06-13 06:23:16,201 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:22.821  INFO 2025-06-13 06:23:22,821 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:22.843  INFO 2025-06-13 06:23:22,843 --- [nio-8080-exec-1] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 06:23:22.843  INFO 2025-06-13 06:23:22,843 --- [nio-8080-exec-1] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 06:23:28.018  INFO 2025-06-13 06:23:28,018 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 06:23:28.101  INFO 2025-06-13 06:23:28,101 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:23:28.109  INFO 2025-06-13 06:23:28,109 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 06:23:28.425  INFO 2025-06-13 06:23:28,425 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:23:28.545  INFO 2025-06-13 06:23:28,545 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:23:28.588  INFO 2025-06-13 06:23:28,588 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:23:28.594  INFO 2025-06-13 06:23:28,594 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:23:28.594  INFO 2025-06-13 06:23:28,594 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:23:28.594  INFO 2025-06-13 06:23:28,594 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:23:28.595  INFO 2025-06-13 06:23:28,595 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:23:28.595  INFO 2025-06-13 06:23:28,595 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 06:23:28.598  INFO 2025-06-13 06:23:28,598 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 06:23:28.598  INFO 2025-06-13 06:23:28,598 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 06:23:28.602  INFO 2025-06-13 06:23:28,602 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 06:23:28.624  INFO 2025-06-13 06:23:28,624 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 06:23:28.625  INFO 2025-06-13 06:23:28,625 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 06:23:30.498  INFO 2025-06-13 06:23:30,498 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:23:30.498  INFO 2025-06-13 06:23:30,498 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:23:30.546  INFO 2025-06-13 06:23:30,546 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:23:30.554  INFO 2025-06-13 06:23:30,554 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:23:30.671  INFO 2025-06-13 06:23:30,671 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:23:30.675  INFO 2025-06-13 06:23:30,675 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:23:32.318  INFO 2025-06-13 06:23:32,318 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:23:32.346  INFO 2025-06-13 06:23:32,346 --- [nio-8080-exec-2] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 06:23:32.350  INFO 2025-06-13 06:23:32,350 --- [nio-8080-exec-2] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 06:23:32.350  INFO 2025-06-13 06:23:32,350 --- [nio-8080-exec-2] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 06:23:32.393  INFO 2025-06-13 06:23:32,393 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:23:38.202  INFO 2025-06-13 06:23:38,202 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 06:23:38.286  INFO 2025-06-13 06:23:38,286 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:38.287  INFO 2025-06-13 06:23:38,287 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 06:23:38.628  INFO 2025-06-13 06:23:38,628 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:38.713  INFO 2025-06-13 06:23:38,713 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:38.720  INFO 2025-06-13 06:23:38,720 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:23:38.720  INFO 2025-06-13 06:23:38,720 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:23:38.720  INFO 2025-06-13 06:23:38,720 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:23:38.720  INFO 2025-06-13 06:23:38,720 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:23:38.720  INFO 2025-06-13 06:23:38,720 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:23:38.722  INFO 2025-06-13 06:23:38,722 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:23:38.723  INFO 2025-06-13 06:23:38,723 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:23:38.723  INFO 2025-06-13 06:23:38,723 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:23:38.734  INFO 2025-06-13 06:23:38,734 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:23:38.734  INFO 2025-06-13 06:23:38,734 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:23:38.744  INFO 2025-06-13 06:23:38,744 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:40.598  INFO 2025-06-13 06:23:40,598 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:40.689  INFO 2025-06-13 06:23:40,689 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:40.789  INFO 2025-06-13 06:23:40,789 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:40.812  INFO 2025-06-13 06:23:40,812 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:40.865  INFO 2025-06-13 06:23:40,865 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:40.975  INFO 2025-06-13 06:23:40,975 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:42.413  INFO 2025-06-13 06:23:42,413 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:44.484  INFO 2025-06-13 06:23:44,484 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:44.548  INFO 2025-06-13 06:23:44,548 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:44.612  INFO 2025-06-13 06:23:44,612 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:44.721  INFO 2025-06-13 06:23:44,721 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:44.725  INFO 2025-06-13 06:23:44,725 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:23:44.725  INFO 2025-06-13 06:23:44,725 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:23:44.725  INFO 2025-06-13 06:23:44,725 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:23:44.725  INFO 2025-06-13 06:23:44,725 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:23:44.725  INFO 2025-06-13 06:23:44,725 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:23:44.727  INFO 2025-06-13 06:23:44,727 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:23:44.727  INFO 2025-06-13 06:23:44,727 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:23:44.728  INFO 2025-06-13 06:23:44,728 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:23:44.737  INFO 2025-06-13 06:23:44,737 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:23:44.737  INFO 2025-06-13 06:23:44,737 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:23:47.149  INFO 2025-06-13 06:23:47,149 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:47.180  INFO 2025-06-13 06:23:47,180 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 06:23:47.203  INFO 2025-06-13 06:23:47,203 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:49.620  INFO 2025-06-13 06:23:49,620 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:49.626  INFO 2025-06-13 06:23:49,626 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:49.684  INFO 2025-06-13 06:23:49,684 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:49.705  INFO 2025-06-13 06:23:49,705 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:49.771  INFO 2025-06-13 06:23:49,771 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:49.771  INFO 2025-06-13 06:23:49,771 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:50.665  INFO 2025-06-13 06:23:50,665 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:52.702  INFO 2025-06-13 06:23:52,702 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:54.295  INFO 2025-06-13 06:23:54,295 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:54.335  INFO 2025-06-13 06:23:54,335 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:54.364  INFO 2025-06-13 06:23:54,364 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:54.479  INFO 2025-06-13 06:23:54,479 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:54.483  INFO 2025-06-13 06:23:54,483 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:23:54.483  INFO 2025-06-13 06:23:54,483 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:23:54.483  INFO 2025-06-13 06:23:54,483 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:23:54.483  INFO 2025-06-13 06:23:54,483 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:23:54.483  INFO 2025-06-13 06:23:54,483 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:23:54.484  INFO 2025-06-13 06:23:54,484 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:23:54.484  INFO 2025-06-13 06:23:54,484 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:23:54.485  INFO 2025-06-13 06:23:54,485 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:23:54.489  INFO 2025-06-13 06:23:54,489 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:23:54.490  INFO 2025-06-13 06:23:54,490 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:23:58.730  INFO 2025-06-13 06:23:58,730 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:58.744  INFO 2025-06-13 06:23:58,744 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:58.802  INFO 2025-06-13 06:23:58,802 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:58.821  INFO 2025-06-13 06:23:58,821 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:58.880  INFO 2025-06-13 06:23:58,880 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:23:58.887  INFO 2025-06-13 06:23:58,887 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:10.425  INFO 2025-06-13 06:24:10,425 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:12.061  INFO 2025-06-13 06:24:12,061 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:12.106  INFO 2025-06-13 06:24:12,106 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:12.148  INFO 2025-06-13 06:24:12,148 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:12.251  INFO 2025-06-13 06:24:12,251 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:12.254  INFO 2025-06-13 06:24:12,254 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:24:12.254  INFO 2025-06-13 06:24:12,254 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:24:12.254  INFO 2025-06-13 06:24:12,254 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:24:12.254  INFO 2025-06-13 06:24:12,254 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:24:12.254  INFO 2025-06-13 06:24:12,254 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:24:12.255  INFO 2025-06-13 06:24:12,255 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:24:12.255  INFO 2025-06-13 06:24:12,255 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:24:12.256  INFO 2025-06-13 06:24:12,256 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:24:12.266  INFO 2025-06-13 06:24:12,266 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:24:12.266  INFO 2025-06-13 06:24:12,266 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:24:33.406  INFO 2025-06-13 06:24:33,406 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:33.423  INFO 2025-06-13 06:24:33,423 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 06:24:33.446  INFO 2025-06-13 06:24:33,446 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:37.485  INFO 2025-06-13 06:24:37,485 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:37.505  INFO 2025-06-13 06:24:37,505 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:37.556  INFO 2025-06-13 06:24:37,556 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:37.556  INFO 2025-06-13 06:24:37,556 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:37.617  INFO 2025-06-13 06:24:37,617 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:37.625  INFO 2025-06-13 06:24:37,625 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:38.335  INFO 2025-06-13 06:24:38,335 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:39.303  INFO 2025-06-13 06:24:39,303 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:48.803  INFO 2025-06-13 06:24:48,803 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:48.819  INFO 2025-06-13 06:24:48,819 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:48.852  INFO 2025-06-13 06:24:48,852 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:48.855  INFO 2025-06-13 06:24:48,855 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:48.906  INFO 2025-06-13 06:24:48,906 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:48.938  INFO 2025-06-13 06:24:48,938 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:50.922  INFO 2025-06-13 06:24:50,922 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:52.122  INFO 2025-06-13 06:24:52,122 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:52.180  INFO 2025-06-13 06:24:52,180 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:52.213  INFO 2025-06-13 06:24:52,213 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:52.320  INFO 2025-06-13 06:24:52,320 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:52.322  INFO 2025-06-13 06:24:52,322 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:24:52.323  INFO 2025-06-13 06:24:52,323 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:24:52.323  INFO 2025-06-13 06:24:52,323 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:24:52.323  INFO 2025-06-13 06:24:52,323 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:24:52.323  INFO 2025-06-13 06:24:52,323 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:24:52.341  INFO 2025-06-13 06:24:52,341 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:24:52.342  INFO 2025-06-13 06:24:52,342 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:24:52.343  INFO 2025-06-13 06:24:52,343 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:24:52.355  INFO 2025-06-13 06:24:52,355 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:24:52.356  INFO 2025-06-13 06:24:52,356 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:24:54.890  INFO 2025-06-13 06:24:54,890 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:54.893  INFO 2025-06-13 06:24:54,893 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:54.940  INFO 2025-06-13 06:24:54,940 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:54.940  INFO 2025-06-13 06:24:54,940 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:55.007  INFO 2025-06-13 06:24:55,007 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:24:55.007  INFO 2025-06-13 06:24:55,007 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:31.111  INFO 2025-06-13 06:31:31,111 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:31.200  INFO 2025-06-13 06:31:31,200 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:31.203  INFO 2025-06-13 06:31:31,203 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:31:31.203  INFO 2025-06-13 06:31:31,203 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:31:31.203  INFO 2025-06-13 06:31:31,203 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:31:31.203  INFO 2025-06-13 06:31:31,203 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:31:31.203  INFO 2025-06-13 06:31:31,203 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:31:31.204  INFO 2025-06-13 06:31:31,204 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:31:31.204  INFO 2025-06-13 06:31:31,204 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:31:31.205  INFO 2025-06-13 06:31:31,205 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:31.205  INFO 2025-06-13 06:31:31,205 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:31:31.210  INFO 2025-06-13 06:31:31,210 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:31:31.210  INFO 2025-06-13 06:31:31,210 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:31:33.789  INFO 2025-06-13 06:31:33,789 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:33.858  INFO 2025-06-13 06:31:33,858 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:33.928  INFO 2025-06-13 06:31:33,928 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:33.950  INFO 2025-06-13 06:31:33,950 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:33.989  INFO 2025-06-13 06:31:33,989 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:34.067  INFO 2025-06-13 06:31:34,067 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:37.433  INFO 2025-06-13 06:31:37,433 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:39.203  INFO 2025-06-13 06:31:39,203 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:39.237  INFO 2025-06-13 06:31:39,237 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:39.289  INFO 2025-06-13 06:31:39,289 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:49.178  INFO 2025-06-13 06:31:49,178 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:31:50.546  INFO 2025-06-13 06:31:50,546 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:00.895  INFO 2025-06-13 06:32:00,895 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:00.914  INFO 2025-06-13 06:32:00,914 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:00.962  INFO 2025-06-13 06:32:00,962 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:00.962  INFO 2025-06-13 06:32:00,962 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:01.023  INFO 2025-06-13 06:32:01,023 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:01.023  INFO 2025-06-13 06:32:01,023 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:01.851  INFO 2025-06-13 06:32:01,851 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:03.197  INFO 2025-06-13 06:32:03,197 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:03.273  INFO 2025-06-13 06:32:03,273 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:03.324  INFO 2025-06-13 06:32:03,324 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:03.470  INFO 2025-06-13 06:32:03,470 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:03.474  INFO 2025-06-13 06:32:03,474 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:32:03.474  INFO 2025-06-13 06:32:03,474 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:32:03.474  INFO 2025-06-13 06:32:03,474 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:32:03.474  INFO 2025-06-13 06:32:03,474 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:32:03.474  INFO 2025-06-13 06:32:03,474 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:32:03.475  INFO 2025-06-13 06:32:03,475 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:32:03.475  INFO 2025-06-13 06:32:03,475 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:32:03.476  INFO 2025-06-13 06:32:03,476 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:32:03.481  INFO 2025-06-13 06:32:03,481 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:32:03.482  INFO 2025-06-13 06:32:03,482 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:32:07.012  INFO 2025-06-13 06:32:07,012 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:07.016  INFO 2025-06-13 06:32:07,016 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:07.072  INFO 2025-06-13 06:32:07,072 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:07.079  INFO 2025-06-13 06:32:07,079 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:07.177  INFO 2025-06-13 06:32:07,177 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:07.188  INFO 2025-06-13 06:32:07,188 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:08.628  INFO 2025-06-13 06:32:08,628 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:08.818  INFO 2025-06-13 06:32:08,818 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:08.876  INFO 2025-06-13 06:32:08,876 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:08.926  INFO 2025-06-13 06:32:08,926 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:08.930  INFO 2025-06-13 06:32:08,930 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:32:08.930  INFO 2025-06-13 06:32:08,930 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:32:08.930  INFO 2025-06-13 06:32:08,930 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:32:08.930  INFO 2025-06-13 06:32:08,930 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:32:08.930  INFO 2025-06-13 06:32:08,930 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:32:08.932  INFO 2025-06-13 06:32:08,932 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:32:08.932  INFO 2025-06-13 06:32:08,932 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:32:08.932  INFO 2025-06-13 06:32:08,932 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:32:08.938  INFO 2025-06-13 06:32:08,938 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:32:08.938  INFO 2025-06-13 06:32:08,938 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:32:10.133  INFO 2025-06-13 06:32:10,133 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:10.133  INFO 2025-06-13 06:32:10,133 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:10.175  INFO 2025-06-13 06:32:10,175 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:10.223  INFO 2025-06-13 06:32:10,223 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:10.227  INFO 2025-06-13 06:32:10,227 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:10.230  INFO 2025-06-13 06:32:10,230 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:10.323  INFO 2025-06-13 06:32:10,323 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:10.338  INFO 2025-06-13 06:32:10,338 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:10.339  INFO 2025-06-13 06:32:10,339 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:13.198  INFO 2025-06-13 06:32:13,198 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:14.280  INFO 2025-06-13 06:32:14,280 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:15.698  INFO 2025-06-13 06:32:15,698 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:17.099  INFO 2025-06-13 06:32:17,099 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:17.110  INFO 2025-06-13 06:32:17,110 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:17.154  INFO 2025-06-13 06:32:17,154 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:17.155  INFO 2025-06-13 06:32:17,155 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:17.208  INFO 2025-06-13 06:32:17,208 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:32:17.235  INFO 2025-06-13 06:32:17,235 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:34:44.578  INFO 2025-06-13 06:34:44,578 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 06:34:44.580  INFO 2025-06-13 06:34:44,580 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 06:34:44.583  INFO 2025-06-13 06:34:44,583 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 06:36:20.742  INFO 2025-06-13 06:36:20,742 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 3952 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 06:36:20.744  INFO 2025-06-13 06:36:20,744 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 06:36:21.877  INFO 2025-06-13 06:36:21,877 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 06:36:21.984  INFO 2025-06-13 06:36:21,984 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 100 ms. Found 11 JPA repository interfaces.
2025-06-13 06:36:22.902  INFO 2025-06-13 06:36:22,902 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 06:36:22.921  INFO 2025-06-13 06:36:22,921 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 06:36:22.922  INFO 2025-06-13 06:36:22,922 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 06:36:23.014  INFO 2025-06-13 06:36:23,014 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 06:36:23.014  INFO 2025-06-13 06:36:23,014 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2216 ms
2025-06-13 06:36:23.068  INFO 2025-06-13 06:36:23,068 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 06:36:23.346  INFO 2025-06-13 06:36:23,346 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 06:36:23.348  INFO 2025-06-13 06:36:23,348 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 06:36:23.363  INFO 2025-06-13 06:36:23,363 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 06:36:23.513  INFO 2025-06-13 06:36:23,513 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 06:36:23.585  INFO 2025-06-13 06:36:23,585 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 06:36:23.628  INFO 2025-06-13 06:36:23,628 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 06:36:24.032  INFO 2025-06-13 06:36:24,032 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 06:36:25.889  INFO 2025-06-13 06:36:25,889 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 06:36:25.997  INFO 2025-06-13 06:36:25,997 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 06:36:26.666  INFO 2025-06-13 06:36:26,666 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 06:36:29.590  WARN 2025-06-13 06:36:29,590 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 06:36:29.630  INFO 2025-06-13 06:36:29,630 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 06:36:29.633  INFO 2025-06-13 06:36:29,633 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 06:36:29.634  WARN 2025-06-13 06:36:29,634 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 06:36:29.959  INFO 2025-06-13 06:36:29,959 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 06:36:29.997  INFO 2025-06-13 06:36:29,997 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 06:36:30.446  INFO 2025-06-13 06:36:30,446 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 06:36:30.454  INFO 2025-06-13 06:36:30,454 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 10.414 seconds (process running for 11.423)
2025-06-13 06:36:30.458  INFO 2025-06-13 06:36:30,458 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 06:36:30.548  INFO 2025-06-13 06:36:30,548 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 06:36:30.756  INFO 2025-06-13 06:36:30,756 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 06:36:30.757  INFO 2025-06-13 06:36:30,757 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 06:36:30.758  INFO 2025-06-13 06:36:30,758 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 06:36:30.813  INFO 2025-06-13 06:36:30,813 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 06:36:30.868  INFO 2025-06-13 06:36:30,868 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 06:36:30.920  INFO 2025-06-13 06:36:30,920 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 06:36:30.938  INFO 2025-06-13 06:36:30,938 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 06:36:30.939  INFO 2025-06-13 06:36:30,939 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:30.963  INFO 2025-06-13 06:36:30,963 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:31.017  INFO 2025-06-13 06:36:31,017 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 06:36:31.035  INFO 2025-06-13 06:36:31,035 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 06:36:31.035  INFO 2025-06-13 06:36:31,035 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 06:36:31.053  INFO 2025-06-13 06:36:31,053 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 06:36:31.102  INFO 2025-06-13 06:36:31,102 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:31.143  INFO 2025-06-13 06:36:31,143 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:33.334  INFO 2025-06-13 06:36:33,334 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:33.363  INFO 2025-06-13 06:36:33,363 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:33.399  INFO 2025-06-13 06:36:33,399 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:34.182  INFO 2025-06-13 06:36:34,182 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:35.505  INFO 2025-06-13 06:36:35,505 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:40.347  INFO 2025-06-13 06:36:40,347 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:40.407  INFO 2025-06-13 06:36:40,407 --- [io-8080-exec-10] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 06:36:40.407  INFO 2025-06-13 06:36:40,407 --- [io-8080-exec-10] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 06:36:42.406  INFO 2025-06-13 06:36:42,406 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:42.413  INFO 2025-06-13 06:36:42,413 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:42.477  INFO 2025-06-13 06:36:42,477 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:42.480  INFO 2025-06-13 06:36:42,480 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:42.521  INFO 2025-06-13 06:36:42,521 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:42.523  INFO 2025-06-13 06:36:42,523 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:48.187  INFO 2025-06-13 06:36:48,187 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 06:36:48.270  INFO 2025-06-13 06:36:48,270 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:36:48.279  INFO 2025-06-13 06:36:48,279 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 06:36:48.696  INFO 2025-06-13 06:36:48,696 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:36:48.703  INFO 2025-06-13 06:36:48,703 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:36:48.703  INFO 2025-06-13 06:36:48,703 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:36:48.703  INFO 2025-06-13 06:36:48,703 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:36:48.703  INFO 2025-06-13 06:36:48,703 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:36:48.704  INFO 2025-06-13 06:36:48,704 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 06:36:48.706  INFO 2025-06-13 06:36:48,706 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 06:36:48.706  INFO 2025-06-13 06:36:48,706 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 06:36:48.709  INFO 2025-06-13 06:36:48,709 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 06:36:48.716  INFO 2025-06-13 06:36:48,716 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:36:48.722  INFO 2025-06-13 06:36:48,722 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:36:48.732  INFO 2025-06-13 06:36:48,732 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 06:36:48.733  INFO 2025-06-13 06:36:48,733 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 06:36:50.652  INFO 2025-06-13 06:36:50,652 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:36:50.656  INFO 2025-06-13 06:36:50,656 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:36:50.721  INFO 2025-06-13 06:36:50,721 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:36:50.723  INFO 2025-06-13 06:36:50,723 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:36:50.826  INFO 2025-06-13 06:36:50,826 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:36:50.829  INFO 2025-06-13 06:36:50,829 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:36:52.393  INFO 2025-06-13 06:36:52,393 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:36:52.416  INFO 2025-06-13 06:36:52,416 --- [nio-8080-exec-7] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 06:36:52.419  INFO 2025-06-13 06:36:52,419 --- [nio-8080-exec-7] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 06:36:52.419  INFO 2025-06-13 06:36:52,419 --- [nio-8080-exec-7] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 06:36:52.463  INFO 2025-06-13 06:36:52,463 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:36:58.105  INFO 2025-06-13 06:36:58,105 --- [io-8080-exec-10] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 06:36:58.192  INFO 2025-06-13 06:36:58,192 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:58.194  INFO 2025-06-13 06:36:58,194 --- [io-8080-exec-10] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 06:36:58.544  INFO 2025-06-13 06:36:58,544 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:58.674  INFO 2025-06-13 06:36:58,674 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:58.740  INFO 2025-06-13 06:36:58,740 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:36:58.745  INFO 2025-06-13 06:36:58,745 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:36:58.745  INFO 2025-06-13 06:36:58,745 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:36:58.745  INFO 2025-06-13 06:36:58,745 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:36:58.745  INFO 2025-06-13 06:36:58,745 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:36:58.745  INFO 2025-06-13 06:36:58,745 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:36:58.747  INFO 2025-06-13 06:36:58,747 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:36:58.747  INFO 2025-06-13 06:36:58,747 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:36:58.748  INFO 2025-06-13 06:36:58,748 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:36:58.774  INFO 2025-06-13 06:36:58,774 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:36:58.774  INFO 2025-06-13 06:36:58,774 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:37:00.914  INFO 2025-06-13 06:37:00,914 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:00.951  INFO 2025-06-13 06:37:00,951 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:00.996  INFO 2025-06-13 06:37:00,996 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:01.086  INFO 2025-06-13 06:37:01,086 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:01.142  INFO 2025-06-13 06:37:01,142 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:01.189  INFO 2025-06-13 06:37:01,189 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:01.509  INFO 2025-06-13 06:37:01,509 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:01.512  INFO 2025-06-13 06:37:01,512 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:37:01.513  INFO 2025-06-13 06:37:01,513 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:37:01.513  INFO 2025-06-13 06:37:01,513 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:37:01.513  INFO 2025-06-13 06:37:01,513 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:37:01.513  INFO 2025-06-13 06:37:01,513 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:37:01.515  INFO 2025-06-13 06:37:01,515 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:37:01.515  INFO 2025-06-13 06:37:01,515 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:37:01.515  INFO 2025-06-13 06:37:01,515 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:37:01.522  INFO 2025-06-13 06:37:01,522 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:37:01.522  INFO 2025-06-13 06:37:01,522 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:37:01.654  INFO 2025-06-13 06:37:01,654 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:01.657  INFO 2025-06-13 06:37:01,657 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:37:01.658  INFO 2025-06-13 06:37:01,658 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:37:01.658  INFO 2025-06-13 06:37:01,658 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:37:01.658  INFO 2025-06-13 06:37:01,658 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:37:01.658  INFO 2025-06-13 06:37:01,658 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:37:01.660  INFO 2025-06-13 06:37:01,660 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:37:01.660  INFO 2025-06-13 06:37:01,660 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:37:01.661  INFO 2025-06-13 06:37:01,661 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:37:01.666  INFO 2025-06-13 06:37:01,666 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:37:01.667  INFO 2025-06-13 06:37:01,667 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:37:02.480  INFO 2025-06-13 06:37:02,480 --- [nio-8080-exec-1] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 06:37:03.273  INFO 2025-06-13 06:37:03,273 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:03.277  INFO 2025-06-13 06:37:03,277 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:37:03.277  INFO 2025-06-13 06:37:03,277 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:37:03.278  INFO 2025-06-13 06:37:03,278 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:37:03.278  INFO 2025-06-13 06:37:03,278 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:37:03.278  INFO 2025-06-13 06:37:03,278 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:37:03.279  INFO 2025-06-13 06:37:03,279 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:37:03.280  INFO 2025-06-13 06:37:03,280 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:37:03.280  INFO 2025-06-13 06:37:03,280 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:37:03.285  INFO 2025-06-13 06:37:03,285 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:37:03.285  INFO 2025-06-13 06:37:03,285 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:37:06.405  INFO 2025-06-13 06:37:06,405 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:06.408  INFO 2025-06-13 06:37:06,408 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:37:06.409  INFO 2025-06-13 06:37:06,409 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:37:06.409  INFO 2025-06-13 06:37:06,409 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:37:06.409  INFO 2025-06-13 06:37:06,409 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:37:06.409  INFO 2025-06-13 06:37:06,409 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:37:06.411  INFO 2025-06-13 06:37:06,411 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:37:06.411  INFO 2025-06-13 06:37:06,411 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:37:06.411  INFO 2025-06-13 06:37:06,411 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:37:06.415  INFO 2025-06-13 06:37:06,415 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:37:06.415  INFO 2025-06-13 06:37:06,415 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:37:06.552  INFO 2025-06-13 06:37:06,552 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:06.554  INFO 2025-06-13 06:37:06,554 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:37:06.555  INFO 2025-06-13 06:37:06,555 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:37:06.555  INFO 2025-06-13 06:37:06,555 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:37:06.555  INFO 2025-06-13 06:37:06,555 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:37:06.555  INFO 2025-06-13 06:37:06,555 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:37:06.556  INFO 2025-06-13 06:37:06,556 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:37:06.556  INFO 2025-06-13 06:37:06,556 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:37:06.557  INFO 2025-06-13 06:37:06,557 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:37:06.563  INFO 2025-06-13 06:37:06,563 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:37:06.563  INFO 2025-06-13 06:37:06,563 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-13 06:37:35.000  INFO 2025-06-13 06:37:35,000 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:35.008  INFO 2025-06-13 06:37:35,008 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:37:35.008  INFO 2025-06-13 06:37:35,008 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:37:35.008  INFO 2025-06-13 06:37:35,008 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:37:35.008  INFO 2025-06-13 06:37:35,008 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:37:35.010  INFO 2025-06-13 06:37:35,010 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:37:35.182  INFO 2025-06-13 06:37:35,182 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:35.349  INFO 2025-06-13 06:37:35,349 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:35.355  INFO 2025-06-13 06:37:35,355 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:37:35.355  INFO 2025-06-13 06:37:35,355 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:37:35.355  INFO 2025-06-13 06:37:35,355 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:37:35.355  INFO 2025-06-13 06:37:35,355 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:37:35.355  INFO 2025-06-13 06:37:35,355 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:37:35.357  INFO 2025-06-13 06:37:35,357 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:37:35.357  INFO 2025-06-13 06:37:35,357 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:37:35.358  INFO 2025-06-13 06:37:35,358 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:37:35.366  INFO 2025-06-13 06:37:35,366 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:37:35.366  INFO 2025-06-13 06:37:35,366 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:37:37.164  INFO 2025-06-13 06:37:37,164 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:37.164  INFO 2025-06-13 06:37:37,164 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:37.209  INFO 2025-06-13 06:37:37,209 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:37.209  INFO 2025-06-13 06:37:37,209 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:37.247  INFO 2025-06-13 06:37:37,247 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:37.251  INFO 2025-06-13 06:37:37,251 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:37.319  INFO 2025-06-13 06:37:37,319 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:37.347  INFO 2025-06-13 06:37:37,347 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:37.406  INFO 2025-06-13 06:37:37,406 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:39.880  INFO 2025-06-13 06:37:39,880 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:42.027  INFO 2025-06-13 06:37:42,027 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:42.049  INFO 2025-06-13 06:37:42,049 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:42.069  INFO 2025-06-13 06:37:42,069 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:44.698  INFO 2025-06-13 06:37:44,698 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:45.584  INFO 2025-06-13 06:37:45,584 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:45.610  INFO 2025-06-13 06:37:45,610 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:45.644  INFO 2025-06-13 06:37:45,644 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:49.756  INFO 2025-06-13 06:37:49,756 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:51.794  INFO 2025-06-13 06:37:51,794 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:51.806  INFO 2025-06-13 06:37:51,806 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:51.849  INFO 2025-06-13 06:37:51,849 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:51.850  INFO 2025-06-13 06:37:51,850 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:51.932  INFO 2025-06-13 06:37:51,932 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:51.932  INFO 2025-06-13 06:37:51,932 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:52.515  INFO 2025-06-13 06:37:52,515 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:53.184  INFO 2025-06-13 06:37:53,184 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:53.235  INFO 2025-06-13 06:37:53,235 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:53.287  INFO 2025-06-13 06:37:53,287 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:37:53.784  INFO 2025-06-13 06:37:53,784 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:14.644  INFO 2025-06-13 06:40:14,644 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:14.763  INFO 2025-06-13 06:40:14,763 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:14.766  INFO 2025-06-13 06:40:14,766 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:40:14.766  INFO 2025-06-13 06:40:14,766 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:40:14.766  INFO 2025-06-13 06:40:14,766 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:40:14.766  INFO 2025-06-13 06:40:14,766 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:40:14.766  INFO 2025-06-13 06:40:14,766 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:40:14.768  INFO 2025-06-13 06:40:14,768 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:40:14.768  INFO 2025-06-13 06:40:14,768 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:40:14.769  INFO 2025-06-13 06:40:14,769 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:40:14.776  INFO 2025-06-13 06:40:14,776 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:14.777  INFO 2025-06-13 06:40:14,777 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:40:14.777  INFO 2025-06-13 06:40:14,777 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:40:16.908  INFO 2025-06-13 06:40:16,908 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:17.003  INFO 2025-06-13 06:40:17,003 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:17.061  INFO 2025-06-13 06:40:17,061 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:17.096  INFO 2025-06-13 06:40:17,096 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:17.118  INFO 2025-06-13 06:40:17,118 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:17.197  INFO 2025-06-13 06:40:17,197 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:19.402  INFO 2025-06-13 06:40:19,402 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:20.638  INFO 2025-06-13 06:40:20,638 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:20.684  INFO 2025-06-13 06:40:20,684 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:20.724  INFO 2025-06-13 06:40:20,724 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:21.709  INFO 2025-06-13 06:40:21,709 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:23.795  INFO 2025-06-13 06:40:23,795 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:23.898  INFO 2025-06-13 06:40:23,898 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:23.965  INFO 2025-06-13 06:40:23,965 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:24.138  INFO 2025-06-13 06:40:24,138 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:24.140  INFO 2025-06-13 06:40:24,140 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:40:24.140  INFO 2025-06-13 06:40:24,140 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:40:24.140  INFO 2025-06-13 06:40:24,140 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:40:24.140  INFO 2025-06-13 06:40:24,140 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:40:24.140  INFO 2025-06-13 06:40:24,140 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:40:24.141  INFO 2025-06-13 06:40:24,141 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:40:24.141  INFO 2025-06-13 06:40:24,141 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:40:24.142  INFO 2025-06-13 06:40:24,142 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:40:24.146  INFO 2025-06-13 06:40:24,146 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:40:24.146  INFO 2025-06-13 06:40:24,146 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:40:26.332  INFO 2025-06-13 06:40:26,332 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:26.339  INFO 2025-06-13 06:40:26,339 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:26.420  INFO 2025-06-13 06:40:26,420 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:26.423  INFO 2025-06-13 06:40:26,423 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:26.481  INFO 2025-06-13 06:40:26,481 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:26.481  INFO 2025-06-13 06:40:26,481 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:27.682  INFO 2025-06-13 06:40:27,682 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:31.612  INFO 2025-06-13 06:40:31,612 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:31.642  INFO 2025-06-13 06:40:31,642 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:31.665  INFO 2025-06-13 06:40:31,665 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:40:34.534  INFO 2025-06-13 06:40:34,534 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:14.096  INFO 2025-06-13 06:44:14,096 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:14.210  INFO 2025-06-13 06:44:14,210 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:14.213  INFO 2025-06-13 06:44:14,213 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:44:14.214  INFO 2025-06-13 06:44:14,214 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:44:14.214  INFO 2025-06-13 06:44:14,214 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:44:14.214  INFO 2025-06-13 06:44:14,214 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:44:14.214  INFO 2025-06-13 06:44:14,214 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:44:14.214  INFO 2025-06-13 06:44:14,214 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:44:14.215  INFO 2025-06-13 06:44:14,215 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:44:14.215  INFO 2025-06-13 06:44:14,215 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:44:14.219  INFO 2025-06-13 06:44:14,219 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:44:14.219  INFO 2025-06-13 06:44:14,219 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:44:14.220  INFO 2025-06-13 06:44:14,220 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:15.837  INFO 2025-06-13 06:44:15,837 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:15.932  INFO 2025-06-13 06:44:15,932 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:15.986  INFO 2025-06-13 06:44:15,986 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:16.014  INFO 2025-06-13 06:44:16,014 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:16.049  INFO 2025-06-13 06:44:16,049 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:16.134  INFO 2025-06-13 06:44:16,134 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:18.283  INFO 2025-06-13 06:44:18,283 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:19.868  INFO 2025-06-13 06:44:19,868 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:22.771  INFO 2025-06-13 06:44:22,771 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:22.806  INFO 2025-06-13 06:44:22,806 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:22.870  INFO 2025-06-13 06:44:22,870 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:22.872  INFO 2025-06-13 06:44:22,872 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:22.942  INFO 2025-06-13 06:44:22,942 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:22.945  INFO 2025-06-13 06:44:22,945 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:24.798  INFO 2025-06-13 06:44:24,798 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:25.686  INFO 2025-06-13 06:44:25,686 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:25.740  INFO 2025-06-13 06:44:25,740 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:25.792  INFO 2025-06-13 06:44:25,792 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:25.949  INFO 2025-06-13 06:44:25,949 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:25.952  INFO 2025-06-13 06:44:25,952 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:44:25.952  INFO 2025-06-13 06:44:25,952 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:44:25.952  INFO 2025-06-13 06:44:25,952 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:44:25.952  INFO 2025-06-13 06:44:25,952 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:44:25.952  INFO 2025-06-13 06:44:25,952 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:44:25.954  INFO 2025-06-13 06:44:25,954 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:44:25.954  INFO 2025-06-13 06:44:25,954 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:44:25.954  INFO 2025-06-13 06:44:25,954 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:44:25.958  INFO 2025-06-13 06:44:25,958 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:44:25.958  INFO 2025-06-13 06:44:25,958 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:44:26.955  INFO 2025-06-13 06:44:26,955 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:26.971  INFO 2025-06-13 06:44:26,971 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:27.045  INFO 2025-06-13 06:44:27,045 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:27.048  INFO 2025-06-13 06:44:27,048 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:27.088  INFO 2025-06-13 06:44:27,088 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:44:27.091  INFO 2025-06-13 06:44:27,091 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:01.262  INFO 2025-06-13 06:45:01,262 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:04.877  INFO 2025-06-13 06:45:04,877 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:04.955  INFO 2025-06-13 06:45:04,955 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:05.024  INFO 2025-06-13 06:45:05,024 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:05.192  INFO 2025-06-13 06:45:05,192 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:05.197  INFO 2025-06-13 06:45:05,197 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:45:05.197  INFO 2025-06-13 06:45:05,197 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:45:05.198  INFO 2025-06-13 06:45:05,198 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:45:05.198  INFO 2025-06-13 06:45:05,198 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:45:05.198  INFO 2025-06-13 06:45:05,198 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:45:05.199  INFO 2025-06-13 06:45:05,199 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:45:05.199  INFO 2025-06-13 06:45:05,199 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:45:05.199  INFO 2025-06-13 06:45:05,199 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:45:05.204  INFO 2025-06-13 06:45:05,204 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:45:05.204  INFO 2025-06-13 06:45:05,204 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:45:08.218  INFO 2025-06-13 06:45:08,218 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:08.246  INFO 2025-06-13 06:45:08,246 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Added memorial 10 to draft JSON for tree 1 by editor 3
2025-06-13 06:45:08.285  INFO 2025-06-13 06:45:08,285 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:10.602  INFO 2025-06-13 06:45:10,602 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:10.608  INFO 2025-06-13 06:45:10,608 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:10.680  INFO 2025-06-13 06:45:10,680 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:10.688  INFO 2025-06-13 06:45:10,688 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:10.786  INFO 2025-06-13 06:45:10,786 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:10.872  INFO 2025-06-13 06:45:10,872 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:14.511  INFO 2025-06-13 06:45:14,511 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:15.565  INFO 2025-06-13 06:45:15,565 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:15.638  INFO 2025-06-13 06:45:15,638 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:15.700  INFO 2025-06-13 06:45:15,700 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:15.972  INFO 2025-06-13 06:45:15,972 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:15.976  INFO 2025-06-13 06:45:15,976 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:45:15.976  INFO 2025-06-13 06:45:15,976 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:45:15.976  INFO 2025-06-13 06:45:15,976 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:45:15.976  INFO 2025-06-13 06:45:15,976 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:45:15.976  INFO 2025-06-13 06:45:15,976 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:45:15.977  INFO 2025-06-13 06:45:15,977 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:45:15.977  INFO 2025-06-13 06:45:15,977 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:45:15.977  INFO 2025-06-13 06:45:15,977 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:45:15.983  INFO 2025-06-13 06:45:15,983 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:45:15.983  INFO 2025-06-13 06:45:15,983 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:45:23.736  INFO 2025-06-13 06:45:23,736 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:23.748  INFO 2025-06-13 06:45:23,748 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:23.854  INFO 2025-06-13 06:45:23,854 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:23.861  INFO 2025-06-13 06:45:23,861 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:23.914  INFO 2025-06-13 06:45:23,914 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:23.931  INFO 2025-06-13 06:45:23,931 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:24.986  INFO 2025-06-13 06:45:24,986 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:26.581  INFO 2025-06-13 06:45:26,581 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:26.799  INFO 2025-06-13 06:45:26,799 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:26.903  INFO 2025-06-13 06:45:26,903 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:31.271  INFO 2025-06-13 06:45:31,271 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:32.769  INFO 2025-06-13 06:45:32,769 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:35.133  INFO 2025-06-13 06:45:35,133 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:37.568  INFO 2025-06-13 06:45:37,568 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:37.578  INFO 2025-06-13 06:45:37,578 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:37.638  INFO 2025-06-13 06:45:37,638 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:37.644  INFO 2025-06-13 06:45:37,644 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:37.712  INFO 2025-06-13 06:45:37,712 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:37.719  INFO 2025-06-13 06:45:37,719 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:38.614  INFO 2025-06-13 06:45:38,614 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:39.969  INFO 2025-06-13 06:45:39,969 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:40.052  INFO 2025-06-13 06:45:40,052 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:40.120  INFO 2025-06-13 06:45:40,120 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:40.262  INFO 2025-06-13 06:45:40,262 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:40.267  INFO 2025-06-13 06:45:40,267 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:45:40.267  INFO 2025-06-13 06:45:40,267 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:45:40.267  INFO 2025-06-13 06:45:40,267 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:45:40.267  INFO 2025-06-13 06:45:40,267 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:45:40.267  INFO 2025-06-13 06:45:40,267 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:45:40.268  INFO 2025-06-13 06:45:40,268 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:45:40.268  INFO 2025-06-13 06:45:40,268 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:45:40.268  INFO 2025-06-13 06:45:40,268 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:45:40.272  INFO 2025-06-13 06:45:40,272 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:45:40.273  INFO 2025-06-13 06:45:40,273 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:45:55.284  INFO 2025-06-13 06:45:55,284 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:55.299  INFO 2025-06-13 06:45:55,299 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 06:45:55.339  INFO 2025-06-13 06:45:55,339 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:58.742  INFO 2025-06-13 06:45:58,742 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:58.746  INFO 2025-06-13 06:45:58,746 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:58.787  INFO 2025-06-13 06:45:58,787 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:58.789  INFO 2025-06-13 06:45:58,789 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:58.828  INFO 2025-06-13 06:45:58,828 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:45:58.828  INFO 2025-06-13 06:45:58,828 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:46:00.987  INFO 2025-06-13 06:46:00,987 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:46:02.088  INFO 2025-06-13 06:46:02,088 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:23.608  INFO 2025-06-13 06:47:23,608 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:23.621  INFO 2025-06-13 06:47:23,621 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:23.659  INFO 2025-06-13 06:47:23,659 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:23.662  INFO 2025-06-13 06:47:23,662 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:23.708  INFO 2025-06-13 06:47:23,708 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:23.720  INFO 2025-06-13 06:47:23,720 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:25.186  INFO 2025-06-13 06:47:25,186 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:26.103  INFO 2025-06-13 06:47:26,103 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:26.236  INFO 2025-06-13 06:47:26,236 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:26.460  INFO 2025-06-13 06:47:26,460 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:26.609  INFO 2025-06-13 06:47:26,609 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:26.612  INFO 2025-06-13 06:47:26,612 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:47:26.612  INFO 2025-06-13 06:47:26,612 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:47:26.612  INFO 2025-06-13 06:47:26,612 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:47:26.612  INFO 2025-06-13 06:47:26,612 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:47:26.612  INFO 2025-06-13 06:47:26,612 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:47:26.613  INFO 2025-06-13 06:47:26,613 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:47:26.613  INFO 2025-06-13 06:47:26,613 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:47:26.614  INFO 2025-06-13 06:47:26,614 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:47:26.617  INFO 2025-06-13 06:47:26,617 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:47:26.618  INFO 2025-06-13 06:47:26,618 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:47:28.154  INFO 2025-06-13 06:47:28,154 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:28.167  INFO 2025-06-13 06:47:28,167 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:28.221  INFO 2025-06-13 06:47:28,221 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:28.224  INFO 2025-06-13 06:47:28,224 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:28.279  INFO 2025-06-13 06:47:28,279 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:28.282  INFO 2025-06-13 06:47:28,282 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:47:59.381  INFO 2025-06-13 06:47:59,381 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:00.620  INFO 2025-06-13 06:48:00,620 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:00.685  INFO 2025-06-13 06:48:00,685 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:00.751  INFO 2025-06-13 06:48:00,751 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:00.863  INFO 2025-06-13 06:48:00,863 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:00.864  INFO 2025-06-13 06:48:00,864 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:48:00.865  INFO 2025-06-13 06:48:00,865 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:48:00.865  INFO 2025-06-13 06:48:00,865 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:48:00.865  INFO 2025-06-13 06:48:00,865 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:48:00.865  INFO 2025-06-13 06:48:00,865 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:48:00.866  INFO 2025-06-13 06:48:00,866 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:48:00.866  INFO 2025-06-13 06:48:00,866 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:48:00.866  INFO 2025-06-13 06:48:00,866 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:48:00.870  INFO 2025-06-13 06:48:00,870 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:48:00.870  INFO 2025-06-13 06:48:00,870 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:48:12.751  INFO 2025-06-13 06:48:12,751 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:12.761  INFO 2025-06-13 06:48:12,761 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 06:48:12.799  INFO 2025-06-13 06:48:12,799 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:14.787  INFO 2025-06-13 06:48:14,787 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:14.789  INFO 2025-06-13 06:48:14,789 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:14.842  INFO 2025-06-13 06:48:14,842 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:14.843  INFO 2025-06-13 06:48:14,843 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:14.873  INFO 2025-06-13 06:48:14,873 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:14.880  INFO 2025-06-13 06:48:14,880 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:16.046  INFO 2025-06-13 06:48:16,046 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:17.777  INFO 2025-06-13 06:48:17,777 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:29.764  INFO 2025-06-13 06:48:29,764 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:29.772  INFO 2025-06-13 06:48:29,772 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:29.814  INFO 2025-06-13 06:48:29,814 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:29.816  INFO 2025-06-13 06:48:29,816 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:29.870  INFO 2025-06-13 06:48:29,870 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:48:29.871  INFO 2025-06-13 06:48:29,871 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:03.513  INFO 2025-06-13 06:53:03,513 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 06:53:03.516  INFO 2025-06-13 06:53:03,516 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 06:53:03.519  INFO 2025-06-13 06:53:03,519 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 06:53:18.473  INFO 2025-06-13 06:53:18,473 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 18844 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 06:53:18.476  INFO 2025-06-13 06:53:18,476 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 06:53:19.615  INFO 2025-06-13 06:53:19,615 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 06:53:19.747  INFO 2025-06-13 06:53:19,747 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 118 ms. Found 11 JPA repository interfaces.
2025-06-13 06:53:20.741  INFO 2025-06-13 06:53:20,741 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 06:53:20.763  INFO 2025-06-13 06:53:20,763 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 06:53:20.763  INFO 2025-06-13 06:53:20,763 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 06:53:20.839  INFO 2025-06-13 06:53:20,839 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 06:53:20.839  INFO 2025-06-13 06:53:20,839 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2311 ms
2025-06-13 06:53:20.880  INFO 2025-06-13 06:53:20,880 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 06:53:21.116  INFO 2025-06-13 06:53:21,116 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 06:53:21.118  INFO 2025-06-13 06:53:21,118 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 06:53:21.138  INFO 2025-06-13 06:53:21,138 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 06:53:21.277  INFO 2025-06-13 06:53:21,277 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 06:53:21.329  INFO 2025-06-13 06:53:21,329 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 06:53:21.365  INFO 2025-06-13 06:53:21,365 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 06:53:21.684  INFO 2025-06-13 06:53:21,684 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 06:53:23.043  INFO 2025-06-13 06:53:23,043 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 06:53:23.141  INFO 2025-06-13 06:53:23,141 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 06:53:23.555  INFO 2025-06-13 06:53:23,555 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 06:53:27.093  WARN 2025-06-13 06:53:27,093 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 06:53:27.141  INFO 2025-06-13 06:53:27,141 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 06:53:27.145  INFO 2025-06-13 06:53:27,145 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 06:53:27.146  WARN 2025-06-13 06:53:27,146 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 06:53:27.496  INFO 2025-06-13 06:53:27,496 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 06:53:27.540  INFO 2025-06-13 06:53:27,540 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 06:53:28.057  INFO 2025-06-13 06:53:28,057 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 06:53:28.066  INFO 2025-06-13 06:53:28,066 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 10.133 seconds (process running for 10.915)
2025-06-13 06:53:28.070  INFO 2025-06-13 06:53:28,070 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 06:53:28.172  INFO 2025-06-13 06:53:28,172 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 06:53:28.404  INFO 2025-06-13 06:53:28,404 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 06:53:28.454  INFO 2025-06-13 06:53:28,454 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 06:53:28.502  INFO 2025-06-13 06:53:28,502 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 06:53:28.516  INFO 2025-06-13 06:53:28,516 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 06:53:28.579  INFO 2025-06-13 06:53:28,579 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 06:53:28.589  INFO 2025-06-13 06:53:28,589 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 06:53:28.589  INFO 2025-06-13 06:53:28,589 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 06:53:28.592  INFO 2025-06-13 06:53:28,592 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 06:53:40.829  INFO 2025-06-13 06:53:40,829 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 06:53:40.830  INFO 2025-06-13 06:53:40,830 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 06:53:40.831  INFO 2025-06-13 06:53:40,831 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 06:53:41.009  INFO 2025-06-13 06:53:41,009 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:41.009  INFO 2025-06-13 06:53:41,009 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:41.009  INFO 2025-06-13 06:53:41,009 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:41.056  INFO 2025-06-13 06:53:41,056 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:53:41.056  INFO 2025-06-13 06:53:41,056 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:53:41.056  INFO 2025-06-13 06:53:41,056 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:53:41.057  INFO 2025-06-13 06:53:41,057 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:53:41.057  INFO 2025-06-13 06:53:41,057 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:53:41.061  INFO 2025-06-13 06:53:41,061 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:53:41.061  INFO 2025-06-13 06:53:41,061 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:53:41.066  INFO 2025-06-13 06:53:41,066 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:53:41.098  INFO 2025-06-13 06:53:41,098 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:53:41.099  INFO 2025-06-13 06:53:41,099 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:53:46.697  INFO 2025-06-13 06:53:46,697 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:46.781  INFO 2025-06-13 06:53:46,781 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:46.833  INFO 2025-06-13 06:53:46,833 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:46.855  INFO 2025-06-13 06:53:46,855 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:46.909  INFO 2025-06-13 06:53:46,909 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:46.962  INFO 2025-06-13 06:53:46,962 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:47.623  INFO 2025-06-13 06:53:47,623 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:48.426  INFO 2025-06-13 06:53:48,426 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:53.793  INFO 2025-06-13 06:53:53,793 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:53.849  INFO 2025-06-13 06:53:53,849 --- [nio-8080-exec-1] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 06:53:53.849  INFO 2025-06-13 06:53:53,849 --- [nio-8080-exec-1] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 06:53:55.643  INFO 2025-06-13 06:53:55,643 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:55.654  INFO 2025-06-13 06:53:55,654 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:55.718  INFO 2025-06-13 06:53:55,718 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:55.718  INFO 2025-06-13 06:53:55,718 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:55.758  INFO 2025-06-13 06:53:55,758 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:53:55.772  INFO 2025-06-13 06:53:55,772 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:01.520  INFO 2025-06-13 06:54:01,520 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 06:54:01.600  INFO 2025-06-13 06:54:01,600 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:01.608  INFO 2025-06-13 06:54:01,608 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 06:54:02.146  INFO 2025-06-13 06:54:02,146 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:02.149  INFO 2025-06-13 06:54:02,149 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:02.154  INFO 2025-06-13 06:54:02,154 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:54:02.154  INFO 2025-06-13 06:54:02,154 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:54:02.154  INFO 2025-06-13 06:54:02,154 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:54:02.154  INFO 2025-06-13 06:54:02,154 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:54:02.154  INFO 2025-06-13 06:54:02,154 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 06:54:02.157  INFO 2025-06-13 06:54:02,157 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 06:54:02.157  INFO 2025-06-13 06:54:02,157 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 06:54:02.158  INFO 2025-06-13 06:54:02,158 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 06:54:02.165  INFO 2025-06-13 06:54:02,165 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:02.170  INFO 2025-06-13 06:54:02,170 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 06:54:02.171  INFO 2025-06-13 06:54:02,171 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 06:54:03.816  INFO 2025-06-13 06:54:03,816 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:03.888  INFO 2025-06-13 06:54:03,888 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:03.923  INFO 2025-06-13 06:54:03,923 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:03.973  INFO 2025-06-13 06:54:03,973 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:04.044  INFO 2025-06-13 06:54:04,044 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:04.090  INFO 2025-06-13 06:54:04,090 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:04.845  INFO 2025-06-13 06:54:04,845 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:04.847  INFO 2025-06-13 06:54:04,847 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:04.908  INFO 2025-06-13 06:54:04,908 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:04.917  INFO 2025-06-13 06:54:04,917 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:05.017  INFO 2025-06-13 06:54:05,017 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:05.022  INFO 2025-06-13 06:54:05,022 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:06.402  INFO 2025-06-13 06:54:06,402 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:06.405  INFO 2025-06-13 06:54:06,405 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:06.503  INFO 2025-06-13 06:54:06,503 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:06.504  INFO 2025-06-13 06:54:06,504 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:06.559  INFO 2025-06-13 06:54:06,559 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:06.572  INFO 2025-06-13 06:54:06,572 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:06.588  INFO 2025-06-13 06:54:06,588 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:06.632  INFO 2025-06-13 06:54:06,632 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:06.721  INFO 2025-06-13 06:54:06,721 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:07.824  INFO 2025-06-13 06:54:07,824 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:07.829  INFO 2025-06-13 06:54:07,829 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:07.991  INFO 2025-06-13 06:54:07,991 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:07.993  INFO 2025-06-13 06:54:07,993 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:10.016  INFO 2025-06-13 06:54:10,016 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:10.041  INFO 2025-06-13 06:54:10,041 --- [nio-8080-exec-6] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 06:54:10.044  INFO 2025-06-13 06:54:10,044 --- [nio-8080-exec-6] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 06:54:10.045  INFO 2025-06-13 06:54:10,045 --- [nio-8080-exec-6] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 06:54:10.077  INFO 2025-06-13 06:54:10,077 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 06:54:18.855  INFO 2025-06-13 06:54:18,855 --- [io-8080-exec-10] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 06:54:18.933  INFO 2025-06-13 06:54:18,933 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:18.934  INFO 2025-06-13 06:54:18,934 --- [io-8080-exec-10] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 06:54:19.305  INFO 2025-06-13 06:54:19,305 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:19.382  INFO 2025-06-13 06:54:19,382 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:19.384  INFO 2025-06-13 06:54:19,384 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:19.385  INFO 2025-06-13 06:54:19,385 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:54:19.385  INFO 2025-06-13 06:54:19,385 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:54:19.385  INFO 2025-06-13 06:54:19,385 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:54:19.386  INFO 2025-06-13 06:54:19,386 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:54:19.386  INFO 2025-06-13 06:54:19,386 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:54:19.388  INFO 2025-06-13 06:54:19,388 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:54:19.388  INFO 2025-06-13 06:54:19,388 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 06:54:19.388  INFO 2025-06-13 06:54:19,388 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 06:54:19.398  INFO 2025-06-13 06:54:19,398 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:54:19.398  INFO 2025-06-13 06:54:19,398 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:54:21.405  INFO 2025-06-13 06:54:21,405 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:21.450  INFO 2025-06-13 06:54:21,450 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:21.500  INFO 2025-06-13 06:54:21,500 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:21.551  INFO 2025-06-13 06:54:21,551 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:21.587  INFO 2025-06-13 06:54:21,587 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:21.628  INFO 2025-06-13 06:54:21,628 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:24.898  INFO 2025-06-13 06:54:24,898 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:27.026  INFO 2025-06-13 06:54:27,026 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:27.148  INFO 2025-06-13 06:54:27,148 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:27.221  INFO 2025-06-13 06:54:27,221 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:29.067  INFO 2025-06-13 06:54:29,067 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:30.515  INFO 2025-06-13 06:54:30,515 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:30.548  INFO 2025-06-13 06:54:30,548 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:30.593  INFO 2025-06-13 06:54:30,593 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:35.912  INFO 2025-06-13 06:54:35,912 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:40.095  INFO 2025-06-13 06:54:40,095 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:40.173  INFO 2025-06-13 06:54:40,173 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:40.177  INFO 2025-06-13 06:54:40,177 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 06:54:40.178  INFO 2025-06-13 06:54:40,178 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 06:54:40.178  INFO 2025-06-13 06:54:40,178 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: null
2025-06-13 06:54:40.178  INFO 2025-06-13 06:54:40,178 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft memorials JSON is empty, falling back to original tree
2025-06-13 06:54:40.183  INFO 2025-06-13 06:54:40,183 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Returning 8 original tree memorials
2025-06-13 06:54:40.233  INFO 2025-06-13 06:54:40,233 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:40.236  INFO 2025-06-13 06:54:40,236 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 06:54:40.237  INFO 2025-06-13 06:54:40,237 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 06:54:40.237  INFO 2025-06-13 06:54:40,237 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft relations JSON: null
2025-06-13 06:54:40.237  INFO 2025-06-13 06:54:40,237 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft relations JSON is empty, falling back to original tree
2025-06-13 06:54:40.243  INFO 2025-06-13 06:54:40,243 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 06:54:40.339  INFO 2025-06-13 06:54:40,339 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:40.342  INFO 2025-06-13 06:54:40,342 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 06:54:40.342  INFO 2025-06-13 06:54:40,342 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 06:54:40.342  INFO 2025-06-13 06:54:40,342 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 06:54:40.342  INFO 2025-06-13 06:54:40,342 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 06:54:40.342  INFO 2025-06-13 06:54:40,342 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 06:54:40.344  INFO 2025-06-13 06:54:40,344 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 06:54:40.344  INFO 2025-06-13 06:54:40,344 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 06:54:40.345  INFO 2025-06-13 06:54:40,345 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 06:54:40.352  INFO 2025-06-13 06:54:40,352 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:54:40.352  INFO 2025-06-13 06:54:40,352 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 06:54:56.933  INFO 2025-06-13 06:54:56,933 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:56.958  INFO 2025-06-13 06:54:56,958 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 06:54:56.976  INFO 2025-06-13 06:54:56,976 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:54:56.980  INFO 2025-06-13 06:54:56,980 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 06:54:56.980  INFO 2025-06-13 06:54:56,980 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 06:54:56.980  INFO 2025-06-13 06:54:56,980 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":7,"fio":"Сергеев Иван Андреевич","birthDate":"1925-04-07","deathDate":"1995-09-01","biography...
2025-06-13 06:54:56.985  INFO 2025-06-13 06:54:56,985 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 06:55:45.870  INFO 2025-06-13 06:55:45,870 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:55:45.885  INFO 2025-06-13 06:55:45,885 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 06:55:45.945  INFO 2025-06-13 06:55:45,945 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:55:45.950  INFO 2025-06-13 06:55:45,950 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 06:55:45.952  INFO 2025-06-13 06:55:45,952 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 06:55:45.952  INFO 2025-06-13 06:55:45,952 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 06:55:45.955  INFO 2025-06-13 06:55:45,955 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 06:55:50.974  INFO 2025-06-13 06:55:50,974 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:55:50.978  INFO 2025-06-13 06:55:50,978 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:55:51.049  INFO 2025-06-13 06:55:51,049 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:55:51.049  INFO 2025-06-13 06:55:51,049 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:55:51.123  INFO 2025-06-13 06:55:51,123 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:55:51.123  INFO 2025-06-13 06:55:51,123 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:55:52.497  INFO 2025-06-13 06:55:52,497 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 06:55:53.761  INFO 2025-06-13 06:55:53,761 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:39.492  INFO 2025-06-13 07:00:39,492 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:39.602  INFO 2025-06-13 07:00:39,602 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:39.605  INFO 2025-06-13 07:00:39,605 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:00:39.605  INFO 2025-06-13 07:00:39,605 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:00:39.605  INFO 2025-06-13 07:00:39,605 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:00:39.605  INFO 2025-06-13 07:00:39,605 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:00:39.605  INFO 2025-06-13 07:00:39,605 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:00:39.607  INFO 2025-06-13 07:00:39,607 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:00:39.607  INFO 2025-06-13 07:00:39,607 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 07:00:39.608  INFO 2025-06-13 07:00:39,608 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 07:00:39.611  INFO 2025-06-13 07:00:39,611 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:39.614  INFO 2025-06-13 07:00:39,614 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:00:39.614  INFO 2025-06-13 07:00:39,614 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:00:41.978  INFO 2025-06-13 07:00:41,978 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:41.981  INFO 2025-06-13 07:00:41,981 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:42.073  INFO 2025-06-13 07:00:42,073 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:42.098  INFO 2025-06-13 07:00:42,098 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:42.194  INFO 2025-06-13 07:00:42,194 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:42.194  INFO 2025-06-13 07:00:42,194 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:42.923  INFO 2025-06-13 07:00:42,923 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:42.997  INFO 2025-06-13 07:00:42,997 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:43.062  INFO 2025-06-13 07:00:43,062 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:43.074  INFO 2025-06-13 07:00:43,074 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:43.126  INFO 2025-06-13 07:00:43,126 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:43.229  INFO 2025-06-13 07:00:43,229 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:45.100  INFO 2025-06-13 07:00:45,100 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:46.397  INFO 2025-06-13 07:00:46,397 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:46.401  INFO 2025-06-13 07:00:46,401 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 07:00:46.402  INFO 2025-06-13 07:00:46,402 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:00:46.402  INFO 2025-06-13 07:00:46,402 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":7,"fio":"Сергеев Иван Андреевич","birthDate":"1925-04-07","deathDate":"1995-09-01","biography...
2025-06-13 07:00:46.403  INFO 2025-06-13 07:00:46,403 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 07:00:47.866  INFO 2025-06-13 07:00:47,866 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:00:47.869  INFO 2025-06-13 07:00:47,869 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 07:00:47.870  INFO 2025-06-13 07:00:47,870 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:00:47.870  INFO 2025-06-13 07:00:47,870 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 07:00:47.871  INFO 2025-06-13 07:00:47,871 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 07:00:48.032  INFO 2025-06-13 07:00:48,032 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:09.185  INFO 2025-06-13 07:04:09,185 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:09.283  INFO 2025-06-13 07:04:09,283 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:09.286  INFO 2025-06-13 07:04:09,286 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:04:09.286  INFO 2025-06-13 07:04:09,286 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:04:09.286  INFO 2025-06-13 07:04:09,286 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:04:09.286  INFO 2025-06-13 07:04:09,286 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:04:09.286  INFO 2025-06-13 07:04:09,286 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:04:09.287  INFO 2025-06-13 07:04:09,287 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:04:09.287  INFO 2025-06-13 07:04:09,287 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 07:04:09.288  INFO 2025-06-13 07:04:09,288 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 07:04:09.291  INFO 2025-06-13 07:04:09,291 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:09.294  INFO 2025-06-13 07:04:09,294 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:04:09.294  INFO 2025-06-13 07:04:09,294 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:04:12.877  INFO 2025-06-13 07:04:12,877 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:13.021  INFO 2025-06-13 07:04:13,021 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:13.064  INFO 2025-06-13 07:04:13,064 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:13.152  INFO 2025-06-13 07:04:13,152 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:13.173  INFO 2025-06-13 07:04:13,173 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:13.292  INFO 2025-06-13 07:04:13,292 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:15.569  INFO 2025-06-13 07:04:15,569 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:17.086  INFO 2025-06-13 07:04:17,086 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:17.093  INFO 2025-06-13 07:04:17,093 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 07:04:17.095  INFO 2025-06-13 07:04:17,095 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:04:17.095  INFO 2025-06-13 07:04:17,095 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":7,"fio":"Сергеев Иван Андреевич","birthDate":"1925-04-07","deathDate":"1995-09-01","biography...
2025-06-13 07:04:17.096  INFO 2025-06-13 07:04:17,096 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 07:04:18.026  INFO 2025-06-13 07:04:18,026 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:18.030  INFO 2025-06-13 07:04:18,030 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 07:04:18.031  INFO 2025-06-13 07:04:18,031 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:04:18.031  INFO 2025-06-13 07:04:18,031 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 07:04:18.032  INFO 2025-06-13 07:04:18,032 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 07:04:18.222  INFO 2025-06-13 07:04:18,222 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:22.498  INFO 2025-06-13 07:04:22,498 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:22.509  INFO 2025-06-13 07:04:22,509 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:22.547  INFO 2025-06-13 07:04:22,547 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:22.552  INFO 2025-06-13 07:04:22,552 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:22.601  INFO 2025-06-13 07:04:22,601 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:22.628  INFO 2025-06-13 07:04:22,628 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:24.619  INFO 2025-06-13 07:04:24,619 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:26.788  INFO 2025-06-13 07:04:26,788 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:31.363  INFO 2025-06-13 07:04:31,363 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:31.374  INFO 2025-06-13 07:04:31,374 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:31.427  INFO 2025-06-13 07:04:31,427 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:31.433  INFO 2025-06-13 07:04:31,433 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:31.511  INFO 2025-06-13 07:04:31,511 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:31.517  INFO 2025-06-13 07:04:31,517 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:32.890  INFO 2025-06-13 07:04:32,890 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:35.856  INFO 2025-06-13 07:04:35,856 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:38.209  INFO 2025-06-13 07:04:38,209 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:39.723  INFO 2025-06-13 07:04:39,723 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:39.732  INFO 2025-06-13 07:04:39,732 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:39.786  INFO 2025-06-13 07:04:39,786 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:39.786  INFO 2025-06-13 07:04:39,786 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:39.864  INFO 2025-06-13 07:04:39,864 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:04:39.864  INFO 2025-06-13 07:04:39,864 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:05:23.700  INFO 2025-06-13 07:05:23,700 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:05:24.438  INFO 2025-06-13 07:05:24,438 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:05:25.748  INFO 2025-06-13 07:05:25,748 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:05:25.761  INFO 2025-06-13 07:05:25,761 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:05:25.811  INFO 2025-06-13 07:05:25,811 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:05:25.814  INFO 2025-06-13 07:05:25,814 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:05:25.885  INFO 2025-06-13 07:05:25,885 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:05:25.893  INFO 2025-06-13 07:05:25,893 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:06:12.249  INFO 2025-06-13 07:06:12,249 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:06:21.426  INFO 2025-06-13 07:06:21,426 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:06:21.439  INFO 2025-06-13 07:06:21,439 --- [nio-8080-exec-3] r.c.services.FamilyTreeService           : Editor 3 attempting direct update of tree 1 - should use draft system instead
2025-06-13 07:06:21.440 ERROR 2025-06-13 07:06:21,440 --- [nio-8080-exec-3] r.c.services.FamilyTreeService           : Error updating family tree 1: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
java.lang.RuntimeException: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
	at ru.cemeterysystem.services.FamilyTreeService.updateFamilyTree(FamilyTreeService.java:191)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.updateFamilyTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.updateFamilyTree(FamilyTreeController.java:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 07:06:21.503 ERROR 2025-06-13 07:06:21,503 --- [nio-8080-exec-3] r.c.controllers.FamilyTreeController     : Error updating family tree 1: Failed to update family tree
java.lang.RuntimeException: Failed to update family tree
	at ru.cemeterysystem.services.FamilyTreeService.updateFamilyTree(FamilyTreeService.java:200)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.updateFamilyTree(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.updateFamilyTree(FamilyTreeController.java:125)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.RuntimeException: Editors must use draft system for changes. Please create a draft with your changes and submit for review.
	at ru.cemeterysystem.services.FamilyTreeService.updateFamilyTree(FamilyTreeService.java:191)
	... 114 common frames omitted
2025-06-13 07:09:51.764  INFO 2025-06-13 07:09:51,764 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:09:51.863  INFO 2025-06-13 07:09:51,863 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:09:51.865  INFO 2025-06-13 07:09:51,865 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:09:51.865  INFO 2025-06-13 07:09:51,865 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:09:51.865  INFO 2025-06-13 07:09:51,865 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:09:51.865  INFO 2025-06-13 07:09:51,865 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:09:51.865  INFO 2025-06-13 07:09:51,865 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:09:51.866  INFO 2025-06-13 07:09:51,866 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:09:51.866  INFO 2025-06-13 07:09:51,866 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 07:09:51.866  INFO 2025-06-13 07:09:51,866 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 07:09:51.871  INFO 2025-06-13 07:09:51,871 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:09:51.871  INFO 2025-06-13 07:09:51,871 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:09:51.877  INFO 2025-06-13 07:09:51,877 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:09:54.637  INFO 2025-06-13 07:09:54,637 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:09:54.747  INFO 2025-06-13 07:09:54,747 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:09:54.791  INFO 2025-06-13 07:09:54,791 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:09:54.827  INFO 2025-06-13 07:09:54,827 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:09:54.870  INFO 2025-06-13 07:09:54,870 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:09:54.950  INFO 2025-06-13 07:09:54,950 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:09:56.018  INFO 2025-06-13 07:09:56,018 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:09:57.627  INFO 2025-06-13 07:09:57,627 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:10:02.005  INFO 2025-06-13 07:10:02,005 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:10:02.025  INFO 2025-06-13 07:10:02,025 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:10:02.066  INFO 2025-06-13 07:10:02,066 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:10:02.068  INFO 2025-06-13 07:10:02,068 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:10:02.111  INFO 2025-06-13 07:10:02,111 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:10:02.136  INFO 2025-06-13 07:10:02,136 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:10:04.531  INFO 2025-06-13 07:10:04,531 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:10:05.465  INFO 2025-06-13 07:10:05,465 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:10:05.496  INFO 2025-06-13 07:10:05,496 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:10:05.528  INFO 2025-06-13 07:10:05,528 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:10:09.736  INFO 2025-06-13 07:10:09,736 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:12.269  INFO 2025-06-13 07:12:12,269 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:12.364  INFO 2025-06-13 07:12:12,364 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:12.366  INFO 2025-06-13 07:12:12,366 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:12:12.366  INFO 2025-06-13 07:12:12,366 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:12:12.366  INFO 2025-06-13 07:12:12,366 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:12:12.366  INFO 2025-06-13 07:12:12,366 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:12:12.366  INFO 2025-06-13 07:12:12,366 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:12:12.367  INFO 2025-06-13 07:12:12,367 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:12:12.367  INFO 2025-06-13 07:12:12,367 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 07:12:12.367  INFO 2025-06-13 07:12:12,367 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 07:12:12.371  INFO 2025-06-13 07:12:12,371 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:12.371  INFO 2025-06-13 07:12:12,371 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:12:12.371  INFO 2025-06-13 07:12:12,371 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:12:15.819  INFO 2025-06-13 07:12:15,819 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:15.902  INFO 2025-06-13 07:12:15,902 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:15.954  INFO 2025-06-13 07:12:15,954 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:15.992  INFO 2025-06-13 07:12:15,992 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:16.079  INFO 2025-06-13 07:12:16,079 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:16.131  INFO 2025-06-13 07:12:16,131 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:17.369  INFO 2025-06-13 07:12:17,369 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:19.264  INFO 2025-06-13 07:12:19,264 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:19.267  INFO 2025-06-13 07:12:19,267 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 07:12:19.268  INFO 2025-06-13 07:12:19,268 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:12:19.268  INFO 2025-06-13 07:12:19,268 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":7,"fio":"Сергеев Иван Андреевич","birthDate":"1925-04-07","deathDate":"1995-09-01","biography...
2025-06-13 07:12:19.268  INFO 2025-06-13 07:12:19,268 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 07:12:20.216  INFO 2025-06-13 07:12:20,216 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:20.218  INFO 2025-06-13 07:12:20,218 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 07:12:20.218  INFO 2025-06-13 07:12:20,218 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:12:20.218  INFO 2025-06-13 07:12:20,218 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 07:12:20.220  INFO 2025-06-13 07:12:20,220 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 07:12:20.396  INFO 2025-06-13 07:12:20,396 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:23.752  INFO 2025-06-13 07:12:23,752 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:23.767  INFO 2025-06-13 07:12:23,767 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:23.821  INFO 2025-06-13 07:12:23,821 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:23.822  INFO 2025-06-13 07:12:23,822 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:23.857  INFO 2025-06-13 07:12:23,857 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:23.860  INFO 2025-06-13 07:12:23,860 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:24.924  INFO 2025-06-13 07:12:24,924 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:26.124  INFO 2025-06-13 07:12:26,124 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:26.211  INFO 2025-06-13 07:12:26,211 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:26.216  INFO 2025-06-13 07:12:26,216 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 07:12:26.217  INFO 2025-06-13 07:12:26,217 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:12:26.217  INFO 2025-06-13 07:12:26,217 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":7,"fio":"Сергеев Иван Андреевич","birthDate":"1925-04-07","deathDate":"1995-09-01","biography...
2025-06-13 07:12:26.217  INFO 2025-06-13 07:12:26,217 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 07:12:26.292  INFO 2025-06-13 07:12:26,292 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:26.296  INFO 2025-06-13 07:12:26,296 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 07:12:26.297  INFO 2025-06-13 07:12:26,297 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:12:26.297  INFO 2025-06-13 07:12:26,297 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 07:12:26.298  INFO 2025-06-13 07:12:26,298 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 07:12:26.503  INFO 2025-06-13 07:12:26,503 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:26.505  INFO 2025-06-13 07:12:26,505 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:12:26.505  INFO 2025-06-13 07:12:26,505 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:12:26.505  INFO 2025-06-13 07:12:26,505 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:12:26.505  INFO 2025-06-13 07:12:26,505 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:12:26.505  INFO 2025-06-13 07:12:26,505 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:12:26.506  INFO 2025-06-13 07:12:26,506 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:12:26.506  INFO 2025-06-13 07:12:26,506 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 07:12:26.507  INFO 2025-06-13 07:12:26,507 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 07:12:26.511  INFO 2025-06-13 07:12:26,511 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:12:26.511  INFO 2025-06-13 07:12:26,511 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:12:36.401  INFO 2025-06-13 07:12:36,401 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:36.408  INFO 2025-06-13 07:12:36,408 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:36.503  INFO 2025-06-13 07:12:36,503 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:36.506  INFO 2025-06-13 07:12:36,506 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:36.545  INFO 2025-06-13 07:12:36,545 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:12:36.548  INFO 2025-06-13 07:12:36,548 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:29.939  INFO 2025-06-13 07:17:29,939 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:30.047  INFO 2025-06-13 07:17:30,047 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:30.050  INFO 2025-06-13 07:17:30,050 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:17:30.050  INFO 2025-06-13 07:17:30,050 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:17:30.050  INFO 2025-06-13 07:17:30,050 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:17:30.050  INFO 2025-06-13 07:17:30,050 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:17:30.050  INFO 2025-06-13 07:17:30,050 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:17:30.051  INFO 2025-06-13 07:17:30,051 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:17:30.051  INFO 2025-06-13 07:17:30,051 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 07:17:30.052  INFO 2025-06-13 07:17:30,052 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 07:17:30.055  INFO 2025-06-13 07:17:30,055 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:17:30.055  INFO 2025-06-13 07:17:30,055 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:17:30.060  INFO 2025-06-13 07:17:30,060 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:33.052  INFO 2025-06-13 07:17:33,052 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:33.060  INFO 2025-06-13 07:17:33,060 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:33.155  INFO 2025-06-13 07:17:33,155 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:33.157  INFO 2025-06-13 07:17:33,157 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:33.259  INFO 2025-06-13 07:17:33,259 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:33.262  INFO 2025-06-13 07:17:33,262 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:34.039  INFO 2025-06-13 07:17:34,039 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:34.135  INFO 2025-06-13 07:17:34,135 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:34.181  INFO 2025-06-13 07:17:34,181 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:34.210  INFO 2025-06-13 07:17:34,210 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:34.261  INFO 2025-06-13 07:17:34,261 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:34.336  INFO 2025-06-13 07:17:34,336 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:36.005  INFO 2025-06-13 07:17:36,005 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:38.484  INFO 2025-06-13 07:17:38,484 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:38.586  INFO 2025-06-13 07:17:38,586 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:38.590  INFO 2025-06-13 07:17:38,590 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 07:17:38.591  INFO 2025-06-13 07:17:38,591 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:17:38.591  INFO 2025-06-13 07:17:38,591 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":7,"fio":"Сергеев Иван Андреевич","birthDate":"1925-04-07","deathDate":"1995-09-01","biography...
2025-06-13 07:17:38.591  INFO 2025-06-13 07:17:38,591 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 07:17:38.650  INFO 2025-06-13 07:17:38,650 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:38.653  INFO 2025-06-13 07:17:38,653 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 07:17:38.654  INFO 2025-06-13 07:17:38,654 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:17:38.654  INFO 2025-06-13 07:17:38,654 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 07:17:38.655  INFO 2025-06-13 07:17:38,655 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 07:17:38.876  INFO 2025-06-13 07:17:38,876 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:38.879  INFO 2025-06-13 07:17:38,879 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:17:38.879  INFO 2025-06-13 07:17:38,879 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:17:38.879  INFO 2025-06-13 07:17:38,879 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:17:38.879  INFO 2025-06-13 07:17:38,879 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:17:38.879  INFO 2025-06-13 07:17:38,879 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:17:38.880  INFO 2025-06-13 07:17:38,880 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:17:38.880  INFO 2025-06-13 07:17:38,880 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 07:17:38.881  INFO 2025-06-13 07:17:38,881 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 07:17:38.884  INFO 2025-06-13 07:17:38,884 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:17:38.884  INFO 2025-06-13 07:17:38,884 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:17:46.036  INFO 2025-06-13 07:17:46,036 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:46.041  INFO 2025-06-13 07:17:46,041 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:46.126  INFO 2025-06-13 07:17:46,126 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:46.131  INFO 2025-06-13 07:17:46,131 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:46.222  INFO 2025-06-13 07:17:46,222 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:46.225  INFO 2025-06-13 07:17:46,225 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:48.283  INFO 2025-06-13 07:17:48,283 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:49.398  INFO 2025-06-13 07:17:49,398 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:49.429  INFO 2025-06-13 07:17:49,429 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:17:49.474  INFO 2025-06-13 07:17:49,474 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:45.316  INFO 2025-06-13 07:20:45,316 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:45.403  INFO 2025-06-13 07:20:45,403 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:45.405  INFO 2025-06-13 07:20:45,405 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:20:45.405  INFO 2025-06-13 07:20:45,405 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:20:45.405  INFO 2025-06-13 07:20:45,405 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:20:45.405  INFO 2025-06-13 07:20:45,405 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:20:45.405  INFO 2025-06-13 07:20:45,405 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:20:45.406  INFO 2025-06-13 07:20:45,406 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:20:45.406  INFO 2025-06-13 07:20:45,406 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 07:20:45.406  INFO 2025-06-13 07:20:45,406 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 07:20:45.409  INFO 2025-06-13 07:20:45,409 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:20:45.409  INFO 2025-06-13 07:20:45,409 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:20:45.414  INFO 2025-06-13 07:20:45,414 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:48.648  INFO 2025-06-13 07:20:48,648 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:48.750  INFO 2025-06-13 07:20:48,750 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:48.811  INFO 2025-06-13 07:20:48,811 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:48.844  INFO 2025-06-13 07:20:48,844 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:48.915  INFO 2025-06-13 07:20:48,915 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:48.972  INFO 2025-06-13 07:20:48,972 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:52.000  INFO 2025-06-13 07:20:52,000 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:52.967  INFO 2025-06-13 07:20:52,967 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:53.034  INFO 2025-06-13 07:20:53,034 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:53.090  INFO 2025-06-13 07:20:53,090 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:59.681  INFO 2025-06-13 07:20:59,681 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:20:59.790  INFO 2025-06-13 07:20:59,790 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:26:34.347  INFO 2025-06-13 07:26:34,347 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 07:26:34.350  INFO 2025-06-13 07:26:34,350 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 07:26:34.353  INFO 2025-06-13 07:26:34,353 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 07:26:42.726  INFO 2025-06-13 07:26:42,726 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 20408 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 07:26:42.732  INFO 2025-06-13 07:26:42,732 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 07:26:44.541  INFO 2025-06-13 07:26:44,541 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 07:26:44.669  INFO 2025-06-13 07:26:44,669 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 116 ms. Found 10 JPA repository interfaces.
2025-06-13 07:26:45.652  INFO 2025-06-13 07:26:45,652 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 07:26:45.668  INFO 2025-06-13 07:26:45,668 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 07:26:45.669  INFO 2025-06-13 07:26:45,669 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 07:26:45.753  INFO 2025-06-13 07:26:45,753 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 07:26:45.754  INFO 2025-06-13 07:26:45,754 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2901 ms
2025-06-13 07:26:45.811  INFO 2025-06-13 07:26:45,811 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 07:26:46.074  INFO 2025-06-13 07:26:46,074 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 07:26:46.077  INFO 2025-06-13 07:26:46,077 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 07:26:46.090  INFO 2025-06-13 07:26:46,090 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 07:26:46.218  INFO 2025-06-13 07:26:46,218 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 07:26:46.281  INFO 2025-06-13 07:26:46,281 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 07:26:46.324  INFO 2025-06-13 07:26:46,324 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 07:26:46.634  INFO 2025-06-13 07:26:46,634 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 07:26:49.119  INFO 2025-06-13 07:26:49,119 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 07:26:49.235  INFO 2025-06-13 07:26:49,235 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 07:26:49.905  INFO 2025-06-13 07:26:49,905 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 07:26:53.152  WARN 2025-06-13 07:26:53,152 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 07:26:53.196  INFO 2025-06-13 07:26:53,196 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 07:26:53.200  INFO 2025-06-13 07:26:53,200 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 07:26:53.201  WARN 2025-06-13 07:26:53,201 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 07:26:53.573  INFO 2025-06-13 07:26:53,573 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 07:26:53.617  INFO 2025-06-13 07:26:53,617 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 07:26:54.154  INFO 2025-06-13 07:26:54,154 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 07:26:54.163  INFO 2025-06-13 07:26:54,163 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 12.716 seconds (process running for 13.803)
2025-06-13 07:26:54.171  INFO 2025-06-13 07:26:54,171 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 07:26:54.171  INFO 2025-06-13 07:26:54,171 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 07:26:54.245  INFO 2025-06-13 07:26:54,245 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 07:26:54.245  INFO 2025-06-13 07:26:54,245 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 07:26:54.247  INFO 2025-06-13 07:26:54,247 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-13 07:26:54.263  INFO 2025-06-13 07:26:54,263 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 07:26:54.445 ERROR 2025-06-13 07:26:54,445 --- [nio-8080-exec-1] r.c.security.JwtAuthenticationFilter     : Error processing JWT token: User not found
org.springframework.security.core.userdetails.UsernameNotFoundException: User not found
	at ru.cemeterysystem.services.UserService.lambda$loadUserByUsername$0(UserService.java:82)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at ru.cemeterysystem.services.UserService.loadUserByUsername(UserService.java:82)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.UserService$$SpringCGLIB$$0.loadUserByUsername(<generated>)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:78)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 07:26:54.564  INFO 2025-06-13 07:26:54,564 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 07:26:54.576  INFO 2025-06-13 07:26:54,576 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 07:26:54.645  INFO 2025-06-13 07:26:54,645 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 07:26:54.665  INFO 2025-06-13 07:26:54,665 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 07:26:54.770  INFO 2025-06-13 07:26:54,770 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 07:26:54.787  INFO 2025-06-13 07:26:54,787 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 07:26:54.787  INFO 2025-06-13 07:26:54,787 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 07:27:04.722  INFO 2025-06-13 07:27:04,722 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:04.726  INFO 2025-06-13 07:27:04,726 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:04.840  INFO 2025-06-13 07:27:04,840 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:04.844  INFO 2025-06-13 07:27:04,844 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:04.913  INFO 2025-06-13 07:27:04,913 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:04.948  INFO 2025-06-13 07:27:04,948 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:04.972  INFO 2025-06-13 07:27:04,972 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:05.011  INFO 2025-06-13 07:27:05,011 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:05.092  INFO 2025-06-13 07:27:05,092 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:07.713  INFO 2025-06-13 07:27:07,713 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:07.717  INFO 2025-06-13 07:27:07,717 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:07.776  INFO 2025-06-13 07:27:07,776 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:07.806  INFO 2025-06-13 07:27:07,806 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:07.846  INFO 2025-06-13 07:27:07,846 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:07.883  INFO 2025-06-13 07:27:07,883 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:07.903  INFO 2025-06-13 07:27:07,903 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:07.980  INFO 2025-06-13 07:27:07,980 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:08.055  INFO 2025-06-13 07:27:08,055 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:08.620  INFO 2025-06-13 07:27:08,620 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:09.821  INFO 2025-06-13 07:27:09,821 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:17.581  INFO 2025-06-13 07:27:17,581 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:17.635  INFO 2025-06-13 07:27:17,635 --- [nio-8080-exec-2] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 07:27:17.636  INFO 2025-06-13 07:27:17,636 --- [nio-8080-exec-2] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 07:27:19.926  INFO 2025-06-13 07:27:19,926 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:19.937  INFO 2025-06-13 07:27:19,937 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:19.987  INFO 2025-06-13 07:27:19,987 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:19.991  INFO 2025-06-13 07:27:19,991 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:20.048  INFO 2025-06-13 07:27:20,048 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:20.086  INFO 2025-06-13 07:27:20,086 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:27.163  INFO 2025-06-13 07:27:27,163 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 07:27:27.252  INFO 2025-06-13 07:27:27,252 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:27:27.263  INFO 2025-06-13 07:27:27,263 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 07:27:27.905  INFO 2025-06-13 07:27:27,905 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:27:28.104  INFO 2025-06-13 07:27:28,104 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:27:28.111  INFO 2025-06-13 07:27:28,111 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:27:28.111  INFO 2025-06-13 07:27:28,111 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:27:28.112  INFO 2025-06-13 07:27:28,112 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:27:28.112  INFO 2025-06-13 07:27:28,112 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:27:28.112  INFO 2025-06-13 07:27:28,112 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 07:27:28.115  INFO 2025-06-13 07:27:28,115 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 07:27:28.115  INFO 2025-06-13 07:27:28,115 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 07:27:28.118  INFO 2025-06-13 07:27:28,118 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 07:27:28.145  INFO 2025-06-13 07:27:28,145 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 07:27:28.145  INFO 2025-06-13 07:27:28,145 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 07:27:28.152  INFO 2025-06-13 07:27:28,152 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:27:32.108  INFO 2025-06-13 07:27:32,108 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:27:32.108  INFO 2025-06-13 07:27:32,108 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:27:32.161  INFO 2025-06-13 07:27:32,161 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:27:32.202  INFO 2025-06-13 07:27:32,202 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:27:32.254  INFO 2025-06-13 07:27:32,254 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:27:32.265  INFO 2025-06-13 07:27:32,265 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:27:34.934  INFO 2025-06-13 07:27:34,934 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:27:34.957  INFO 2025-06-13 07:27:34,957 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 07:27:34.959  INFO 2025-06-13 07:27:34,959 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 07:27:34.960  INFO 2025-06-13 07:27:34,960 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 07:27:35.157  INFO 2025-06-13 07:27:35,157 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:27:43.168  INFO 2025-06-13 07:27:43,168 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 07:27:43.262  INFO 2025-06-13 07:27:43,262 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:43.263  INFO 2025-06-13 07:27:43,263 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 07:27:43.882  INFO 2025-06-13 07:27:43,882 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:43.986  INFO 2025-06-13 07:27:43,986 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:44.002  INFO 2025-06-13 07:27:44,002 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:44.007  INFO 2025-06-13 07:27:44,007 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:27:44.007  INFO 2025-06-13 07:27:44,007 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:27:44.007  INFO 2025-06-13 07:27:44,007 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:27:44.007  INFO 2025-06-13 07:27:44,007 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:27:44.007  INFO 2025-06-13 07:27:44,007 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:27:44.009  INFO 2025-06-13 07:27:44,009 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:27:44.009  INFO 2025-06-13 07:27:44,009 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 07:27:44.010  INFO 2025-06-13 07:27:44,010 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 07:27:44.020  INFO 2025-06-13 07:27:44,020 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:27:44.020  INFO 2025-06-13 07:27:44,020 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:27:47.442  INFO 2025-06-13 07:27:47,442 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:47.546  INFO 2025-06-13 07:27:47,546 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:47.608  INFO 2025-06-13 07:27:47,608 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:47.654  INFO 2025-06-13 07:27:47,654 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:47.718  INFO 2025-06-13 07:27:47,718 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:47.786  INFO 2025-06-13 07:27:47,786 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:52.417  INFO 2025-06-13 07:27:52,417 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:53.975  INFO 2025-06-13 07:27:53,975 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:54.127  INFO 2025-06-13 07:27:54,127 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:54.133  INFO 2025-06-13 07:27:54,133 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 07:27:54.135  INFO 2025-06-13 07:27:54,135 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:27:54.135  INFO 2025-06-13 07:27:54,135 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: null
2025-06-13 07:27:54.136  INFO 2025-06-13 07:27:54,136 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft memorials JSON is empty, falling back to original tree
2025-06-13 07:27:54.143  INFO 2025-06-13 07:27:54,143 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Returning 8 original tree memorials
2025-06-13 07:27:54.228  INFO 2025-06-13 07:27:54,228 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:54.234  INFO 2025-06-13 07:27:54,234 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 07:27:54.236  INFO 2025-06-13 07:27:54,236 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:27:54.237  INFO 2025-06-13 07:27:54,237 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft relations JSON: null
2025-06-13 07:27:54.237  INFO 2025-06-13 07:27:54,237 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft relations JSON is empty, falling back to original tree
2025-06-13 07:27:54.247  INFO 2025-06-13 07:27:54,247 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 07:27:54.612  INFO 2025-06-13 07:27:54,612 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:27:54.615  INFO 2025-06-13 07:27:54,615 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:27:54.615  INFO 2025-06-13 07:27:54,615 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:27:54.615  INFO 2025-06-13 07:27:54,615 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:27:54.615  INFO 2025-06-13 07:27:54,615 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:27:54.615  INFO 2025-06-13 07:27:54,615 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:27:54.617  INFO 2025-06-13 07:27:54,617 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:27:54.617  INFO 2025-06-13 07:27:54,617 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 07:27:54.618  INFO 2025-06-13 07:27:54,618 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 07:27:54.627  INFO 2025-06-13 07:27:54,627 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:27:54.627  INFO 2025-06-13 07:27:54,627 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:28:04.403  INFO 2025-06-13 07:28:04,403 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:04.443  INFO 2025-06-13 07:28:04,443 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 07:28:04.502  INFO 2025-06-13 07:28:04,502 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:04.508  INFO 2025-06-13 07:28:04,508 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 07:28:04.509  INFO 2025-06-13 07:28:04,509 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:28:04.509  INFO 2025-06-13 07:28:04,509 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05-20","deathDate":"2023-01-15","biography":...
2025-06-13 07:28:04.515  INFO 2025-06-13 07:28:04,515 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 07:28:29.614  INFO 2025-06-13 07:28:29,614 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:29.640  INFO 2025-06-13 07:28:29,640 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 07:28:29.732  INFO 2025-06-13 07:28:29,732 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:29.737  INFO 2025-06-13 07:28:29,737 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 07:28:29.738  INFO 2025-06-13 07:28:29,738 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:28:29.738  INFO 2025-06-13 07:28:29,738 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 07:28:29.741  INFO 2025-06-13 07:28:29,741 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 07:28:32.846  INFO 2025-06-13 07:28:32,846 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:32.857  INFO 2025-06-13 07:28:32,857 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:32.911  INFO 2025-06-13 07:28:32,911 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:32.913  INFO 2025-06-13 07:28:32,913 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:32.999  INFO 2025-06-13 07:28:32,999 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:32.999  INFO 2025-06-13 07:28:32,999 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:37.377  INFO 2025-06-13 07:28:37,377 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:38.615  INFO 2025-06-13 07:28:38,615 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:38.621  INFO 2025-06-13 07:28:38,621 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 07:28:38.623  INFO 2025-06-13 07:28:38,623 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:28:38.623  INFO 2025-06-13 07:28:38,623 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05-20","deathDate":"2023-01-15","biography":...
2025-06-13 07:28:38.624  INFO 2025-06-13 07:28:38,624 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 07:28:38.719  INFO 2025-06-13 07:28:38,719 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:38.725  INFO 2025-06-13 07:28:38,725 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 07:28:38.726  INFO 2025-06-13 07:28:38,726 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:28:38.726  INFO 2025-06-13 07:28:38,726 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 07:28:38.728  INFO 2025-06-13 07:28:38,728 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 07:28:38.815  INFO 2025-06-13 07:28:38,815 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:43.415  INFO 2025-06-13 07:28:43,415 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:43.424  INFO 2025-06-13 07:28:43,424 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:43.466  INFO 2025-06-13 07:28:43,466 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:43.467  INFO 2025-06-13 07:28:43,467 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:43.525  INFO 2025-06-13 07:28:43,525 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:43.541  INFO 2025-06-13 07:28:43,541 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:51.204  INFO 2025-06-13 07:28:51,204 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:51.321  INFO 2025-06-13 07:28:51,321 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:51.324  INFO 2025-06-13 07:28:51,324 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Attempting to submit draft with ID: 1
2025-06-13 07:28:51.325  INFO 2025-06-13 07:28:51,325 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Found draft: ID=1, status=DRAFT, editorId=3, treeId=1
2025-06-13 07:28:51.325  INFO 2025-06-13 07:28:51,325 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Draft 1 has changes: true
2025-06-13 07:28:51.325  INFO 2025-06-13 07:28:51,325 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      :   - Name changed: false
2025-06-13 07:28:51.325  INFO 2025-06-13 07:28:51,325 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      :   - Description changed: false
2025-06-13 07:28:51.326  INFO 2025-06-13 07:28:51,326 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      :   - Public status changed: false
2025-06-13 07:28:51.326  INFO 2025-06-13 07:28:51,326 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      :   - Memorials changed: true
2025-06-13 07:28:51.326  INFO 2025-06-13 07:28:51,326 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      :   - Relations changed: true
2025-06-13 07:28:51.326  INFO 2025-06-13 07:28:51,326 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Draft 1 submitted for review with  changes
2025-06-13 07:28:51.500  INFO 2025-06-13 07:28:51,500 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:51.654  INFO 2025-06-13 07:28:51,654 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:28:51.727  INFO 2025-06-13 07:28:51,727 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:29:17.494  INFO 2025-06-13 07:29:17,494 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:29:17.494  INFO 2025-06-13 07:29:17,494 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:29:17.541  INFO 2025-06-13 07:29:17,541 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:29:17.578  INFO 2025-06-13 07:29:17,578 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:29:17.627  INFO 2025-06-13 07:29:17,627 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:29:17.630  INFO 2025-06-13 07:29:17,630 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:29:18.384  INFO 2025-06-13 07:29:18,384 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:29:18.574  INFO 2025-06-13 07:29:18,574 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:33:41.977  INFO 2025-06-13 07:33:41,977 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 07:33:42.062  INFO 2025-06-13 07:33:42,062 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:42.063  INFO 2025-06-13 07:33:42,063 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 07:33:42.491  INFO 2025-06-13 07:33:42,491 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:42.580  INFO 2025-06-13 07:33:42,580 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:42.648  INFO 2025-06-13 07:33:42,648 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:42.651  INFO 2025-06-13 07:33:42,651 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:33:42.651  INFO 2025-06-13 07:33:42,651 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:33:42.651  INFO 2025-06-13 07:33:42,651 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:33:42.651  INFO 2025-06-13 07:33:42,651 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:33:42.651  INFO 2025-06-13 07:33:42,651 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 07:33:42.652  INFO 2025-06-13 07:33:42,652 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 07:33:42.652  INFO 2025-06-13 07:33:42,652 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 07:33:42.653  INFO 2025-06-13 07:33:42,653 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 07:33:42.661  INFO 2025-06-13 07:33:42,661 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 07:33:42.661  INFO 2025-06-13 07:33:42,661 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 07:33:44.542  INFO 2025-06-13 07:33:44,542 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:44.542  INFO 2025-06-13 07:33:44,542 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:44.608  INFO 2025-06-13 07:33:44,608 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:44.685  INFO 2025-06-13 07:33:44,685 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:44.742  INFO 2025-06-13 07:33:44,742 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:44.755  INFO 2025-06-13 07:33:44,755 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:46.939  INFO 2025-06-13 07:33:46,939 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:47.030  INFO 2025-06-13 07:33:47,030 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:47.074  INFO 2025-06-13 07:33:47,074 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:47.097  INFO 2025-06-13 07:33:47,097 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:47.190  INFO 2025-06-13 07:33:47,190 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:33:47.218  INFO 2025-06-13 07:33:47,218 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:36:25.434  INFO 2025-06-13 07:36:25,434 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 07:36:25.514  INFO 2025-06-13 07:36:25,514 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:25.515  INFO 2025-06-13 07:36:25,515 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 07:36:25.951  INFO 2025-06-13 07:36:25,951 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:25.966  INFO 2025-06-13 07:36:25,966 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:26.020  INFO 2025-06-13 07:36:26,020 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:26.022  INFO 2025-06-13 07:36:26,022 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:36:26.023  INFO 2025-06-13 07:36:26,023 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:36:26.023  INFO 2025-06-13 07:36:26,023 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:36:26.023  INFO 2025-06-13 07:36:26,023 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:36:26.023  INFO 2025-06-13 07:36:26,023 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:36:26.024  INFO 2025-06-13 07:36:26,024 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:36:26.024  INFO 2025-06-13 07:36:26,024 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 07:36:26.024  INFO 2025-06-13 07:36:26,024 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 07:36:26.029  INFO 2025-06-13 07:36:26,029 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:36:26.029  INFO 2025-06-13 07:36:26,029 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:36:28.056  INFO 2025-06-13 07:36:28,056 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:28.115  INFO 2025-06-13 07:36:28,115 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:28.191  INFO 2025-06-13 07:36:28,191 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:28.221  INFO 2025-06-13 07:36:28,221 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:28.284  INFO 2025-06-13 07:36:28,284 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:28.362  INFO 2025-06-13 07:36:28,362 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:30.081  INFO 2025-06-13 07:36:30,081 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:32.715  INFO 2025-06-13 07:36:32,715 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:33.567  INFO 2025-06-13 07:36:33,567 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:33.615  INFO 2025-06-13 07:36:33,615 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:33.678  INFO 2025-06-13 07:36:33,678 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:35.665  INFO 2025-06-13 07:36:35,665 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:36.313  INFO 2025-06-13 07:36:36,313 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:36.383  INFO 2025-06-13 07:36:36,383 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:36.462  INFO 2025-06-13 07:36:36,462 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:37.079  INFO 2025-06-13 07:36:37,079 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:42.711  INFO 2025-06-13 07:36:42,711 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:44.866  INFO 2025-06-13 07:36:44,866 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:44.870  INFO 2025-06-13 07:36:44,870 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:36:44.870  INFO 2025-06-13 07:36:44,870 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:36:44.870  INFO 2025-06-13 07:36:44,870 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:36:44.870  INFO 2025-06-13 07:36:44,870 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:36:44.870  INFO 2025-06-13 07:36:44,870 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:36:44.871  INFO 2025-06-13 07:36:44,871 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:36:44.872  INFO 2025-06-13 07:36:44,872 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 07:36:44.872  INFO 2025-06-13 07:36:44,872 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 07:36:44.877  INFO 2025-06-13 07:36:44,877 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:36:44.877  INFO 2025-06-13 07:36:44,877 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:36:45.032  INFO 2025-06-13 07:36:45,032 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:45.035  INFO 2025-06-13 07:36:45,035 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:36:45.035  INFO 2025-06-13 07:36:45,035 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:36:45.035  INFO 2025-06-13 07:36:45,035 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:36:45.035  INFO 2025-06-13 07:36:45,035 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:36:45.035  INFO 2025-06-13 07:36:45,035 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:36:45.037  INFO 2025-06-13 07:36:45,037 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:36:45.037  INFO 2025-06-13 07:36:45,037 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 07:36:45.037  INFO 2025-06-13 07:36:45,037 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 07:36:45.041  INFO 2025-06-13 07:36:45,041 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:36:45.042  INFO 2025-06-13 07:36:45,042 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:36:47.171  INFO 2025-06-13 07:36:47,171 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:47.172  INFO 2025-06-13 07:36:47,172 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:47.257  INFO 2025-06-13 07:36:47,257 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:47.257  INFO 2025-06-13 07:36:47,257 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:47.315  INFO 2025-06-13 07:36:47,315 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:47.341  INFO 2025-06-13 07:36:47,341 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:47.356  INFO 2025-06-13 07:36:47,356 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:47.429  INFO 2025-06-13 07:36:47,429 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:36:47.500  INFO 2025-06-13 07:36:47,500 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:46:33.328  INFO 2025-06-13 07:46:33,328 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 07:46:33.334  INFO 2025-06-13 07:46:33,334 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 07:46:33.357  INFO 2025-06-13 07:46:33,357 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 07:46:39.933  INFO 2025-06-13 07:46:39,933 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 23740 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 07:46:39.935  INFO 2025-06-13 07:46:39,935 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 07:46:40.539  INFO 2025-06-13 07:46:40,539 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 07:46:40.605  INFO 2025-06-13 07:46:40,605 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 60 ms. Found 11 JPA repository interfaces.
2025-06-13 07:46:41.201  INFO 2025-06-13 07:46:41,201 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 07:46:41.213  INFO 2025-06-13 07:46:41,213 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 07:46:41.213  INFO 2025-06-13 07:46:41,213 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 07:46:41.262  INFO 2025-06-13 07:46:41,262 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 07:46:41.262  INFO 2025-06-13 07:46:41,262 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1290 ms
2025-06-13 07:46:41.289  INFO 2025-06-13 07:46:41,289 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 07:46:41.417  INFO 2025-06-13 07:46:41,417 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 07:46:41.419  INFO 2025-06-13 07:46:41,419 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 07:46:41.429  INFO 2025-06-13 07:46:41,429 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 07:46:41.524  INFO 2025-06-13 07:46:41,524 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 07:46:41.566  INFO 2025-06-13 07:46:41,566 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 07:46:41.591  INFO 2025-06-13 07:46:41,591 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 07:46:41.816  INFO 2025-06-13 07:46:41,816 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 07:46:42.920  INFO 2025-06-13 07:46:42,920 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 07:46:42.989  INFO 2025-06-13 07:46:42,989 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 07:46:43.504  INFO 2025-06-13 07:46:43,504 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 07:46:45.605  WARN 2025-06-13 07:46:45,605 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 07:46:45.636  INFO 2025-06-13 07:46:45,636 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 07:46:45.640  INFO 2025-06-13 07:46:45,640 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 07:46:45.641  WARN 2025-06-13 07:46:45,641 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 07:46:45.881  INFO 2025-06-13 07:46:45,881 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 07:46:45.908  INFO 2025-06-13 07:46:45,908 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 07:46:46.231  INFO 2025-06-13 07:46:46,231 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 07:46:46.238  INFO 2025-06-13 07:46:46,238 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 6.646 seconds (process running for 7.188)
2025-06-13 07:46:46.244  INFO 2025-06-13 07:46:46,244 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 07:46:46.244  INFO 2025-06-13 07:46:46,244 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 07:46:46.303  INFO 2025-06-13 07:46:46,303 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 07:46:46.523  INFO 2025-06-13 07:46:46,523 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 07:46:46.528  INFO 2025-06-13 07:46:46,528 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 07:46:46.565  INFO 2025-06-13 07:46:46,565 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 07:46:46.575  INFO 2025-06-13 07:46:46,575 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 07:46:46.625  INFO 2025-06-13 07:46:46,625 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 07:46:46.633  INFO 2025-06-13 07:46:46,633 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 07:46:46.633  INFO 2025-06-13 07:46:46,633 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 07:49:49.533  INFO 2025-06-13 07:49:49,533 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 07:49:49.533  INFO 2025-06-13 07:49:49,533 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 07:49:49.535  INFO 2025-06-13 07:49:49,535 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 07:49:49.682  INFO 2025-06-13 07:49:49,682 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:49:49.682  INFO 2025-06-13 07:49:49,682 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:49:49.682  INFO 2025-06-13 07:49:49,682 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:49:49.720  INFO 2025-06-13 07:49:49,720 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:49:49.720  INFO 2025-06-13 07:49:49,720 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:49:49.720  INFO 2025-06-13 07:49:49,720 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:49:49.720  INFO 2025-06-13 07:49:49,720 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:49:49.720  INFO 2025-06-13 07:49:49,720 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:49:49.723  INFO 2025-06-13 07:49:49,723 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:49:49.723  INFO 2025-06-13 07:49:49,723 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 07:49:49.726  INFO 2025-06-13 07:49:49,726 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 07:49:49.749  INFO 2025-06-13 07:49:49,749 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:49:49.749  INFO 2025-06-13 07:49:49,749 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:49:52.281  INFO 2025-06-13 07:49:52,281 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:49:52.501  INFO 2025-06-13 07:49:52,501 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:49:52.575  INFO 2025-06-13 07:49:52,575 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:49:52.631  INFO 2025-06-13 07:49:52,631 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:49:52.640  INFO 2025-06-13 07:49:52,640 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:49:52.689  INFO 2025-06-13 07:49:52,689 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:49:54.085  INFO 2025-06-13 07:49:54,085 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:49:55.386  INFO 2025-06-13 07:49:55,386 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:00.936  INFO 2025-06-13 07:50:00,936 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:00.983  INFO 2025-06-13 07:50:00,983 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 07:50:00.984  INFO 2025-06-13 07:50:00,984 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 07:50:02.762  INFO 2025-06-13 07:50:02,762 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:02.772  INFO 2025-06-13 07:50:02,772 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:02.829  INFO 2025-06-13 07:50:02,829 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:02.841  INFO 2025-06-13 07:50:02,841 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:02.931  INFO 2025-06-13 07:50:02,931 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:02.937  INFO 2025-06-13 07:50:02,937 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:10.266  INFO 2025-06-13 07:50:10,266 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 07:50:10.345  INFO 2025-06-13 07:50:10,345 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:50:10.353  INFO 2025-06-13 07:50:10,353 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 07:50:10.765  INFO 2025-06-13 07:50:10,765 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:50:10.863  INFO 2025-06-13 07:50:10,863 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:50:10.866  INFO 2025-06-13 07:50:10,866 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:50:10.869  INFO 2025-06-13 07:50:10,869 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:50:10.869  INFO 2025-06-13 07:50:10,869 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:50:10.869  INFO 2025-06-13 07:50:10,869 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:50:10.869  INFO 2025-06-13 07:50:10,869 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:50:10.869  INFO 2025-06-13 07:50:10,869 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 07:50:10.872  INFO 2025-06-13 07:50:10,872 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 07:50:10.873  INFO 2025-06-13 07:50:10,873 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 07:50:10.874  INFO 2025-06-13 07:50:10,874 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 07:50:10.884  INFO 2025-06-13 07:50:10,884 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 07:50:10.884  INFO 2025-06-13 07:50:10,884 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 07:50:15.859  INFO 2025-06-13 07:50:15,859 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:50:15.889  INFO 2025-06-13 07:50:15,889 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:50:15.941  INFO 2025-06-13 07:50:15,941 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:50:15.948  INFO 2025-06-13 07:50:15,948 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:50:16.065  INFO 2025-06-13 07:50:16,065 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:50:16.070  INFO 2025-06-13 07:50:16,070 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:50:18.184  INFO 2025-06-13 07:50:18,184 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:50:18.208  INFO 2025-06-13 07:50:18,208 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 07:50:18.210  INFO 2025-06-13 07:50:18,210 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 07:50:18.210  INFO 2025-06-13 07:50:18,210 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 07:50:18.270  INFO 2025-06-13 07:50:18,270 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:50:25.123  INFO 2025-06-13 07:50:25,123 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 07:50:25.219  INFO 2025-06-13 07:50:25,219 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:25.220  INFO 2025-06-13 07:50:25,220 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 07:50:25.781  INFO 2025-06-13 07:50:25,781 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:25.829  INFO 2025-06-13 07:50:25,829 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:25.833  INFO 2025-06-13 07:50:25,833 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:25.833  INFO 2025-06-13 07:50:25,833 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:50:25.833  INFO 2025-06-13 07:50:25,833 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:50:25.833  INFO 2025-06-13 07:50:25,833 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:50:25.834  INFO 2025-06-13 07:50:25,834 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:50:25.834  INFO 2025-06-13 07:50:25,834 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:50:25.836  INFO 2025-06-13 07:50:25,836 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:50:25.836  INFO 2025-06-13 07:50:25,836 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 07:50:25.837  INFO 2025-06-13 07:50:25,837 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 07:50:25.846  INFO 2025-06-13 07:50:25,846 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:50:25.847  INFO 2025-06-13 07:50:25,847 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:50:28.005  INFO 2025-06-13 07:50:28,005 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:28.072  INFO 2025-06-13 07:50:28,072 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:28.156  INFO 2025-06-13 07:50:28,156 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:28.165  INFO 2025-06-13 07:50:28,165 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:28.233  INFO 2025-06-13 07:50:28,233 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:28.317  INFO 2025-06-13 07:50:28,317 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:32.891  INFO 2025-06-13 07:50:32,891 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:34.638  INFO 2025-06-13 07:50:34,638 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:34.787  INFO 2025-06-13 07:50:34,787 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:34.792  INFO 2025-06-13 07:50:34,792 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 07:50:34.794  INFO 2025-06-13 07:50:34,794 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:50:34.794  INFO 2025-06-13 07:50:34,794 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: null
2025-06-13 07:50:34.795  INFO 2025-06-13 07:50:34,795 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Draft memorials JSON is empty, falling back to original tree
2025-06-13 07:50:34.801  INFO 2025-06-13 07:50:34,801 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Returning 8 original tree memorials
2025-06-13 07:50:34.923  INFO 2025-06-13 07:50:34,923 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:34.930  INFO 2025-06-13 07:50:34,930 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 07:50:34.932  INFO 2025-06-13 07:50:34,932 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:50:34.933  INFO 2025-06-13 07:50:34,933 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Draft relations JSON: null
2025-06-13 07:50:34.933  INFO 2025-06-13 07:50:34,933 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Draft relations JSON is empty, falling back to original tree
2025-06-13 07:50:34.941  INFO 2025-06-13 07:50:34,941 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 07:50:35.114  INFO 2025-06-13 07:50:35,114 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:35.120  INFO 2025-06-13 07:50:35,120 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:50:35.120  INFO 2025-06-13 07:50:35,120 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:50:35.121  INFO 2025-06-13 07:50:35,121 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:50:35.121  INFO 2025-06-13 07:50:35,121 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:50:35.121  INFO 2025-06-13 07:50:35,121 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 07:50:35.123  INFO 2025-06-13 07:50:35,123 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 07:50:35.123  INFO 2025-06-13 07:50:35,123 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 07:50:35.124  INFO 2025-06-13 07:50:35,124 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 07:50:35.133  INFO 2025-06-13 07:50:35,133 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:50:35.134  INFO 2025-06-13 07:50:35,134 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 07:50:36.926  INFO 2025-06-13 07:50:36,926 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:36.958  INFO 2025-06-13 07:50:36,958 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 07:50:36.994  INFO 2025-06-13 07:50:36,994 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:37.000  INFO 2025-06-13 07:50:37,000 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 07:50:37.001  INFO 2025-06-13 07:50:37,001 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:50:37.002  INFO 2025-06-13 07:50:37,002 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":3,"fio":"Сергеев Андрей Иванович","birthDate":"1950-10-10","deathDate":"1980-05-15","biograph...
2025-06-13 07:50:37.008  INFO 2025-06-13 07:50:37,008 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 07:50:47.899  INFO 2025-06-13 07:50:47,899 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:47.924  INFO 2025-06-13 07:50:47,924 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 07:50:47.966  INFO 2025-06-13 07:50:47,966 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:47.971  INFO 2025-06-13 07:50:47,971 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 07:50:47.973  INFO 2025-06-13 07:50:47,973 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:50:47.973  INFO 2025-06-13 07:50:47,973 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 07:50:47.975  INFO 2025-06-13 07:50:47,975 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 07:50:51.740  INFO 2025-06-13 07:50:51,740 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:51.749  INFO 2025-06-13 07:50:51,749 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:51.828  INFO 2025-06-13 07:50:51,828 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:51.830  INFO 2025-06-13 07:50:51,830 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:51.910  INFO 2025-06-13 07:50:51,910 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:51.916  INFO 2025-06-13 07:50:51,916 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:53.425  INFO 2025-06-13 07:50:53,425 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:54.601  INFO 2025-06-13 07:50:54,601 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:54.605  INFO 2025-06-13 07:50:54,605 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 07:50:54.607  INFO 2025-06-13 07:50:54,607 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:50:54.607  INFO 2025-06-13 07:50:54,607 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":3,"fio":"Сергеев Андрей Иванович","birthDate":"1950-10-10","deathDate":"1980-05-15","biograph...
2025-06-13 07:50:54.607  INFO 2025-06-13 07:50:54,607 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 07:50:54.668  INFO 2025-06-13 07:50:54,668 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:54.673  INFO 2025-06-13 07:50:54,673 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 07:50:54.674  INFO 2025-06-13 07:50:54,674 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 07:50:54.674  INFO 2025-06-13 07:50:54,674 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 07:50:54.675  INFO 2025-06-13 07:50:54,675 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 07:50:54.745  INFO 2025-06-13 07:50:54,745 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:57.499  INFO 2025-06-13 07:50:57,499 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:57.510  INFO 2025-06-13 07:50:57,510 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:57.575  INFO 2025-06-13 07:50:57,575 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:57.576  INFO 2025-06-13 07:50:57,576 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:57.664  INFO 2025-06-13 07:50:57,664 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:50:57.664  INFO 2025-06-13 07:50:57,664 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:51:01.324  INFO 2025-06-13 07:51:01,324 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:51:01.451  INFO 2025-06-13 07:51:01,451 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:51:01.455  INFO 2025-06-13 07:51:01,455 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Attempting to submit draft with ID: 1
2025-06-13 07:51:01.457  INFO 2025-06-13 07:51:01,457 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Found draft: ID=1, status=DRAFT, editorId=3, treeId=1
2025-06-13 07:51:01.457  INFO 2025-06-13 07:51:01,457 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft 1 has changes: true
2025-06-13 07:51:01.457  INFO 2025-06-13 07:51:01,457 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      :   - Name changed: false
2025-06-13 07:51:01.457  INFO 2025-06-13 07:51:01,457 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      :   - Description changed: false
2025-06-13 07:51:01.457  INFO 2025-06-13 07:51:01,457 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      :   - Public status changed: false
2025-06-13 07:51:01.457  INFO 2025-06-13 07:51:01,457 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      :   - Memorials changed: true
2025-06-13 07:51:01.457  INFO 2025-06-13 07:51:01,457 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      :   - Relations changed: true
2025-06-13 07:51:01.461  INFO 2025-06-13 07:51:01,461 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft 1 submitted for review (status remains DRAFT) with  changes
2025-06-13 07:51:01.462  INFO 2025-06-13 07:51:01,462 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Created submission record for draft 1 to notify owner
2025-06-13 07:51:03.905  INFO 2025-06-13 07:51:03,905 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:51:03.907  INFO 2025-06-13 07:51:03,907 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:51:03.940  INFO 2025-06-13 07:51:03,940 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:51:03.972  INFO 2025-06-13 07:51:03,972 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:51:04.054  INFO 2025-06-13 07:51:04,054 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:51:04.059  INFO 2025-06-13 07:51:04,059 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:51:05.169  INFO 2025-06-13 07:51:05,169 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:51:05.369  INFO 2025-06-13 07:51:05,369 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 07:51:15.983  INFO 2025-06-13 07:51:15,983 --- [io-8080-exec-10] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 07:51:16.064  INFO 2025-06-13 07:51:16,064 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:16.065  INFO 2025-06-13 07:51:16,065 --- [io-8080-exec-10] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 07:51:16.445  INFO 2025-06-13 07:51:16,445 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:16.528  INFO 2025-06-13 07:51:16,528 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:16.533  INFO 2025-06-13 07:51:16,533 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:16.538  INFO 2025-06-13 07:51:16,538 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 07:51:16.538  INFO 2025-06-13 07:51:16,538 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 07:51:16.538  INFO 2025-06-13 07:51:16,538 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 07:51:16.538  INFO 2025-06-13 07:51:16,538 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 07:51:16.538  INFO 2025-06-13 07:51:16,538 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 07:51:16.540  INFO 2025-06-13 07:51:16,540 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 07:51:16.541  INFO 2025-06-13 07:51:16,541 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 07:51:16.541  INFO 2025-06-13 07:51:16,541 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 07:51:16.549  INFO 2025-06-13 07:51:16,549 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 07:51:16.549  INFO 2025-06-13 07:51:16,549 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 07:51:18.268  INFO 2025-06-13 07:51:18,268 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:18.273  INFO 2025-06-13 07:51:18,273 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:18.324  INFO 2025-06-13 07:51:18,324 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:18.325  INFO 2025-06-13 07:51:18,325 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:18.427  INFO 2025-06-13 07:51:18,427 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:18.431  INFO 2025-06-13 07:51:18,431 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:20.690  INFO 2025-06-13 07:51:20,690 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:20.911  INFO 2025-06-13 07:51:20,911 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:21.909  INFO 2025-06-13 07:51:21,909 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:23.410  INFO 2025-06-13 07:51:23,410 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:23.465  INFO 2025-06-13 07:51:23,465 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:23.565  INFO 2025-06-13 07:51:23,565 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:23.594  INFO 2025-06-13 07:51:23,594 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:23.690  INFO 2025-06-13 07:51:23,690 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:23.740  INFO 2025-06-13 07:51:23,740 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:25.463  INFO 2025-06-13 07:51:25,463 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:26.863  INFO 2025-06-13 07:51:26,863 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:29.644  INFO 2025-06-13 07:51:29,644 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:29.652  INFO 2025-06-13 07:51:29,652 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:29.700  INFO 2025-06-13 07:51:29,700 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:29.700  INFO 2025-06-13 07:51:29,700 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:29.726  INFO 2025-06-13 07:51:29,726 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:51:29.728  INFO 2025-06-13 07:51:29,728 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 07:59:28.533  INFO 2025-06-13 07:59:28,533 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 07:59:28.538  INFO 2025-06-13 07:59:28,538 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 07:59:28.541  INFO 2025-06-13 07:59:28,541 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 08:04:54.986  INFO 2025-06-13 08:04:54,986 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 10724 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 08:04:54.988  INFO 2025-06-13 08:04:54,988 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 08:04:55.641  INFO 2025-06-13 08:04:55,641 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 08:04:55.714  INFO 2025-06-13 08:04:55,714 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 65 ms. Found 11 JPA repository interfaces.
2025-06-13 08:04:56.332  INFO 2025-06-13 08:04:56,332 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 08:04:56.344  INFO 2025-06-13 08:04:56,344 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 08:04:56.344  INFO 2025-06-13 08:04:56,344 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 08:04:56.396  INFO 2025-06-13 08:04:56,396 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 08:04:56.397  INFO 2025-06-13 08:04:56,397 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1371 ms
2025-06-13 08:04:56.425  INFO 2025-06-13 08:04:56,425 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 08:04:56.576  INFO 2025-06-13 08:04:56,576 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 08:04:56.579  INFO 2025-06-13 08:04:56,579 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 08:04:56.592  INFO 2025-06-13 08:04:56,592 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 08:04:56.687  INFO 2025-06-13 08:04:56,687 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 08:04:56.744  INFO 2025-06-13 08:04:56,744 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 08:04:56.773  INFO 2025-06-13 08:04:56,773 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 08:04:57.024  INFO 2025-06-13 08:04:57,024 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 08:04:58.190  INFO 2025-06-13 08:04:58,190 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 08:04:58.265  INFO 2025-06-13 08:04:58,265 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 08:04:58.650  INFO 2025-06-13 08:04:58,650 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 08:05:00.625  WARN 2025-06-13 08:05:00,625 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 08:05:00.651  INFO 2025-06-13 08:05:00,651 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 08:05:00.654  INFO 2025-06-13 08:05:00,654 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 08:05:00.655  WARN 2025-06-13 08:05:00,655 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 08:05:00.871  INFO 2025-06-13 08:05:00,871 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 08:05:00.896  INFO 2025-06-13 08:05:00,896 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 08:05:01.226  INFO 2025-06-13 08:05:01,226 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 08:05:01.232  INFO 2025-06-13 08:05:01,232 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 6.605 seconds (process running for 7.235)
2025-06-13 08:05:01.235  INFO 2025-06-13 08:05:01,235 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 08:05:01.304  INFO 2025-06-13 08:05:01,304 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 08:05:01.521  INFO 2025-06-13 08:05:01,521 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 08:05:01.559  INFO 2025-06-13 08:05:01,559 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 08:05:01.597  INFO 2025-06-13 08:05:01,597 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 08:05:01.608  INFO 2025-06-13 08:05:01,608 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 08:05:01.678  INFO 2025-06-13 08:05:01,678 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 08:05:01.690  INFO 2025-06-13 08:05:01,690 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 08:05:01.690  INFO 2025-06-13 08:05:01,690 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 08:05:01.718  INFO 2025-06-13 08:05:01,718 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 08:05:30.184  INFO 2025-06-13 08:05:30,184 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 08:05:30.185  INFO 2025-06-13 08:05:30,185 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 08:05:30.187  INFO 2025-06-13 08:05:30,187 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-13 08:05:30.439  INFO 2025-06-13 08:05:30,439 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:05:30.439  INFO 2025-06-13 08:05:30,439 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:05:30.440  INFO 2025-06-13 08:05:30,440 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:05:30.496  INFO 2025-06-13 08:05:30,496 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:05:30.496  INFO 2025-06-13 08:05:30,496 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:05:30.496  INFO 2025-06-13 08:05:30,496 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:05:30.496  INFO 2025-06-13 08:05:30,496 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:05:30.496  INFO 2025-06-13 08:05:30,496 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 08:05:30.515  INFO 2025-06-13 08:05:30,515 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 08:05:30.516  INFO 2025-06-13 08:05:30,516 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 08:05:30.520  INFO 2025-06-13 08:05:30,520 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 08:05:30.580  INFO 2025-06-13 08:05:30,580 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 08:05:30.581  INFO 2025-06-13 08:05:30,581 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 08:06:30.459  INFO 2025-06-13 08:06:30,459 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 08:06:30.545  INFO 2025-06-13 08:06:30,545 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:06:30.558  INFO 2025-06-13 08:06:30,558 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 08:06:31.198  INFO 2025-06-13 08:06:31,198 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:06:31.267  INFO 2025-06-13 08:06:31,267 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:06:31.273  INFO 2025-06-13 08:06:31,273 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:06:31.273  INFO 2025-06-13 08:06:31,273 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:06:31.273  INFO 2025-06-13 08:06:31,273 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:06:31.273  INFO 2025-06-13 08:06:31,273 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:06:31.273  INFO 2025-06-13 08:06:31,273 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 08:06:31.278  INFO 2025-06-13 08:06:31,278 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 08:06:31.278  INFO 2025-06-13 08:06:31,278 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 08:06:31.279  INFO 2025-06-13 08:06:31,279 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 08:06:31.288  INFO 2025-06-13 08:06:31,288 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:06:31.289  INFO 2025-06-13 08:06:31,289 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:06:31.298  INFO 2025-06-13 08:06:31,298 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:06:43.562  INFO 2025-06-13 08:06:43,562 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:06:43.669  INFO 2025-06-13 08:06:43,669 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:06:43.724  INFO 2025-06-13 08:06:43,724 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:06:43.761  INFO 2025-06-13 08:06:43,761 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:06:43.917  INFO 2025-06-13 08:06:43,917 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:06:43.995  INFO 2025-06-13 08:06:43,995 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:06:45.105  INFO 2025-06-13 08:06:45,105 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:07:21.471  INFO 2025-06-13 08:07:21,471 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:07:26.842  INFO 2025-06-13 08:07:26,842 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:07:26.882  INFO 2025-06-13 08:07:26,882 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 08:07:26.882  INFO 2025-06-13 08:07:26,882 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 08:07:39.612  INFO 2025-06-13 08:07:39,612 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 08:07:39.703  INFO 2025-06-13 08:07:39,703 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:07:39.704  INFO 2025-06-13 08:07:39,704 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 08:07:40.301  INFO 2025-06-13 08:07:40,301 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:07:40.365  INFO 2025-06-13 08:07:40,365 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:07:40.388  INFO 2025-06-13 08:07:40,388 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:07:40.392  INFO 2025-06-13 08:07:40,392 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:07:40.392  INFO 2025-06-13 08:07:40,392 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:07:40.392  INFO 2025-06-13 08:07:40,392 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:07:40.392  INFO 2025-06-13 08:07:40,392 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:07:40.392  INFO 2025-06-13 08:07:40,392 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 08:07:40.394  INFO 2025-06-13 08:07:40,394 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 08:07:40.395  INFO 2025-06-13 08:07:40,395 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 08:07:40.395  INFO 2025-06-13 08:07:40,395 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 08:07:40.409  INFO 2025-06-13 08:07:40,409 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 08:07:40.409  INFO 2025-06-13 08:07:40,409 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 08:07:44.364  INFO 2025-06-13 08:07:44,364 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:07:44.381  INFO 2025-06-13 08:07:44,381 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:07:44.471  INFO 2025-06-13 08:07:44,471 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:07:44.479  INFO 2025-06-13 08:07:44,479 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:07:44.509  INFO 2025-06-13 08:07:44,509 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:07:44.554  INFO 2025-06-13 08:07:44,554 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:07:44.760  INFO 2025-06-13 08:07:44,760 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:07:44.760  INFO 2025-06-13 08:07:44,760 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:07:58.910  INFO 2025-06-13 08:07:58,910 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:07:58.933  INFO 2025-06-13 08:07:58,933 --- [nio-8080-exec-8] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 08:07:58.935  INFO 2025-06-13 08:07:58,935 --- [nio-8080-exec-8] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 08:07:58.935  INFO 2025-06-13 08:07:58,935 --- [nio-8080-exec-8] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 08:07:59.009  INFO 2025-06-13 08:07:59,009 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:08:07.612  INFO 2025-06-13 08:08:07,612 --- [nio-8080-exec-5] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 08:08:07.698  INFO 2025-06-13 08:08:07,698 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:07.699  INFO 2025-06-13 08:08:07,699 --- [nio-8080-exec-5] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 08:08:08.274  INFO 2025-06-13 08:08:08,274 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:08.338  INFO 2025-06-13 08:08:08,338 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:08.343  INFO 2025-06-13 08:08:08,343 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:08:08.343  INFO 2025-06-13 08:08:08,343 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:08:08.343  INFO 2025-06-13 08:08:08,343 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:08:08.344  INFO 2025-06-13 08:08:08,344 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:08:08.344  INFO 2025-06-13 08:08:08,344 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 08:08:08.345  INFO 2025-06-13 08:08:08,345 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 08:08:08.346  INFO 2025-06-13 08:08:08,346 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 08:08:08.346  INFO 2025-06-13 08:08:08,346 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 08:08:08.350  INFO 2025-06-13 08:08:08,350 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:08.356  INFO 2025-06-13 08:08:08,356 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:08:08.356  INFO 2025-06-13 08:08:08,356 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:08:27.446  INFO 2025-06-13 08:08:27,446 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:27.527  INFO 2025-06-13 08:08:27,527 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:27.612  INFO 2025-06-13 08:08:27,612 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:27.642  INFO 2025-06-13 08:08:27,642 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:27.702  INFO 2025-06-13 08:08:27,702 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:27.879  INFO 2025-06-13 08:08:27,879 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:30.129  INFO 2025-06-13 08:08:30,129 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:37.692  INFO 2025-06-13 08:08:37,692 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:37.797  INFO 2025-06-13 08:08:37,797 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:37.805  INFO 2025-06-13 08:08:37,805 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 08:08:37.808  INFO 2025-06-13 08:08:37,808 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 08:08:37.808  INFO 2025-06-13 08:08:37,808 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: null
2025-06-13 08:08:37.808  INFO 2025-06-13 08:08:37,808 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Draft memorials JSON is empty, falling back to original tree
2025-06-13 08:08:37.815  INFO 2025-06-13 08:08:37,815 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Returning 8 original tree memorials
2025-06-13 08:08:37.900  INFO 2025-06-13 08:08:37,900 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:37.909  INFO 2025-06-13 08:08:37,909 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 08:08:37.912  INFO 2025-06-13 08:08:37,912 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 08:08:37.912  INFO 2025-06-13 08:08:37,912 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft relations JSON: null
2025-06-13 08:08:37.912  INFO 2025-06-13 08:08:37,912 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft relations JSON is empty, falling back to original tree
2025-06-13 08:08:37.925  INFO 2025-06-13 08:08:37,925 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 08:08:38.094  INFO 2025-06-13 08:08:38,094 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:38.097  INFO 2025-06-13 08:08:38,097 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:08:38.098  INFO 2025-06-13 08:08:38,098 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:08:38.098  INFO 2025-06-13 08:08:38,098 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:08:38.098  INFO 2025-06-13 08:08:38,098 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:08:38.098  INFO 2025-06-13 08:08:38,098 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 08:08:38.100  INFO 2025-06-13 08:08:38,100 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 08:08:38.100  INFO 2025-06-13 08:08:38,100 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 08:08:38.101  INFO 2025-06-13 08:08:38,101 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 08:08:38.110  INFO 2025-06-13 08:08:38,110 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:08:38.110  INFO 2025-06-13 08:08:38,110 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:08:41.219  INFO 2025-06-13 08:08:41,219 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:41.259  INFO 2025-06-13 08:08:41,259 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 08:08:41.324  INFO 2025-06-13 08:08:41,324 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:08:41.329  INFO 2025-06-13 08:08:41,329 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 08:08:41.331  INFO 2025-06-13 08:08:41,331 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 08:08:41.331  INFO 2025-06-13 08:08:41,331 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":7,"fio":"Сергеев Иван Андреевич","birthDate":"1925-04-07","deathDate":"1995-09-01","biography...
2025-06-13 08:08:41.338  INFO 2025-06-13 08:08:41,338 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 08:11:31.352  INFO 2025-06-13 08:11:31,352 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:11:31.373  INFO 2025-06-13 08:11:31,373 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 08:11:31.453  INFO 2025-06-13 08:11:31,453 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:11:31.457  INFO 2025-06-13 08:11:31,457 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 08:11:31.458  INFO 2025-06-13 08:11:31,458 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 08:11:31.458  INFO 2025-06-13 08:11:31,458 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 08:11:31.461  INFO 2025-06-13 08:11:31,461 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 08:11:45.906  INFO 2025-06-13 08:11:45,906 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:11:45.960  INFO 2025-06-13 08:11:45,960 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:11:46.044  INFO 2025-06-13 08:11:46,044 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:11:46.045  INFO 2025-06-13 08:11:46,045 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:11:46.274  INFO 2025-06-13 08:11:46,274 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:11:46.283  INFO 2025-06-13 08:11:46,283 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:11:50.787  INFO 2025-06-13 08:11:50,787 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:11:50.877  INFO 2025-06-13 08:11:50,877 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:11:50.882  INFO 2025-06-13 08:11:50,882 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Attempting to submit draft with ID: 1
2025-06-13 08:11:50.883  INFO 2025-06-13 08:11:50,883 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft: ID=1, status=DRAFT, editorId=3, treeId=1
2025-06-13 08:11:50.883  INFO 2025-06-13 08:11:50,883 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft 1 has changes: true
2025-06-13 08:11:50.883  INFO 2025-06-13 08:11:50,883 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      :   - Name changed: false
2025-06-13 08:11:50.883  INFO 2025-06-13 08:11:50,883 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      :   - Description changed: false
2025-06-13 08:11:50.883  INFO 2025-06-13 08:11:50,883 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      :   - Public status changed: false
2025-06-13 08:11:50.883  INFO 2025-06-13 08:11:50,883 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      :   - Memorials changed: true
2025-06-13 08:11:50.883  INFO 2025-06-13 08:11:50,883 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      :   - Relations changed: true
2025-06-13 08:11:50.887  INFO 2025-06-13 08:11:50,887 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft 1 submitted for review (status remains DRAFT) with  changes
2025-06-13 08:11:50.887  INFO 2025-06-13 08:11:50,887 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Created submission record for draft 1 to notify owner
2025-06-13 08:12:00.029  INFO 2025-06-13 08:12:00,029 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:12:00.031  INFO 2025-06-13 08:12:00,031 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:12:00.056  INFO 2025-06-13 08:12:00,056 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:12:00.065  INFO 2025-06-13 08:12:00,065 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:12:00.068  INFO 2025-06-13 08:12:00,068 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:12:00.085  INFO 2025-06-13 08:12:00,085 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:12:00.137  INFO 2025-06-13 08:12:00,137 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:12:00.144  INFO 2025-06-13 08:12:00,144 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:12:02.474  INFO 2025-06-13 08:12:02,474 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:12:02.475  INFO 2025-06-13 08:12:02,475 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:12:02.664  INFO 2025-06-13 08:12:02,664 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:12:02.668  INFO 2025-06-13 08:12:02,668 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:27:28.082  INFO 2025-06-13 08:27:28,082 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 08:27:28.084  INFO 2025-06-13 08:27:28,084 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 08:27:28.087  INFO 2025-06-13 08:27:28,087 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 08:27:30.150  INFO 2025-06-13 08:27:30,150 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 24868 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 08:27:30.152  INFO 2025-06-13 08:27:30,152 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 08:27:30.862  INFO 2025-06-13 08:27:30,862 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 08:27:30.950  INFO 2025-06-13 08:27:30,950 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 80 ms. Found 11 JPA repository interfaces.
2025-06-13 08:27:31.596  INFO 2025-06-13 08:27:31,596 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 08:27:31.608  INFO 2025-06-13 08:27:31,608 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 08:27:31.608  INFO 2025-06-13 08:27:31,608 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 08:27:31.695  INFO 2025-06-13 08:27:31,695 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 08:27:31.695  INFO 2025-06-13 08:27:31,695 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1503 ms
2025-06-13 08:27:31.731  INFO 2025-06-13 08:27:31,731 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 08:27:31.955  INFO 2025-06-13 08:27:31,955 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 08:27:31.957  INFO 2025-06-13 08:27:31,957 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 08:27:31.972  INFO 2025-06-13 08:27:31,972 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 08:27:32.117  INFO 2025-06-13 08:27:32,117 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 08:27:32.217  INFO 2025-06-13 08:27:32,217 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 08:27:32.270  INFO 2025-06-13 08:27:32,270 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 08:27:32.777  INFO 2025-06-13 08:27:32,777 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 08:27:34.477  INFO 2025-06-13 08:27:34,477 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 08:27:34.553  INFO 2025-06-13 08:27:34,553 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 08:27:34.956  INFO 2025-06-13 08:27:34,956 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 08:27:38.097  WARN 2025-06-13 08:27:38,097 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 08:27:38.184  INFO 2025-06-13 08:27:38,184 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 08:27:38.192  INFO 2025-06-13 08:27:38,192 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 08:27:38.195  WARN 2025-06-13 08:27:38,195 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 08:27:38.557  INFO 2025-06-13 08:27:38,557 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 08:27:38.587  INFO 2025-06-13 08:27:38,587 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 08:27:39.154  INFO 2025-06-13 08:27:39,154 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 08:27:39.165  INFO 2025-06-13 08:27:39,165 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 9.406 seconds (process running for 10.129)
2025-06-13 08:27:39.176  INFO 2025-06-13 08:27:39,176 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 08:27:39.345  INFO 2025-06-13 08:27:39,345 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 08:27:39.348  INFO 2025-06-13 08:27:39,348 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 08:27:39.703  INFO 2025-06-13 08:27:39,703 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 08:27:39.715  INFO 2025-06-13 08:27:39,715 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 08:27:39.794  INFO 2025-06-13 08:27:39,794 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 08:27:39.815  INFO 2025-06-13 08:27:39,815 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 08:27:39.892  INFO 2025-06-13 08:27:39,892 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 08:27:39.908  INFO 2025-06-13 08:27:39,908 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 08:27:39.908  INFO 2025-06-13 08:27:39,908 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 08:27:42.894  INFO 2025-06-13 08:27:42,894 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 08:27:42.894  INFO 2025-06-13 08:27:42,894 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 08:27:42.895  INFO 2025-06-13 08:27:42,895 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 08:27:43.045  INFO 2025-06-13 08:27:43,045 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:27:43.045  INFO 2025-06-13 08:27:43,045 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:27:43.045  INFO 2025-06-13 08:27:43,045 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:27:43.081  INFO 2025-06-13 08:27:43,081 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:27:43.081  INFO 2025-06-13 08:27:43,081 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:27:43.081  INFO 2025-06-13 08:27:43,081 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:27:43.081  INFO 2025-06-13 08:27:43,081 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:27:43.081  INFO 2025-06-13 08:27:43,081 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 08:27:43.084  INFO 2025-06-13 08:27:43,084 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 08:27:43.084  INFO 2025-06-13 08:27:43,084 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 08:27:43.088  INFO 2025-06-13 08:27:43,088 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 08:27:43.112  INFO 2025-06-13 08:27:43,112 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:27:43.112  INFO 2025-06-13 08:27:43,112 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:27:47.674  INFO 2025-06-13 08:27:47,674 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:27:47.738  INFO 2025-06-13 08:27:47,738 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:27:47.808  INFO 2025-06-13 08:27:47,808 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:27:47.841  INFO 2025-06-13 08:27:47,841 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:27:47.917  INFO 2025-06-13 08:27:47,917 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:27:47.982  INFO 2025-06-13 08:27:47,982 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:27:48.951  INFO 2025-06-13 08:27:48,951 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:27:49.808  INFO 2025-06-13 08:27:49,808 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:27:55.481  INFO 2025-06-13 08:27:55,481 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:27:55.531  INFO 2025-06-13 08:27:55,531 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 08:27:55.531  INFO 2025-06-13 08:27:55,531 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 08:28:04.643  INFO 2025-06-13 08:28:04,643 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 08:28:04.736  INFO 2025-06-13 08:28:04,736 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:28:04.747  INFO 2025-06-13 08:28:04,747 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 08:28:05.258  INFO 2025-06-13 08:28:05,258 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:28:05.377  INFO 2025-06-13 08:28:05,377 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:28:05.382  INFO 2025-06-13 08:28:05,382 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:28:05.382  INFO 2025-06-13 08:28:05,382 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:28:05.382  INFO 2025-06-13 08:28:05,382 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:28:05.382  INFO 2025-06-13 08:28:05,382 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:28:05.382  INFO 2025-06-13 08:28:05,382 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:28:05.382  INFO 2025-06-13 08:28:05,382 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 08:28:05.384  INFO 2025-06-13 08:28:05,384 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 08:28:05.385  INFO 2025-06-13 08:28:05,385 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 08:28:05.385  INFO 2025-06-13 08:28:05,385 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 08:28:05.396  INFO 2025-06-13 08:28:05,396 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 08:28:05.397  INFO 2025-06-13 08:28:05,397 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 08:28:07.259  INFO 2025-06-13 08:28:07,259 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:28:07.259  INFO 2025-06-13 08:28:07,259 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:28:07.312  INFO 2025-06-13 08:28:07,312 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:28:07.317  INFO 2025-06-13 08:28:07,317 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:28:07.331  INFO 2025-06-13 08:28:07,331 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:28:07.368  INFO 2025-06-13 08:28:07,368 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:25.872  INFO 2025-06-13 08:38:25,872 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:25.990  INFO 2025-06-13 08:38:25,990 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:25.995  INFO 2025-06-13 08:38:25,995 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:38:25.995  INFO 2025-06-13 08:38:25,995 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:38:25.995  INFO 2025-06-13 08:38:25,995 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:38:25.995  INFO 2025-06-13 08:38:25,995 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:38:25.995  INFO 2025-06-13 08:38:25,995 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 08:38:25.998  INFO 2025-06-13 08:38:25,998 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 08:38:25.998  INFO 2025-06-13 08:38:25,998 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 08:38:25.999  INFO 2025-06-13 08:38:25,999 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 08:38:26.008  INFO 2025-06-13 08:38:26,008 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:26.008  INFO 2025-06-13 08:38:26,008 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 08:38:26.008  INFO 2025-06-13 08:38:26,008 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 08:38:30.990  INFO 2025-06-13 08:38:30,990 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:31.002  INFO 2025-06-13 08:38:31,002 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:31.074  INFO 2025-06-13 08:38:31,074 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:31.094  INFO 2025-06-13 08:38:31,094 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:31.128  INFO 2025-06-13 08:38:31,128 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:31.152  INFO 2025-06-13 08:38:31,152 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:31.284  INFO 2025-06-13 08:38:31,284 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:31.288  INFO 2025-06-13 08:38:31,288 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:49.942  INFO 2025-06-13 08:38:49,942 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:49.986  INFO 2025-06-13 08:38:49,986 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 08:38:49.991  INFO 2025-06-13 08:38:49,991 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 08:38:49.991  INFO 2025-06-13 08:38:49,991 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 08:38:50.059  INFO 2025-06-13 08:38:50,059 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:51.712  INFO 2025-06-13 08:38:51,712 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:51.712  INFO 2025-06-13 08:38:51,712 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:51.887  INFO 2025-06-13 08:38:51,887 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:38:51.889  INFO 2025-06-13 08:38:51,889 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:39:00.631  INFO 2025-06-13 08:39:00,631 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:39:00.655  INFO 2025-06-13 08:39:00,655 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:39:09.828  INFO 2025-06-13 08:39:09,828 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 08:39:09.922  INFO 2025-06-13 08:39:09,922 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:39:09.923  INFO 2025-06-13 08:39:09,923 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 08:39:10.704  INFO 2025-06-13 08:39:10,704 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:39:10.767  INFO 2025-06-13 08:39:10,767 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:39:10.767  INFO 2025-06-13 08:39:10,767 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:39:10.773  INFO 2025-06-13 08:39:10,773 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:39:10.773  INFO 2025-06-13 08:39:10,773 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:39:10.773  INFO 2025-06-13 08:39:10,773 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:39:10.773  INFO 2025-06-13 08:39:10,773 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:39:10.773  INFO 2025-06-13 08:39:10,773 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 08:39:10.775  INFO 2025-06-13 08:39:10,775 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 08:39:10.776  INFO 2025-06-13 08:39:10,776 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 08:39:10.776  INFO 2025-06-13 08:39:10,776 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 08:39:10.786  INFO 2025-06-13 08:39:10,786 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:39:10.786  INFO 2025-06-13 08:39:10,786 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:39:13.703  INFO 2025-06-13 08:39:13,703 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:39:13.715  INFO 2025-06-13 08:39:13,715 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:39:13.769  INFO 2025-06-13 08:39:13,769 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:39:13.773  INFO 2025-06-13 08:39:13,773 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:39:13.821  INFO 2025-06-13 08:39:13,821 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:39:13.847  INFO 2025-06-13 08:39:13,847 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:39:13.900  INFO 2025-06-13 08:39:13,900 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:39:13.924  INFO 2025-06-13 08:39:13,924 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:06.936  INFO 2025-06-13 08:44:06,936 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:07.072  INFO 2025-06-13 08:44:07,072 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:07.075  INFO 2025-06-13 08:44:07,075 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:44:07.075  INFO 2025-06-13 08:44:07,075 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:44:07.075  INFO 2025-06-13 08:44:07,075 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:44:07.076  INFO 2025-06-13 08:44:07,076 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:44:07.076  INFO 2025-06-13 08:44:07,076 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 08:44:07.076  INFO 2025-06-13 08:44:07,076 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:07.077  INFO 2025-06-13 08:44:07,077 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 08:44:07.077  INFO 2025-06-13 08:44:07,077 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 08:44:07.078  INFO 2025-06-13 08:44:07,078 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 08:44:07.084  INFO 2025-06-13 08:44:07,084 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:44:07.084  INFO 2025-06-13 08:44:07,084 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:44:10.476  INFO 2025-06-13 08:44:10,476 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:10.518  INFO 2025-06-13 08:44:10,518 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:10.578  INFO 2025-06-13 08:44:10,578 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:10.601  INFO 2025-06-13 08:44:10,601 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:10.624  INFO 2025-06-13 08:44:10,624 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:10.683  INFO 2025-06-13 08:44:10,683 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:10.718  INFO 2025-06-13 08:44:10,718 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:10.718  INFO 2025-06-13 08:44:10,718 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:12.803  INFO 2025-06-13 08:44:12,803 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:12.808  INFO 2025-06-13 08:44:12,808 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:13.085  INFO 2025-06-13 08:44:13,085 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:13.085  INFO 2025-06-13 08:44:13,085 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:13.859  INFO 2025-06-13 08:44:13,859 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:13.862  INFO 2025-06-13 08:44:13,862 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:14.434  INFO 2025-06-13 08:44:14,434 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:14.438  INFO 2025-06-13 08:44:14,438 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:16.127  INFO 2025-06-13 08:44:16,127 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:16.128  INFO 2025-06-13 08:44:16,128 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:44:44.510  INFO 2025-06-13 08:44:44,510 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 08:44:44.593  INFO 2025-06-13 08:44:44,593 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:44:44.594  INFO 2025-06-13 08:44:44,594 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 08:44:45.932  INFO 2025-06-13 08:44:45,932 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:44:45.932  INFO 2025-06-13 08:44:45,932 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:44:45.976  INFO 2025-06-13 08:44:45,976 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:44:45.979  INFO 2025-06-13 08:44:45,979 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:44:45.979  INFO 2025-06-13 08:44:45,979 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:44:45.979  INFO 2025-06-13 08:44:45,979 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:44:45.979  INFO 2025-06-13 08:44:45,979 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:44:45.979  INFO 2025-06-13 08:44:45,979 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 08:44:45.981  INFO 2025-06-13 08:44:45,981 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 08:44:45.981  INFO 2025-06-13 08:44:45,981 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 08:44:45.982  INFO 2025-06-13 08:44:45,982 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 08:44:45.991  INFO 2025-06-13 08:44:45,991 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 08:44:45.991  INFO 2025-06-13 08:44:45,991 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 08:44:49.147  INFO 2025-06-13 08:44:49,147 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:44:49.207  INFO 2025-06-13 08:44:49,207 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:44:49.309  INFO 2025-06-13 08:44:49,309 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:44:49.339  INFO 2025-06-13 08:44:49,339 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:44:49.400  INFO 2025-06-13 08:44:49,400 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:44:49.520  INFO 2025-06-13 08:44:49,520 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:44:49.601  INFO 2025-06-13 08:44:49,601 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:44:49.603  INFO 2025-06-13 08:44:49,603 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:48:55.036  INFO 2025-06-13 08:48:55,036 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:48:55.202  INFO 2025-06-13 08:48:55,202 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:48:55.207  INFO 2025-06-13 08:48:55,207 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:48:55.207  INFO 2025-06-13 08:48:55,207 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:48:55.207  INFO 2025-06-13 08:48:55,207 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:48:55.207  INFO 2025-06-13 08:48:55,207 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:48:55.207  INFO 2025-06-13 08:48:55,207 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 08:48:55.210  INFO 2025-06-13 08:48:55,210 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 08:48:55.210  INFO 2025-06-13 08:48:55,210 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 08:48:55.211  INFO 2025-06-13 08:48:55,211 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 08:48:55.216  INFO 2025-06-13 08:48:55,216 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:48:55.222  INFO 2025-06-13 08:48:55,222 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 08:48:55.222  INFO 2025-06-13 08:48:55,222 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 08:48:58.018  INFO 2025-06-13 08:48:58,018 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:48:58.027  INFO 2025-06-13 08:48:58,027 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:48:58.106  INFO 2025-06-13 08:48:58,106 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:48:58.135  INFO 2025-06-13 08:48:58,135 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:48:58.178  INFO 2025-06-13 08:48:58,178 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:48:58.188  INFO 2025-06-13 08:48:58,188 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:48:58.340  INFO 2025-06-13 08:48:58,340 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:48:58.342  INFO 2025-06-13 08:48:58,342 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:49:01.128  INFO 2025-06-13 08:49:01,128 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:49:01.168  INFO 2025-06-13 08:49:01,168 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:49:01.304  INFO 2025-06-13 08:49:01,304 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:49:01.304  INFO 2025-06-13 08:49:01,304 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:49:02.186  INFO 2025-06-13 08:49:02,186 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:49:02.192  INFO 2025-06-13 08:49:02,192 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:49:09.868  INFO 2025-06-13 08:49:09,868 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:49:09.872  INFO 2025-06-13 08:49:09,872 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:49:14.735  INFO 2025-06-13 08:49:14,735 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:49:14.736  INFO 2025-06-13 08:49:14,736 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:49:20.969  INFO 2025-06-13 08:49:20,969 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 08:49:21.048  INFO 2025-06-13 08:49:21,048 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:21.049  INFO 2025-06-13 08:49:21,049 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 08:49:21.608  INFO 2025-06-13 08:49:21,608 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:21.701  INFO 2025-06-13 08:49:21,701 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:21.706  INFO 2025-06-13 08:49:21,706 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:49:21.706  INFO 2025-06-13 08:49:21,706 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:49:21.706  INFO 2025-06-13 08:49:21,706 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:49:21.706  INFO 2025-06-13 08:49:21,706 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:49:21.706  INFO 2025-06-13 08:49:21,706 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 08:49:21.708  INFO 2025-06-13 08:49:21,708 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 08:49:21.708  INFO 2025-06-13 08:49:21,708 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 08:49:21.709  INFO 2025-06-13 08:49:21,709 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 08:49:21.717  INFO 2025-06-13 08:49:21,717 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:49:21.717  INFO 2025-06-13 08:49:21,717 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:49:21.717  INFO 2025-06-13 08:49:21,717 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:23.502  INFO 2025-06-13 08:49:23,502 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:23.502  INFO 2025-06-13 08:49:23,502 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:23.543  INFO 2025-06-13 08:49:23,543 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:23.579  INFO 2025-06-13 08:49:23,579 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:23.587  INFO 2025-06-13 08:49:23,587 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:23.639  INFO 2025-06-13 08:49:23,639 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:23.686  INFO 2025-06-13 08:49:23,686 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:23.690  INFO 2025-06-13 08:49:23,690 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:24.587  INFO 2025-06-13 08:49:24,587 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:24.591  INFO 2025-06-13 08:49:24,591 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:24.933  INFO 2025-06-13 08:49:24,933 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:24.939  INFO 2025-06-13 08:49:24,939 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:25.635  INFO 2025-06-13 08:49:25,635 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:25.636  INFO 2025-06-13 08:49:25,636 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:26.325  INFO 2025-06-13 08:49:26,325 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:26.386  INFO 2025-06-13 08:49:26,386 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:26.439  INFO 2025-06-13 08:49:26,439 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:26.523  INFO 2025-06-13 08:49:26,523 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:26.676  INFO 2025-06-13 08:49:26,676 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:26.725  INFO 2025-06-13 08:49:26,725 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:28.033  INFO 2025-06-13 08:49:28,033 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:29.281  INFO 2025-06-13 08:49:29,281 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:29.356  INFO 2025-06-13 08:49:29,356 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:29.363  INFO 2025-06-13 08:49:29,363 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 08:49:29.365  INFO 2025-06-13 08:49:29,365 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 08:49:29.365  INFO 2025-06-13 08:49:29,365 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: null
2025-06-13 08:49:29.366  INFO 2025-06-13 08:49:29,366 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Draft memorials JSON is empty, falling back to original tree
2025-06-13 08:49:29.369  INFO 2025-06-13 08:49:29,369 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Returning 8 original tree memorials
2025-06-13 08:49:29.431  INFO 2025-06-13 08:49:29,431 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:29.436  INFO 2025-06-13 08:49:29,436 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 08:49:29.437  INFO 2025-06-13 08:49:29,437 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 08:49:29.437  INFO 2025-06-13 08:49:29,437 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft relations JSON: null
2025-06-13 08:49:29.438  INFO 2025-06-13 08:49:29,438 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft relations JSON is empty, falling back to original tree
2025-06-13 08:49:29.445  INFO 2025-06-13 08:49:29,445 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 08:49:29.633  INFO 2025-06-13 08:49:29,633 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:29.636  INFO 2025-06-13 08:49:29,636 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:49:29.636  INFO 2025-06-13 08:49:29,636 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:49:29.636  INFO 2025-06-13 08:49:29,636 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:49:29.636  INFO 2025-06-13 08:49:29,636 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:49:29.636  INFO 2025-06-13 08:49:29,636 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 08:49:29.637  INFO 2025-06-13 08:49:29,637 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 08:49:29.637  INFO 2025-06-13 08:49:29,637 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 08:49:29.638  INFO 2025-06-13 08:49:29,638 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 08:49:29.648  INFO 2025-06-13 08:49:29,648 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:49:29.648  INFO 2025-06-13 08:49:29,648 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:49:31.317  INFO 2025-06-13 08:49:31,317 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:31.359  INFO 2025-06-13 08:49:31,359 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 08:49:31.403  INFO 2025-06-13 08:49:31,403 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:31.406  INFO 2025-06-13 08:49:31,406 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 08:49:31.408  INFO 2025-06-13 08:49:31,408 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 08:49:31.408  INFO 2025-06-13 08:49:31,408 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":2,"fio":"Иванова Анна Сергеевна","birthDate":"1990-07-30","deathDate":"2023-02-10","biography...
2025-06-13 08:49:31.416  INFO 2025-06-13 08:49:31,416 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 08:49:38.781  INFO 2025-06-13 08:49:38,781 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:38.803  INFO 2025-06-13 08:49:38,803 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 08:49:38.846  INFO 2025-06-13 08:49:38,846 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:38.850  INFO 2025-06-13 08:49:38,850 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 08:49:38.852  INFO 2025-06-13 08:49:38,852 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 08:49:38.852  INFO 2025-06-13 08:49:38,852 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 08:49:38.855  INFO 2025-06-13 08:49:38,855 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 08:49:41.106  INFO 2025-06-13 08:49:41,106 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:41.123  INFO 2025-06-13 08:49:41,123 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:41.193  INFO 2025-06-13 08:49:41,193 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:41.193  INFO 2025-06-13 08:49:41,193 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:41.277  INFO 2025-06-13 08:49:41,277 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:41.278  INFO 2025-06-13 08:49:41,278 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:42.520  INFO 2025-06-13 08:49:42,520 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:43.548  INFO 2025-06-13 08:49:43,548 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:43.551  INFO 2025-06-13 08:49:43,551 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 08:49:43.552  INFO 2025-06-13 08:49:43,552 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 08:49:43.552  INFO 2025-06-13 08:49:43,552 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":2,"fio":"Иванова Анна Сергеевна","birthDate":"1990-07-30","deathDate":"2023-02-10","biography...
2025-06-13 08:49:43.552  INFO 2025-06-13 08:49:43,552 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 08:49:44.669  INFO 2025-06-13 08:49:44,669 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:44.673  INFO 2025-06-13 08:49:44,673 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 08:49:44.674  INFO 2025-06-13 08:49:44,674 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 08:49:44.674  INFO 2025-06-13 08:49:44,674 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 08:49:44.675  INFO 2025-06-13 08:49:44,675 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 08:49:44.889  INFO 2025-06-13 08:49:44,889 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:56.759  INFO 2025-06-13 08:49:56,759 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:56.779  INFO 2025-06-13 08:49:56,779 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:56.819  INFO 2025-06-13 08:49:56,819 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:56.822  INFO 2025-06-13 08:49:56,822 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:56.857  INFO 2025-06-13 08:49:56,857 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:49:56.860  INFO 2025-06-13 08:49:56,860 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:50:01.499  INFO 2025-06-13 08:50:01,499 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:50:01.583  INFO 2025-06-13 08:50:01,583 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:50:01.587  INFO 2025-06-13 08:50:01,587 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Attempting to submit draft with ID: 1
2025-06-13 08:50:01.589  INFO 2025-06-13 08:50:01,589 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Found draft: ID=1, status=DRAFT, editorId=3, treeId=1
2025-06-13 08:50:01.589  INFO 2025-06-13 08:50:01,589 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft 1 has changes: true
2025-06-13 08:50:01.589  INFO 2025-06-13 08:50:01,589 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      :   - Name changed: false
2025-06-13 08:50:01.589  INFO 2025-06-13 08:50:01,589 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      :   - Description changed: false
2025-06-13 08:50:01.589  INFO 2025-06-13 08:50:01,589 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      :   - Public status changed: false
2025-06-13 08:50:01.589  INFO 2025-06-13 08:50:01,589 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      :   - Memorials changed: true
2025-06-13 08:50:01.589  INFO 2025-06-13 08:50:01,589 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      :   - Relations changed: true
2025-06-13 08:50:01.593  INFO 2025-06-13 08:50:01,593 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft 1 submitted for review (status remains DRAFT) with  changes
2025-06-13 08:50:01.593  INFO 2025-06-13 08:50:01,593 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Created submission record for draft 1 to notify owner
2025-06-13 08:50:05.045  INFO 2025-06-13 08:50:05,045 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:50:05.050  INFO 2025-06-13 08:50:05,050 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:50:05.201  INFO 2025-06-13 08:50:05,201 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:50:05.204  INFO 2025-06-13 08:50:05,204 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:50:06.649  INFO 2025-06-13 08:50:06,649 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:50:06.656  INFO 2025-06-13 08:50:06,656 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:55:59.822  INFO 2025-06-13 08:55:59,822 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:55:59.933  INFO 2025-06-13 08:55:59,933 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:55:59.936  INFO 2025-06-13 08:55:59,936 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:55:59.936  INFO 2025-06-13 08:55:59,936 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:55:59.936  INFO 2025-06-13 08:55:59,936 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:55:59.936  INFO 2025-06-13 08:55:59,936 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:55:59.937  INFO 2025-06-13 08:55:59,937 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 08:55:59.937  INFO 2025-06-13 08:55:59,937 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 08:55:59.937  INFO 2025-06-13 08:55:59,937 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 08:55:59.938  INFO 2025-06-13 08:55:59,938 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 08:55:59.938  INFO 2025-06-13 08:55:59,938 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:55:59.941  INFO 2025-06-13 08:55:59,941 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:55:59.941  INFO 2025-06-13 08:55:59,941 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 08:56:03.491  INFO 2025-06-13 08:56:03,491 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:56:03.500  INFO 2025-06-13 08:56:03,500 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:56:03.585  INFO 2025-06-13 08:56:03,585 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:56:03.598  INFO 2025-06-13 08:56:03,598 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:56:03.627  INFO 2025-06-13 08:56:03,627 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:56:03.641  INFO 2025-06-13 08:56:03,641 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:56:03.813  INFO 2025-06-13 08:56:03,813 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:56:03.815  INFO 2025-06-13 08:56:03,815 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:56:10.838  INFO 2025-06-13 08:56:10,838 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:56:10.841  INFO 2025-06-13 08:56:10,841 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:56:11.137  INFO 2025-06-13 08:56:11,137 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:56:11.138  INFO 2025-06-13 08:56:11,138 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 08:56:43.953  INFO 2025-06-13 08:56:43,953 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 08:56:44.043  INFO 2025-06-13 08:56:44,043 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:44.044  INFO 2025-06-13 08:56:44,044 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 08:56:44.788  INFO 2025-06-13 08:56:44,788 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:44.799  INFO 2025-06-13 08:56:44,799 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:44.802  INFO 2025-06-13 08:56:44,802 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 08:56:44.802  INFO 2025-06-13 08:56:44,802 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 08:56:44.802  INFO 2025-06-13 08:56:44,802 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 08:56:44.802  INFO 2025-06-13 08:56:44,802 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 08:56:44.802  INFO 2025-06-13 08:56:44,802 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 08:56:44.803  INFO 2025-06-13 08:56:44,803 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 08:56:44.803  INFO 2025-06-13 08:56:44,803 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 08:56:44.803  INFO 2025-06-13 08:56:44,803 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 08:56:44.809  INFO 2025-06-13 08:56:44,809 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 08:56:44.809  INFO 2025-06-13 08:56:44,809 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 08:56:44.826  INFO 2025-06-13 08:56:44,826 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:47.448  INFO 2025-06-13 08:56:47,448 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:47.453  INFO 2025-06-13 08:56:47,453 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:47.484  INFO 2025-06-13 08:56:47,484 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:47.532  INFO 2025-06-13 08:56:47,532 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:47.535  INFO 2025-06-13 08:56:47,535 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:47.550  INFO 2025-06-13 08:56:47,550 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:47.743  INFO 2025-06-13 08:56:47,743 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:47.750  INFO 2025-06-13 08:56:47,750 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:56.505  INFO 2025-06-13 08:56:56,505 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:56.511  INFO 2025-06-13 08:56:56,511 --- [nio-8080-exec-7] r.c.services.DraftSubmissionService      : Submission 1 approved by owner with message: null
2025-06-13 08:56:56.538  INFO 2025-06-13 08:56:56,538 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:58.571  INFO 2025-06-13 08:56:58,571 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:58.572  INFO 2025-06-13 08:56:58,572 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:58.751  INFO 2025-06-13 08:56:58,751 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:58.752  INFO 2025-06-13 08:56:58,752 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:59.281  INFO 2025-06-13 08:56:59,281 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:56:59.281  INFO 2025-06-13 08:56:59,281 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:57:00.516  INFO 2025-06-13 08:57:00,516 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:57:00.562  INFO 2025-06-13 08:57:00,562 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:57:00.585  INFO 2025-06-13 08:57:00,585 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:57:00.649  INFO 2025-06-13 08:57:00,649 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:57:00.682  INFO 2025-06-13 08:57:00,682 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:57:00.705  INFO 2025-06-13 08:57:00,705 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 08:57:02.568  INFO 2025-06-13 08:57:02,568 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:18:16.664  INFO 2025-06-13 09:18:16,664 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:18:16.753  INFO 2025-06-13 09:18:16,753 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:18:16.755  INFO 2025-06-13 09:18:16,755 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:18:16.755  INFO 2025-06-13 09:18:16,755 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:18:16.755  INFO 2025-06-13 09:18:16,755 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:18:16.755  INFO 2025-06-13 09:18:16,755 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:18:16.755  INFO 2025-06-13 09:18:16,755 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 09:18:16.755  INFO 2025-06-13 09:18:16,755 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 09:18:16.756  INFO 2025-06-13 09:18:16,756 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 09:18:16.756  INFO 2025-06-13 09:18:16,756 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 09:18:16.760  INFO 2025-06-13 09:18:16,760 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 09:18:16.760  INFO 2025-06-13 09:18:16,760 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 09:18:16.761  INFO 2025-06-13 09:18:16,761 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:18:23.571  INFO 2025-06-13 09:18:23,571 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 09:18:23.584  INFO 2025-06-13 09:18:23,584 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 09:18:23.587  INFO 2025-06-13 09:18:23,587 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 09:18:26.245  INFO 2025-06-13 09:18:26,245 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 24788 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 09:18:26.247  INFO 2025-06-13 09:18:26,247 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 09:18:27.470  INFO 2025-06-13 09:18:27,470 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 09:18:27.626  INFO 2025-06-13 09:18:27,626 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 143 ms. Found 11 JPA repository interfaces.
2025-06-13 09:18:29.103  INFO 2025-06-13 09:18:29,103 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 09:18:29.136  INFO 2025-06-13 09:18:29,136 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 09:18:29.136  INFO 2025-06-13 09:18:29,136 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 09:18:29.278  INFO 2025-06-13 09:18:29,278 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 09:18:29.279  INFO 2025-06-13 09:18:29,279 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2983 ms
2025-06-13 09:18:29.461  INFO 2025-06-13 09:18:29,461 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 09:18:29.884  INFO 2025-06-13 09:18:29,884 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 09:18:29.888  INFO 2025-06-13 09:18:29,888 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 09:18:29.907  INFO 2025-06-13 09:18:29,907 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 09:18:30.083  INFO 2025-06-13 09:18:30,083 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 09:18:30.252  INFO 2025-06-13 09:18:30,252 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 09:18:30.351  INFO 2025-06-13 09:18:30,351 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 09:18:31.109  INFO 2025-06-13 09:18:31,109 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 09:18:33.681  INFO 2025-06-13 09:18:33,681 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 09:18:33.793  INFO 2025-06-13 09:18:33,793 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 09:18:34.324  INFO 2025-06-13 09:18:34,324 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 09:18:37.590  WARN 2025-06-13 09:18:37,590 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 09:18:37.637  INFO 2025-06-13 09:18:37,637 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 09:18:37.641  INFO 2025-06-13 09:18:37,641 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 09:18:37.643  WARN 2025-06-13 09:18:37,643 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 09:18:38.017  INFO 2025-06-13 09:18:38,017 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 09:18:38.055  INFO 2025-06-13 09:18:38,055 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 09:18:38.484  INFO 2025-06-13 09:18:38,484 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 09:18:38.490  INFO 2025-06-13 09:18:38,490 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 12.754 seconds (process running for 13.577)
2025-06-13 09:18:38.686  INFO 2025-06-13 09:18:38,686 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 09:18:38.686  INFO 2025-06-13 09:18:38,686 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 09:18:38.690  INFO 2025-06-13 09:18:38,690 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 09:18:38.935  INFO 2025-06-13 09:18:38,935 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 09:18:38.942  INFO 2025-06-13 09:18:38,942 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 09:18:38.989  INFO 2025-06-13 09:18:38,989 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 09:18:39.008  INFO 2025-06-13 09:18:39,008 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 09:18:39.074  INFO 2025-06-13 09:18:39,074 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 09:18:39.089  INFO 2025-06-13 09:18:39,089 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 09:18:39.089  INFO 2025-06-13 09:18:39,089 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 09:19:17.198  INFO 2025-06-13 09:19:17,198 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 09:19:17.199  INFO 2025-06-13 09:19:17,199 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 09:19:17.200  INFO 2025-06-13 09:19:17,200 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 09:19:17.288  INFO 2025-06-13 09:19:17,288 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 09:19:17.393  INFO 2025-06-13 09:19:17,393 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:19:17.464  INFO 2025-06-13 09:19:17,464 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 09:19:18.473  INFO 2025-06-13 09:19:18,473 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:19:18.474  INFO 2025-06-13 09:19:18,474 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:19:18.530  INFO 2025-06-13 09:19:18,530 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:19:18.539  INFO 2025-06-13 09:19:18,539 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:19:18.539  INFO 2025-06-13 09:19:18,539 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:19:18.540  INFO 2025-06-13 09:19:18,540 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:19:18.540  INFO 2025-06-13 09:19:18,540 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:19:18.540  INFO 2025-06-13 09:19:18,540 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 09:19:18.543  INFO 2025-06-13 09:19:18,543 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 09:19:18.543  INFO 2025-06-13 09:19:18,543 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 09:19:18.546  INFO 2025-06-13 09:19:18,546 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 09:19:18.574  INFO 2025-06-13 09:19:18,574 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:19:18.575  INFO 2025-06-13 09:19:18,575 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:19:21.753  INFO 2025-06-13 09:19:21,753 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:19:21.816  INFO 2025-06-13 09:19:21,816 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:19:21.866  INFO 2025-06-13 09:19:21,866 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:19:21.903  INFO 2025-06-13 09:19:21,903 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:19:21.940  INFO 2025-06-13 09:19:21,940 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:19:21.970  INFO 2025-06-13 09:19:21,970 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:19:23.224  INFO 2025-06-13 09:19:23,224 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:19:23.940  INFO 2025-06-13 09:19:23,940 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:19:30.310  INFO 2025-06-13 09:19:30,310 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:19:30.364  INFO 2025-06-13 09:19:30,364 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 09:19:30.364  INFO 2025-06-13 09:19:30,364 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 09:19:52.511  INFO 2025-06-13 09:19:52,511 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 09:19:52.620  INFO 2025-06-13 09:19:52,620 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:19:52.622  INFO 2025-06-13 09:19:52,622 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 09:19:53.936  INFO 2025-06-13 09:19:53,936 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:19:53.977  INFO 2025-06-13 09:19:53,977 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:19:53.986  INFO 2025-06-13 09:19:53,986 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:19:53.999  INFO 2025-06-13 09:19:53,999 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:19:54.000  INFO 2025-06-13 09:19:54,000 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:19:54.000  INFO 2025-06-13 09:19:54,000 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:19:54.000  INFO 2025-06-13 09:19:54,000 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:19:54.000  INFO 2025-06-13 09:19:54,000 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 09:19:54.004  INFO 2025-06-13 09:19:54,004 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 09:19:54.004  INFO 2025-06-13 09:19:54,004 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 09:19:54.005  INFO 2025-06-13 09:19:54,005 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 09:19:54.030  INFO 2025-06-13 09:19:54,030 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 09:19:54.030  INFO 2025-06-13 09:19:54,030 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 09:19:57.077  INFO 2025-06-13 09:19:57,077 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:19:57.079  INFO 2025-06-13 09:19:57,079 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:19:57.168  INFO 2025-06-13 09:19:57,168 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:19:57.221  INFO 2025-06-13 09:19:57,221 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:19:57.234  INFO 2025-06-13 09:19:57,234 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:19:57.252  INFO 2025-06-13 09:19:57,252 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:19:57.832  INFO 2025-06-13 09:19:57,832 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:19:57.859  INFO 2025-06-13 09:19:57,859 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:20:03.173  INFO 2025-06-13 09:20:03,173 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:20:03.200  INFO 2025-06-13 09:20:03,200 --- [nio-8080-exec-6] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 09:20:03.205  INFO 2025-06-13 09:20:03,205 --- [nio-8080-exec-6] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 09:20:03.205  INFO 2025-06-13 09:20:03,205 --- [nio-8080-exec-6] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 09:20:03.235  INFO 2025-06-13 09:20:03,235 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:20:12.926  INFO 2025-06-13 09:20:12,926 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 09:20:13.028  INFO 2025-06-13 09:20:13,028 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:13.030  INFO 2025-06-13 09:20:13,030 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 09:20:13.624  INFO 2025-06-13 09:20:13,624 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:13.957  INFO 2025-06-13 09:20:13,957 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:14.025  INFO 2025-06-13 09:20:14,025 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:14.030  INFO 2025-06-13 09:20:14,030 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:20:14.030  INFO 2025-06-13 09:20:14,030 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:20:14.030  INFO 2025-06-13 09:20:14,030 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:20:14.030  INFO 2025-06-13 09:20:14,030 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:20:14.030  INFO 2025-06-13 09:20:14,030 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 09:20:14.034  INFO 2025-06-13 09:20:14,034 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 09:20:14.034  INFO 2025-06-13 09:20:14,034 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 09:20:14.035  INFO 2025-06-13 09:20:14,035 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 09:20:14.045  INFO 2025-06-13 09:20:14,045 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:20:14.046  INFO 2025-06-13 09:20:14,046 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:20:16.617  INFO 2025-06-13 09:20:16,617 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:16.703  INFO 2025-06-13 09:20:16,703 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:16.779  INFO 2025-06-13 09:20:16,779 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:16.801  INFO 2025-06-13 09:20:16,801 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:16.827  INFO 2025-06-13 09:20:16,827 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:16.927  INFO 2025-06-13 09:20:16,927 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:17.704  INFO 2025-06-13 09:20:17,704 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:17.705  INFO 2025-06-13 09:20:17,705 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:17.750  INFO 2025-06-13 09:20:17,750 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:17.753  INFO 2025-06-13 09:20:17,753 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:17.817  INFO 2025-06-13 09:20:17,817 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:17.839  INFO 2025-06-13 09:20:17,839 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:17.936  INFO 2025-06-13 09:20:17,936 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:17.945  INFO 2025-06-13 09:20:17,945 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:19.362  INFO 2025-06-13 09:20:19,362 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:19.368  INFO 2025-06-13 09:20:19,368 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:19.452  INFO 2025-06-13 09:20:19,452 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:19.452  INFO 2025-06-13 09:20:19,452 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:19.523  INFO 2025-06-13 09:20:19,523 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:19.528  INFO 2025-06-13 09:20:19,528 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:19.538  INFO 2025-06-13 09:20:19,538 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:19.553  INFO 2025-06-13 09:20:19,553 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:19.629  INFO 2025-06-13 09:20:19,629 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:20.854  INFO 2025-06-13 09:20:20,854 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:22.400  INFO 2025-06-13 09:20:22,400 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:22.505  INFO 2025-06-13 09:20:22,505 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:22.510  INFO 2025-06-13 09:20:22,510 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 09:20:22.512  INFO 2025-06-13 09:20:22,512 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 09:20:22.512  INFO 2025-06-13 09:20:22,512 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: null
2025-06-13 09:20:22.512  INFO 2025-06-13 09:20:22,512 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Draft memorials JSON is empty, falling back to original tree
2025-06-13 09:20:22.516  INFO 2025-06-13 09:20:22,516 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Returning 8 original tree memorials
2025-06-13 09:20:22.555  INFO 2025-06-13 09:20:22,555 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:22.566  INFO 2025-06-13 09:20:22,566 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 09:20:22.567  INFO 2025-06-13 09:20:22,567 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 09:20:22.568  INFO 2025-06-13 09:20:22,568 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft relations JSON: null
2025-06-13 09:20:22.568  INFO 2025-06-13 09:20:22,568 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft relations JSON is empty, falling back to original tree
2025-06-13 09:20:22.573  INFO 2025-06-13 09:20:22,573 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 09:20:22.751  INFO 2025-06-13 09:20:22,751 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:22.755  INFO 2025-06-13 09:20:22,755 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:20:22.755  INFO 2025-06-13 09:20:22,755 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:20:22.755  INFO 2025-06-13 09:20:22,755 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:20:22.756  INFO 2025-06-13 09:20:22,756 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:20:22.756  INFO 2025-06-13 09:20:22,756 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 09:20:22.757  INFO 2025-06-13 09:20:22,757 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 09:20:22.757  INFO 2025-06-13 09:20:22,757 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 09:20:22.758  INFO 2025-06-13 09:20:22,758 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 09:20:22.770  INFO 2025-06-13 09:20:22,770 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:20:22.770  INFO 2025-06-13 09:20:22,770 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:20:24.497  INFO 2025-06-13 09:20:24,497 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:24.535  INFO 2025-06-13 09:20:24,535 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 09:20:24.574  INFO 2025-06-13 09:20:24,574 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:24.581  INFO 2025-06-13 09:20:24,581 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 09:20:24.582  INFO 2025-06-13 09:20:24,582 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 09:20:24.582  INFO 2025-06-13 09:20:24,582 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":2,"fio":"Иванова Анна Сергеевна","birthDate":"1990-07-30","deathDate":"2023-02-10","biography...
2025-06-13 09:20:24.585  INFO 2025-06-13 09:20:24,585 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 09:20:33.711  INFO 2025-06-13 09:20:33,711 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:33.739  INFO 2025-06-13 09:20:33,739 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 09:20:33.778  INFO 2025-06-13 09:20:33,778 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:33.782  INFO 2025-06-13 09:20:33,782 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 09:20:33.783  INFO 2025-06-13 09:20:33,783 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 09:20:33.783  INFO 2025-06-13 09:20:33,783 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 09:20:33.786  INFO 2025-06-13 09:20:33,786 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 09:20:35.657  INFO 2025-06-13 09:20:35,657 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:35.690  INFO 2025-06-13 09:20:35,690 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:35.773  INFO 2025-06-13 09:20:35,773 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:35.773  INFO 2025-06-13 09:20:35,773 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:35.849  INFO 2025-06-13 09:20:35,849 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:35.867  INFO 2025-06-13 09:20:35,867 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:39.393  INFO 2025-06-13 09:20:39,393 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:40.896  INFO 2025-06-13 09:20:40,896 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:40.901  INFO 2025-06-13 09:20:40,901 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 09:20:40.903  INFO 2025-06-13 09:20:40,903 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 09:20:40.903  INFO 2025-06-13 09:20:40,903 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":2,"fio":"Иванова Анна Сергеевна","birthDate":"1990-07-30","deathDate":"2023-02-10","biography...
2025-06-13 09:20:40.903  INFO 2025-06-13 09:20:40,903 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 09:20:40.968  INFO 2025-06-13 09:20:40,968 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:40.974  INFO 2025-06-13 09:20:40,974 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 09:20:40.975  INFO 2025-06-13 09:20:40,975 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 09:20:40.975  INFO 2025-06-13 09:20:40,975 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 09:20:40.976  INFO 2025-06-13 09:20:40,976 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 09:20:41.044  INFO 2025-06-13 09:20:41,044 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:44.850  INFO 2025-06-13 09:20:44,850 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:44.933  INFO 2025-06-13 09:20:44,933 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:44.960  INFO 2025-06-13 09:20:44,960 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:44.979  INFO 2025-06-13 09:20:44,979 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:45.020  INFO 2025-06-13 09:20:45,020 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:45.026  INFO 2025-06-13 09:20:45,026 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:51.513  INFO 2025-06-13 09:20:51,513 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:51.724  INFO 2025-06-13 09:20:51,724 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:51.732  INFO 2025-06-13 09:20:51,732 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Attempting to submit draft with ID: 1
2025-06-13 09:20:51.734  INFO 2025-06-13 09:20:51,734 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Found draft: ID=1, status=DRAFT, editorId=3, treeId=1
2025-06-13 09:20:51.734  INFO 2025-06-13 09:20:51,734 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft 1 has changes: true
2025-06-13 09:20:51.734  INFO 2025-06-13 09:20:51,734 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      :   - Name changed: false
2025-06-13 09:20:51.734  INFO 2025-06-13 09:20:51,734 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      :   - Description changed: false
2025-06-13 09:20:51.734  INFO 2025-06-13 09:20:51,734 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      :   - Public status changed: false
2025-06-13 09:20:51.734  INFO 2025-06-13 09:20:51,734 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      :   - Memorials changed: true
2025-06-13 09:20:51.734  INFO 2025-06-13 09:20:51,734 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      :   - Relations changed: true
2025-06-13 09:20:51.737  INFO 2025-06-13 09:20:51,737 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft 1 submitted for review (status remains DRAFT) with  changes
2025-06-13 09:20:51.737  INFO 2025-06-13 09:20:51,737 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Created submission record for draft 1 to notify owner
2025-06-13 09:20:53.472  INFO 2025-06-13 09:20:53,472 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:53.472  INFO 2025-06-13 09:20:53,472 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:53.635  INFO 2025-06-13 09:20:53,635 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:53.639  INFO 2025-06-13 09:20:53,639 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:54.639  INFO 2025-06-13 09:20:54,639 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:54.645  INFO 2025-06-13 09:20:54,645 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:54.824  INFO 2025-06-13 09:20:54,824 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:54.824  INFO 2025-06-13 09:20:54,824 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:56.817  INFO 2025-06-13 09:20:56,817 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:56.825 ERROR 2025-06-13 09:20:56,825 --- [nio-8080-exec-5] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/draft-submissions/1.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 09:20:57.773  INFO 2025-06-13 09:20:57,773 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:57.778  INFO 2025-06-13 09:20:57,778 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:57.782  INFO 2025-06-13 09:20:57,782 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:57.813  INFO 2025-06-13 09:20:57,813 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:20:57.841  INFO 2025-06-13 09:20:57,841 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:21:27.197  INFO 2025-06-13 09:21:27,197 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 09:21:27.200  INFO 2025-06-13 09:21:27,200 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 09:21:27.204  INFO 2025-06-13 09:21:27,204 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 09:23:56.419  INFO 2025-06-13 09:23:56,419 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 22768 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 09:23:56.422  INFO 2025-06-13 09:23:56,422 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 09:23:57.859  INFO 2025-06-13 09:23:57,859 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 09:23:57.997  INFO 2025-06-13 09:23:57,997 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 124 ms. Found 11 JPA repository interfaces.
2025-06-13 09:23:59.470  INFO 2025-06-13 09:23:59,470 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 09:23:59.498  INFO 2025-06-13 09:23:59,498 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 09:23:59.499  INFO 2025-06-13 09:23:59,499 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 09:23:59.608  INFO 2025-06-13 09:23:59,608 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 09:23:59.608  INFO 2025-06-13 09:23:59,608 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3101 ms
2025-06-13 09:23:59.662  INFO 2025-06-13 09:23:59,662 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 09:23:59.982  INFO 2025-06-13 09:23:59,982 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 09:23:59.984  INFO 2025-06-13 09:23:59,984 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 09:23:59.999  INFO 2025-06-13 09:23:59,999 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 09:24:00.207  INFO 2025-06-13 09:24:00,207 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 09:24:00.361  INFO 2025-06-13 09:24:00,361 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 09:24:00.498  INFO 2025-06-13 09:24:00,498 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 09:24:01.423  INFO 2025-06-13 09:24:01,423 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 09:24:06.462  INFO 2025-06-13 09:24:06,462 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 09:24:06.663  INFO 2025-06-13 09:24:06,663 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 09:24:07.693  INFO 2025-06-13 09:24:07,693 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 09:24:11.845  WARN 2025-06-13 09:24:11,845 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 09:24:11.914  INFO 2025-06-13 09:24:11,914 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 09:24:11.921  INFO 2025-06-13 09:24:11,921 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 09:24:11.923  WARN 2025-06-13 09:24:11,923 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 09:24:12.550  INFO 2025-06-13 09:24:12,550 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 09:24:12.649  INFO 2025-06-13 09:24:12,649 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 09:24:13.652  INFO 2025-06-13 09:24:13,652 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 09:24:13.667  INFO 2025-06-13 09:24:13,667 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 18.279 seconds (process running for 19.527)
2025-06-13 09:24:13.680  INFO 2025-06-13 09:24:13,680 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 09:24:13.856  INFO 2025-06-13 09:24:13,856 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 09:24:13.860  INFO 2025-06-13 09:24:13,860 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 09:24:14.073  INFO 2025-06-13 09:24:14,073 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 09:24:14.073  INFO 2025-06-13 09:24:14,073 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 09:24:14.077  INFO 2025-06-13 09:24:14,077 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2025-06-13 09:24:14.197  INFO 2025-06-13 09:24:14,197 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 09:24:14.211  INFO 2025-06-13 09:24:14,211 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 09:24:14.323  INFO 2025-06-13 09:24:14,323 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 09:24:14.355  INFO 2025-06-13 09:24:14,355 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 09:24:14.376  INFO 2025-06-13 09:24:14,376 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:14.377  INFO 2025-06-13 09:24:14,377 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:14.475  INFO 2025-06-13 09:24:14,475 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 09:24:14.504  INFO 2025-06-13 09:24:14,504 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 09:24:14.505  INFO 2025-06-13 09:24:14,505 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 09:24:14.649  INFO 2025-06-13 09:24:14,649 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:14.655  INFO 2025-06-13 09:24:14,655 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:14.735  INFO 2025-06-13 09:24:14,735 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:14.742  INFO 2025-06-13 09:24:14,742 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:16.174  INFO 2025-06-13 09:24:16,174 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:17.029  INFO 2025-06-13 09:24:17,029 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:20.433  INFO 2025-06-13 09:24:20,433 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:20.483  INFO 2025-06-13 09:24:20,483 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 09:24:20.483  INFO 2025-06-13 09:24:20,483 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 09:24:21.974  INFO 2025-06-13 09:24:21,974 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:21.981  INFO 2025-06-13 09:24:21,981 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:22.027  INFO 2025-06-13 09:24:22,027 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:22.027  INFO 2025-06-13 09:24:22,027 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:22.068  INFO 2025-06-13 09:24:22,068 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:22.068  INFO 2025-06-13 09:24:22,068 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:29.622  INFO 2025-06-13 09:24:29,622 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 09:24:29.702  INFO 2025-06-13 09:24:29,702 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:24:29.711  INFO 2025-06-13 09:24:29,711 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 09:24:30.169  INFO 2025-06-13 09:24:30,169 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:24:30.280  INFO 2025-06-13 09:24:30,280 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:24:30.374  INFO 2025-06-13 09:24:30,374 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:24:30.382  INFO 2025-06-13 09:24:30,382 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:24:30.382  INFO 2025-06-13 09:24:30,382 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:24:30.383  INFO 2025-06-13 09:24:30,383 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:24:30.383  INFO 2025-06-13 09:24:30,383 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:24:30.383  INFO 2025-06-13 09:24:30,383 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 09:24:30.386  INFO 2025-06-13 09:24:30,386 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 09:24:30.386  INFO 2025-06-13 09:24:30,386 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 09:24:30.389  INFO 2025-06-13 09:24:30,389 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 09:24:30.415  INFO 2025-06-13 09:24:30,415 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 09:24:30.416  INFO 2025-06-13 09:24:30,416 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 09:24:32.045  INFO 2025-06-13 09:24:32,045 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:24:32.049  INFO 2025-06-13 09:24:32,049 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:24:32.108  INFO 2025-06-13 09:24:32,108 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:24:32.111  INFO 2025-06-13 09:24:32,111 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:24:32.131  INFO 2025-06-13 09:24:32,131 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:24:32.148  INFO 2025-06-13 09:24:32,148 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:24:32.352  INFO 2025-06-13 09:24:32,352 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:24:32.352  INFO 2025-06-13 09:24:32,352 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:24:35.010  INFO 2025-06-13 09:24:35,010 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:24:35.030  INFO 2025-06-13 09:24:35,030 --- [nio-8080-exec-8] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 09:24:35.032  INFO 2025-06-13 09:24:35,032 --- [nio-8080-exec-8] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 09:24:35.032  INFO 2025-06-13 09:24:35,032 --- [nio-8080-exec-8] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 09:24:35.110  INFO 2025-06-13 09:24:35,110 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:24:43.153  INFO 2025-06-13 09:24:43,153 --- [io-8080-exec-10] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 09:24:43.247  INFO 2025-06-13 09:24:43,247 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:43.248  INFO 2025-06-13 09:24:43,248 --- [io-8080-exec-10] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 09:24:43.747  INFO 2025-06-13 09:24:43,747 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:43.858  INFO 2025-06-13 09:24:43,858 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:43.861  INFO 2025-06-13 09:24:43,861 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:43.862  INFO 2025-06-13 09:24:43,862 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:24:43.862  INFO 2025-06-13 09:24:43,862 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:24:43.863  INFO 2025-06-13 09:24:43,863 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:24:43.863  INFO 2025-06-13 09:24:43,863 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:24:43.863  INFO 2025-06-13 09:24:43,863 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 09:24:43.865  INFO 2025-06-13 09:24:43,865 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 09:24:43.865  INFO 2025-06-13 09:24:43,865 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 09:24:43.866  INFO 2025-06-13 09:24:43,866 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 09:24:43.873  INFO 2025-06-13 09:24:43,873 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:24:43.873  INFO 2025-06-13 09:24:43,873 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:24:47.802  INFO 2025-06-13 09:24:47,802 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:47.805  INFO 2025-06-13 09:24:47,805 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:47.846  INFO 2025-06-13 09:24:47,846 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:47.846  INFO 2025-06-13 09:24:47,846 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:47.856  INFO 2025-06-13 09:24:47,856 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:47.885  INFO 2025-06-13 09:24:47,885 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:48.016  INFO 2025-06-13 09:24:48,016 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:48.020  INFO 2025-06-13 09:24:48,020 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:49.235  INFO 2025-06-13 09:24:49,235 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:49.281  INFO 2025-06-13 09:24:49,281 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:49.340  INFO 2025-06-13 09:24:49,340 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:49.384  INFO 2025-06-13 09:24:49,384 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:49.471  INFO 2025-06-13 09:24:49,471 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:49.533  INFO 2025-06-13 09:24:49,533 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:51.627  INFO 2025-06-13 09:24:51,627 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:53.067  INFO 2025-06-13 09:24:53,067 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:53.137  INFO 2025-06-13 09:24:53,137 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:53.143  INFO 2025-06-13 09:24:53,143 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 09:24:53.145  INFO 2025-06-13 09:24:53,145 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 09:24:53.145  INFO 2025-06-13 09:24:53,145 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: null
2025-06-13 09:24:53.145  INFO 2025-06-13 09:24:53,145 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft memorials JSON is empty, falling back to original tree
2025-06-13 09:24:53.151  INFO 2025-06-13 09:24:53,151 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Returning 8 original tree memorials
2025-06-13 09:24:53.201  INFO 2025-06-13 09:24:53,201 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:53.206  INFO 2025-06-13 09:24:53,206 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 09:24:53.208  INFO 2025-06-13 09:24:53,208 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 09:24:53.209  INFO 2025-06-13 09:24:53,209 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft relations JSON: null
2025-06-13 09:24:53.209  INFO 2025-06-13 09:24:53,209 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft relations JSON is empty, falling back to original tree
2025-06-13 09:24:53.215  INFO 2025-06-13 09:24:53,215 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 09:24:53.395  INFO 2025-06-13 09:24:53,395 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:53.400  INFO 2025-06-13 09:24:53,400 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:24:53.400  INFO 2025-06-13 09:24:53,400 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:24:53.401  INFO 2025-06-13 09:24:53,401 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:24:53.401  INFO 2025-06-13 09:24:53,401 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:24:53.401  INFO 2025-06-13 09:24:53,401 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 09:24:53.402  INFO 2025-06-13 09:24:53,402 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 09:24:53.403  INFO 2025-06-13 09:24:53,403 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 09:24:53.403  INFO 2025-06-13 09:24:53,403 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 09:24:53.411  INFO 2025-06-13 09:24:53,411 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:24:53.411  INFO 2025-06-13 09:24:53,411 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:24:55.238  INFO 2025-06-13 09:24:55,238 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:55.272  INFO 2025-06-13 09:24:55,272 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 09:24:55.302  INFO 2025-06-13 09:24:55,302 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:24:55.306  INFO 2025-06-13 09:24:55,306 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 09:24:55.307  INFO 2025-06-13 09:24:55,307 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 09:24:55.307  INFO 2025-06-13 09:24:55,307 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":3,"fio":"Сергеев Андрей Иванович","birthDate":"1950-10-10","deathDate":"1980-05-15","biograph...
2025-06-13 09:24:55.312  INFO 2025-06-13 09:24:55,312 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 09:25:04.051  INFO 2025-06-13 09:25:04,051 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:04.077  INFO 2025-06-13 09:25:04,077 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 09:25:04.113  INFO 2025-06-13 09:25:04,113 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:04.119  INFO 2025-06-13 09:25:04,119 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 09:25:04.120  INFO 2025-06-13 09:25:04,120 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 09:25:04.120  INFO 2025-06-13 09:25:04,120 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 09:25:04.123  INFO 2025-06-13 09:25:04,123 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 09:25:05.213  INFO 2025-06-13 09:25:05,213 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:05.216  INFO 2025-06-13 09:25:05,216 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:05.368  INFO 2025-06-13 09:25:05,368 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:05.371  INFO 2025-06-13 09:25:05,371 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:15.990  INFO 2025-06-13 09:25:15,990 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:16.130  INFO 2025-06-13 09:25:16,130 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:16.134  INFO 2025-06-13 09:25:16,134 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 09:25:16.135  INFO 2025-06-13 09:25:16,135 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 09:25:16.135  INFO 2025-06-13 09:25:16,135 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":3,"fio":"Сергеев Андрей Иванович","birthDate":"1950-10-10","deathDate":"1980-05-15","biograph...
2025-06-13 09:25:16.136  INFO 2025-06-13 09:25:16,136 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 09:25:16.163  INFO 2025-06-13 09:25:16,163 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:16.167  INFO 2025-06-13 09:25:16,167 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 09:25:16.168  INFO 2025-06-13 09:25:16,168 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 09:25:16.169  INFO 2025-06-13 09:25:16,169 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 09:25:16.169  INFO 2025-06-13 09:25:16,169 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 09:25:16.201  INFO 2025-06-13 09:25:16,201 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:16.205  INFO 2025-06-13 09:25:16,205 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:25:16.205  INFO 2025-06-13 09:25:16,205 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:25:16.205  INFO 2025-06-13 09:25:16,205 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:25:16.205  INFO 2025-06-13 09:25:16,205 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:25:16.205  INFO 2025-06-13 09:25:16,205 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 09:25:16.207  INFO 2025-06-13 09:25:16,207 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 09:25:16.207  INFO 2025-06-13 09:25:16,207 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 09:25:16.208  INFO 2025-06-13 09:25:16,208 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 09:25:16.218  INFO 2025-06-13 09:25:16,218 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:25:16.218  INFO 2025-06-13 09:25:16,218 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:25:18.479  INFO 2025-06-13 09:25:18,479 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:18.484  INFO 2025-06-13 09:25:18,484 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:18.509  INFO 2025-06-13 09:25:18,509 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:18.557  INFO 2025-06-13 09:25:18,557 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:18.557  INFO 2025-06-13 09:25:18,557 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:18.557  INFO 2025-06-13 09:25:18,557 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:18.635  INFO 2025-06-13 09:25:18,635 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:18.643  INFO 2025-06-13 09:25:18,643 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:18.644  INFO 2025-06-13 09:25:18,644 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:23.568  INFO 2025-06-13 09:25:23,568 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:23.723  INFO 2025-06-13 09:25:23,723 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:23.728  INFO 2025-06-13 09:25:23,728 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Attempting to submit draft with ID: 1
2025-06-13 09:25:23.731  INFO 2025-06-13 09:25:23,731 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Found draft: ID=1, status=DRAFT, editorId=3, treeId=1
2025-06-13 09:25:23.731  INFO 2025-06-13 09:25:23,731 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft 1 has changes: true
2025-06-13 09:25:23.731  INFO 2025-06-13 09:25:23,731 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      :   - Name changed: false
2025-06-13 09:25:23.731  INFO 2025-06-13 09:25:23,731 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      :   - Description changed: false
2025-06-13 09:25:23.731  INFO 2025-06-13 09:25:23,731 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      :   - Public status changed: false
2025-06-13 09:25:23.731  INFO 2025-06-13 09:25:23,731 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      :   - Memorials changed: true
2025-06-13 09:25:23.731  INFO 2025-06-13 09:25:23,731 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      :   - Relations changed: true
2025-06-13 09:25:23.734  INFO 2025-06-13 09:25:23,734 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft 1 submitted for review (status remains DRAFT) with  changes
2025-06-13 09:25:23.734  INFO 2025-06-13 09:25:23,734 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Created submission record for draft 1 to notify owner
2025-06-13 09:25:25.051  INFO 2025-06-13 09:25:25,051 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:25.051  INFO 2025-06-13 09:25:25,051 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:25.205  INFO 2025-06-13 09:25:25,205 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:25.206  INFO 2025-06-13 09:25:25,206 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:26.523  INFO 2025-06-13 09:25:26,523 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:26.523  INFO 2025-06-13 09:25:26,523 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:26.710  INFO 2025-06-13 09:25:26,710 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:26.710  INFO 2025-06-13 09:25:26,710 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:25:27.561  INFO 2025-06-13 09:25:27,561 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:37.047  INFO 2025-06-13 09:29:37,047 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:37.147  INFO 2025-06-13 09:29:37,147 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:37.150  INFO 2025-06-13 09:29:37,150 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:29:37.150  INFO 2025-06-13 09:29:37,150 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:29:37.150  INFO 2025-06-13 09:29:37,150 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:29:37.150  INFO 2025-06-13 09:29:37,150 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:29:37.150  INFO 2025-06-13 09:29:37,150 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 09:29:37.151  INFO 2025-06-13 09:29:37,151 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 09:29:37.151  INFO 2025-06-13 09:29:37,151 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 09:29:37.152  INFO 2025-06-13 09:29:37,152 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 09:29:37.153  INFO 2025-06-13 09:29:37,153 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:37.156  INFO 2025-06-13 09:29:37,156 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:29:37.156  INFO 2025-06-13 09:29:37,156 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:29:40.981  INFO 2025-06-13 09:29:40,981 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:40.985  INFO 2025-06-13 09:29:40,985 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:41.066  INFO 2025-06-13 09:29:41,066 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:41.077  INFO 2025-06-13 09:29:41,077 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:41.121  INFO 2025-06-13 09:29:41,121 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:41.136  INFO 2025-06-13 09:29:41,136 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:41.278  INFO 2025-06-13 09:29:41,278 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:41.278  INFO 2025-06-13 09:29:41,278 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:42.076  INFO 2025-06-13 09:29:42,076 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:42.077  INFO 2025-06-13 09:29:42,077 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:42.340  INFO 2025-06-13 09:29:42,340 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:42.340  INFO 2025-06-13 09:29:42,340 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:29:43.185  INFO 2025-06-13 09:29:43,185 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:28.959  INFO 2025-06-13 09:32:28,959 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:29.071  INFO 2025-06-13 09:32:29,071 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:29.074  INFO 2025-06-13 09:32:29,074 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:32:29.074  INFO 2025-06-13 09:32:29,074 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:32:29.074  INFO 2025-06-13 09:32:29,074 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:32:29.074  INFO 2025-06-13 09:32:29,074 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:32:29.074  INFO 2025-06-13 09:32:29,074 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 09:32:29.075  INFO 2025-06-13 09:32:29,075 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 09:32:29.075  INFO 2025-06-13 09:32:29,075 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 09:32:29.076  INFO 2025-06-13 09:32:29,076 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 09:32:29.080  INFO 2025-06-13 09:32:29,080 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:29.081  INFO 2025-06-13 09:32:29,081 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:32:29.081  INFO 2025-06-13 09:32:29,081 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:32:32.123  INFO 2025-06-13 09:32:32,123 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:32.123  INFO 2025-06-13 09:32:32,123 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:32.217  INFO 2025-06-13 09:32:32,217 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:32.230  INFO 2025-06-13 09:32:32,230 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:32.273  INFO 2025-06-13 09:32:32,273 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:32.279  INFO 2025-06-13 09:32:32,279 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:32.445  INFO 2025-06-13 09:32:32,445 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:32.456  INFO 2025-06-13 09:32:32,456 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:33.425  INFO 2025-06-13 09:32:33,425 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:33.427  INFO 2025-06-13 09:32:33,427 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:33.624  INFO 2025-06-13 09:32:33,624 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:33.645  INFO 2025-06-13 09:32:33,645 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:34.664  INFO 2025-06-13 09:32:34,664 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:35.459  INFO 2025-06-13 09:32:35,459 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:32:40.451  INFO 2025-06-13 09:32:40,451 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:03.400  INFO 2025-06-13 09:37:03,400 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:03.536  INFO 2025-06-13 09:37:03,536 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:03.539  INFO 2025-06-13 09:37:03,539 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:37:03.540  INFO 2025-06-13 09:37:03,540 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:37:03.540  INFO 2025-06-13 09:37:03,540 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:37:03.540  INFO 2025-06-13 09:37:03,540 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:37:03.540  INFO 2025-06-13 09:37:03,540 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 09:37:03.541  INFO 2025-06-13 09:37:03,541 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 09:37:03.541  INFO 2025-06-13 09:37:03,541 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 09:37:03.542  INFO 2025-06-13 09:37:03,542 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 09:37:03.547  INFO 2025-06-13 09:37:03,547 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:37:03.547  INFO 2025-06-13 09:37:03,547 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:37:03.548  INFO 2025-06-13 09:37:03,548 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:08.475  INFO 2025-06-13 09:37:08,475 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:08.477  INFO 2025-06-13 09:37:08,477 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:08.552  INFO 2025-06-13 09:37:08,552 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:08.567  INFO 2025-06-13 09:37:08,567 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:08.588  INFO 2025-06-13 09:37:08,588 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:08.613  INFO 2025-06-13 09:37:08,613 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:08.792  INFO 2025-06-13 09:37:08,792 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:08.794  INFO 2025-06-13 09:37:08,794 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:10.427  INFO 2025-06-13 09:37:10,427 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:10.441  INFO 2025-06-13 09:37:10,441 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:10.683  INFO 2025-06-13 09:37:10,683 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:10.693  INFO 2025-06-13 09:37:10,693 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:12.236  INFO 2025-06-13 09:37:12,236 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:12.759  INFO 2025-06-13 09:37:12,759 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:37:15.949  INFO 2025-06-13 09:37:15,949 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:44.275  INFO 2025-06-13 09:40:44,275 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:44.393  INFO 2025-06-13 09:40:44,393 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:44.400  INFO 2025-06-13 09:40:44,400 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:44.404  INFO 2025-06-13 09:40:44,404 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:40:44.404  INFO 2025-06-13 09:40:44,404 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:40:44.404  INFO 2025-06-13 09:40:44,404 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:40:44.404  INFO 2025-06-13 09:40:44,404 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:40:44.404  INFO 2025-06-13 09:40:44,404 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 09:40:44.405  INFO 2025-06-13 09:40:44,405 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 09:40:44.405  INFO 2025-06-13 09:40:44,405 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 09:40:44.406  INFO 2025-06-13 09:40:44,406 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 09:40:44.412  INFO 2025-06-13 09:40:44,412 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:40:44.412  INFO 2025-06-13 09:40:44,412 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:40:47.119  INFO 2025-06-13 09:40:47,119 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:47.127  INFO 2025-06-13 09:40:47,127 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:47.223  INFO 2025-06-13 09:40:47,223 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:47.239  INFO 2025-06-13 09:40:47,239 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:47.268  INFO 2025-06-13 09:40:47,268 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:47.277  INFO 2025-06-13 09:40:47,277 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:47.467  INFO 2025-06-13 09:40:47,467 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:47.475  INFO 2025-06-13 09:40:47,475 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:48.464  INFO 2025-06-13 09:40:48,464 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:48.470  INFO 2025-06-13 09:40:48,470 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:48.635  INFO 2025-06-13 09:40:48,635 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:48.635  INFO 2025-06-13 09:40:48,635 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:49.831  INFO 2025-06-13 09:40:49,831 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:50.708  INFO 2025-06-13 09:40:50,708 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:40:57.202  INFO 2025-06-13 09:40:57,202 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:40.200  INFO 2025-06-13 09:41:40,200 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:40.200  INFO 2025-06-13 09:41:40,200 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:40.203  INFO 2025-06-13 09:41:40,203 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:40.239  INFO 2025-06-13 09:41:40,239 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:40.251  INFO 2025-06-13 09:41:40,251 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:48.615  INFO 2025-06-13 09:41:48,615 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:48.691  INFO 2025-06-13 09:41:48,691 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:48.735  INFO 2025-06-13 09:41:48,735 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:48.772  INFO 2025-06-13 09:41:48,772 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:48.844  INFO 2025-06-13 09:41:48,844 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:48.880  INFO 2025-06-13 09:41:48,880 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:51.965  INFO 2025-06-13 09:41:51,965 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:53.347  INFO 2025-06-13 09:41:53,347 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:56.221  INFO 2025-06-13 09:41:56,221 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:56.247  INFO 2025-06-13 09:41:56,247 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:56.286  INFO 2025-06-13 09:41:56,286 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:56.315  INFO 2025-06-13 09:41:56,315 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:56.340  INFO 2025-06-13 09:41:56,340 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:56.374  INFO 2025-06-13 09:41:56,374 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:41:57.674  INFO 2025-06-13 09:41:57,674 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:00.201  INFO 2025-06-13 09:42:00,201 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:06.483  INFO 2025-06-13 09:42:06,483 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:06.485  INFO 2025-06-13 09:42:06,485 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:06.641  INFO 2025-06-13 09:42:06,641 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:06.650  INFO 2025-06-13 09:42:06,650 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:08.066  INFO 2025-06-13 09:42:08,066 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:08.069  INFO 2025-06-13 09:42:08,069 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:08.116  INFO 2025-06-13 09:42:08,116 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:08.117  INFO 2025-06-13 09:42:08,117 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:08.157  INFO 2025-06-13 09:42:08,157 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:08.181  INFO 2025-06-13 09:42:08,181 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:08.251  INFO 2025-06-13 09:42:08,251 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:08.358  INFO 2025-06-13 09:42:08,358 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:08.394  INFO 2025-06-13 09:42:08,394 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:38.222  INFO 2025-06-13 09:42:38,222 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:39.275  INFO 2025-06-13 09:42:39,275 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:40.791  INFO 2025-06-13 09:42:40,791 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:40.806  INFO 2025-06-13 09:42:40,806 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:40.866  INFO 2025-06-13 09:42:40,866 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:40.866  INFO 2025-06-13 09:42:40,866 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:40.920  INFO 2025-06-13 09:42:40,920 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:40.920  INFO 2025-06-13 09:42:40,920 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:42:44.431  INFO 2025-06-13 09:42:44,431 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:31.980  INFO 2025-06-13 09:47:31,980 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:32.081  INFO 2025-06-13 09:47:32,081 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:32.083  INFO 2025-06-13 09:47:32,083 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:47:32.083  INFO 2025-06-13 09:47:32,083 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:47:32.083  INFO 2025-06-13 09:47:32,083 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:47:32.084  INFO 2025-06-13 09:47:32,084 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:47:32.084  INFO 2025-06-13 09:47:32,084 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 09:47:32.084  INFO 2025-06-13 09:47:32,084 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 09:47:32.084  INFO 2025-06-13 09:47:32,084 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 09:47:32.085  INFO 2025-06-13 09:47:32,085 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 09:47:32.089  INFO 2025-06-13 09:47:32,089 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:47:32.089  INFO 2025-06-13 09:47:32,089 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 09:47:32.090  INFO 2025-06-13 09:47:32,090 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:35.562  INFO 2025-06-13 09:47:35,562 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:35.652  INFO 2025-06-13 09:47:35,652 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:35.706  INFO 2025-06-13 09:47:35,706 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:35.726  INFO 2025-06-13 09:47:35,726 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:35.804  INFO 2025-06-13 09:47:35,804 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:35.859  INFO 2025-06-13 09:47:35,859 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:37.120  INFO 2025-06-13 09:47:37,120 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:38.587  INFO 2025-06-13 09:47:38,587 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:38.590  INFO 2025-06-13 09:47:38,590 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 09:47:38.591  INFO 2025-06-13 09:47:38,591 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 09:47:38.591  INFO 2025-06-13 09:47:38,591 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":3,"fio":"Сергеев Андрей Иванович","birthDate":"1950-10-10","deathDate":"1980-05-15","biograph...
2025-06-13 09:47:38.591  INFO 2025-06-13 09:47:38,591 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 09:47:39.547  INFO 2025-06-13 09:47:39,547 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:39.549  INFO 2025-06-13 09:47:39,549 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 09:47:39.550  INFO 2025-06-13 09:47:39,550 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 09:47:39.550  INFO 2025-06-13 09:47:39,550 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 09:47:39.550  INFO 2025-06-13 09:47:39,550 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 09:47:39.688  INFO 2025-06-13 09:47:39,688 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:43.931  INFO 2025-06-13 09:47:43,931 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:43.949  INFO 2025-06-13 09:47:43,949 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:44.009  INFO 2025-06-13 09:47:44,009 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:44.009  INFO 2025-06-13 09:47:44,009 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:44.076  INFO 2025-06-13 09:47:44,076 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:47:44.076  INFO 2025-06-13 09:47:44,076 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 09:48:24.108  INFO 2025-06-13 09:48:24,108 --- [io-8080-exec-10] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 09:48:24.188  INFO 2025-06-13 09:48:24,188 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:48:24.189  INFO 2025-06-13 09:48:24,189 --- [io-8080-exec-10] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 09:48:24.586  INFO 2025-06-13 09:48:24,586 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:48:24.678  INFO 2025-06-13 09:48:24,678 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:48:24.681  INFO 2025-06-13 09:48:24,681 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 09:48:24.681  INFO 2025-06-13 09:48:24,681 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 09:48:24.681  INFO 2025-06-13 09:48:24,681 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 09:48:24.681  INFO 2025-06-13 09:48:24,681 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 09:48:24.681  INFO 2025-06-13 09:48:24,681 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 09:48:24.682  INFO 2025-06-13 09:48:24,682 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 09:48:24.682  INFO 2025-06-13 09:48:24,682 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 09:48:24.682  INFO 2025-06-13 09:48:24,682 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 09:48:24.686  INFO 2025-06-13 09:48:24,686 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 09:48:24.686  INFO 2025-06-13 09:48:24,686 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 09:48:24.692  INFO 2025-06-13 09:48:24,692 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:48:26.375  INFO 2025-06-13 09:48:26,375 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:48:26.389  INFO 2025-06-13 09:48:26,389 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:48:26.455  INFO 2025-06-13 09:48:26,455 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:48:26.493  INFO 2025-06-13 09:48:26,493 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:48:26.510  INFO 2025-06-13 09:48:26,510 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:48:26.539  INFO 2025-06-13 09:48:26,539 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:48:26.781  INFO 2025-06-13 09:48:26,781 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:48:26.834  INFO 2025-06-13 09:48:26,834 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:48:29.189  INFO 2025-06-13 09:48:29,189 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:48:29.536  INFO 2025-06-13 09:48:29,536 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 09:48:32.821  INFO 2025-06-13 09:48:32,821 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:01:21.414  INFO 2025-06-13 10:01:21,414 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:01:21.540  INFO 2025-06-13 10:01:21,540 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:01:21.543  INFO 2025-06-13 10:01:21,543 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 10:01:21.543  INFO 2025-06-13 10:01:21,543 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 10:01:21.544  INFO 2025-06-13 10:01:21,544 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 10:01:21.544  INFO 2025-06-13 10:01:21,544 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 10:01:21.544  INFO 2025-06-13 10:01:21,544 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 10:01:21.545  INFO 2025-06-13 10:01:21,545 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 10:01:21.545  INFO 2025-06-13 10:01:21,545 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 10:01:21.546  INFO 2025-06-13 10:01:21,546 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 10:01:21.552  INFO 2025-06-13 10:01:21,552 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:01:21.552  INFO 2025-06-13 10:01:21,552 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:01:21.554  INFO 2025-06-13 10:01:21,554 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:01:37.083  INFO 2025-06-13 10:01:37,083 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:01:37.086  INFO 2025-06-13 10:01:37,086 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:01:37.177  INFO 2025-06-13 10:01:37,177 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:01:37.191  INFO 2025-06-13 10:01:37,191 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:01:37.255  INFO 2025-06-13 10:01:37,255 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:01:37.304  INFO 2025-06-13 10:01:37,304 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:01:37.562  INFO 2025-06-13 10:01:37,562 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:01:37.567  INFO 2025-06-13 10:01:37,567 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:01:39.668  INFO 2025-06-13 10:01:39,668 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:01:40.253  INFO 2025-06-13 10:01:40,253 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:04:46.304  INFO 2025-06-13 10:04:46,304 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:04:46.417  INFO 2025-06-13 10:04:46,417 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:04:46.419  INFO 2025-06-13 10:04:46,419 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 10:04:46.420  INFO 2025-06-13 10:04:46,420 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 10:04:46.420  INFO 2025-06-13 10:04:46,420 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 10:04:46.420  INFO 2025-06-13 10:04:46,420 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 10:04:46.420  INFO 2025-06-13 10:04:46,420 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 10:04:46.420  INFO 2025-06-13 10:04:46,420 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 10:04:46.421  INFO 2025-06-13 10:04:46,421 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 10:04:46.421  INFO 2025-06-13 10:04:46,421 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 10:04:46.425  INFO 2025-06-13 10:04:46,425 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:04:46.425  INFO 2025-06-13 10:04:46,425 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:04:46.427  INFO 2025-06-13 10:04:46,427 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:04:58.156  INFO 2025-06-13 10:04:58,156 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:04:58.158  INFO 2025-06-13 10:04:58,158 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:04:58.254  INFO 2025-06-13 10:04:58,254 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:04:58.268  INFO 2025-06-13 10:04:58,268 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:04:58.322  INFO 2025-06-13 10:04:58,322 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:04:58.328  INFO 2025-06-13 10:04:58,328 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:04:58.644  INFO 2025-06-13 10:04:58,644 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:04:58.657  INFO 2025-06-13 10:04:58,657 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:05:00.126  INFO 2025-06-13 10:05:00,126 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:05:00.704  INFO 2025-06-13 10:05:00,704 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:07:40.753  INFO 2025-06-13 10:07:40,753 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:07:40.879  INFO 2025-06-13 10:07:40,879 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:07:40.883  INFO 2025-06-13 10:07:40,883 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 10:07:40.883  INFO 2025-06-13 10:07:40,883 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 10:07:40.883  INFO 2025-06-13 10:07:40,883 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 10:07:40.883  INFO 2025-06-13 10:07:40,883 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 10:07:40.883  INFO 2025-06-13 10:07:40,883 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 10:07:40.884  INFO 2025-06-13 10:07:40,884 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 10:07:40.884  INFO 2025-06-13 10:07:40,884 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 10:07:40.885  INFO 2025-06-13 10:07:40,885 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 10:07:40.888  INFO 2025-06-13 10:07:40,888 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:07:40.889  INFO 2025-06-13 10:07:40,889 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:07:40.889  INFO 2025-06-13 10:07:40,889 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:07:43.494  INFO 2025-06-13 10:07:43,494 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:07:43.495  INFO 2025-06-13 10:07:43,495 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:07:43.710  INFO 2025-06-13 10:07:43,710 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:07:43.749  INFO 2025-06-13 10:07:43,749 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:07:43.826  INFO 2025-06-13 10:07:43,826 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:07:43.905  INFO 2025-06-13 10:07:43,905 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:07:44.385  INFO 2025-06-13 10:07:44,385 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:07:44.455  INFO 2025-06-13 10:07:44,455 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:07:46.493  INFO 2025-06-13 10:07:46,493 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:07:49.904  INFO 2025-06-13 10:07:49,904 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:07:59.144  INFO 2025-06-13 10:07:59,144 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:10.206  INFO 2025-06-13 10:08:10,206 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:10.211  INFO 2025-06-13 10:08:10,211 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:10.224  INFO 2025-06-13 10:08:10,224 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:10.226  INFO 2025-06-13 10:08:10,226 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:10.289  INFO 2025-06-13 10:08:10,289 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:14.591  INFO 2025-06-13 10:08:14,591 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:14.675  INFO 2025-06-13 10:08:14,675 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:14.746  INFO 2025-06-13 10:08:14,746 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:14.778  INFO 2025-06-13 10:08:14,778 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:14.878  INFO 2025-06-13 10:08:14,878 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:14.944  INFO 2025-06-13 10:08:14,944 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:15.552  INFO 2025-06-13 10:08:15,552 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:16.817  INFO 2025-06-13 10:08:16,817 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:20.916  INFO 2025-06-13 10:08:20,916 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:20.932  INFO 2025-06-13 10:08:20,932 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:20.974  INFO 2025-06-13 10:08:20,974 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:20.977  INFO 2025-06-13 10:08:20,977 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:21.027  INFO 2025-06-13 10:08:21,027 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:21.054  INFO 2025-06-13 10:08:21,054 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:21.817  INFO 2025-06-13 10:08:21,817 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:23.229  INFO 2025-06-13 10:08:23,229 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:24.635  INFO 2025-06-13 10:08:24,635 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:26.106  INFO 2025-06-13 10:08:26,106 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:26.121  INFO 2025-06-13 10:08:26,121 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:26.265  INFO 2025-06-13 10:08:26,265 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:26.268  INFO 2025-06-13 10:08:26,268 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:26.347  INFO 2025-06-13 10:08:26,347 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:26.351  INFO 2025-06-13 10:08:26,351 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:32.661  INFO 2025-06-13 10:08:32,661 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:32.666  INFO 2025-06-13 10:08:32,666 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:32.825  INFO 2025-06-13 10:08:32,825 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:32.827  INFO 2025-06-13 10:08:32,827 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:34.239  INFO 2025-06-13 10:08:34,239 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:08:34.736  INFO 2025-06-13 10:08:34,736 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:10:56.303  INFO 2025-06-13 10:10:56,303 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:10:56.498  INFO 2025-06-13 10:10:56,498 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:10:56.501  INFO 2025-06-13 10:10:56,501 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 10:10:56.501  INFO 2025-06-13 10:10:56,501 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 10:10:56.501  INFO 2025-06-13 10:10:56,501 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 10:10:56.502  INFO 2025-06-13 10:10:56,502 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 10:10:56.502  INFO 2025-06-13 10:10:56,502 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 10:10:56.502  INFO 2025-06-13 10:10:56,502 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 10:10:56.503  INFO 2025-06-13 10:10:56,503 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 10:10:56.503  INFO 2025-06-13 10:10:56,503 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 10:10:56.508  INFO 2025-06-13 10:10:56,508 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:10:56.508  INFO 2025-06-13 10:10:56,508 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:10:56.539  INFO 2025-06-13 10:10:56,539 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:10:58.931  INFO 2025-06-13 10:10:58,931 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:10:58.950  INFO 2025-06-13 10:10:58,950 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:10:59.036  INFO 2025-06-13 10:10:59,036 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:10:59.080  INFO 2025-06-13 10:10:59,080 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:10:59.101  INFO 2025-06-13 10:10:59,101 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:10:59.251  INFO 2025-06-13 10:10:59,251 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:10:59.587  INFO 2025-06-13 10:10:59,587 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:10:59.591  INFO 2025-06-13 10:10:59,591 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:11:01.452  INFO 2025-06-13 10:11:01,452 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:11:02.056  INFO 2025-06-13 10:11:02,056 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:10.671  INFO 2025-06-13 10:17:10,671 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:10.933  INFO 2025-06-13 10:17:10,933 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:11.036  INFO 2025-06-13 10:17:11,036 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:11.039  INFO 2025-06-13 10:17:11,039 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 10:17:11.039  INFO 2025-06-13 10:17:11,039 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 10:17:11.039  INFO 2025-06-13 10:17:11,039 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 10:17:11.039  INFO 2025-06-13 10:17:11,039 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 10:17:11.039  INFO 2025-06-13 10:17:11,039 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 10:17:11.040  INFO 2025-06-13 10:17:11,040 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 10:17:11.040  INFO 2025-06-13 10:17:11,040 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 10:17:11.041  INFO 2025-06-13 10:17:11,041 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 10:17:11.046  INFO 2025-06-13 10:17:11,046 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:17:11.046  INFO 2025-06-13 10:17:11,046 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:17:14.133  INFO 2025-06-13 10:17:14,133 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:14.133  INFO 2025-06-13 10:17:14,133 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:14.216  INFO 2025-06-13 10:17:14,216 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:14.234  INFO 2025-06-13 10:17:14,234 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:14.262  INFO 2025-06-13 10:17:14,262 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:14.342  INFO 2025-06-13 10:17:14,342 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:14.630  INFO 2025-06-13 10:17:14,630 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:14.632  INFO 2025-06-13 10:17:14,632 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:16.197  INFO 2025-06-13 10:17:16,197 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:16.847  INFO 2025-06-13 10:17:16,847 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:45.011  INFO 2025-06-13 10:17:45,011 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:51.691  INFO 2025-06-13 10:17:51,691 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:51.697  INFO 2025-06-13 10:17:51,697 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:51.700  INFO 2025-06-13 10:17:51,700 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:51.710  INFO 2025-06-13 10:17:51,710 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:51.907  INFO 2025-06-13 10:17:51,907 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:53.253  INFO 2025-06-13 10:17:53,253 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:17:53.255  INFO 2025-06-13 10:17:53,255 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:19:35.878  INFO 2025-06-13 10:19:35,878 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:19:35.999  INFO 2025-06-13 10:19:35,999 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:19:36.001  INFO 2025-06-13 10:19:36,001 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 10:19:36.001  INFO 2025-06-13 10:19:36,001 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 10:19:36.001  INFO 2025-06-13 10:19:36,001 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 10:19:36.001  INFO 2025-06-13 10:19:36,001 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 10:19:36.001  INFO 2025-06-13 10:19:36,001 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 10:19:36.002  INFO 2025-06-13 10:19:36,002 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 10:19:36.002  INFO 2025-06-13 10:19:36,002 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 10:19:36.002  INFO 2025-06-13 10:19:36,002 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 10:19:36.006  INFO 2025-06-13 10:19:36,006 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:19:36.006  INFO 2025-06-13 10:19:36,006 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:19:36.010  INFO 2025-06-13 10:19:36,010 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:19:38.418  INFO 2025-06-13 10:19:38,418 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:19:38.430  INFO 2025-06-13 10:19:38,430 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:19:38.547  INFO 2025-06-13 10:19:38,547 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:19:38.563  INFO 2025-06-13 10:19:38,563 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:19:38.656  INFO 2025-06-13 10:19:38,656 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:19:38.667  INFO 2025-06-13 10:19:38,667 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:19:38.921  INFO 2025-06-13 10:19:38,921 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:19:38.923  INFO 2025-06-13 10:19:38,923 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:19:40.425  INFO 2025-06-13 10:19:40,425 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:19:41.003  INFO 2025-06-13 10:19:41,003 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:00.450  INFO 2025-06-13 10:24:00,450 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:00.550  INFO 2025-06-13 10:24:00,550 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:00.555  INFO 2025-06-13 10:24:00,555 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:00.556  INFO 2025-06-13 10:24:00,556 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 10:24:00.557  INFO 2025-06-13 10:24:00,557 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 10:24:00.557  INFO 2025-06-13 10:24:00,557 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 10:24:00.557  INFO 2025-06-13 10:24:00,557 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 10:24:00.557  INFO 2025-06-13 10:24:00,557 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 10:24:00.557  INFO 2025-06-13 10:24:00,557 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 10:24:00.557  INFO 2025-06-13 10:24:00,557 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 10:24:00.558  INFO 2025-06-13 10:24:00,558 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 10:24:00.562  INFO 2025-06-13 10:24:00,562 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:24:00.562  INFO 2025-06-13 10:24:00,562 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:24:04.659  INFO 2025-06-13 10:24:04,659 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:04.663  INFO 2025-06-13 10:24:04,663 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:04.743  INFO 2025-06-13 10:24:04,743 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:04.765  INFO 2025-06-13 10:24:04,765 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:04.835  INFO 2025-06-13 10:24:04,835 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:04.838  INFO 2025-06-13 10:24:04,838 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:05.071  INFO 2025-06-13 10:24:05,071 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:05.108  INFO 2025-06-13 10:24:05,108 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:06.390  INFO 2025-06-13 10:24:06,390 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:06.877  INFO 2025-06-13 10:24:06,877 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:14.519  INFO 2025-06-13 10:24:14,519 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:14.561  INFO 2025-06-13 10:24:14,561 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:14.562  INFO 2025-06-13 10:24:14,562 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:14.590  INFO 2025-06-13 10:24:14,590 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:24:14.681  INFO 2025-06-13 10:24:14,681 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:54:13.866  INFO 2025-06-13 10:54:13,866 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:54:13.942  INFO 2025-06-13 10:54:13,942 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:54:13.944  INFO 2025-06-13 10:54:13,944 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 10:54:13.944  INFO 2025-06-13 10:54:13,944 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 10:54:13.944  INFO 2025-06-13 10:54:13,944 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 10:54:13.944  INFO 2025-06-13 10:54:13,944 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 10:54:13.944  INFO 2025-06-13 10:54:13,944 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 10:54:13.945  INFO 2025-06-13 10:54:13,945 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 10:54:13.945  INFO 2025-06-13 10:54:13,945 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 10:54:13.945  INFO 2025-06-13 10:54:13,945 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 10:54:13.948  INFO 2025-06-13 10:54:13,948 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:54:13.948  INFO 2025-06-13 10:54:13,948 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 10:54:13.950  INFO 2025-06-13 10:54:13,950 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:54:16.295  INFO 2025-06-13 10:54:16,295 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:54:16.307  INFO 2025-06-13 10:54:16,307 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:54:16.400  INFO 2025-06-13 10:54:16,400 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:54:16.408  INFO 2025-06-13 10:54:16,408 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:54:16.489  INFO 2025-06-13 10:54:16,489 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:54:16.490  INFO 2025-06-13 10:54:16,490 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:54:16.769  INFO 2025-06-13 10:54:16,769 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:54:16.776  INFO 2025-06-13 10:54:16,776 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:54:18.074  INFO 2025-06-13 10:54:18,074 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:54:18.502  INFO 2025-06-13 10:54:18,502 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 10:54:21.294  INFO 2025-06-13 10:54:21,294 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:05:24.737  INFO 2025-06-13 11:05:24,737 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:05:24.820  INFO 2025-06-13 11:05:24,820 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:05:24.823  INFO 2025-06-13 11:05:24,823 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:05:24.823  INFO 2025-06-13 11:05:24,823 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:05:24.823  INFO 2025-06-13 11:05:24,823 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:05:24.823  INFO 2025-06-13 11:05:24,823 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:05:24.823  INFO 2025-06-13 11:05:24,823 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:05:24.824  INFO 2025-06-13 11:05:24,824 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:05:24.824  INFO 2025-06-13 11:05:24,824 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 11:05:24.825  INFO 2025-06-13 11:05:24,825 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 11:05:24.828  INFO 2025-06-13 11:05:24,828 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:05:24.828  INFO 2025-06-13 11:05:24,828 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:05:24.831  INFO 2025-06-13 11:05:24,831 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:05:27.685  INFO 2025-06-13 11:05:27,685 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:05:27.691  INFO 2025-06-13 11:05:27,691 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:05:27.783  INFO 2025-06-13 11:05:27,783 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:05:27.806  INFO 2025-06-13 11:05:27,806 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:05:27.819  INFO 2025-06-13 11:05:27,819 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:05:27.839  INFO 2025-06-13 11:05:27,839 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:05:28.101  INFO 2025-06-13 11:05:28,101 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:05:28.104  INFO 2025-06-13 11:05:28,104 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:05:29.954  INFO 2025-06-13 11:05:29,954 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:08:02.310  INFO 2025-06-13 11:08:02,310 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:08:02.413  INFO 2025-06-13 11:08:02,413 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:08:02.436  INFO 2025-06-13 11:08:02,436 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:08:02.438  INFO 2025-06-13 11:08:02,438 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:08:02.438  INFO 2025-06-13 11:08:02,438 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:08:02.438  INFO 2025-06-13 11:08:02,438 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:08:02.438  INFO 2025-06-13 11:08:02,438 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:08:02.438  INFO 2025-06-13 11:08:02,438 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:08:02.439  INFO 2025-06-13 11:08:02,439 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:08:02.439  INFO 2025-06-13 11:08:02,439 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 11:08:02.439  INFO 2025-06-13 11:08:02,439 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 11:08:02.443  INFO 2025-06-13 11:08:02,443 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:08:02.443  INFO 2025-06-13 11:08:02,443 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:08:05.892  INFO 2025-06-13 11:08:05,892 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:08:05.897  INFO 2025-06-13 11:08:05,897 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:08:05.979  INFO 2025-06-13 11:08:05,979 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:08:05.996  INFO 2025-06-13 11:08:05,996 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:08:06.064  INFO 2025-06-13 11:08:06,064 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:08:06.073  INFO 2025-06-13 11:08:06,073 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:08:06.398  INFO 2025-06-13 11:08:06,398 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:08:06.454  INFO 2025-06-13 11:08:06,454 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:08:07.755  INFO 2025-06-13 11:08:07,755 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:08:13.858  INFO 2025-06-13 11:08:13,858 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:15:46.605  INFO 2025-06-13 11:15:46,605 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:15:46.714  INFO 2025-06-13 11:15:46,714 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:15:46.717  INFO 2025-06-13 11:15:46,717 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:15:46.717  INFO 2025-06-13 11:15:46,717 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:15:46.717  INFO 2025-06-13 11:15:46,717 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:15:46.717  INFO 2025-06-13 11:15:46,717 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:15:46.717  INFO 2025-06-13 11:15:46,717 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:15:46.718  INFO 2025-06-13 11:15:46,718 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:15:46.718  INFO 2025-06-13 11:15:46,718 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 11:15:46.718  INFO 2025-06-13 11:15:46,718 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 11:15:46.722  INFO 2025-06-13 11:15:46,722 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:15:46.722  INFO 2025-06-13 11:15:46,722 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:15:46.731  INFO 2025-06-13 11:15:46,731 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:16:22.989  INFO 2025-06-13 11:16:22,989 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:16:23.061  INFO 2025-06-13 11:16:23,061 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:16:23.122  INFO 2025-06-13 11:16:23,122 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:16:23.145  INFO 2025-06-13 11:16:23,145 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:16:23.209  INFO 2025-06-13 11:16:23,209 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:16:23.252  INFO 2025-06-13 11:16:23,252 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:17:09.928  INFO 2025-06-13 11:17:09,928 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:17:09.933  INFO 2025-06-13 11:17:09,933 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:17:09.992  INFO 2025-06-13 11:17:09,992 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:17:10.013  INFO 2025-06-13 11:17:10,013 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:17:10.033  INFO 2025-06-13 11:17:10,033 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:17:10.075  INFO 2025-06-13 11:17:10,075 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:17:10.292  INFO 2025-06-13 11:17:10,292 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:17:10.292  INFO 2025-06-13 11:17:10,292 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:17:11.523  INFO 2025-06-13 11:17:11,523 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:17:13.142  INFO 2025-06-13 11:17:13,142 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:15.740  INFO 2025-06-13 11:24:15,740 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:15.833  INFO 2025-06-13 11:24:15,833 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:15.836  INFO 2025-06-13 11:24:15,836 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:15.838  INFO 2025-06-13 11:24:15,838 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:24:15.838  INFO 2025-06-13 11:24:15,838 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:24:15.838  INFO 2025-06-13 11:24:15,838 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:24:15.838  INFO 2025-06-13 11:24:15,838 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:24:15.838  INFO 2025-06-13 11:24:15,838 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:24:15.839  INFO 2025-06-13 11:24:15,839 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:24:15.839  INFO 2025-06-13 11:24:15,839 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 11:24:15.839  INFO 2025-06-13 11:24:15,839 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 11:24:15.842  INFO 2025-06-13 11:24:15,842 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:24:15.843  INFO 2025-06-13 11:24:15,843 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:24:28.305  INFO 2025-06-13 11:24:28,305 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:28.337  INFO 2025-06-13 11:24:28,337 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:28.397  INFO 2025-06-13 11:24:28,397 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:28.414  INFO 2025-06-13 11:24:28,414 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:28.459  INFO 2025-06-13 11:24:28,459 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:28.467  INFO 2025-06-13 11:24:28,467 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:28.736  INFO 2025-06-13 11:24:28,736 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:28.775  INFO 2025-06-13 11:24:28,775 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:30.052  INFO 2025-06-13 11:24:30,052 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:32.585  INFO 2025-06-13 11:24:32,585 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:35.238  INFO 2025-06-13 11:24:35,238 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:35.293  INFO 2025-06-13 11:24:35,293 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:35.307  INFO 2025-06-13 11:24:35,307 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:35.374  INFO 2025-06-13 11:24:35,374 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:35.426  INFO 2025-06-13 11:24:35,426 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:35.477  INFO 2025-06-13 11:24:35,477 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:35.482  INFO 2025-06-13 11:24:35,482 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:35.525  INFO 2025-06-13 11:24:35,525 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:35.537  INFO 2025-06-13 11:24:35,537 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:24:35.565  INFO 2025-06-13 11:24:35,565 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:01.980  INFO 2025-06-13 11:27:01,980 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:02.098  INFO 2025-06-13 11:27:02,098 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:02.113  INFO 2025-06-13 11:27:02,113 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:02.116  INFO 2025-06-13 11:27:02,116 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:27:02.116  INFO 2025-06-13 11:27:02,116 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:27:02.116  INFO 2025-06-13 11:27:02,116 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:27:02.116  INFO 2025-06-13 11:27:02,116 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:27:02.116  INFO 2025-06-13 11:27:02,116 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:27:02.117  INFO 2025-06-13 11:27:02,117 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:27:02.117  INFO 2025-06-13 11:27:02,117 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 11:27:02.117  INFO 2025-06-13 11:27:02,117 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 11:27:02.121  INFO 2025-06-13 11:27:02,121 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:27:02.121  INFO 2025-06-13 11:27:02,121 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:27:04.962  INFO 2025-06-13 11:27:04,962 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:04.998  INFO 2025-06-13 11:27:04,998 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:05.050  INFO 2025-06-13 11:27:05,050 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:05.057  INFO 2025-06-13 11:27:05,057 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:05.142  INFO 2025-06-13 11:27:05,142 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:05.149  INFO 2025-06-13 11:27:05,149 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:05.425  INFO 2025-06-13 11:27:05,425 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:05.430  INFO 2025-06-13 11:27:05,430 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:12.990  INFO 2025-06-13 11:27:12,990 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:20.466  INFO 2025-06-13 11:27:20,466 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:23.054  INFO 2025-06-13 11:27:23,054 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:23.098  INFO 2025-06-13 11:27:23,098 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:23.126  INFO 2025-06-13 11:27:23,126 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:23.133  INFO 2025-06-13 11:27:23,133 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:23.169  INFO 2025-06-13 11:27:23,169 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:23.174  INFO 2025-06-13 11:27:23,174 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:23.196  INFO 2025-06-13 11:27:23,196 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:23.219  INFO 2025-06-13 11:27:23,219 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:23.244  INFO 2025-06-13 11:27:23,244 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:27:23.261  INFO 2025-06-13 11:27:23,261 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:30:09.743  INFO 2025-06-13 11:30:09,743 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:30:09.858  INFO 2025-06-13 11:30:09,858 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:30:09.858  INFO 2025-06-13 11:30:09,858 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:30:09.861  INFO 2025-06-13 11:30:09,861 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:30:09.861  INFO 2025-06-13 11:30:09,861 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:30:09.861  INFO 2025-06-13 11:30:09,861 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:30:09.861  INFO 2025-06-13 11:30:09,861 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:30:09.861  INFO 2025-06-13 11:30:09,861 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:30:09.862  INFO 2025-06-13 11:30:09,862 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:30:09.862  INFO 2025-06-13 11:30:09,862 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 11:30:09.862  INFO 2025-06-13 11:30:09,862 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 11:30:09.865  INFO 2025-06-13 11:30:09,865 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:30:09.865  INFO 2025-06-13 11:30:09,865 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:30:14.962  INFO 2025-06-13 11:30:14,962 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:30:14.990  INFO 2025-06-13 11:30:14,990 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:30:15.048  INFO 2025-06-13 11:30:15,048 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:30:15.062  INFO 2025-06-13 11:30:15,062 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:30:15.111  INFO 2025-06-13 11:30:15,111 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:30:15.122  INFO 2025-06-13 11:30:15,122 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:30:15.427  INFO 2025-06-13 11:30:15,427 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:30:15.428  INFO 2025-06-13 11:30:15,428 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:30:40.217  INFO 2025-06-13 11:30:40,217 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:30:45.274  INFO 2025-06-13 11:30:45,274 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:31:06.360  INFO 2025-06-13 11:31:06,360 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:31:37.318  INFO 2025-06-13 11:31:37,318 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:31:37.338  INFO 2025-06-13 11:31:37,338 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:31:37.352  INFO 2025-06-13 11:31:37,352 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:31:37.407  INFO 2025-06-13 11:31:37,407 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:31:37.442  INFO 2025-06-13 11:31:37,442 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:31:47.489  INFO 2025-06-13 11:31:47,489 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 11:31:47.567  INFO 2025-06-13 11:31:47,567 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:31:47.567  INFO 2025-06-13 11:31:47,567 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 11:31:47.937  INFO 2025-06-13 11:31:47,937 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:31:48.068  INFO 2025-06-13 11:31:48,068 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:31:48.082  INFO 2025-06-13 11:31:48,082 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:31:48.084  INFO 2025-06-13 11:31:48,084 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:31:48.084  INFO 2025-06-13 11:31:48,084 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:31:48.084  INFO 2025-06-13 11:31:48,084 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:31:48.084  INFO 2025-06-13 11:31:48,084 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:31:48.084  INFO 2025-06-13 11:31:48,084 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 11:31:48.085  INFO 2025-06-13 11:31:48,085 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 11:31:48.085  INFO 2025-06-13 11:31:48,085 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 11:31:48.085  INFO 2025-06-13 11:31:48,085 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 11:31:48.087  INFO 2025-06-13 11:31:48,087 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:31:48.088  INFO 2025-06-13 11:31:48,088 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:31:50.804  INFO 2025-06-13 11:31:50,804 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:31:50.881  INFO 2025-06-13 11:31:50,881 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:31:50.943  INFO 2025-06-13 11:31:50,943 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:31:50.957  INFO 2025-06-13 11:31:50,957 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:31:51.019  INFO 2025-06-13 11:31:51,019 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:31:51.049  INFO 2025-06-13 11:31:51,049 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:31:55.232  INFO 2025-06-13 11:31:55,232 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:31:57.451  INFO 2025-06-13 11:31:57,451 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:31:57.453  INFO 2025-06-13 11:31:57,453 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 11:31:57.454  INFO 2025-06-13 11:31:57,454 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 11:31:57.455  INFO 2025-06-13 11:31:57,455 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":3,"fio":"Сергеев Андрей Иванович","birthDate":"1950-10-10","deathDate":"1980-05-15","biograph...
2025-06-13 11:31:57.455  INFO 2025-06-13 11:31:57,455 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 11:31:58.213  INFO 2025-06-13 11:31:58,213 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:31:58.215  INFO 2025-06-13 11:31:58,215 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 11:31:58.216  INFO 2025-06-13 11:31:58,216 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 11:31:58.216  INFO 2025-06-13 11:31:58,216 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 11:31:58.217  INFO 2025-06-13 11:31:58,217 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 11:31:58.328  INFO 2025-06-13 11:31:58,328 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:07.003  INFO 2025-06-13 11:32:07,003 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:07.017  INFO 2025-06-13 11:32:07,017 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:07.058  INFO 2025-06-13 11:32:07,058 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:07.059  INFO 2025-06-13 11:32:07,059 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:07.125  INFO 2025-06-13 11:32:07,125 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:07.130  INFO 2025-06-13 11:32:07,130 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:10.324  INFO 2025-06-13 11:32:10,324 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:11.457  INFO 2025-06-13 11:32:11,457 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:11.539  INFO 2025-06-13 11:32:11,539 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:11.542  INFO 2025-06-13 11:32:11,542 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 11:32:11.543  INFO 2025-06-13 11:32:11,543 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 11:32:11.543  INFO 2025-06-13 11:32:11,543 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":3,"fio":"Сергеев Андрей Иванович","birthDate":"1950-10-10","deathDate":"1980-05-15","biograph...
2025-06-13 11:32:11.543  INFO 2025-06-13 11:32:11,543 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 11:32:11.634  INFO 2025-06-13 11:32:11,634 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:11.637  INFO 2025-06-13 11:32:11,637 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 11:32:11.637  INFO 2025-06-13 11:32:11,637 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 11:32:11.638  INFO 2025-06-13 11:32:11,638 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 11:32:11.638  INFO 2025-06-13 11:32:11,638 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 11:32:11.782  INFO 2025-06-13 11:32:11,782 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:11.784  INFO 2025-06-13 11:32:11,784 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:32:11.784  INFO 2025-06-13 11:32:11,784 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:32:11.784  INFO 2025-06-13 11:32:11,784 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:32:11.784  INFO 2025-06-13 11:32:11,784 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:32:11.784  INFO 2025-06-13 11:32:11,784 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 11:32:11.785  INFO 2025-06-13 11:32:11,785 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 11:32:11.785  INFO 2025-06-13 11:32:11,785 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 11:32:11.786  INFO 2025-06-13 11:32:11,786 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 11:32:11.788  INFO 2025-06-13 11:32:11,788 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:32:11.789  INFO 2025-06-13 11:32:11,789 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:32:28.298  INFO 2025-06-13 11:32:28,298 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:28.324  INFO 2025-06-13 11:32:28,324 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:28.379  INFO 2025-06-13 11:32:28,379 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:28.388  INFO 2025-06-13 11:32:28,388 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:28.405  INFO 2025-06-13 11:32:28,405 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:28.410  INFO 2025-06-13 11:32:28,410 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:28.559  INFO 2025-06-13 11:32:28,559 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:28.572  INFO 2025-06-13 11:32:28,572 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:30.126  INFO 2025-06-13 11:32:30,126 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:30.152  INFO 2025-06-13 11:32:30,152 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:30.369  INFO 2025-06-13 11:32:30,369 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:30.380  INFO 2025-06-13 11:32:30,380 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:32.556  INFO 2025-06-13 11:32:32,556 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:36.054  INFO 2025-06-13 11:32:36,054 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:47.810  INFO 2025-06-13 11:32:47,810 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:47.818  INFO 2025-06-13 11:32:47,818 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:47.829  INFO 2025-06-13 11:32:47,829 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:47.836  INFO 2025-06-13 11:32:47,836 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:32:47.881  INFO 2025-06-13 11:32:47,881 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:25.547  INFO 2025-06-13 11:45:25,547 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:25.641  INFO 2025-06-13 11:45:25,641 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:25.643  INFO 2025-06-13 11:45:25,643 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:25.645  INFO 2025-06-13 11:45:25,645 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:45:25.645  INFO 2025-06-13 11:45:25,645 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:45:25.645  INFO 2025-06-13 11:45:25,645 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:45:25.645  INFO 2025-06-13 11:45:25,645 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:45:25.645  INFO 2025-06-13 11:45:25,645 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 11:45:25.646  INFO 2025-06-13 11:45:25,646 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 11:45:25.646  INFO 2025-06-13 11:45:25,646 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 11:45:25.646  INFO 2025-06-13 11:45:25,646 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 11:45:25.648  INFO 2025-06-13 11:45:25,648 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:45:25.648  INFO 2025-06-13 11:45:25,648 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:45:31.492  INFO 2025-06-13 11:45:31,492 --- [nio-8080-exec-2] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 11:45:33.230  INFO 2025-06-13 11:45:33,230 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:33.232  INFO 2025-06-13 11:45:33,232 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:45:33.232  INFO 2025-06-13 11:45:33,232 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:45:33.233  INFO 2025-06-13 11:45:33,233 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:45:33.233  INFO 2025-06-13 11:45:33,233 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:45:33.233  INFO 2025-06-13 11:45:33,233 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 11:45:33.234  INFO 2025-06-13 11:45:33,234 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 11:45:33.234  INFO 2025-06-13 11:45:33,234 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 11:45:33.234  INFO 2025-06-13 11:45:33,234 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 11:45:33.236  INFO 2025-06-13 11:45:33,236 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:45:33.236  INFO 2025-06-13 11:45:33,236 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:45:34.675  INFO 2025-06-13 11:45:34,675 --- [nio-8080-exec-1] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 11:45:35.579  INFO 2025-06-13 11:45:35,579 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:35.581  INFO 2025-06-13 11:45:35,581 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:45:35.581  INFO 2025-06-13 11:45:35,581 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:45:35.581  INFO 2025-06-13 11:45:35,581 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:45:35.581  INFO 2025-06-13 11:45:35,581 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:45:35.581  INFO 2025-06-13 11:45:35,581 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 11:45:35.582  INFO 2025-06-13 11:45:35,582 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 11:45:35.582  INFO 2025-06-13 11:45:35,582 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 11:45:35.582  INFO 2025-06-13 11:45:35,582 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 11:45:35.584  INFO 2025-06-13 11:45:35,584 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:45:35.585  INFO 2025-06-13 11:45:35,585 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:45:37.881  INFO 2025-06-13 11:45:37,881 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:37.925  INFO 2025-06-13 11:45:37,925 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:37.971  INFO 2025-06-13 11:45:37,971 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:37.991  INFO 2025-06-13 11:45:37,991 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:38.034  INFO 2025-06-13 11:45:38,034 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:38.097  INFO 2025-06-13 11:45:38,097 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:38.157  INFO 2025-06-13 11:45:38,157 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:38.168  INFO 2025-06-13 11:45:38,168 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:39.819  INFO 2025-06-13 11:45:39,819 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:39.883  INFO 2025-06-13 11:45:39,883 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:39.936  INFO 2025-06-13 11:45:39,936 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:39.991  INFO 2025-06-13 11:45:39,991 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:40.047  INFO 2025-06-13 11:45:40,047 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:40.079  INFO 2025-06-13 11:45:40,079 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:47.506  INFO 2025-06-13 11:45:47,506 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:47.507  INFO 2025-06-13 11:45:47,507 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:47.681  INFO 2025-06-13 11:45:47,681 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:47.686  INFO 2025-06-13 11:45:47,686 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:49.049  INFO 2025-06-13 11:45:49,049 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:49.056  INFO 2025-06-13 11:45:49,056 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:49.225  INFO 2025-06-13 11:45:49,225 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:49.227  INFO 2025-06-13 11:45:49,227 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:52.959  INFO 2025-06-13 11:45:52,959 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:52.961  INFO 2025-06-13 11:45:52,961 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:45:52.961  INFO 2025-06-13 11:45:52,961 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:45:52.961  INFO 2025-06-13 11:45:52,961 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:45:52.961  INFO 2025-06-13 11:45:52,961 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:45:52.961  INFO 2025-06-13 11:45:52,961 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 11:45:52.961  INFO 2025-06-13 11:45:52,961 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 11:45:52.961  INFO 2025-06-13 11:45:52,961 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 11:45:52.962  INFO 2025-06-13 11:45:52,962 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 11:45:52.964  INFO 2025-06-13 11:45:52,964 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:45:52.964  INFO 2025-06-13 11:45:52,964 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:45:53.135  INFO 2025-06-13 11:45:53,135 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:53.137  INFO 2025-06-13 11:45:53,137 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:45:53.137  INFO 2025-06-13 11:45:53,137 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:45:53.137  INFO 2025-06-13 11:45:53,137 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:45:53.137  INFO 2025-06-13 11:45:53,137 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:45:53.137  INFO 2025-06-13 11:45:53,137 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 11:45:53.137  INFO 2025-06-13 11:45:53,137 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 11:45:53.137  INFO 2025-06-13 11:45:53,137 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 11:45:53.138  INFO 2025-06-13 11:45:53,138 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 11:45:53.139  INFO 2025-06-13 11:45:53,139 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:45:53.139  INFO 2025-06-13 11:45:53,139 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:45:54.842  INFO 2025-06-13 11:45:54,842 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:54.844  INFO 2025-06-13 11:45:54,844 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:54.997  INFO 2025-06-13 11:45:54,997 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:55.000  INFO 2025-06-13 11:45:55,000 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:45:55.955  INFO 2025-06-13 11:45:55,955 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:08.166  INFO 2025-06-13 11:46:08,166 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:08.166  INFO 2025-06-13 11:46:08,166 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:08.230  INFO 2025-06-13 11:46:08,230 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:08.232  INFO 2025-06-13 11:46:08,232 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:08.234  INFO 2025-06-13 11:46:08,234 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:12.140  INFO 2025-06-13 11:46:12,140 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:12.141  INFO 2025-06-13 11:46:12,141 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:14.240  INFO 2025-06-13 11:46:14,240 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:14.243  INFO 2025-06-13 11:46:14,243 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:15.877  INFO 2025-06-13 11:46:15,877 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:15.884  INFO 2025-06-13 11:46:15,884 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:15.959  INFO 2025-06-13 11:46:15,959 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:15.960  INFO 2025-06-13 11:46:15,960 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:16.008  INFO 2025-06-13 11:46:16,008 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:16.012  INFO 2025-06-13 11:46:16,012 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:16.043  INFO 2025-06-13 11:46:16,043 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:16.089  INFO 2025-06-13 11:46:16,089 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:16.190  INFO 2025-06-13 11:46:16,190 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:17.709  INFO 2025-06-13 11:46:17,709 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:17.712  INFO 2025-06-13 11:46:17,712 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:46:17.712  INFO 2025-06-13 11:46:17,712 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:46:17.712  INFO 2025-06-13 11:46:17,712 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:46:17.712  INFO 2025-06-13 11:46:17,712 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:46:17.712  INFO 2025-06-13 11:46:17,712 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 11:46:17.713  INFO 2025-06-13 11:46:17,713 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 11:46:17.713  INFO 2025-06-13 11:46:17,713 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 11:46:17.713  INFO 2025-06-13 11:46:17,713 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 11:46:17.716  INFO 2025-06-13 11:46:17,716 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:46:17.716  INFO 2025-06-13 11:46:17,716 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:46:17.876  INFO 2025-06-13 11:46:17,876 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:17.879  INFO 2025-06-13 11:46:17,879 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:46:17.879  INFO 2025-06-13 11:46:17,879 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:46:17.879  INFO 2025-06-13 11:46:17,879 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:46:17.879  INFO 2025-06-13 11:46:17,879 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:46:17.879  INFO 2025-06-13 11:46:17,879 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 11:46:17.880  INFO 2025-06-13 11:46:17,880 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 11:46:17.880  INFO 2025-06-13 11:46:17,880 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 11:46:17.880  INFO 2025-06-13 11:46:17,880 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 11:46:17.882  INFO 2025-06-13 11:46:17,882 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:46:17.882  INFO 2025-06-13 11:46:17,882 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:46:21.150  INFO 2025-06-13 11:46:21,150 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:21.152  INFO 2025-06-13 11:46:21,152 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:46:21.153  INFO 2025-06-13 11:46:21,153 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:46:21.153  INFO 2025-06-13 11:46:21,153 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:46:21.153  INFO 2025-06-13 11:46:21,153 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 11:46:21.153  INFO 2025-06-13 11:46:21,153 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 11:46:21.155  INFO 2025-06-13 11:46:21,155 --- [nio-8080-exec-6] r.c.services.MemorialService             : getMemorialByIdForUser ID=9: пользователь=2222, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 11:46:21.155  INFO 2025-06-13 11:46:21,155 --- [nio-8080-exec-6] r.c.services.MemorialService             : Мемориал ID=9 получен пользователем 2222 (владелец: true, редактор: false, админ: false)
2025-06-13 11:46:23.525  INFO 2025-06-13 11:46:23,525 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:23.531  INFO 2025-06-13 11:46:23,531 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:23.534  INFO 2025-06-13 11:46:23,534 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:23.540  INFO 2025-06-13 11:46:23,540 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:23.542  INFO 2025-06-13 11:46:23,542 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:46:23.542  INFO 2025-06-13 11:46:23,542 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:46:23.542  INFO 2025-06-13 11:46:23,542 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:46:23.542  INFO 2025-06-13 11:46:23,542 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:46:23.542  INFO 2025-06-13 11:46:23,542 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 11:46:23.543  INFO 2025-06-13 11:46:23,543 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 11:46:23.543  INFO 2025-06-13 11:46:23,543 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 11:46:23.544  INFO 2025-06-13 11:46:23,544 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 11:46:23.547  INFO 2025-06-13 11:46:23,547 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:46:23.547  INFO 2025-06-13 11:46:23,547 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 11:46:33.015  INFO 2025-06-13 11:46:33,015 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:33.018  INFO 2025-06-13 11:46:33,018 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:33.175  INFO 2025-06-13 11:46:33,175 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:33.177  INFO 2025-06-13 11:46:33,177 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:35.744  INFO 2025-06-13 11:46:35,744 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:35.796  INFO 2025-06-13 11:46:35,796 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:36.746  INFO 2025-06-13 11:46:36,746 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:36.749  INFO 2025-06-13 11:46:36,749 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:38.689  INFO 2025-06-13 11:46:38,689 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:38.703  INFO 2025-06-13 11:46:38,703 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:39.702  INFO 2025-06-13 11:46:39,702 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:39.702  INFO 2025-06-13 11:46:39,702 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:41.790  INFO 2025-06-13 11:46:41,790 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:43.470  INFO 2025-06-13 11:46:43,470 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:51.675  INFO 2025-06-13 11:46:51,675 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:59.013  INFO 2025-06-13 11:46:59,013 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:59.016  INFO 2025-06-13 11:46:59,016 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:59.034  INFO 2025-06-13 11:46:59,034 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:59.042  INFO 2025-06-13 11:46:59,042 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:46:59.059  INFO 2025-06-13 11:46:59,059 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 11:47:08.004  INFO 2025-06-13 11:47:08,004 --- [io-8080-exec-10] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 11:47:08.082  INFO 2025-06-13 11:47:08,082 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:08.082  INFO 2025-06-13 11:47:08,082 --- [io-8080-exec-10] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 11:47:08.609  INFO 2025-06-13 11:47:08,609 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:08.613  INFO 2025-06-13 11:47:08,613 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:08.628  INFO 2025-06-13 11:47:08,628 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:08.630  INFO 2025-06-13 11:47:08,630 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:47:08.630  INFO 2025-06-13 11:47:08,630 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:08.630  INFO 2025-06-13 11:47:08,630 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:08.630  INFO 2025-06-13 11:47:08,630 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:47:08.630  INFO 2025-06-13 11:47:08,630 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:47:08.631  INFO 2025-06-13 11:47:08,631 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:47:08.631  INFO 2025-06-13 11:47:08,631 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 11:47:08.631  INFO 2025-06-13 11:47:08,631 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 11:47:08.635  INFO 2025-06-13 11:47:08,635 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:47:08.635  INFO 2025-06-13 11:47:08,635 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:47:14.031  INFO 2025-06-13 11:47:14,031 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:14.033  INFO 2025-06-13 11:47:14,033 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:14.034  INFO 2025-06-13 11:47:14,034 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:14.034  INFO 2025-06-13 11:47:14,034 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:47:14.034  INFO 2025-06-13 11:47:14,034 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:47:14.034  INFO 2025-06-13 11:47:14,034 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:47:14.035  INFO 2025-06-13 11:47:14,035 --- [nio-8080-exec-1] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 11:47:14.035  INFO 2025-06-13 11:47:14,035 --- [nio-8080-exec-1] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 11:47:17.128  INFO 2025-06-13 11:47:17,128 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:17.131  INFO 2025-06-13 11:47:17,131 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:17.131  INFO 2025-06-13 11:47:17,131 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:17.131  INFO 2025-06-13 11:47:17,131 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:47:17.131  INFO 2025-06-13 11:47:17,131 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:47:17.132  INFO 2025-06-13 11:47:17,132 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:47:17.132  INFO 2025-06-13 11:47:17,132 --- [nio-8080-exec-3] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 11:47:17.132  INFO 2025-06-13 11:47:17,132 --- [nio-8080-exec-3] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 11:47:38.921  INFO 2025-06-13 11:47:38,921 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:38.922  INFO 2025-06-13 11:47:38,922 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:38.922  INFO 2025-06-13 11:47:38,922 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:38.923  INFO 2025-06-13 11:47:38,923 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:47:38.923  INFO 2025-06-13 11:47:38,923 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:47:38.923  INFO 2025-06-13 11:47:38,923 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:47:38.924  INFO 2025-06-13 11:47:38,924 --- [nio-8080-exec-4] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 11:47:38.924  INFO 2025-06-13 11:47:38,924 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 11:47:38.949  INFO 2025-06-13 11:47:38,949 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:38.968  INFO 2025-06-13 11:47:38,968 --- [nio-8080-exec-9] r.c.services.MemorialService             : Обновление мемориала ID=6, пользователь=1111 (ID=2), isOwner=true, isEditor=false, статус=DRAFT
2025-06-13 11:47:38.968  INFO 2025-06-13 11:47:38,968 --- [nio-8080-exec-9] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=6
2025-06-13 11:47:40.171  INFO 2025-06-13 11:47:40,171 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:40.465  INFO 2025-06-13 11:47:40,465 --- [nio-8080-exec-8] r.c.services.MemorialService             : Загрузка фото для мемориала ID=6: пользователь=1111, isEditor=false, isOwner=true, isPublished=false
2025-06-13 11:47:41.670  INFO 2025-06-13 11:47:41,670 --- [nio-8080-exec-8] r.c.services.MemorialService             : Прямое применение фото для неопубликованного мемориала ID=6
2025-06-13 11:47:41.670  INFO 2025-06-13 11:47:41,670 --- [nio-8080-exec-8] r.c.services.MemorialService             : Фото напрямую применено для мемориала ID=6
2025-06-13 11:47:41.688  INFO 2025-06-13 11:47:41,688 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:41.689  INFO 2025-06-13 11:47:41,689 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:41.690  INFO 2025-06-13 11:47:41,690 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:41.690  INFO 2025-06-13 11:47:41,690 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:47:41.690  INFO 2025-06-13 11:47:41,690 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:47:41.690  INFO 2025-06-13 11:47:41,690 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:47:41.691  INFO 2025-06-13 11:47:41,691 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 11:47:41.691  INFO 2025-06-13 11:47:41,691 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 11:47:41.711  INFO 2025-06-13 11:47:41,711 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:41.716  INFO 2025-06-13 11:47:41,716 --- [nio-8080-exec-5] r.c.services.MemorialService             : Обновление мемориала ID=6, пользователь=1111 (ID=2), isOwner=true, isEditor=false, статус=DRAFT
2025-06-13 11:47:41.716  INFO 2025-06-13 11:47:41,716 --- [nio-8080-exec-5] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=6
2025-06-13 11:47:41.736  INFO 2025-06-13 11:47:41,736 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:41.739  INFO 2025-06-13 11:47:41,739 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:41.739  INFO 2025-06-13 11:47:41,739 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:41.739  INFO 2025-06-13 11:47:41,739 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:47:41.739  INFO 2025-06-13 11:47:41,739 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:47:41.740  INFO 2025-06-13 11:47:41,740 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:47:41.741  INFO 2025-06-13 11:47:41,741 --- [nio-8080-exec-2] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 11:47:41.741  INFO 2025-06-13 11:47:41,741 --- [nio-8080-exec-2] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 11:47:42.057  INFO 2025-06-13 11:47:42,057 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:42.057  INFO 2025-06-13 11:47:42,057 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:42.059  INFO 2025-06-13 11:47:42,059 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:47:42.059  INFO 2025-06-13 11:47:42,059 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:42.059  INFO 2025-06-13 11:47:42,059 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:42.059  INFO 2025-06-13 11:47:42,059 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:47:42.059  INFO 2025-06-13 11:47:42,059 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:47:42.060  INFO 2025-06-13 11:47:42,060 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:47:42.060  INFO 2025-06-13 11:47:42,060 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 11:47:42.060  INFO 2025-06-13 11:47:42,060 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 11:47:42.063  INFO 2025-06-13 11:47:42,063 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:47:42.063  INFO 2025-06-13 11:47:42,063 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:47:48.725  INFO 2025-06-13 11:47:48,725 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:48.729  INFO 2025-06-13 11:47:48,729 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:48.729  INFO 2025-06-13 11:47:48,729 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:48.729  INFO 2025-06-13 11:47:48,729 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:47:48.729  INFO 2025-06-13 11:47:48,729 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:47:48.730  INFO 2025-06-13 11:47:48,730 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:47:48.731  INFO 2025-06-13 11:47:48,731 --- [nio-8080-exec-6] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 11:47:48.731  INFO 2025-06-13 11:47:48,731 --- [nio-8080-exec-6] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 11:47:57.767  INFO 2025-06-13 11:47:57,767 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:57.807  INFO 2025-06-13 11:47:57,807 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:47:57.810  INFO 2025-06-13 11:47:57,810 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:47:57.810  INFO 2025-06-13 11:47:57,810 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:57.810  INFO 2025-06-13 11:47:57,810 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:47:57.810  INFO 2025-06-13 11:47:57,810 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:47:57.810  INFO 2025-06-13 11:47:57,810 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:47:57.811  INFO 2025-06-13 11:47:57,811 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:47:57.811  INFO 2025-06-13 11:47:57,811 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 11:47:57.811  INFO 2025-06-13 11:47:57,811 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 11:47:57.813  INFO 2025-06-13 11:47:57,813 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:47:57.814  INFO 2025-06-13 11:47:57,814 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:48:02.235  INFO 2025-06-13 11:48:02,235 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:48:02.247  INFO 2025-06-13 11:48:02,247 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:48:02.312  INFO 2025-06-13 11:48:02,312 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:48:02.342  INFO 2025-06-13 11:48:02,342 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:48:02.358  INFO 2025-06-13 11:48:02,358 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:48:02.464  INFO 2025-06-13 11:48:02,464 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:48:02.586  INFO 2025-06-13 11:48:02,586 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:48:02.592  INFO 2025-06-13 11:48:02,592 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:48:05.177  INFO 2025-06-13 11:48:05,177 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:48:08.121  INFO 2025-06-13 11:48:08,121 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:26.029  INFO 2025-06-13 11:53:26,029 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:26.135  INFO 2025-06-13 11:53:26,135 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:26.138  INFO 2025-06-13 11:53:26,138 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:26.140  INFO 2025-06-13 11:53:26,140 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 11:53:26.140  INFO 2025-06-13 11:53:26,140 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 11:53:26.140  INFO 2025-06-13 11:53:26,140 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 11:53:26.140  INFO 2025-06-13 11:53:26,140 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 11:53:26.140  INFO 2025-06-13 11:53:26,140 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 11:53:26.141  INFO 2025-06-13 11:53:26,141 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 11:53:26.141  INFO 2025-06-13 11:53:26,141 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 11:53:26.141  INFO 2025-06-13 11:53:26,141 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 11:53:26.144  INFO 2025-06-13 11:53:26,144 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:53:26.145  INFO 2025-06-13 11:53:26,145 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 11:53:30.913  INFO 2025-06-13 11:53:30,913 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:30.949  INFO 2025-06-13 11:53:30,949 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:30.976  INFO 2025-06-13 11:53:30,976 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:30.996  INFO 2025-06-13 11:53:30,996 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:31.012  INFO 2025-06-13 11:53:31,012 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:31.113  INFO 2025-06-13 11:53:31,113 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:31.301  INFO 2025-06-13 11:53:31,301 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:31.312  INFO 2025-06-13 11:53:31,312 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:33.188  INFO 2025-06-13 11:53:33,188 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:33.191  INFO 2025-06-13 11:53:33,191 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:33.466  INFO 2025-06-13 11:53:33,466 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:33.469  INFO 2025-06-13 11:53:33,469 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:35.234  INFO 2025-06-13 11:53:35,234 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:35.234  INFO 2025-06-13 11:53:35,234 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:37.092  INFO 2025-06-13 11:53:37,092 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:37.103  INFO 2025-06-13 11:53:37,103 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:39.549  INFO 2025-06-13 11:53:39,549 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:39.558  INFO 2025-06-13 11:53:39,558 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:40.891  INFO 2025-06-13 11:53:40,891 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 11:53:58.475  INFO 2025-06-13 11:53:58,475 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:01:17.516  INFO 2025-06-13 12:01:17,516 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:01:17.697  INFO 2025-06-13 12:01:17,697 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:01:17.699  INFO 2025-06-13 12:01:17,699 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:01:17.699  INFO 2025-06-13 12:01:17,699 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:01:17.699  INFO 2025-06-13 12:01:17,699 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:01:17.699  INFO 2025-06-13 12:01:17,699 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:01:17.699  INFO 2025-06-13 12:01:17,699 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 12:01:17.700  INFO 2025-06-13 12:01:17,700 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 12:01:17.700  INFO 2025-06-13 12:01:17,700 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 12:01:17.700  INFO 2025-06-13 12:01:17,700 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 12:01:17.703  INFO 2025-06-13 12:01:17,703 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 12:01:17.703  INFO 2025-06-13 12:01:17,703 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 12:01:17.712  INFO 2025-06-13 12:01:17,712 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:01:23.638  INFO 2025-06-13 12:01:23,638 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:01:23.697  INFO 2025-06-13 12:01:23,697 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:01:23.734  INFO 2025-06-13 12:01:23,734 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:01:23.754  INFO 2025-06-13 12:01:23,754 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:01:23.783  INFO 2025-06-13 12:01:23,783 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:01:23.804  INFO 2025-06-13 12:01:23,804 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:01:23.967  INFO 2025-06-13 12:01:23,967 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:01:23.969  INFO 2025-06-13 12:01:23,969 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:01:27.092  INFO 2025-06-13 12:01:27,092 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:01:31.238  INFO 2025-06-13 12:01:31,238 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:01:31.241  INFO 2025-06-13 12:01:31,241 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 2
2025-06-13 12:01:31.242  INFO 2025-06-13 12:01:31,242 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : No active draft found for tree 1 and editor 2, falling back to original tree
2025-06-13 12:01:31.244  INFO 2025-06-13 12:01:31,244 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 12:02:17.065  INFO 2025-06-13 12:02:17,065 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:02:42.597  INFO 2025-06-13 12:02:42,597 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:02:42.600  INFO 2025-06-13 12:02:42,600 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 2
2025-06-13 12:02:42.601  INFO 2025-06-13 12:02:42,601 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : No active draft found for tree 1 and editor 2, falling back to original tree
2025-06-13 12:02:42.602  INFO 2025-06-13 12:02:42,602 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 12:03:19.733  INFO 2025-06-13 12:03:19,733 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:19.733  INFO 2025-06-13 12:03:19,733 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:19.734  INFO 2025-06-13 12:03:19,734 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:19.740  INFO 2025-06-13 12:03:19,740 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:19.746  INFO 2025-06-13 12:03:19,746 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:27.846  INFO 2025-06-13 12:03:27,846 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:27.852  INFO 2025-06-13 12:03:27,852 --- [nio-8080-exec-1] r.c.services.DraftSubmissionService      : Submission 1 approved by owner with message: null
2025-06-13 12:03:28.009  INFO 2025-06-13 12:03:28,009 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:30.572  INFO 2025-06-13 12:03:30,572 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:30.573  INFO 2025-06-13 12:03:30,573 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:42.181  INFO 2025-06-13 12:03:42,181 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:42.187  INFO 2025-06-13 12:03:42,187 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:43.230  INFO 2025-06-13 12:03:43,230 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:43.236  INFO 2025-06-13 12:03:43,236 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:44.581  INFO 2025-06-13 12:03:44,581 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:44.583  INFO 2025-06-13 12:03:44,583 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:03:44.583  INFO 2025-06-13 12:03:44,583 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:03:44.583  INFO 2025-06-13 12:03:44,583 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:03:44.583  INFO 2025-06-13 12:03:44,583 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:03:44.583  INFO 2025-06-13 12:03:44,583 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 12:03:44.583  INFO 2025-06-13 12:03:44,583 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 12:03:44.583  INFO 2025-06-13 12:03:44,583 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 12:03:44.584  INFO 2025-06-13 12:03:44,584 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 12:03:44.587  INFO 2025-06-13 12:03:44,587 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 12:03:44.587  INFO 2025-06-13 12:03:44,587 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 12:03:44.724  INFO 2025-06-13 12:03:44,724 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:44.726  INFO 2025-06-13 12:03:44,726 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:03:44.726  INFO 2025-06-13 12:03:44,726 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:03:44.726  INFO 2025-06-13 12:03:44,726 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:03:44.726  INFO 2025-06-13 12:03:44,726 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:03:44.726  INFO 2025-06-13 12:03:44,726 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 12:03:44.726  INFO 2025-06-13 12:03:44,726 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 12:03:44.726  INFO 2025-06-13 12:03:44,726 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 12:03:44.726  INFO 2025-06-13 12:03:44,726 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 12:03:44.730  INFO 2025-06-13 12:03:44,730 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 12:03:44.730  INFO 2025-06-13 12:03:44,730 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 12:03:46.774  INFO 2025-06-13 12:03:46,774 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:46.954  INFO 2025-06-13 12:03:46,954 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:46.974  INFO 2025-06-13 12:03:46,974 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:47.111  INFO 2025-06-13 12:03:47,111 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:47.193  INFO 2025-06-13 12:03:47,193 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:47.367  INFO 2025-06-13 12:03:47,367 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:48.370  INFO 2025-06-13 12:03:48,370 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:51.318  INFO 2025-06-13 12:03:51,318 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:58.585  INFO 2025-06-13 12:03:58,585 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:58.613  INFO 2025-06-13 12:03:58,613 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:58.653  INFO 2025-06-13 12:03:58,653 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:58.653  INFO 2025-06-13 12:03:58,653 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:58.751  INFO 2025-06-13 12:03:58,751 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:03:58.754  INFO 2025-06-13 12:03:58,754 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:05:09.561  INFO 2025-06-13 12:05:09,561 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 12:05:09.640  INFO 2025-06-13 12:05:09,640 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:09.641  INFO 2025-06-13 12:05:09,641 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 12:05:11.545  INFO 2025-06-13 12:05:11,545 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:11.729  INFO 2025-06-13 12:05:11,729 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:11.741  INFO 2025-06-13 12:05:11,741 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:11.743  INFO 2025-06-13 12:05:11,743 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:05:11.743  INFO 2025-06-13 12:05:11,743 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:05:11.743  INFO 2025-06-13 12:05:11,743 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:05:11.743  INFO 2025-06-13 12:05:11,743 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:05:11.743  INFO 2025-06-13 12:05:11,743 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 12:05:11.744  INFO 2025-06-13 12:05:11,744 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 12:05:11.744  INFO 2025-06-13 12:05:11,744 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 12:05:11.745  INFO 2025-06-13 12:05:11,745 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 12:05:11.747  INFO 2025-06-13 12:05:11,747 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:05:11.748  INFO 2025-06-13 12:05:11,748 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:05:14.272  INFO 2025-06-13 12:05:14,272 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:14.295  INFO 2025-06-13 12:05:14,295 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:14.348  INFO 2025-06-13 12:05:14,348 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:14.363  INFO 2025-06-13 12:05:14,363 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:14.376  INFO 2025-06-13 12:05:14,376 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:14.395  INFO 2025-06-13 12:05:14,395 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:14.469  INFO 2025-06-13 12:05:14,469 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:14.472  INFO 2025-06-13 12:05:14,472 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:15.360  INFO 2025-06-13 12:05:15,360 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:15.427  INFO 2025-06-13 12:05:15,427 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:15.464  INFO 2025-06-13 12:05:15,464 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:15.510  INFO 2025-06-13 12:05:15,510 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:15.532  INFO 2025-06-13 12:05:15,532 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:15.557  INFO 2025-06-13 12:05:15,557 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:16.227  INFO 2025-06-13 12:05:16,227 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:17.476  INFO 2025-06-13 12:05:17,476 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:17.498  INFO 2025-06-13 12:05:17,498 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:17.520  INFO 2025-06-13 12:05:17,520 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:20.067  INFO 2025-06-13 12:05:20,067 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:22.040  INFO 2025-06-13 12:05:22,040 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:22.042  INFO 2025-06-13 12:05:22,042 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 12:05:22.043  INFO 2025-06-13 12:05:22,043 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 12:05:22.043  INFO 2025-06-13 12:05:22,043 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":3,"fio":"Сергеев Андрей Иванович","birthDate":"1950-10-10","deathDate":"1980-05-15","biograph...
2025-06-13 12:05:22.043  INFO 2025-06-13 12:05:22,043 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 12:05:22.896  INFO 2025-06-13 12:05:22,896 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:22.898  INFO 2025-06-13 12:05:22,898 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 12:05:22.899  INFO 2025-06-13 12:05:22,899 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 12:05:22.899  INFO 2025-06-13 12:05:22,899 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 12:05:22.899  INFO 2025-06-13 12:05:22,899 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 12:05:22.939  INFO 2025-06-13 12:05:22,939 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:28.537  INFO 2025-06-13 12:05:28,537 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:28.552  INFO 2025-06-13 12:05:28,552 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:28.580  INFO 2025-06-13 12:05:28,580 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:28.593  INFO 2025-06-13 12:05:28,593 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:28.599  INFO 2025-06-13 12:05:28,599 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:28.624  INFO 2025-06-13 12:05:28,624 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:30.272  INFO 2025-06-13 12:05:30,272 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:31.398  INFO 2025-06-13 12:05:31,398 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:31.441  INFO 2025-06-13 12:05:31,441 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:31.443  INFO 2025-06-13 12:05:31,443 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 12:05:31.444  INFO 2025-06-13 12:05:31,444 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 12:05:31.444  INFO 2025-06-13 12:05:31,444 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":3,"fio":"Сергеев Андрей Иванович","birthDate":"1950-10-10","deathDate":"1980-05-15","biograph...
2025-06-13 12:05:31.445  INFO 2025-06-13 12:05:31,445 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 12:05:31.465  INFO 2025-06-13 12:05:31,465 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:31.467  INFO 2025-06-13 12:05:31,467 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 12:05:31.467  INFO 2025-06-13 12:05:31,467 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 12:05:31.468  INFO 2025-06-13 12:05:31,468 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 12:05:31.468  INFO 2025-06-13 12:05:31,468 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 12:05:31.551  INFO 2025-06-13 12:05:31,551 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:31.553  INFO 2025-06-13 12:05:31,553 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:05:31.553  INFO 2025-06-13 12:05:31,553 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:05:31.553  INFO 2025-06-13 12:05:31,553 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:05:31.553  INFO 2025-06-13 12:05:31,553 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:05:31.553  INFO 2025-06-13 12:05:31,553 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 12:05:31.554  INFO 2025-06-13 12:05:31,554 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 12:05:31.554  INFO 2025-06-13 12:05:31,554 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 12:05:31.554  INFO 2025-06-13 12:05:31,554 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 12:05:31.558  INFO 2025-06-13 12:05:31,558 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:05:31.558  INFO 2025-06-13 12:05:31,558 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:05:45.973  INFO 2025-06-13 12:05:45,973 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:45.983  INFO 2025-06-13 12:05:45,983 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:46.018  INFO 2025-06-13 12:05:46,018 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:46.020  INFO 2025-06-13 12:05:46,020 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:46.044  INFO 2025-06-13 12:05:46,044 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:46.047  INFO 2025-06-13 12:05:46,047 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:47.741  INFO 2025-06-13 12:05:47,741 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:48.676  INFO 2025-06-13 12:05:48,676 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:48.697  INFO 2025-06-13 12:05:48,697 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:48.716  INFO 2025-06-13 12:05:48,716 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:49.468  INFO 2025-06-13 12:05:49,468 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:49.470  INFO 2025-06-13 12:05:49,470 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:05:49.470  INFO 2025-06-13 12:05:49,470 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:05:49.470  INFO 2025-06-13 12:05:49,470 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:05:49.470  INFO 2025-06-13 12:05:49,470 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:05:49.470  INFO 2025-06-13 12:05:49,470 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 12:05:49.471  INFO 2025-06-13 12:05:49,471 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 12:05:49.471  INFO 2025-06-13 12:05:49,471 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 12:05:49.472  INFO 2025-06-13 12:05:49,472 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 12:05:49.475  INFO 2025-06-13 12:05:49,475 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:05:49.475  INFO 2025-06-13 12:05:49,475 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:05:49.628  INFO 2025-06-13 12:05:49,628 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:49.629  INFO 2025-06-13 12:05:49,629 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:05:49.630  INFO 2025-06-13 12:05:49,630 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:05:49.630  INFO 2025-06-13 12:05:49,630 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:05:49.630  INFO 2025-06-13 12:05:49,630 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:05:49.630  INFO 2025-06-13 12:05:49,630 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 12:05:49.630  INFO 2025-06-13 12:05:49,630 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 12:05:49.630  INFO 2025-06-13 12:05:49,630 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 12:05:49.631  INFO 2025-06-13 12:05:49,631 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 12:05:49.633  INFO 2025-06-13 12:05:49,633 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:05:49.633  INFO 2025-06-13 12:05:49,633 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:05:50.883  INFO 2025-06-13 12:05:50,883 --- [nio-8080-exec-5] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 12:05:51.755  INFO 2025-06-13 12:05:51,755 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:51.758  INFO 2025-06-13 12:05:51,758 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:05:51.758  INFO 2025-06-13 12:05:51,758 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:05:51.758  INFO 2025-06-13 12:05:51,758 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:05:51.758  INFO 2025-06-13 12:05:51,758 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:05:51.758  INFO 2025-06-13 12:05:51,758 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 12:05:51.759  INFO 2025-06-13 12:05:51,759 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 12:05:51.759  INFO 2025-06-13 12:05:51,759 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 12:05:51.759  INFO 2025-06-13 12:05:51,759 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 12:05:51.761  INFO 2025-06-13 12:05:51,761 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:05:51.761  INFO 2025-06-13 12:05:51,761 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:05:53.495  INFO 2025-06-13 12:05:53,495 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:53.497  INFO 2025-06-13 12:05:53,497 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:53.550  INFO 2025-06-13 12:05:53,550 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:53.550  INFO 2025-06-13 12:05:53,550 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:53.586  INFO 2025-06-13 12:05:53,586 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:53.586  INFO 2025-06-13 12:05:53,586 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:53.651  INFO 2025-06-13 12:05:53,651 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:53.678  INFO 2025-06-13 12:05:53,678 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:53.700  INFO 2025-06-13 12:05:53,700 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:54.812  INFO 2025-06-13 12:05:54,812 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:55.754  INFO 2025-06-13 12:05:55,754 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:55.814  INFO 2025-06-13 12:05:55,814 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:55.816  INFO 2025-06-13 12:05:55,816 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 12:05:55.818  INFO 2025-06-13 12:05:55,818 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 12:05:55.818  INFO 2025-06-13 12:05:55,818 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":3,"fio":"Сергеев Андрей Иванович","birthDate":"1950-10-10","deathDate":"1980-05-15","biograph...
2025-06-13 12:05:55.818  INFO 2025-06-13 12:05:55,818 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 12:05:55.849  INFO 2025-06-13 12:05:55,849 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:55.852  INFO 2025-06-13 12:05:55,852 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 12:05:55.853  INFO 2025-06-13 12:05:55,853 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 12:05:55.853  INFO 2025-06-13 12:05:55,853 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 12:05:55.853  INFO 2025-06-13 12:05:55,853 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 12:05:55.933  INFO 2025-06-13 12:05:55,933 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:05:55.935  INFO 2025-06-13 12:05:55,935 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:05:55.935  INFO 2025-06-13 12:05:55,935 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:05:55.935  INFO 2025-06-13 12:05:55,935 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:05:55.935  INFO 2025-06-13 12:05:55,935 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:05:55.935  INFO 2025-06-13 12:05:55,935 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 12:05:55.936  INFO 2025-06-13 12:05:55,936 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 12:05:55.936  INFO 2025-06-13 12:05:55,936 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 12:05:55.936  INFO 2025-06-13 12:05:55,936 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 12:05:55.939  INFO 2025-06-13 12:05:55,939 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:05:55.939  INFO 2025-06-13 12:05:55,939 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:06:07.718  INFO 2025-06-13 12:06:07,718 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:07.725  INFO 2025-06-13 12:06:07,725 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:07.766  INFO 2025-06-13 12:06:07,766 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:07.766  INFO 2025-06-13 12:06:07,766 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:07.796  INFO 2025-06-13 12:06:07,796 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:07.797  INFO 2025-06-13 12:06:07,797 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:10.142  INFO 2025-06-13 12:06:10,142 --- [nio-8080-exec-2] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 12:06:10.423  INFO 2025-06-13 12:06:10,423 --- [nio-8080-exec-6] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 12:06:12.480  INFO 2025-06-13 12:06:12,480 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:12.480  INFO 2025-06-13 12:06:12,480 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:12.630  INFO 2025-06-13 12:06:12,630 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:12.630  INFO 2025-06-13 12:06:12,630 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:13.496  INFO 2025-06-13 12:06:13,496 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:13.498  INFO 2025-06-13 12:06:13,498 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:14.194  INFO 2025-06-13 12:06:14,194 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:14.194  INFO 2025-06-13 12:06:14,194 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:16.377  INFO 2025-06-13 12:06:16,377 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:16.379  INFO 2025-06-13 12:06:16,379 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:06:16.379  INFO 2025-06-13 12:06:16,379 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:06:16.379  INFO 2025-06-13 12:06:16,379 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:06:16.379  INFO 2025-06-13 12:06:16,379 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:06:16.379  INFO 2025-06-13 12:06:16,379 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 12:06:16.380  INFO 2025-06-13 12:06:16,380 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 12:06:16.380  INFO 2025-06-13 12:06:16,380 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 12:06:16.380  INFO 2025-06-13 12:06:16,380 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 12:06:16.382  INFO 2025-06-13 12:06:16,382 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:06:16.382  INFO 2025-06-13 12:06:16,382 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:06:16.527  INFO 2025-06-13 12:06:16,527 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:16.529  INFO 2025-06-13 12:06:16,529 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:06:16.529  INFO 2025-06-13 12:06:16,529 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:06:16.529  INFO 2025-06-13 12:06:16,529 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:06:16.529  INFO 2025-06-13 12:06:16,529 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:06:16.529  INFO 2025-06-13 12:06:16,529 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 12:06:16.530  INFO 2025-06-13 12:06:16,530 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 12:06:16.530  INFO 2025-06-13 12:06:16,530 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 12:06:16.530  INFO 2025-06-13 12:06:16,530 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 12:06:16.531  INFO 2025-06-13 12:06:16,531 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:06:16.532  INFO 2025-06-13 12:06:16,532 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:06:16.989  INFO 2025-06-13 12:06:16,989 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:16.989  INFO 2025-06-13 12:06:16,989 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:17.011  INFO 2025-06-13 12:06:17,011 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:17.014  INFO 2025-06-13 12:06:17,014 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:17.033  INFO 2025-06-13 12:06:17,033 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:17.037  INFO 2025-06-13 12:06:17,037 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:17.127  INFO 2025-06-13 12:06:17,127 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:17.146  INFO 2025-06-13 12:06:17,146 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:17.168  INFO 2025-06-13 12:06:17,168 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:22.976  INFO 2025-06-13 12:06:22,976 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:23.028  INFO 2025-06-13 12:06:23,028 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:06:23.030  INFO 2025-06-13 12:06:23,030 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Attempting to submit draft with ID: 1
2025-06-13 12:06:23.030  INFO 2025-06-13 12:06:23,030 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft: ID=1, status=DRAFT, editorId=3, treeId=1
2025-06-13 12:06:23.030  INFO 2025-06-13 12:06:23,030 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft 1 has changes: true
2025-06-13 12:06:23.030  INFO 2025-06-13 12:06:23,030 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Name changed: false
2025-06-13 12:06:23.030  INFO 2025-06-13 12:06:23,030 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Description changed: false
2025-06-13 12:06:23.030  INFO 2025-06-13 12:06:23,030 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Public status changed: false
2025-06-13 12:06:23.030  INFO 2025-06-13 12:06:23,030 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Memorials changed: true
2025-06-13 12:06:23.030  INFO 2025-06-13 12:06:23,030 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Relations changed: true
2025-06-13 12:06:23.031  INFO 2025-06-13 12:06:23,031 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft 1 submitted for review (status remains DRAFT) with  changes
2025-06-13 12:06:23.031  INFO 2025-06-13 12:06:23,031 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Created submission record for draft 1 to notify owner
2025-06-13 12:14:30.656  INFO 2025-06-13 12:14:30,656 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:14:30.948  INFO 2025-06-13 12:14:30,948 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:14:30.951  INFO 2025-06-13 12:14:30,951 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:14:30.954  INFO 2025-06-13 12:14:30,954 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:14:30.954  INFO 2025-06-13 12:14:30,954 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:14:30.954  INFO 2025-06-13 12:14:30,954 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:14:30.954  INFO 2025-06-13 12:14:30,954 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:14:30.954  INFO 2025-06-13 12:14:30,954 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 12:14:30.955  INFO 2025-06-13 12:14:30,955 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 12:14:30.955  INFO 2025-06-13 12:14:30,955 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 12:14:30.956  INFO 2025-06-13 12:14:30,956 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 12:14:30.960  INFO 2025-06-13 12:14:30,960 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:14:30.960  INFO 2025-06-13 12:14:30,960 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:15:12.249  INFO 2025-06-13 12:15:12,249 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:15:12.273  INFO 2025-06-13 12:15:12,273 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:15:12.326  INFO 2025-06-13 12:15:12,326 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:15:12.346  INFO 2025-06-13 12:15:12,346 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:15:12.356  INFO 2025-06-13 12:15:12,356 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:15:12.386  INFO 2025-06-13 12:15:12,386 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:15:12.464  INFO 2025-06-13 12:15:12,464 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:15:12.467  INFO 2025-06-13 12:15:12,467 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:15:32.132  INFO 2025-06-13 12:15:32,132 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:15:32.139  INFO 2025-06-13 12:15:32,139 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:15:32.332  INFO 2025-06-13 12:15:32,332 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:15:32.332  INFO 2025-06-13 12:15:32,332 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:15:34.046  INFO 2025-06-13 12:15:34,046 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:15:34.046  INFO 2025-06-13 12:15:34,046 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:46.947  INFO 2025-06-13 12:22:46,947 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:47.042  INFO 2025-06-13 12:22:47,042 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:47.047  INFO 2025-06-13 12:22:47,047 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:47.049  INFO 2025-06-13 12:22:47,049 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:22:47.049  INFO 2025-06-13 12:22:47,049 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:22:47.049  INFO 2025-06-13 12:22:47,049 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:22:47.049  INFO 2025-06-13 12:22:47,049 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:22:47.050  INFO 2025-06-13 12:22:47,050 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 12:22:47.050  INFO 2025-06-13 12:22:47,050 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 12:22:47.050  INFO 2025-06-13 12:22:47,050 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 12:22:47.051  INFO 2025-06-13 12:22:47,051 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 12:22:47.053  INFO 2025-06-13 12:22:47,053 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:22:47.053  INFO 2025-06-13 12:22:47,053 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:22:52.639  INFO 2025-06-13 12:22:52,639 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:52.666  INFO 2025-06-13 12:22:52,666 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:52.704  INFO 2025-06-13 12:22:52,704 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:52.713  INFO 2025-06-13 12:22:52,713 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:52.752  INFO 2025-06-13 12:22:52,752 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:52.753  INFO 2025-06-13 12:22:52,753 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:52.823  INFO 2025-06-13 12:22:52,823 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:52.826  INFO 2025-06-13 12:22:52,826 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:55.303  INFO 2025-06-13 12:22:55,303 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:55.303  INFO 2025-06-13 12:22:55,303 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:55.483  INFO 2025-06-13 12:22:55,483 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:55.486  INFO 2025-06-13 12:22:55,486 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:57.093  INFO 2025-06-13 12:22:57,093 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:22:57.093  INFO 2025-06-13 12:22:57,093 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:21.041  INFO 2025-06-13 12:32:21,041 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:21.340  INFO 2025-06-13 12:32:21,340 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:21.346  INFO 2025-06-13 12:32:21,346 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:21.352  INFO 2025-06-13 12:32:21,352 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:32:21.353  INFO 2025-06-13 12:32:21,353 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:32:21.354  INFO 2025-06-13 12:32:21,354 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:32:21.354  INFO 2025-06-13 12:32:21,354 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:32:21.354  INFO 2025-06-13 12:32:21,354 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 12:32:21.356  INFO 2025-06-13 12:32:21,356 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 12:32:21.356  INFO 2025-06-13 12:32:21,356 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 12:32:21.357  INFO 2025-06-13 12:32:21,357 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 12:32:21.363  INFO 2025-06-13 12:32:21,363 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:32:21.363  INFO 2025-06-13 12:32:21,363 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 12:32:24.946  INFO 2025-06-13 12:32:24,946 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:24.981  INFO 2025-06-13 12:32:24,981 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:25.059  INFO 2025-06-13 12:32:25,059 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:25.067  INFO 2025-06-13 12:32:25,067 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:25.098  INFO 2025-06-13 12:32:25,098 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:25.110  INFO 2025-06-13 12:32:25,110 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:25.203  INFO 2025-06-13 12:32:25,203 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:25.204  INFO 2025-06-13 12:32:25,204 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:27.036  INFO 2025-06-13 12:32:27,036 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:27.049  INFO 2025-06-13 12:32:27,049 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:27.307  INFO 2025-06-13 12:32:27,307 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:32:27.308  INFO 2025-06-13 12:32:27,308 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 12:33:13.132  INFO 2025-06-13 12:33:13,132 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 12:33:13.211  INFO 2025-06-13 12:33:13,211 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:13.212  INFO 2025-06-13 12:33:13,212 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 12:33:13.557  INFO 2025-06-13 12:33:13,557 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:13.605  INFO 2025-06-13 12:33:13,605 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:13.665  INFO 2025-06-13 12:33:13,665 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:13.668  INFO 2025-06-13 12:33:13,668 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 12:33:13.668  INFO 2025-06-13 12:33:13,668 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 12:33:13.668  INFO 2025-06-13 12:33:13,668 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 12:33:13.668  INFO 2025-06-13 12:33:13,668 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 12:33:13.668  INFO 2025-06-13 12:33:13,668 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 12:33:13.669  INFO 2025-06-13 12:33:13,669 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 12:33:13.669  INFO 2025-06-13 12:33:13,669 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 12:33:13.669  INFO 2025-06-13 12:33:13,669 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 12:33:13.672  INFO 2025-06-13 12:33:13,672 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 12:33:13.672  INFO 2025-06-13 12:33:13,672 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 12:33:15.867  INFO 2025-06-13 12:33:15,867 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:15.872  INFO 2025-06-13 12:33:15,872 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:15.903  INFO 2025-06-13 12:33:15,903 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:15.906  INFO 2025-06-13 12:33:15,906 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:15.922  INFO 2025-06-13 12:33:15,922 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:15.935  INFO 2025-06-13 12:33:15,935 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:16.046  INFO 2025-06-13 12:33:16,046 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:16.046  INFO 2025-06-13 12:33:16,046 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:23.364  INFO 2025-06-13 12:33:23,364 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:25.576  INFO 2025-06-13 12:33:25,576 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:25.578  INFO 2025-06-13 12:33:25,578 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 2
2025-06-13 12:33:25.579  INFO 2025-06-13 12:33:25,579 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : No active draft found for tree 1 and editor 2, falling back to original tree
2025-06-13 12:33:25.581  INFO 2025-06-13 12:33:25,581 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 12:33:35.060  INFO 2025-06-13 12:33:35,060 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:33:35.062  INFO 2025-06-13 12:33:35,062 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 2
2025-06-13 12:33:35.063  INFO 2025-06-13 12:33:35,063 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : No active draft found for tree 1 and editor 2, falling back to original tree
2025-06-13 12:33:35.065  INFO 2025-06-13 12:33:35,065 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 12:35:48.078  INFO 2025-06-13 12:35:48,078 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 12:35:48.081  INFO 2025-06-13 12:35:48,081 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 2
2025-06-13 12:35:48.082  INFO 2025-06-13 12:35:48,082 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : No active draft found for tree 1 and editor 2, falling back to original tree
2025-06-13 12:35:48.085  INFO 2025-06-13 12:35:48,085 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 12:47:59.224  INFO 2025-06-13 12:47:59,224 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 12:47:59.236  INFO 2025-06-13 12:47:59,236 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 12:47:59.241  INFO 2025-06-13 12:47:59,241 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 13:04:50.925  INFO 2025-06-13 13:04:50,925 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 11576 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 13:04:50.926  INFO 2025-06-13 13:04:50,926 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 13:04:51.615  INFO 2025-06-13 13:04:51,615 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 13:04:51.679  INFO 2025-06-13 13:04:51,679 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 59 ms. Found 11 JPA repository interfaces.
2025-06-13 13:04:52.513  INFO 2025-06-13 13:04:52,513 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 13:04:52.524  INFO 2025-06-13 13:04:52,524 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 13:04:52.524  INFO 2025-06-13 13:04:52,524 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 13:04:52.574  INFO 2025-06-13 13:04:52,574 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 13:04:52.574  INFO 2025-06-13 13:04:52,574 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1619 ms
2025-06-13 13:04:52.601  INFO 2025-06-13 13:04:52,601 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 13:04:52.740  INFO 2025-06-13 13:04:52,740 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 13:04:52.742  INFO 2025-06-13 13:04:52,742 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 13:04:52.751  INFO 2025-06-13 13:04:52,751 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 13:04:52.842  INFO 2025-06-13 13:04:52,842 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 13:04:52.884  INFO 2025-06-13 13:04:52,884 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 13:04:52.911  INFO 2025-06-13 13:04:52,911 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 13:04:53.151  INFO 2025-06-13 13:04:53,151 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 13:04:54.291  INFO 2025-06-13 13:04:54,291 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 13:04:54.393  INFO 2025-06-13 13:04:54,393 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 13:04:54.976  INFO 2025-06-13 13:04:54,976 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 13:04:58.183  WARN 2025-06-13 13:04:58,183 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 13:04:58.215  INFO 2025-06-13 13:04:58,215 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 13:04:58.219  INFO 2025-06-13 13:04:58,219 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 13:04:58.220  WARN 2025-06-13 13:04:58,220 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 13:04:58.583  INFO 2025-06-13 13:04:58,583 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 13:04:58.626  INFO 2025-06-13 13:04:58,626 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 13:04:59.187  INFO 2025-06-13 13:04:59,187 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 13:04:59.197  INFO 2025-06-13 13:04:59,197 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 8.583 seconds (process running for 9.219)
2025-06-13 13:04:59.205  INFO 2025-06-13 13:04:59,205 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 13:04:59.206  INFO 2025-06-13 13:04:59,206 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 13:04:59.292  INFO 2025-06-13 13:04:59,292 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 13:04:59.581  INFO 2025-06-13 13:04:59,581 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 13:04:59.599  INFO 2025-06-13 13:04:59,599 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 13:04:59.655  INFO 2025-06-13 13:04:59,655 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 13:04:59.676  INFO 2025-06-13 13:04:59,676 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 13:04:59.756  INFO 2025-06-13 13:04:59,756 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 13:04:59.770  INFO 2025-06-13 13:04:59,770 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 13:04:59.771  INFO 2025-06-13 13:04:59,771 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 13:09:56.248  INFO 2025-06-13 13:09:56,248 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 13:09:56.248  INFO 2025-06-13 13:09:56,248 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 13:09:56.250  INFO 2025-06-13 13:09:56,250 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-13 13:09:56.566  INFO 2025-06-13 13:09:56,566 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:09:56.566  INFO 2025-06-13 13:09:56,566 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:09:56.566  INFO 2025-06-13 13:09:56,566 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:09:56.638  INFO 2025-06-13 13:09:56,638 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:09:56.639  INFO 2025-06-13 13:09:56,639 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:09:56.639  INFO 2025-06-13 13:09:56,639 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:09:56.639  INFO 2025-06-13 13:09:56,639 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:09:56.639  INFO 2025-06-13 13:09:56,639 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:09:56.644  INFO 2025-06-13 13:09:56,644 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:09:56.644  INFO 2025-06-13 13:09:56,644 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:09:56.650  INFO 2025-06-13 13:09:56,650 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:09:56.691  INFO 2025-06-13 13:09:56,691 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:09:56.691  INFO 2025-06-13 13:09:56,691 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:10:11.159  INFO 2025-06-13 13:10:11,159 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 13:10:11.242  INFO 2025-06-13 13:10:11,242 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:11.255  INFO 2025-06-13 13:10:11,255 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 13:10:11.681  INFO 2025-06-13 13:10:11,681 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:11.798  INFO 2025-06-13 13:10:11,798 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:11.801  INFO 2025-06-13 13:10:11,801 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:10:11.802  INFO 2025-06-13 13:10:11,802 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:10:11.802  INFO 2025-06-13 13:10:11,802 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:10:11.802  INFO 2025-06-13 13:10:11,802 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:10:11.802  INFO 2025-06-13 13:10:11,802 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:10:11.805  INFO 2025-06-13 13:10:11,805 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:10:11.805  INFO 2025-06-13 13:10:11,805 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 13:10:11.806  INFO 2025-06-13 13:10:11,806 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 13:10:11.810  INFO 2025-06-13 13:10:11,810 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:11.814  INFO 2025-06-13 13:10:11,814 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:10:11.815  INFO 2025-06-13 13:10:11,815 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:10:14.039  INFO 2025-06-13 13:10:14,039 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:14.087  INFO 2025-06-13 13:10:14,087 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:14.131  INFO 2025-06-13 13:10:14,131 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:14.177  INFO 2025-06-13 13:10:14,177 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:14.201  INFO 2025-06-13 13:10:14,201 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:14.235  INFO 2025-06-13 13:10:14,235 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:14.979  INFO 2025-06-13 13:10:14,979 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:15.778  INFO 2025-06-13 13:10:15,778 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:21.045  INFO 2025-06-13 13:10:21,045 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:21.096  INFO 2025-06-13 13:10:21,096 --- [nio-8080-exec-6] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 13:10:21.096  INFO 2025-06-13 13:10:21,096 --- [nio-8080-exec-6] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 13:10:24.530  INFO 2025-06-13 13:10:24,530 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:24.568  INFO 2025-06-13 13:10:24,568 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:24.601  INFO 2025-06-13 13:10:24,601 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:24.616  INFO 2025-06-13 13:10:24,616 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:24.645  INFO 2025-06-13 13:10:24,645 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:24.666  INFO 2025-06-13 13:10:24,666 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:30.735  INFO 2025-06-13 13:10:30,735 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 13:10:30.891  INFO 2025-06-13 13:10:30,891 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:10:30.892  INFO 2025-06-13 13:10:30,892 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 13:10:31.425  INFO 2025-06-13 13:10:31,425 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:10:31.525  INFO 2025-06-13 13:10:31,525 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:10:31.567  INFO 2025-06-13 13:10:31,567 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:10:31.572  INFO 2025-06-13 13:10:31,572 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:10:31.572  INFO 2025-06-13 13:10:31,572 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:10:31.572  INFO 2025-06-13 13:10:31,572 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:10:31.572  INFO 2025-06-13 13:10:31,572 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:10:31.572  INFO 2025-06-13 13:10:31,572 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:10:31.575  INFO 2025-06-13 13:10:31,575 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:10:31.575  INFO 2025-06-13 13:10:31,575 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:10:31.576  INFO 2025-06-13 13:10:31,576 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:10:31.589  INFO 2025-06-13 13:10:31,589 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:10:31.589  INFO 2025-06-13 13:10:31,589 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:10:33.902  INFO 2025-06-13 13:10:33,902 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:10:33.911  INFO 2025-06-13 13:10:33,911 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:10:33.980  INFO 2025-06-13 13:10:33,980 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:10:33.994  INFO 2025-06-13 13:10:33,994 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:10:34.034  INFO 2025-06-13 13:10:34,034 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:10:34.066  INFO 2025-06-13 13:10:34,066 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:10:34.149  INFO 2025-06-13 13:10:34,149 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:10:34.152  INFO 2025-06-13 13:10:34,152 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:10:36.621  INFO 2025-06-13 13:10:36,621 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:10:36.669  INFO 2025-06-13 13:10:36,669 --- [nio-8080-exec-5] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 13:10:36.674  INFO 2025-06-13 13:10:36,674 --- [nio-8080-exec-5] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 13:10:36.674  INFO 2025-06-13 13:10:36,674 --- [nio-8080-exec-5] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 13:10:36.781  INFO 2025-06-13 13:10:36,781 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:10:43.596  INFO 2025-06-13 13:10:43,596 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 13:10:43.686  INFO 2025-06-13 13:10:43,686 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:43.688  INFO 2025-06-13 13:10:43,688 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 13:10:44.106  INFO 2025-06-13 13:10:44,106 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:44.206  INFO 2025-06-13 13:10:44,206 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:44.211  INFO 2025-06-13 13:10:44,211 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:10:44.211  INFO 2025-06-13 13:10:44,211 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:10:44.211  INFO 2025-06-13 13:10:44,211 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:10:44.211  INFO 2025-06-13 13:10:44,211 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:10:44.211  INFO 2025-06-13 13:10:44,211 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:10:44.213  INFO 2025-06-13 13:10:44,213 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:10:44.213  INFO 2025-06-13 13:10:44,213 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 13:10:44.214  INFO 2025-06-13 13:10:44,214 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 13:10:44.223  INFO 2025-06-13 13:10:44,223 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:10:44.223  INFO 2025-06-13 13:10:44,223 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:10:44.248  INFO 2025-06-13 13:10:44,248 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:46.556  INFO 2025-06-13 13:10:46,556 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:46.586  INFO 2025-06-13 13:10:46,586 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:46.599  INFO 2025-06-13 13:10:46,599 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:46.626  INFO 2025-06-13 13:10:46,626 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:46.650  INFO 2025-06-13 13:10:46,650 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:46.674  INFO 2025-06-13 13:10:46,674 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:46.722  INFO 2025-06-13 13:10:46,722 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:46.724  INFO 2025-06-13 13:10:46,724 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:47.883  INFO 2025-06-13 13:10:47,883 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:47.918  INFO 2025-06-13 13:10:47,918 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:47.981  INFO 2025-06-13 13:10:47,981 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:48.028  INFO 2025-06-13 13:10:48,028 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:48.052  INFO 2025-06-13 13:10:48,052 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:48.085  INFO 2025-06-13 13:10:48,085 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:49.668  INFO 2025-06-13 13:10:49,668 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:50.986  INFO 2025-06-13 13:10:50,986 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:51.042  INFO 2025-06-13 13:10:51,042 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:51.047  INFO 2025-06-13 13:10:51,047 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 13:10:51.049  INFO 2025-06-13 13:10:51,049 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:10:51.049  INFO 2025-06-13 13:10:51,049 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: null
2025-06-13 13:10:51.049  INFO 2025-06-13 13:10:51,049 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Draft memorials JSON is empty, falling back to original tree
2025-06-13 13:10:51.056  INFO 2025-06-13 13:10:51,056 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Returning 8 original tree memorials
2025-06-13 13:10:51.129  INFO 2025-06-13 13:10:51,129 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:51.134  INFO 2025-06-13 13:10:51,134 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 13:10:51.136  INFO 2025-06-13 13:10:51,136 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:10:51.136  INFO 2025-06-13 13:10:51,136 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Draft relations JSON: null
2025-06-13 13:10:51.136  INFO 2025-06-13 13:10:51,136 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Draft relations JSON is empty, falling back to original tree
2025-06-13 13:10:51.144  INFO 2025-06-13 13:10:51,144 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 13:10:51.334  INFO 2025-06-13 13:10:51,334 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:51.338  INFO 2025-06-13 13:10:51,338 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:10:51.338  INFO 2025-06-13 13:10:51,338 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:10:51.338  INFO 2025-06-13 13:10:51,338 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:10:51.338  INFO 2025-06-13 13:10:51,338 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:10:51.339  INFO 2025-06-13 13:10:51,339 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:10:51.340  INFO 2025-06-13 13:10:51,340 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:10:51.341  INFO 2025-06-13 13:10:51,341 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 13:10:51.341  INFO 2025-06-13 13:10:51,341 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 13:10:51.348  INFO 2025-06-13 13:10:51,348 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:10:51.349  INFO 2025-06-13 13:10:51,349 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:10:53.099  INFO 2025-06-13 13:10:53,099 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:53.139  INFO 2025-06-13 13:10:53,139 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 13:10:53.169  INFO 2025-06-13 13:10:53,169 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:10:53.174  INFO 2025-06-13 13:10:53,174 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 13:10:53.176  INFO 2025-06-13 13:10:53,176 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:10:53.176  INFO 2025-06-13 13:10:53,176 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":5,"fio":"Сергеева Мария Петровна","birthDate":"1955-08-12","deathDate":"2022-03-05","biograph...
2025-06-13 13:10:53.180  INFO 2025-06-13 13:10:53,180 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 13:11:02.012  INFO 2025-06-13 13:11:02,012 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:02.032  INFO 2025-06-13 13:11:02,032 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 13:11:02.075  INFO 2025-06-13 13:11:02,075 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:02.080  INFO 2025-06-13 13:11:02,080 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 13:11:02.080  INFO 2025-06-13 13:11:02,080 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:11:02.081  INFO 2025-06-13 13:11:02,081 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 13:11:02.083  INFO 2025-06-13 13:11:02,083 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 13:11:05.400  INFO 2025-06-13 13:11:05,400 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:05.403  INFO 2025-06-13 13:11:05,403 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:05.438  INFO 2025-06-13 13:11:05,438 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:05.443  INFO 2025-06-13 13:11:05,443 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:05.483  INFO 2025-06-13 13:11:05,483 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:05.501  INFO 2025-06-13 13:11:05,501 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:09.177  INFO 2025-06-13 13:11:09,177 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:09.240  INFO 2025-06-13 13:11:09,240 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:09.243  INFO 2025-06-13 13:11:09,243 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Attempting to submit draft with ID: 1
2025-06-13 13:11:09.245  INFO 2025-06-13 13:11:09,245 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Found draft: ID=1, status=DRAFT, editorId=3, treeId=1
2025-06-13 13:11:09.245  INFO 2025-06-13 13:11:09,245 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Draft 1 has changes: true
2025-06-13 13:11:09.245  INFO 2025-06-13 13:11:09,245 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      :   - Name changed: false
2025-06-13 13:11:09.245  INFO 2025-06-13 13:11:09,245 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      :   - Description changed: false
2025-06-13 13:11:09.245  INFO 2025-06-13 13:11:09,245 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      :   - Public status changed: false
2025-06-13 13:11:09.245  INFO 2025-06-13 13:11:09,245 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      :   - Memorials changed: true
2025-06-13 13:11:09.245  INFO 2025-06-13 13:11:09,245 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      :   - Relations changed: true
2025-06-13 13:11:09.248  INFO 2025-06-13 13:11:09,248 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Draft 1 submitted for review (status remains DRAFT) with  changes
2025-06-13 13:11:09.248  INFO 2025-06-13 13:11:09,248 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Created submission record for draft 1 to notify owner
2025-06-13 13:11:11.075  INFO 2025-06-13 13:11:11,075 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:11.075  INFO 2025-06-13 13:11:11,075 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:11.233  INFO 2025-06-13 13:11:11,233 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:11.233  INFO 2025-06-13 13:11:11,233 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:12.489  INFO 2025-06-13 13:11:12,489 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:12.490  INFO 2025-06-13 13:11:12,490 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:12.660  INFO 2025-06-13 13:11:12,660 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:12.663  INFO 2025-06-13 13:11:12,663 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:13.593  INFO 2025-06-13 13:11:13,593 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:15.566  INFO 2025-06-13 13:11:15,566 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:15.570  INFO 2025-06-13 13:11:15,570 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 13:11:15.572  INFO 2025-06-13 13:11:15,572 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:11:15.573  INFO 2025-06-13 13:11:15,573 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 13:11:15.574  INFO 2025-06-13 13:11:15,574 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 13:11:20.293  INFO 2025-06-13 13:11:20,293 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:20.313  INFO 2025-06-13 13:11:20,313 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:20.326  INFO 2025-06-13 13:11:20,326 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:20.333  INFO 2025-06-13 13:11:20,333 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:20.359  INFO 2025-06-13 13:11:20,359 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:11:30.361  INFO 2025-06-13 13:11:30,361 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 13:11:30.449  INFO 2025-06-13 13:11:30,449 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:11:30.450  INFO 2025-06-13 13:11:30,450 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 13:11:30.849  INFO 2025-06-13 13:11:30,849 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:11:30.931  INFO 2025-06-13 13:11:30,931 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:11:30.936  INFO 2025-06-13 13:11:30,936 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:11:30.936  INFO 2025-06-13 13:11:30,936 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:11:30.936  INFO 2025-06-13 13:11:30,936 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:11:30.936  INFO 2025-06-13 13:11:30,936 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:11:30.936  INFO 2025-06-13 13:11:30,936 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:11:30.937  INFO 2025-06-13 13:11:30,937 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:11:30.938  INFO 2025-06-13 13:11:30,938 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:11:30.938  INFO 2025-06-13 13:11:30,938 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:11:30.944  INFO 2025-06-13 13:11:30,944 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:11:30.944  INFO 2025-06-13 13:11:30,944 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:11:30.998  INFO 2025-06-13 13:11:30,998 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:11:33.954  INFO 2025-06-13 13:11:33,954 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:11:33.956  INFO 2025-06-13 13:11:33,956 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:11:33.993  INFO 2025-06-13 13:11:33,993 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:11:34.002  INFO 2025-06-13 13:11:34,002 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:11:34.037  INFO 2025-06-13 13:11:34,037 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:11:34.040  INFO 2025-06-13 13:11:34,040 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:11:34.138  INFO 2025-06-13 13:11:34,138 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:11:34.140  INFO 2025-06-13 13:11:34,140 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:11:36.602  INFO 2025-06-13 13:11:36,602 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:11:41.723  INFO 2025-06-13 13:11:41,723 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:11:41.726  INFO 2025-06-13 13:11:41,726 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 2
2025-06-13 13:11:41.727  INFO 2025-06-13 13:11:41,727 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : No active draft found for tree 1 and editor 2, falling back to original tree
2025-06-13 13:11:41.730  INFO 2025-06-13 13:11:41,730 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 13:12:31.598  INFO 2025-06-13 13:12:31,598 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:12:31.610  INFO 2025-06-13 13:12:31,610 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:12:31.617  INFO 2025-06-13 13:12:31,617 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:12:31.626  INFO 2025-06-13 13:12:31,626 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:12:31.674  INFO 2025-06-13 13:12:31,674 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:12:39.883  INFO 2025-06-13 13:12:39,883 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 13:12:39.979  INFO 2025-06-13 13:12:39,979 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:39.980  INFO 2025-06-13 13:12:39,980 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 13:12:40.757  INFO 2025-06-13 13:12:40,757 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:40.831  INFO 2025-06-13 13:12:40,831 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:40.859  INFO 2025-06-13 13:12:40,859 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:40.862  INFO 2025-06-13 13:12:40,862 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:12:40.862  INFO 2025-06-13 13:12:40,862 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:12:40.862  INFO 2025-06-13 13:12:40,862 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:12:40.862  INFO 2025-06-13 13:12:40,862 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:12:40.862  INFO 2025-06-13 13:12:40,862 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:12:40.863  INFO 2025-06-13 13:12:40,863 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:12:40.863  INFO 2025-06-13 13:12:40,863 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 13:12:40.863  INFO 2025-06-13 13:12:40,863 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 13:12:40.868  INFO 2025-06-13 13:12:40,868 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:12:40.868  INFO 2025-06-13 13:12:40,868 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:12:43.846  INFO 2025-06-13 13:12:43,846 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:43.918  INFO 2025-06-13 13:12:43,918 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:43.921  INFO 2025-06-13 13:12:43,921 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:43.923  INFO 2025-06-13 13:12:43,923 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:44.066  INFO 2025-06-13 13:12:44,066 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:44.082  INFO 2025-06-13 13:12:44,082 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:44.175  INFO 2025-06-13 13:12:44,175 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:44.180  INFO 2025-06-13 13:12:44,180 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:46.920  INFO 2025-06-13 13:12:46,920 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:46.924  INFO 2025-06-13 13:12:46,924 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:47.109  INFO 2025-06-13 13:12:47,109 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:47.109  INFO 2025-06-13 13:12:47,109 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:51.497  INFO 2025-06-13 13:12:51,497 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:56.398  INFO 2025-06-13 13:12:56,398 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:12:56.401  INFO 2025-06-13 13:12:56,401 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 13:12:56.402  INFO 2025-06-13 13:12:56,402 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:12:56.402  INFO 2025-06-13 13:12:56,402 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 13:12:56.403  INFO 2025-06-13 13:12:56,403 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 13:19:25.548  INFO 2025-06-13 13:19:25,548 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 13:19:25.564  INFO 2025-06-13 13:19:25,564 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 13:19:25.568  INFO 2025-06-13 13:19:25,568 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 13:21:45.709  INFO 2025-06-13 13:21:45,709 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 23872 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 13:21:45.712  INFO 2025-06-13 13:21:45,712 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 13:21:47.660  INFO 2025-06-13 13:21:47,660 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 13:21:47.832  INFO 2025-06-13 13:21:47,832 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 160 ms. Found 11 JPA repository interfaces.
2025-06-13 13:21:50.199  INFO 2025-06-13 13:21:50,199 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 13:21:50.232  INFO 2025-06-13 13:21:50,232 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 13:21:50.233  INFO 2025-06-13 13:21:50,233 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 13:21:50.360  INFO 2025-06-13 13:21:50,360 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 13:21:50.360  INFO 2025-06-13 13:21:50,360 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4580 ms
2025-06-13 13:21:50.450  INFO 2025-06-13 13:21:50,450 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 13:21:50.769  INFO 2025-06-13 13:21:50,769 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 13:21:50.771  INFO 2025-06-13 13:21:50,771 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 13:21:50.787  INFO 2025-06-13 13:21:50,787 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 13:21:50.942  INFO 2025-06-13 13:21:50,942 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 13:21:51.099  INFO 2025-06-13 13:21:51,099 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 13:21:51.172  INFO 2025-06-13 13:21:51,172 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 13:21:51.696  INFO 2025-06-13 13:21:51,696 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 13:21:53.844  INFO 2025-06-13 13:21:53,844 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 13:21:53.945  INFO 2025-06-13 13:21:53,945 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 13:21:54.569  INFO 2025-06-13 13:21:54,569 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 13:21:57.706  WARN 2025-06-13 13:21:57,706 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 13:21:57.754  INFO 2025-06-13 13:21:57,754 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 13:21:57.759  INFO 2025-06-13 13:21:57,759 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 13:21:57.761  WARN 2025-06-13 13:21:57,761 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 13:21:58.253  INFO 2025-06-13 13:21:58,253 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 13:21:58.324  INFO 2025-06-13 13:21:58,324 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 13:21:58.815  INFO 2025-06-13 13:21:58,815 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 13:21:58.823  INFO 2025-06-13 13:21:58,823 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 13.635 seconds (process running for 14.557)
2025-06-13 13:21:58.830  INFO 2025-06-13 13:21:58,830 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 13:21:58.830  INFO 2025-06-13 13:21:58,830 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 13:21:58.896  INFO 2025-06-13 13:21:58,896 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 13:21:59.163  INFO 2025-06-13 13:21:59,163 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 13:21:59.173  INFO 2025-06-13 13:21:59,173 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 13:21:59.232  INFO 2025-06-13 13:21:59,232 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 13:21:59.249  INFO 2025-06-13 13:21:59,249 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 13:21:59.325  INFO 2025-06-13 13:21:59,325 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 13:21:59.344  INFO 2025-06-13 13:21:59,344 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 13:21:59.345  INFO 2025-06-13 13:21:59,345 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 13:22:32.261  INFO 2025-06-13 13:22:32,261 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 13:22:32.261  INFO 2025-06-13 13:22:32,261 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 13:22:32.263  INFO 2025-06-13 13:22:32,263 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-13 13:22:32.445  INFO 2025-06-13 13:22:32,445 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:32.445  INFO 2025-06-13 13:22:32,445 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:32.445  INFO 2025-06-13 13:22:32,445 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:32.496  INFO 2025-06-13 13:22:32,496 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:22:32.496  INFO 2025-06-13 13:22:32,496 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:22:32.496  INFO 2025-06-13 13:22:32,496 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:22:32.496  INFO 2025-06-13 13:22:32,496 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:22:32.496  INFO 2025-06-13 13:22:32,496 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:22:32.500  INFO 2025-06-13 13:22:32,500 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:22:32.501  INFO 2025-06-13 13:22:32,501 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 13:22:32.504  INFO 2025-06-13 13:22:32,504 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 13:22:32.535  INFO 2025-06-13 13:22:32,535 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:22:32.536  INFO 2025-06-13 13:22:32,536 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:22:36.930  INFO 2025-06-13 13:22:36,930 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:37.121  INFO 2025-06-13 13:22:37,121 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:37.141  INFO 2025-06-13 13:22:37,141 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:37.274  INFO 2025-06-13 13:22:37,274 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:37.283  INFO 2025-06-13 13:22:37,283 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:37.364  INFO 2025-06-13 13:22:37,364 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:38.018  INFO 2025-06-13 13:22:38,018 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:38.866  INFO 2025-06-13 13:22:38,866 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:44.858  INFO 2025-06-13 13:22:44,858 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:44.909  INFO 2025-06-13 13:22:44,909 --- [nio-8080-exec-1] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 13:22:44.909  INFO 2025-06-13 13:22:44,909 --- [nio-8080-exec-1] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 13:22:46.509  INFO 2025-06-13 13:22:46,509 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:46.510  INFO 2025-06-13 13:22:46,510 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:46.654  INFO 2025-06-13 13:22:46,654 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:46.654  INFO 2025-06-13 13:22:46,654 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:46.806  INFO 2025-06-13 13:22:46,806 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:46.806  INFO 2025-06-13 13:22:46,806 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:22:55.451  INFO 2025-06-13 13:22:55,451 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 13:22:55.544  INFO 2025-06-13 13:22:55,544 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:22:55.554  INFO 2025-06-13 13:22:55,554 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 13:22:56.013  INFO 2025-06-13 13:22:56,013 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:22:56.090  INFO 2025-06-13 13:22:56,090 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:22:56.095  INFO 2025-06-13 13:22:56,095 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:22:56.099  INFO 2025-06-13 13:22:56,099 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:22:56.099  INFO 2025-06-13 13:22:56,099 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:22:56.099  INFO 2025-06-13 13:22:56,099 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:22:56.099  INFO 2025-06-13 13:22:56,099 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:22:56.099  INFO 2025-06-13 13:22:56,099 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:22:56.101  INFO 2025-06-13 13:22:56,101 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:22:56.101  INFO 2025-06-13 13:22:56,101 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:22:56.102  INFO 2025-06-13 13:22:56,102 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:22:56.114  INFO 2025-06-13 13:22:56,114 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:22:56.114  INFO 2025-06-13 13:22:56,114 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:22:58.697  INFO 2025-06-13 13:22:58,697 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:22:58.728  INFO 2025-06-13 13:22:58,728 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:22:58.807  INFO 2025-06-13 13:22:58,807 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:22:58.823  INFO 2025-06-13 13:22:58,823 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:22:58.847  INFO 2025-06-13 13:22:58,847 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:22:58.881  INFO 2025-06-13 13:22:58,881 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:22:58.986  INFO 2025-06-13 13:22:58,986 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:22:58.993  INFO 2025-06-13 13:22:58,993 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:23:01.399  INFO 2025-06-13 13:23:01,399 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:23:01.426  INFO 2025-06-13 13:23:01,426 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 13:23:01.430  INFO 2025-06-13 13:23:01,430 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 13:23:01.430  INFO 2025-06-13 13:23:01,430 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 13:23:01.553  INFO 2025-06-13 13:23:01,553 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:23:08.563  INFO 2025-06-13 13:23:08,563 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 13:23:08.657  INFO 2025-06-13 13:23:08,657 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:08.658  INFO 2025-06-13 13:23:08,658 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 13:23:09.378  INFO 2025-06-13 13:23:09,378 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:09.391  INFO 2025-06-13 13:23:09,391 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:09.393  INFO 2025-06-13 13:23:09,393 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:09.397  INFO 2025-06-13 13:23:09,397 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:23:09.398  INFO 2025-06-13 13:23:09,398 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:23:09.398  INFO 2025-06-13 13:23:09,398 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:23:09.398  INFO 2025-06-13 13:23:09,398 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:23:09.398  INFO 2025-06-13 13:23:09,398 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:23:09.400  INFO 2025-06-13 13:23:09,400 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:23:09.400  INFO 2025-06-13 13:23:09,400 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 13:23:09.401  INFO 2025-06-13 13:23:09,401 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 13:23:09.408  INFO 2025-06-13 13:23:09,408 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:23:09.409  INFO 2025-06-13 13:23:09,409 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:23:16.700  INFO 2025-06-13 13:23:16,700 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:16.834  INFO 2025-06-13 13:23:16,834 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:16.962  INFO 2025-06-13 13:23:16,962 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:17.024  INFO 2025-06-13 13:23:17,024 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:17.147  INFO 2025-06-13 13:23:17,147 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:17.305  INFO 2025-06-13 13:23:17,305 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:18.715  INFO 2025-06-13 13:23:18,715 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:20.285  INFO 2025-06-13 13:23:20,285 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:20.385  INFO 2025-06-13 13:23:20,385 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:20.392  INFO 2025-06-13 13:23:20,392 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 13:23:20.394  INFO 2025-06-13 13:23:20,394 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:23:20.395  INFO 2025-06-13 13:23:20,395 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: null
2025-06-13 13:23:20.395  INFO 2025-06-13 13:23:20,395 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft memorials JSON is empty, falling back to original tree
2025-06-13 13:23:20.402  INFO 2025-06-13 13:23:20,402 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Returning 8 original tree memorials
2025-06-13 13:23:20.460  INFO 2025-06-13 13:23:20,460 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:20.467  INFO 2025-06-13 13:23:20,467 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 13:23:20.468  INFO 2025-06-13 13:23:20,468 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:23:20.468  INFO 2025-06-13 13:23:20,468 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Draft relations JSON: null
2025-06-13 13:23:20.468  INFO 2025-06-13 13:23:20,468 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Draft relations JSON is empty, falling back to original tree
2025-06-13 13:23:20.478  INFO 2025-06-13 13:23:20,478 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 13:23:20.589  INFO 2025-06-13 13:23:20,589 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:20.594  INFO 2025-06-13 13:23:20,594 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:23:20.594  INFO 2025-06-13 13:23:20,594 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:23:20.594  INFO 2025-06-13 13:23:20,594 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:23:20.594  INFO 2025-06-13 13:23:20,594 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:23:20.594  INFO 2025-06-13 13:23:20,594 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:23:20.596  INFO 2025-06-13 13:23:20,596 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:23:20.596  INFO 2025-06-13 13:23:20,596 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 13:23:20.597  INFO 2025-06-13 13:23:20,597 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 13:23:20.605  INFO 2025-06-13 13:23:20,605 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:23:20.605  INFO 2025-06-13 13:23:20,605 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:23:22.430  INFO 2025-06-13 13:23:22,430 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:22.464  INFO 2025-06-13 13:23:22,464 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 13:23:22.511  INFO 2025-06-13 13:23:22,511 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:22.515  INFO 2025-06-13 13:23:22,515 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 13:23:22.516  INFO 2025-06-13 13:23:22,516 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:23:22.517  INFO 2025-06-13 13:23:22,517 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":7,"fio":"Сергеев Иван Андреевич","birthDate":"1925-04-07","deathDate":"1995-09-01","biography...
2025-06-13 13:23:22.522  INFO 2025-06-13 13:23:22,522 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 13:23:38.391  INFO 2025-06-13 13:23:38,391 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:38.413  INFO 2025-06-13 13:23:38,413 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 13:23:38.452  INFO 2025-06-13 13:23:38,452 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:38.457  INFO 2025-06-13 13:23:38,457 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 13:23:38.459  INFO 2025-06-13 13:23:38,459 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:23:38.459  INFO 2025-06-13 13:23:38,459 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 13:23:38.461  INFO 2025-06-13 13:23:38,461 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 13:23:39.977  INFO 2025-06-13 13:23:39,977 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:39.985  INFO 2025-06-13 13:23:39,985 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:40.039  INFO 2025-06-13 13:23:40,039 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:40.039  INFO 2025-06-13 13:23:40,039 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:40.094  INFO 2025-06-13 13:23:40,094 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:40.098  INFO 2025-06-13 13:23:40,098 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:42.744  INFO 2025-06-13 13:23:42,744 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:42.785  INFO 2025-06-13 13:23:42,785 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:23:42.789  INFO 2025-06-13 13:23:42,789 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Attempting to submit draft with ID: 1
2025-06-13 13:23:42.791  INFO 2025-06-13 13:23:42,791 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft: ID=1, status=DRAFT, editorId=3, treeId=1
2025-06-13 13:23:42.791  INFO 2025-06-13 13:23:42,791 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft 1 has changes: true
2025-06-13 13:23:42.791  INFO 2025-06-13 13:23:42,791 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Name changed: false
2025-06-13 13:23:42.791  INFO 2025-06-13 13:23:42,791 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Description changed: false
2025-06-13 13:23:42.791  INFO 2025-06-13 13:23:42,791 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Public status changed: false
2025-06-13 13:23:42.791  INFO 2025-06-13 13:23:42,791 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Memorials changed: true
2025-06-13 13:23:42.791  INFO 2025-06-13 13:23:42,791 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Relations changed: true
2025-06-13 13:23:42.793  INFO 2025-06-13 13:23:42,793 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft 1 submitted for review (status remains DRAFT) with  changes
2025-06-13 13:23:42.794  INFO 2025-06-13 13:23:42,794 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Created submission record for draft 1 to notify owner
2025-06-13 13:24:12.706  INFO 2025-06-13 13:24:12,706 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:12.719  INFO 2025-06-13 13:24:12,719 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:12.746  INFO 2025-06-13 13:24:12,746 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:12.760  INFO 2025-06-13 13:24:12,760 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:12.767  INFO 2025-06-13 13:24:12,767 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:12.799  INFO 2025-06-13 13:24:12,799 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:12.866  INFO 2025-06-13 13:24:12,866 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:12.870  INFO 2025-06-13 13:24:12,870 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:14.434  INFO 2025-06-13 13:24:14,434 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:14.442  INFO 2025-06-13 13:24:14,442 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:14.625  INFO 2025-06-13 13:24:14,625 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:14.630  INFO 2025-06-13 13:24:14,630 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:15.600  INFO 2025-06-13 13:24:15,600 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:17.072  INFO 2025-06-13 13:24:17,072 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:17.075  INFO 2025-06-13 13:24:17,075 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Getting draft relations by draft ID: 1
2025-06-13 13:24:17.076  INFO 2025-06-13 13:24:17,076 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:24:17.076  INFO 2025-06-13 13:24:17,076 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 13:24:17.078  INFO 2025-06-13 13:24:17,078 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 13:24:22.262  INFO 2025-06-13 13:24:22,262 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:22.265  INFO 2025-06-13 13:24:22,265 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:22.268  INFO 2025-06-13 13:24:22,268 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:22.277  INFO 2025-06-13 13:24:22,277 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:22.288  INFO 2025-06-13 13:24:22,288 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:24:29.996  INFO 2025-06-13 13:24:29,996 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 13:24:30.092  INFO 2025-06-13 13:24:30,092 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:30.092  INFO 2025-06-13 13:24:30,092 --- [nio-8080-exec-9] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 13:24:30.520  INFO 2025-06-13 13:24:30,520 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:30.587  INFO 2025-06-13 13:24:30,587 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:30.591  INFO 2025-06-13 13:24:30,591 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:30.594  INFO 2025-06-13 13:24:30,594 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:24:30.594  INFO 2025-06-13 13:24:30,594 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:24:30.595  INFO 2025-06-13 13:24:30,595 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:24:30.595  INFO 2025-06-13 13:24:30,595 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:24:30.595  INFO 2025-06-13 13:24:30,595 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:24:30.596  INFO 2025-06-13 13:24:30,596 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:24:30.596  INFO 2025-06-13 13:24:30,596 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:24:30.597  INFO 2025-06-13 13:24:30,597 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:24:30.603  INFO 2025-06-13 13:24:30,603 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:24:30.603  INFO 2025-06-13 13:24:30,603 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:24:32.572  INFO 2025-06-13 13:24:32,572 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:32.585  INFO 2025-06-13 13:24:32,585 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:32.626  INFO 2025-06-13 13:24:32,626 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:32.636  INFO 2025-06-13 13:24:32,636 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:32.665  INFO 2025-06-13 13:24:32,665 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:32.675  INFO 2025-06-13 13:24:32,675 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:32.778  INFO 2025-06-13 13:24:32,778 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:32.781  INFO 2025-06-13 13:24:32,781 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:34.005  INFO 2025-06-13 13:24:34,005 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:35.714  INFO 2025-06-13 13:24:35,714 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:35.716  INFO 2025-06-13 13:24:35,716 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Getting draft relations by draft ID: 1
2025-06-13 13:24:35.717  INFO 2025-06-13 13:24:35,717 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:24:35.717  INFO 2025-06-13 13:24:35,717 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 13:24:35.717  INFO 2025-06-13 13:24:35,717 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 13:24:46.147  INFO 2025-06-13 13:24:46,147 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:24:46.151  INFO 2025-06-13 13:24:46,151 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Getting draft relations by draft ID: 1
2025-06-13 13:24:46.152  INFO 2025-06-13 13:24:46,152 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:24:46.152  INFO 2025-06-13 13:24:46,152 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 13:24:46.153  INFO 2025-06-13 13:24:46,153 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 13:24:50.684  INFO 2025-06-13 13:24:50,684 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:05.721  INFO 2025-06-13 13:25:05,721 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:05.725  INFO 2025-06-13 13:25:05,725 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:05.751  INFO 2025-06-13 13:25:05,751 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:05.845  INFO 2025-06-13 13:25:05,845 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:05.870  INFO 2025-06-13 13:25:05,870 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:22.036  INFO 2025-06-13 13:25:22,036 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:22.096  INFO 2025-06-13 13:25:22,096 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:22.152  INFO 2025-06-13 13:25:22,152 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:22.196  INFO 2025-06-13 13:25:22,196 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:22.236  INFO 2025-06-13 13:25:22,236 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:22.301  INFO 2025-06-13 13:25:22,301 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:24.527  INFO 2025-06-13 13:25:24,527 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:25.448  INFO 2025-06-13 13:25:25,448 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:27.280  INFO 2025-06-13 13:25:27,280 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:30.175  INFO 2025-06-13 13:25:30,175 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:30.191  INFO 2025-06-13 13:25:30,191 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:30.225  INFO 2025-06-13 13:25:30,225 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:30.225  INFO 2025-06-13 13:25:30,225 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:30.284  INFO 2025-06-13 13:25:30,284 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:25:30.288  INFO 2025-06-13 13:25:30,288 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:30:55.263  INFO 2025-06-13 13:30:55,263 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 13:30:55.275  INFO 2025-06-13 13:30:55,275 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 13:30:55.305  INFO 2025-06-13 13:30:55,305 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 13:31:06.505  INFO 2025-06-13 13:31:06,505 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 13068 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 13:31:06.508  INFO 2025-06-13 13:31:06,508 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 13:31:09.132  INFO 2025-06-13 13:31:09,132 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 13:31:09.459  INFO 2025-06-13 13:31:09,459 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 282 ms. Found 11 JPA repository interfaces.
2025-06-13 13:31:11.706  INFO 2025-06-13 13:31:11,706 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 13:31:11.734  INFO 2025-06-13 13:31:11,734 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 13:31:11.735  INFO 2025-06-13 13:31:11,735 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 13:31:11.875  INFO 2025-06-13 13:31:11,875 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 13:31:11.876  INFO 2025-06-13 13:31:11,876 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5292 ms
2025-06-13 13:31:11.987  INFO 2025-06-13 13:31:11,987 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 13:31:12.352  INFO 2025-06-13 13:31:12,352 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 13:31:12.354  INFO 2025-06-13 13:31:12,354 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 13:31:12.367  INFO 2025-06-13 13:31:12,367 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 13:31:12.552  INFO 2025-06-13 13:31:12,552 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 13:31:12.692  INFO 2025-06-13 13:31:12,692 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 13:31:12.761  INFO 2025-06-13 13:31:12,761 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 13:31:13.473  INFO 2025-06-13 13:31:13,473 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 13:31:17.442  INFO 2025-06-13 13:31:17,442 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 13:31:17.625  INFO 2025-06-13 13:31:17,625 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 13:31:18.901  INFO 2025-06-13 13:31:18,901 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 13:31:25.744  WARN 2025-06-13 13:31:25,744 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 13:31:25.819  INFO 2025-06-13 13:31:25,819 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 13:31:25.825  INFO 2025-06-13 13:31:25,825 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 13:31:25.827  WARN 2025-06-13 13:31:25,827 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 13:31:26.749  INFO 2025-06-13 13:31:26,749 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 13:31:26.853  INFO 2025-06-13 13:31:26,853 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 13:31:27.706  INFO 2025-06-13 13:31:27,706 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 13:31:27.719  INFO 2025-06-13 13:31:27,719 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 21.954 seconds (process running for 23.453)
2025-06-13 13:31:27.734  INFO 2025-06-13 13:31:27,734 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 13:31:28.034  INFO 2025-06-13 13:31:28,034 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 13:31:28.040  INFO 2025-06-13 13:31:28,040 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 13:31:28.584  INFO 2025-06-13 13:31:28,584 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 13:31:28.603  INFO 2025-06-13 13:31:28,603 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 13:31:28.714  INFO 2025-06-13 13:31:28,714 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 13:31:28.770  INFO 2025-06-13 13:31:28,770 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 13:31:28.961  INFO 2025-06-13 13:31:28,961 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 13:31:28.986  INFO 2025-06-13 13:31:28,986 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 13:31:28.987  INFO 2025-06-13 13:31:28,987 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 13:33:25.619  INFO 2025-06-13 13:33:25,619 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 13:33:25.619  INFO 2025-06-13 13:33:25,619 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 13:33:25.620  INFO 2025-06-13 13:33:25,620 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 13:33:25.870  INFO 2025-06-13 13:33:25,870 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:33:25.870  INFO 2025-06-13 13:33:25,870 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:33:25.870  INFO 2025-06-13 13:33:25,870 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:33:25.923  INFO 2025-06-13 13:33:25,923 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:33:25.923  INFO 2025-06-13 13:33:25,923 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:33:25.924  INFO 2025-06-13 13:33:25,924 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:33:25.924  INFO 2025-06-13 13:33:25,924 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:33:25.924  INFO 2025-06-13 13:33:25,924 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:33:25.928  INFO 2025-06-13 13:33:25,928 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:33:25.928  INFO 2025-06-13 13:33:25,928 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:33:25.932  INFO 2025-06-13 13:33:25,932 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:33:25.968  INFO 2025-06-13 13:33:25,968 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:33:25.968  INFO 2025-06-13 13:33:25,968 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:33:43.449  INFO 2025-06-13 13:33:43,449 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 13:33:43.530  INFO 2025-06-13 13:33:43,530 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:33:43.571  INFO 2025-06-13 13:33:43,571 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 13:33:43.906  INFO 2025-06-13 13:33:43,906 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:33:44.069  INFO 2025-06-13 13:33:44,069 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:33:44.126  INFO 2025-06-13 13:33:44,126 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:33:44.131  INFO 2025-06-13 13:33:44,131 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:33:44.131  INFO 2025-06-13 13:33:44,131 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:33:44.131  INFO 2025-06-13 13:33:44,131 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:33:44.131  INFO 2025-06-13 13:33:44,131 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:33:44.132  INFO 2025-06-13 13:33:44,132 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:33:44.134  INFO 2025-06-13 13:33:44,134 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:33:44.134  INFO 2025-06-13 13:33:44,134 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 13:33:44.134  INFO 2025-06-13 13:33:44,134 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 13:33:44.200  INFO 2025-06-13 13:33:44,200 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:33:44.201  INFO 2025-06-13 13:33:44,201 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:33:46.971  INFO 2025-06-13 13:33:46,971 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:33:47.047  INFO 2025-06-13 13:33:47,047 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:33:47.106  INFO 2025-06-13 13:33:47,106 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:33:47.140  INFO 2025-06-13 13:33:47,140 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:33:47.181  INFO 2025-06-13 13:33:47,181 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:33:47.254  INFO 2025-06-13 13:33:47,254 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:33:47.864  INFO 2025-06-13 13:33:47,864 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:33:48.763  INFO 2025-06-13 13:33:48,763 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:33:53.437  INFO 2025-06-13 13:33:53,437 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:33:53.487  INFO 2025-06-13 13:33:53,487 --- [nio-8080-exec-6] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 13:33:53.487  INFO 2025-06-13 13:33:53,487 --- [nio-8080-exec-6] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 13:34:01.139  INFO 2025-06-13 13:34:01,139 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 13:34:01.214  INFO 2025-06-13 13:34:01,214 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:01.215  INFO 2025-06-13 13:34:01,215 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 13:34:01.646  INFO 2025-06-13 13:34:01,646 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:01.767  INFO 2025-06-13 13:34:01,767 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:01.803  INFO 2025-06-13 13:34:01,803 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:01.806  INFO 2025-06-13 13:34:01,806 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:34:01.806  INFO 2025-06-13 13:34:01,806 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:34:01.806  INFO 2025-06-13 13:34:01,806 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:34:01.807  INFO 2025-06-13 13:34:01,807 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:34:01.807  INFO 2025-06-13 13:34:01,807 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:34:01.808  INFO 2025-06-13 13:34:01,808 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:34:01.808  INFO 2025-06-13 13:34:01,808 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:34:01.809  INFO 2025-06-13 13:34:01,809 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:34:01.818  INFO 2025-06-13 13:34:01,818 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:34:01.819  INFO 2025-06-13 13:34:01,819 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:34:04.623  INFO 2025-06-13 13:34:04,623 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:04.661  INFO 2025-06-13 13:34:04,661 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:04.697  INFO 2025-06-13 13:34:04,697 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:04.724  INFO 2025-06-13 13:34:04,724 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:04.774  INFO 2025-06-13 13:34:04,774 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:04.776  INFO 2025-06-13 13:34:04,776 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:04.943  INFO 2025-06-13 13:34:04,943 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:04.959  INFO 2025-06-13 13:34:04,959 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:08.161  INFO 2025-06-13 13:34:08,161 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:08.189  INFO 2025-06-13 13:34:08,189 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 13:34:08.191  INFO 2025-06-13 13:34:08,191 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 13:34:08.191  INFO 2025-06-13 13:34:08,191 --- [nio-8080-exec-9] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 13:34:08.247  INFO 2025-06-13 13:34:08,247 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:16.192  INFO 2025-06-13 13:34:16,192 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 13:34:16.268  INFO 2025-06-13 13:34:16,268 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:16.269  INFO 2025-06-13 13:34:16,269 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 13:34:16.645  INFO 2025-06-13 13:34:16,645 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:16.805  INFO 2025-06-13 13:34:16,805 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:16.808  INFO 2025-06-13 13:34:16,808 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:34:16.808  INFO 2025-06-13 13:34:16,808 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:34:16.809  INFO 2025-06-13 13:34:16,809 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:34:16.809  INFO 2025-06-13 13:34:16,809 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:34:16.809  INFO 2025-06-13 13:34:16,809 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:34:16.811  INFO 2025-06-13 13:34:16,811 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:34:16.811  INFO 2025-06-13 13:34:16,811 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 13:34:16.812  INFO 2025-06-13 13:34:16,812 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 13:34:16.815  INFO 2025-06-13 13:34:16,815 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:16.819  INFO 2025-06-13 13:34:16,819 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:34:16.819  INFO 2025-06-13 13:34:16,819 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:34:19.583  INFO 2025-06-13 13:34:19,583 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:19.635  INFO 2025-06-13 13:34:19,635 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:19.723  INFO 2025-06-13 13:34:19,723 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:19.774  INFO 2025-06-13 13:34:19,774 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:19.905  INFO 2025-06-13 13:34:19,905 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:20.018  INFO 2025-06-13 13:34:20,018 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:21.881  INFO 2025-06-13 13:34:21,881 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:23.953  INFO 2025-06-13 13:34:23,953 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:24.034  INFO 2025-06-13 13:34:24,034 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:24.041  INFO 2025-06-13 13:34:24,041 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 13:34:24.043  INFO 2025-06-13 13:34:24,043 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:34:24.043  INFO 2025-06-13 13:34:24,043 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: null
2025-06-13 13:34:24.043  INFO 2025-06-13 13:34:24,043 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft memorials JSON is empty, falling back to original tree
2025-06-13 13:34:24.048  INFO 2025-06-13 13:34:24,048 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Returning 8 original tree memorials
2025-06-13 13:34:24.135  INFO 2025-06-13 13:34:24,135 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:24.141  INFO 2025-06-13 13:34:24,141 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 13:34:24.143  INFO 2025-06-13 13:34:24,143 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:34:24.143  INFO 2025-06-13 13:34:24,143 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Draft relations JSON: null
2025-06-13 13:34:24.143  INFO 2025-06-13 13:34:24,143 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Draft relations JSON is empty, falling back to original tree
2025-06-13 13:34:24.150  INFO 2025-06-13 13:34:24,150 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 13:34:24.287  INFO 2025-06-13 13:34:24,287 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:24.291  INFO 2025-06-13 13:34:24,291 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:34:24.291  INFO 2025-06-13 13:34:24,291 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:34:24.291  INFO 2025-06-13 13:34:24,291 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:34:24.291  INFO 2025-06-13 13:34:24,291 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:34:24.291  INFO 2025-06-13 13:34:24,291 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:34:24.293  INFO 2025-06-13 13:34:24,293 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:34:24.293  INFO 2025-06-13 13:34:24,293 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 13:34:24.294  INFO 2025-06-13 13:34:24,294 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 13:34:24.303  INFO 2025-06-13 13:34:24,303 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:34:24.304  INFO 2025-06-13 13:34:24,304 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:34:26.115  INFO 2025-06-13 13:34:26,115 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:26.160  INFO 2025-06-13 13:34:26,160 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 13:34:26.246  INFO 2025-06-13 13:34:26,246 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:26.252  INFO 2025-06-13 13:34:26,252 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 13:34:26.253  INFO 2025-06-13 13:34:26,253 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:34:26.254  INFO 2025-06-13 13:34:26,254 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":4,"fio":"Иванов Владимир Викторович","birthDate":"2003-09-19","deathDate":"2024-12-18","biogr...
2025-06-13 13:34:26.260  INFO 2025-06-13 13:34:26,260 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 13:34:34.702  INFO 2025-06-13 13:34:34,702 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:34.725  INFO 2025-06-13 13:34:34,725 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 13:34:34.775  INFO 2025-06-13 13:34:34,775 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:34.780  INFO 2025-06-13 13:34:34,780 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 13:34:34.781  INFO 2025-06-13 13:34:34,781 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:34:34.782  INFO 2025-06-13 13:34:34,782 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 13:34:34.783  INFO 2025-06-13 13:34:34,783 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 13:34:37.636  INFO 2025-06-13 13:34:37,636 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:37.654  INFO 2025-06-13 13:34:37,654 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:37.724  INFO 2025-06-13 13:34:37,724 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:37.732  INFO 2025-06-13 13:34:37,732 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:37.800  INFO 2025-06-13 13:34:37,800 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:37.800  INFO 2025-06-13 13:34:37,800 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:40.296  INFO 2025-06-13 13:34:40,296 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:40.340  INFO 2025-06-13 13:34:40,340 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:34:40.344  INFO 2025-06-13 13:34:40,344 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Attempting to submit draft with ID: 1
2025-06-13 13:34:40.346  INFO 2025-06-13 13:34:40,346 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Found draft: ID=1, status=DRAFT, editorId=3, treeId=1
2025-06-13 13:34:40.346  INFO 2025-06-13 13:34:40,346 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Draft 1 has changes: true
2025-06-13 13:34:40.346  INFO 2025-06-13 13:34:40,346 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      :   - Name changed: false
2025-06-13 13:34:40.346  INFO 2025-06-13 13:34:40,346 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      :   - Description changed: false
2025-06-13 13:34:40.346  INFO 2025-06-13 13:34:40,346 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      :   - Public status changed: false
2025-06-13 13:34:40.347  INFO 2025-06-13 13:34:40,347 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      :   - Memorials changed: true
2025-06-13 13:34:40.347  INFO 2025-06-13 13:34:40,347 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      :   - Relations changed: true
2025-06-13 13:34:40.350  INFO 2025-06-13 13:34:40,350 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Draft 1 submitted for review (status remains DRAFT) with  changes
2025-06-13 13:34:40.350  INFO 2025-06-13 13:34:40,350 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Created submission record for draft 1 to notify owner
2025-06-13 13:34:48.317  INFO 2025-06-13 13:34:48,317 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 13:34:48.416  INFO 2025-06-13 13:34:48,416 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:48.417  INFO 2025-06-13 13:34:48,417 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 13:34:48.890  INFO 2025-06-13 13:34:48,890 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:48.978  INFO 2025-06-13 13:34:48,978 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:48.980  INFO 2025-06-13 13:34:48,980 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:34:48.981  INFO 2025-06-13 13:34:48,981 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:34:48.981  INFO 2025-06-13 13:34:48,981 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:34:48.981  INFO 2025-06-13 13:34:48,981 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:34:48.981  INFO 2025-06-13 13:34:48,981 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:34:48.982  INFO 2025-06-13 13:34:48,982 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:34:48.982  INFO 2025-06-13 13:34:48,982 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:34:48.983  INFO 2025-06-13 13:34:48,983 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:34:48.990  INFO 2025-06-13 13:34:48,990 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:34:48.990  INFO 2025-06-13 13:34:48,990 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:34:49.027  INFO 2025-06-13 13:34:49,027 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:50.723  INFO 2025-06-13 13:34:50,723 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:50.728  INFO 2025-06-13 13:34:50,728 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:50.785  INFO 2025-06-13 13:34:50,785 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:50.804  INFO 2025-06-13 13:34:50,804 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:50.851  INFO 2025-06-13 13:34:50,851 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:50.861  INFO 2025-06-13 13:34:50,861 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:50.930  INFO 2025-06-13 13:34:50,930 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:50.930  INFO 2025-06-13 13:34:50,930 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:52.969  INFO 2025-06-13 13:34:52,969 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:54.769  INFO 2025-06-13 13:34:54,769 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:34:54.773  INFO 2025-06-13 13:34:54,773 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Getting draft relations by draft ID: 1
2025-06-13 13:34:54.774  INFO 2025-06-13 13:34:54,774 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:34:54.775  INFO 2025-06-13 13:34:54,775 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 13:34:54.776  INFO 2025-06-13 13:34:54,776 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 13:35:02.744  INFO 2025-06-13 13:35:02,744 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:35:02.749  INFO 2025-06-13 13:35:02,749 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:35:02.751  INFO 2025-06-13 13:35:02,751 --- [nio-8080-exec-8] r.c.services.DraftSubmissionService      : Submission 1 approved by owner with message: Изменения одобрены
2025-06-13 13:35:02.753 ERROR 2025-06-13 13:35:02,753 --- [nio-8080-exec-8] r.c.services.DraftSubmissionService      : Error applying draft changes to original tree: Draft is not submitted for review
java.lang.RuntimeException: Draft is not submitted for review
	at ru.cemeterysystem.services.FamilyTreeDraftService.approveDraft(FamilyTreeDraftService.java:193)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeDraftService$$SpringCGLIB$$0.approveDraft(<generated>)
	at ru.cemeterysystem.services.DraftSubmissionService.respondToSubmission(DraftSubmissionService.java:85)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.DraftSubmissionService$$SpringCGLIB$$0.respondToSubmission(<generated>)
	at ru.cemeterysystem.controllers.DraftSubmissionController.respondToSubmission(DraftSubmissionController.java:52)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 13:35:02.768 ERROR 2025-06-13 13:35:02,768 --- [nio-8080-exec-8] r.c.exceptions.GlobalExceptionHandler    : Runtime exception occurred
java.lang.RuntimeException: Error applying changes to original tree: Draft is not submitted for review
	at ru.cemeterysystem.services.DraftSubmissionService.respondToSubmission(DraftSubmissionService.java:93)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.DraftSubmissionService$$SpringCGLIB$$0.respondToSubmission(<generated>)
	at ru.cemeterysystem.controllers.DraftSubmissionController.respondToSubmission(DraftSubmissionController.java:52)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 13:35:05.291  INFO 2025-06-13 13:35:05,291 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:35:05.293  INFO 2025-06-13 13:35:05,293 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:35:05.300  INFO 2025-06-13 13:35:05,300 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:35:05.311  INFO 2025-06-13 13:35:05,311 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:35:05.366  INFO 2025-06-13 13:35:05,366 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:36:49.074  INFO 2025-06-13 13:36:49,074 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 13:36:49.078  INFO 2025-06-13 13:36:49,078 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 13:36:49.081  INFO 2025-06-13 13:36:49,081 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 13:37:24.730  INFO 2025-06-13 13:37:24,730 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 21328 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 13:37:24.733  INFO 2025-06-13 13:37:24,733 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 13:37:25.493  INFO 2025-06-13 13:37:25,493 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 13:37:25.568  INFO 2025-06-13 13:37:25,568 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 68 ms. Found 11 JPA repository interfaces.
2025-06-13 13:37:26.307  INFO 2025-06-13 13:37:26,307 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 13:37:26.325  INFO 2025-06-13 13:37:26,325 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 13:37:26.325  INFO 2025-06-13 13:37:26,325 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 13:37:26.418  INFO 2025-06-13 13:37:26,418 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 13:37:26.419  INFO 2025-06-13 13:37:26,419 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1641 ms
2025-06-13 13:37:26.457  INFO 2025-06-13 13:37:26,457 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 13:37:26.694  INFO 2025-06-13 13:37:26,694 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 13:37:26.696  INFO 2025-06-13 13:37:26,696 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 13:37:26.706  INFO 2025-06-13 13:37:26,706 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 13:37:26.832  INFO 2025-06-13 13:37:26,832 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 13:37:26.924  INFO 2025-06-13 13:37:26,924 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 13:37:26.975  INFO 2025-06-13 13:37:26,975 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 13:37:27.337  INFO 2025-06-13 13:37:27,337 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 13:37:29.217  INFO 2025-06-13 13:37:29,217 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 13:37:29.320  INFO 2025-06-13 13:37:29,320 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 13:37:29.919  INFO 2025-06-13 13:37:29,919 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 13:37:33.339  WARN 2025-06-13 13:37:33,339 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 13:37:33.376  INFO 2025-06-13 13:37:33,376 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 13:37:33.379  INFO 2025-06-13 13:37:33,379 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 13:37:33.380  WARN 2025-06-13 13:37:33,380 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 13:37:33.707  INFO 2025-06-13 13:37:33,707 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 13:37:33.747  INFO 2025-06-13 13:37:33,747 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 13:37:34.183  INFO 2025-06-13 13:37:34,183 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 13:37:34.191  INFO 2025-06-13 13:37:34,191 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 9.934 seconds (process running for 10.723)
2025-06-13 13:37:34.373  INFO 2025-06-13 13:37:34,373 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 13:37:34.375  INFO 2025-06-13 13:37:34,375 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 13:37:34.622  INFO 2025-06-13 13:37:34,622 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 13:37:34.629  INFO 2025-06-13 13:37:34,629 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 13:37:34.676  INFO 2025-06-13 13:37:34,676 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 13:37:34.689  INFO 2025-06-13 13:37:34,689 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 13:37:34.747  INFO 2025-06-13 13:37:34,747 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 13:37:34.760  INFO 2025-06-13 13:37:34,760 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 13:37:34.760  INFO 2025-06-13 13:37:34,760 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 13:37:34.762  INFO 2025-06-13 13:37:34,762 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 13:37:46.331  INFO 2025-06-13 13:37:46,331 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 13:37:46.331  INFO 2025-06-13 13:37:46,331 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 13:37:46.333  INFO 2025-06-13 13:37:46,333 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-13 13:37:46.420  INFO 2025-06-13 13:37:46,420 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 13:37:46.523  INFO 2025-06-13 13:37:46,523 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:37:46.589  INFO 2025-06-13 13:37:46,589 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 13:37:47.074  INFO 2025-06-13 13:37:47,074 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:37:47.075  INFO 2025-06-13 13:37:47,075 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:37:47.075  INFO 2025-06-13 13:37:47,075 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:37:47.084  INFO 2025-06-13 13:37:47,084 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:37:47.085  INFO 2025-06-13 13:37:47,085 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:37:47.085  INFO 2025-06-13 13:37:47,085 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:37:47.085  INFO 2025-06-13 13:37:47,085 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:37:47.085  INFO 2025-06-13 13:37:47,085 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:37:47.089  INFO 2025-06-13 13:37:47,089 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:37:47.089  INFO 2025-06-13 13:37:47,089 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 13:37:47.093  INFO 2025-06-13 13:37:47,093 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 13:37:47.119  INFO 2025-06-13 13:37:47,119 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:37:47.119  INFO 2025-06-13 13:37:47,119 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:37:49.111  INFO 2025-06-13 13:37:49,111 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:37:49.286  INFO 2025-06-13 13:37:49,286 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:37:49.308  INFO 2025-06-13 13:37:49,308 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:37:49.462  INFO 2025-06-13 13:37:49,462 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:37:49.462  INFO 2025-06-13 13:37:49,462 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:37:49.519  INFO 2025-06-13 13:37:49,519 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:37:50.579  INFO 2025-06-13 13:37:50,579 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:37:51.308  INFO 2025-06-13 13:37:51,308 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:37:54.477  INFO 2025-06-13 13:37:54,477 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:37:54.515  INFO 2025-06-13 13:37:54,515 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 13:37:54.515  INFO 2025-06-13 13:37:54,515 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 13:38:01.112  INFO 2025-06-13 13:38:01,112 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 13:38:01.193  INFO 2025-06-13 13:38:01,193 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:01.194  INFO 2025-06-13 13:38:01,194 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 13:38:01.644  INFO 2025-06-13 13:38:01,644 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:01.768  INFO 2025-06-13 13:38:01,768 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:01.771  INFO 2025-06-13 13:38:01,771 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:01.774  INFO 2025-06-13 13:38:01,774 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:38:01.775  INFO 2025-06-13 13:38:01,775 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:38:01.775  INFO 2025-06-13 13:38:01,775 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:38:01.775  INFO 2025-06-13 13:38:01,775 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:38:01.775  INFO 2025-06-13 13:38:01,775 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:38:01.776  INFO 2025-06-13 13:38:01,776 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:38:01.776  INFO 2025-06-13 13:38:01,776 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:38:01.777  INFO 2025-06-13 13:38:01,777 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:38:01.799  INFO 2025-06-13 13:38:01,799 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:38:01.799  INFO 2025-06-13 13:38:01,799 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:38:03.484  INFO 2025-06-13 13:38:03,484 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:03.492  INFO 2025-06-13 13:38:03,492 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:03.536  INFO 2025-06-13 13:38:03,536 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:03.563  INFO 2025-06-13 13:38:03,563 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:03.583  INFO 2025-06-13 13:38:03,583 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:03.626  INFO 2025-06-13 13:38:03,626 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:03.712  INFO 2025-06-13 13:38:03,712 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:03.712  INFO 2025-06-13 13:38:03,712 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:05.860  INFO 2025-06-13 13:38:05,860 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:05.884  INFO 2025-06-13 13:38:05,884 --- [nio-8080-exec-6] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 13:38:05.886  INFO 2025-06-13 13:38:05,886 --- [nio-8080-exec-6] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 13:38:05.886  INFO 2025-06-13 13:38:05,886 --- [nio-8080-exec-6] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 13:38:05.947  INFO 2025-06-13 13:38:05,947 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:12.613  INFO 2025-06-13 13:38:12,613 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 13:38:12.704  INFO 2025-06-13 13:38:12,704 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:12.705  INFO 2025-06-13 13:38:12,705 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 13:38:13.169  INFO 2025-06-13 13:38:13,169 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:13.318  INFO 2025-06-13 13:38:13,318 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:13.347  INFO 2025-06-13 13:38:13,347 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:13.351  INFO 2025-06-13 13:38:13,351 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:38:13.352  INFO 2025-06-13 13:38:13,352 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:38:13.352  INFO 2025-06-13 13:38:13,352 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:38:13.352  INFO 2025-06-13 13:38:13,352 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:38:13.352  INFO 2025-06-13 13:38:13,352 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:38:13.354  INFO 2025-06-13 13:38:13,354 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:38:13.354  INFO 2025-06-13 13:38:13,354 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 13:38:13.355  INFO 2025-06-13 13:38:13,355 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 13:38:13.364  INFO 2025-06-13 13:38:13,364 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:38:13.365  INFO 2025-06-13 13:38:13,365 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:38:15.407  INFO 2025-06-13 13:38:15,407 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:15.469  INFO 2025-06-13 13:38:15,469 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:15.568  INFO 2025-06-13 13:38:15,568 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:15.634  INFO 2025-06-13 13:38:15,634 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:15.645  INFO 2025-06-13 13:38:15,645 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:15.743  INFO 2025-06-13 13:38:15,743 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:17.502  INFO 2025-06-13 13:38:17,502 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:18.772  INFO 2025-06-13 13:38:18,772 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:18.868  INFO 2025-06-13 13:38:18,868 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:18.874  INFO 2025-06-13 13:38:18,874 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 13:38:18.877  INFO 2025-06-13 13:38:18,877 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:38:18.877  INFO 2025-06-13 13:38:18,877 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: null
2025-06-13 13:38:18.877  INFO 2025-06-13 13:38:18,877 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft memorials JSON is empty, falling back to original tree
2025-06-13 13:38:18.885  INFO 2025-06-13 13:38:18,885 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Returning 8 original tree memorials
2025-06-13 13:38:18.987  INFO 2025-06-13 13:38:18,987 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:18.997  INFO 2025-06-13 13:38:18,997 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 13:38:18.998  INFO 2025-06-13 13:38:18,998 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:38:18.999  INFO 2025-06-13 13:38:18,999 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft relations JSON: null
2025-06-13 13:38:18.999  INFO 2025-06-13 13:38:18,999 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft relations JSON is empty, falling back to original tree
2025-06-13 13:38:19.009  INFO 2025-06-13 13:38:19,009 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 13:38:19.157  INFO 2025-06-13 13:38:19,157 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:19.161  INFO 2025-06-13 13:38:19,161 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:38:19.161  INFO 2025-06-13 13:38:19,161 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:38:19.161  INFO 2025-06-13 13:38:19,161 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:38:19.161  INFO 2025-06-13 13:38:19,161 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:38:19.161  INFO 2025-06-13 13:38:19,161 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:38:19.163  INFO 2025-06-13 13:38:19,163 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:38:19.163  INFO 2025-06-13 13:38:19,163 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 13:38:19.163  INFO 2025-06-13 13:38:19,163 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 13:38:19.170  INFO 2025-06-13 13:38:19,170 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:38:19.171  INFO 2025-06-13 13:38:19,171 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:38:20.645  INFO 2025-06-13 13:38:20,645 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:20.677  INFO 2025-06-13 13:38:20,677 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 13:38:20.707  INFO 2025-06-13 13:38:20,707 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:20.711  INFO 2025-06-13 13:38:20,711 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 13:38:20.712  INFO 2025-06-13 13:38:20,712 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:38:20.713  INFO 2025-06-13 13:38:20,713 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":2,"fio":"Иванова Анна Сергеевна","birthDate":"1990-07-30","deathDate":"2023-02-10","biography...
2025-06-13 13:38:20.716  INFO 2025-06-13 13:38:20,716 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 13:38:28.554  INFO 2025-06-13 13:38:28,554 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:28.582  INFO 2025-06-13 13:38:28,582 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 13:38:28.626  INFO 2025-06-13 13:38:28,626 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:28.632  INFO 2025-06-13 13:38:28,632 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 13:38:28.633  INFO 2025-06-13 13:38:28,633 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:38:28.633  INFO 2025-06-13 13:38:28,633 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 13:38:28.635  INFO 2025-06-13 13:38:28,635 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 13:38:36.284  INFO 2025-06-13 13:38:36,284 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 13:38:36.371  INFO 2025-06-13 13:38:36,371 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:36.372  INFO 2025-06-13 13:38:36,372 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 13:38:36.813  INFO 2025-06-13 13:38:36,813 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:36.890  INFO 2025-06-13 13:38:36,890 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:36.893  INFO 2025-06-13 13:38:36,893 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:38:36.893  INFO 2025-06-13 13:38:36,893 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:38:36.893  INFO 2025-06-13 13:38:36,893 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:38:36.893  INFO 2025-06-13 13:38:36,893 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:38:36.893  INFO 2025-06-13 13:38:36,893 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:38:36.895  INFO 2025-06-13 13:38:36,895 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:38:36.895  INFO 2025-06-13 13:38:36,895 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:38:36.895  INFO 2025-06-13 13:38:36,895 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:38:36.900  INFO 2025-06-13 13:38:36,900 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:36.903  INFO 2025-06-13 13:38:36,903 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:38:36.903  INFO 2025-06-13 13:38:36,903 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:38:38.201  INFO 2025-06-13 13:38:38,201 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:38.204  INFO 2025-06-13 13:38:38,204 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:38.250  INFO 2025-06-13 13:38:38,250 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:38.270  INFO 2025-06-13 13:38:38,270 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:38.291  INFO 2025-06-13 13:38:38,291 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:38.338  INFO 2025-06-13 13:38:38,338 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:38.427  INFO 2025-06-13 13:38:38,427 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:38.435  INFO 2025-06-13 13:38:38,435 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:42.285  INFO 2025-06-13 13:38:42,285 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:42.289  INFO 2025-06-13 13:38:42,289 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:42.485  INFO 2025-06-13 13:38:42,485 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:42.485  INFO 2025-06-13 13:38:42,485 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:43.445  INFO 2025-06-13 13:38:43,445 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:43.451  INFO 2025-06-13 13:38:43,451 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:38:49.580  INFO 2025-06-13 13:38:49,580 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 13:38:49.674  INFO 2025-06-13 13:38:49,674 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:49.675  INFO 2025-06-13 13:38:49,675 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 13:38:50.468  INFO 2025-06-13 13:38:50,468 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:50.709  INFO 2025-06-13 13:38:50,709 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:50.765  INFO 2025-06-13 13:38:50,765 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:50.770  INFO 2025-06-13 13:38:50,770 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:38:50.770  INFO 2025-06-13 13:38:50,770 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:38:50.770  INFO 2025-06-13 13:38:50,770 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:38:50.770  INFO 2025-06-13 13:38:50,770 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:38:50.770  INFO 2025-06-13 13:38:50,770 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:38:50.772  INFO 2025-06-13 13:38:50,772 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:38:50.772  INFO 2025-06-13 13:38:50,772 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 13:38:50.773  INFO 2025-06-13 13:38:50,773 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 13:38:50.779  INFO 2025-06-13 13:38:50,779 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:38:50.780  INFO 2025-06-13 13:38:50,780 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:38:52.059  INFO 2025-06-13 13:38:52,059 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:52.160  INFO 2025-06-13 13:38:52,160 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:52.220  INFO 2025-06-13 13:38:52,220 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:52.251  INFO 2025-06-13 13:38:52,251 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:52.365  INFO 2025-06-13 13:38:52,365 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:52.524  INFO 2025-06-13 13:38:52,524 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:54.143  INFO 2025-06-13 13:38:54,143 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:54.207  INFO 2025-06-13 13:38:54,207 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:54.210  INFO 2025-06-13 13:38:54,210 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Attempting to submit draft with ID: 1
2025-06-13 13:38:54.212  INFO 2025-06-13 13:38:54,212 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Found draft: ID=1, status=DRAFT, editorId=3, treeId=1
2025-06-13 13:38:54.212  INFO 2025-06-13 13:38:54,212 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Draft 1 has changes: true
2025-06-13 13:38:54.212  INFO 2025-06-13 13:38:54,212 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      :   - Name changed: false
2025-06-13 13:38:54.212  INFO 2025-06-13 13:38:54,212 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      :   - Description changed: false
2025-06-13 13:38:54.212  INFO 2025-06-13 13:38:54,212 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      :   - Public status changed: false
2025-06-13 13:38:54.212  INFO 2025-06-13 13:38:54,212 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      :   - Memorials changed: true
2025-06-13 13:38:54.212  INFO 2025-06-13 13:38:54,212 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      :   - Relations changed: true
2025-06-13 13:38:54.215  INFO 2025-06-13 13:38:54,215 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Draft 1 submitted for review (status remains DRAFT) with  changes
2025-06-13 13:38:54.215  INFO 2025-06-13 13:38:54,215 --- [nio-8080-exec-9] r.c.services.FamilyTreeDraftService      : Created submission record for draft 1 to notify owner
2025-06-13 13:38:55.746  INFO 2025-06-13 13:38:55,746 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:55.794  INFO 2025-06-13 13:38:55,794 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:55.795  INFO 2025-06-13 13:38:55,795 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:55.830  INFO 2025-06-13 13:38:55,830 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:55.845  INFO 2025-06-13 13:38:55,845 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:55.848  INFO 2025-06-13 13:38:55,848 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:55.914  INFO 2025-06-13 13:38:55,914 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:38:55.916  INFO 2025-06-13 13:38:55,916 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:39:04.415  INFO 2025-06-13 13:39:04,415 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 13:39:04.496  INFO 2025-06-13 13:39:04,496 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:04.497  INFO 2025-06-13 13:39:04,497 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 13:39:04.784  INFO 2025-06-13 13:39:04,784 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:04.845  INFO 2025-06-13 13:39:04,845 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:04.869  INFO 2025-06-13 13:39:04,869 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:04.871  INFO 2025-06-13 13:39:04,871 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:39:04.871  INFO 2025-06-13 13:39:04,871 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:39:04.871  INFO 2025-06-13 13:39:04,871 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:39:04.871  INFO 2025-06-13 13:39:04,871 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:39:04.871  INFO 2025-06-13 13:39:04,871 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:39:04.872  INFO 2025-06-13 13:39:04,872 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:39:04.872  INFO 2025-06-13 13:39:04,872 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:39:04.872  INFO 2025-06-13 13:39:04,872 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:39:04.877  INFO 2025-06-13 13:39:04,877 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:39:04.877  INFO 2025-06-13 13:39:04,877 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:39:06.687  INFO 2025-06-13 13:39:06,687 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:06.749  INFO 2025-06-13 13:39:06,749 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:06.800  INFO 2025-06-13 13:39:06,800 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:06.838  INFO 2025-06-13 13:39:06,838 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:06.973  INFO 2025-06-13 13:39:06,973 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:07.020  INFO 2025-06-13 13:39:07,020 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:08.498  INFO 2025-06-13 13:39:08,498 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:08.521  INFO 2025-06-13 13:39:08,521 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:08.547  INFO 2025-06-13 13:39:08,547 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:08.601  INFO 2025-06-13 13:39:08,601 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:08.601  INFO 2025-06-13 13:39:08,601 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:08.617  INFO 2025-06-13 13:39:08,617 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:08.672  INFO 2025-06-13 13:39:08,672 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:08.679  INFO 2025-06-13 13:39:08,679 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:12.753  INFO 2025-06-13 13:39:12,753 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:12.758  INFO 2025-06-13 13:39:12,758 --- [nio-8080-exec-4] r.c.services.DraftSubmissionService      : Submission 1 approved by owner with message: null
2025-06-13 13:39:12.760  INFO 2025-06-13 13:39:12,760 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Applying draft 1 changes to tree 1
2025-06-13 13:39:12.761  INFO 2025-06-13 13:39:12,761 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Applied draft changes to tree 1: name='Семья Ивановых', description='Генеалогическое древо семьи Ивановых', isPublic=true
2025-06-13 13:39:12.761  INFO 2025-06-13 13:39:12,761 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Draft 1 changes applied successfully to tree 1
2025-06-13 13:39:12.761  INFO 2025-06-13 13:39:12,761 --- [nio-8080-exec-4] r.c.services.DraftSubmissionService      : Draft 1 changes applied to original tree
2025-06-13 13:39:12.810  INFO 2025-06-13 13:39:12,810 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:40.333  INFO 2025-06-13 13:39:40,333 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:40.335  INFO 2025-06-13 13:39:40,335 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:40.473  INFO 2025-06-13 13:39:40,473 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:40.476  INFO 2025-06-13 13:39:40,476 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:40.519  INFO 2025-06-13 13:39:40,519 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:40.544  INFO 2025-06-13 13:39:40,544 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:40.574  INFO 2025-06-13 13:39:40,574 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:40.677  INFO 2025-06-13 13:39:40,677 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:40.750  INFO 2025-06-13 13:39:40,750 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:42.944  INFO 2025-06-13 13:39:42,944 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:43.534  INFO 2025-06-13 13:39:43,534 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:43.602  INFO 2025-06-13 13:39:43,602 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:43.659  INFO 2025-06-13 13:39:43,659 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:44.136  INFO 2025-06-13 13:39:44,136 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:48.416  INFO 2025-06-13 13:39:48,416 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:51.487  INFO 2025-06-13 13:39:51,487 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:51.496  INFO 2025-06-13 13:39:51,496 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:51.542  INFO 2025-06-13 13:39:51,542 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:51.576  INFO 2025-06-13 13:39:51,576 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:51.607  INFO 2025-06-13 13:39:51,607 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:39:51.629  INFO 2025-06-13 13:39:51,629 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:41:45.769  INFO 2025-06-13 13:41:45,769 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 13:41:45.772  INFO 2025-06-13 13:41:45,772 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 13:41:45.780  INFO 2025-06-13 13:41:45,780 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 13:48:42.018  INFO 2025-06-13 13:48:42,018 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 18568 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 13:48:42.020  INFO 2025-06-13 13:48:42,020 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 13:48:43.008  INFO 2025-06-13 13:48:43,008 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 13:48:43.121  INFO 2025-06-13 13:48:43,121 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 104 ms. Found 11 JPA repository interfaces.
2025-06-13 13:48:44.124  INFO 2025-06-13 13:48:44,124 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 13:48:44.140  INFO 2025-06-13 13:48:44,140 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 13:48:44.140  INFO 2025-06-13 13:48:44,140 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 13:48:44.219  INFO 2025-06-13 13:48:44,219 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 13:48:44.219  INFO 2025-06-13 13:48:44,219 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2147 ms
2025-06-13 13:48:44.263  INFO 2025-06-13 13:48:44,263 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 13:48:44.490  INFO 2025-06-13 13:48:44,490 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 13:48:44.492  INFO 2025-06-13 13:48:44,492 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 13:48:44.505  INFO 2025-06-13 13:48:44,505 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 13:48:44.645  INFO 2025-06-13 13:48:44,645 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 13:48:44.752  INFO 2025-06-13 13:48:44,752 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 13:48:44.812  INFO 2025-06-13 13:48:44,812 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 13:48:45.327  INFO 2025-06-13 13:48:45,327 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 13:48:47.205  INFO 2025-06-13 13:48:47,205 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 13:48:47.296  INFO 2025-06-13 13:48:47,296 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 13:48:47.774  INFO 2025-06-13 13:48:47,774 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 13:48:51.901  WARN 2025-06-13 13:48:51,901 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 13:48:52.168  INFO 2025-06-13 13:48:52,168 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 13:48:52.179  INFO 2025-06-13 13:48:52,179 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 13:48:52.247  WARN 2025-06-13 13:48:52,247 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 13:48:52.929  INFO 2025-06-13 13:48:52,929 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 13:48:53.004  INFO 2025-06-13 13:48:53,004 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 13:48:53.636  INFO 2025-06-13 13:48:53,636 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 13:48:53.647  INFO 2025-06-13 13:48:53,647 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 12.179 seconds (process running for 13.142)
2025-06-13 13:48:53.867  INFO 2025-06-13 13:48:53,867 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 13:48:53.867  INFO 2025-06-13 13:48:53,867 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 13:48:53.871  INFO 2025-06-13 13:48:53,871 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 13:48:54.201  INFO 2025-06-13 13:48:54,201 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 13:48:54.214  INFO 2025-06-13 13:48:54,214 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 13:48:54.295  INFO 2025-06-13 13:48:54,295 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 13:48:54.316  INFO 2025-06-13 13:48:54,316 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 13:48:54.395  INFO 2025-06-13 13:48:54,395 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 13:48:54.413  INFO 2025-06-13 13:48:54,413 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 13:48:54.413  INFO 2025-06-13 13:48:54,413 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 13:49:03.335  INFO 2025-06-13 13:49:03,335 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 13:49:03.335  INFO 2025-06-13 13:49:03,335 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 13:49:03.337  INFO 2025-06-13 13:49:03,337 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2025-06-13 13:49:03.415  INFO 2025-06-13 13:49:03,415 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 13:49:03.512  INFO 2025-06-13 13:49:03,512 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:03.565  INFO 2025-06-13 13:49:03,565 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 13:49:04.803  INFO 2025-06-13 13:49:04,803 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:04.948  INFO 2025-06-13 13:49:04,948 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:05.109  INFO 2025-06-13 13:49:05,109 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:05.117  INFO 2025-06-13 13:49:05,117 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:49:05.117  INFO 2025-06-13 13:49:05,117 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:49:05.117  INFO 2025-06-13 13:49:05,117 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:49:05.118  INFO 2025-06-13 13:49:05,118 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:49:05.118  INFO 2025-06-13 13:49:05,118 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:49:05.120  INFO 2025-06-13 13:49:05,120 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:49:05.120  INFO 2025-06-13 13:49:05,120 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 13:49:05.124  INFO 2025-06-13 13:49:05,124 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 13:49:05.150  INFO 2025-06-13 13:49:05,150 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:49:05.150  INFO 2025-06-13 13:49:05,150 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:49:09.089  INFO 2025-06-13 13:49:09,089 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:09.284  INFO 2025-06-13 13:49:09,284 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:09.311  INFO 2025-06-13 13:49:09,311 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:09.537  INFO 2025-06-13 13:49:09,537 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:09.537  INFO 2025-06-13 13:49:09,537 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:09.717  INFO 2025-06-13 13:49:09,717 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:10.497  INFO 2025-06-13 13:49:10,497 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:11.895  INFO 2025-06-13 13:49:11,895 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:16.927  INFO 2025-06-13 13:49:16,927 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:16.968  INFO 2025-06-13 13:49:16,968 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 13:49:16.968  INFO 2025-06-13 13:49:16,968 --- [nio-8080-exec-3] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 13:49:32.017  INFO 2025-06-13 13:49:32,017 --- [nio-8080-exec-5] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 13:49:32.099  INFO 2025-06-13 13:49:32,099 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:49:32.100  INFO 2025-06-13 13:49:32,100 --- [nio-8080-exec-5] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 13:49:32.937  INFO 2025-06-13 13:49:32,937 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:49:33.047  INFO 2025-06-13 13:49:33,047 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:49:33.058  INFO 2025-06-13 13:49:33,058 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:49:33.063  INFO 2025-06-13 13:49:33,063 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:49:33.063  INFO 2025-06-13 13:49:33,063 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:49:33.063  INFO 2025-06-13 13:49:33,063 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:49:33.063  INFO 2025-06-13 13:49:33,063 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:49:33.063  INFO 2025-06-13 13:49:33,063 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:49:33.065  INFO 2025-06-13 13:49:33,065 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:49:33.065  INFO 2025-06-13 13:49:33,065 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:49:33.066  INFO 2025-06-13 13:49:33,066 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:49:33.075  INFO 2025-06-13 13:49:33,075 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:49:33.075  INFO 2025-06-13 13:49:33,075 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:49:35.927  INFO 2025-06-13 13:49:35,927 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:49:35.956  INFO 2025-06-13 13:49:35,956 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:49:36.016  INFO 2025-06-13 13:49:36,016 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:49:36.026  INFO 2025-06-13 13:49:36,026 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:49:36.065  INFO 2025-06-13 13:49:36,065 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:49:36.109  INFO 2025-06-13 13:49:36,109 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:49:36.312  INFO 2025-06-13 13:49:36,312 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:49:36.318  INFO 2025-06-13 13:49:36,318 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:49:39.480  INFO 2025-06-13 13:49:39,480 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:49:39.503  INFO 2025-06-13 13:49:39,503 --- [nio-8080-exec-7] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 13:49:39.505  INFO 2025-06-13 13:49:39,505 --- [nio-8080-exec-7] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 13:49:39.505  INFO 2025-06-13 13:49:39,505 --- [nio-8080-exec-7] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 13:49:39.732  INFO 2025-06-13 13:49:39,732 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:49:49.856  INFO 2025-06-13 13:49:49,856 --- [io-8080-exec-10] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 13:49:49.938  INFO 2025-06-13 13:49:49,938 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:49.939  INFO 2025-06-13 13:49:49,939 --- [io-8080-exec-10] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 13:49:50.658  INFO 2025-06-13 13:49:50,658 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:50.744  INFO 2025-06-13 13:49:50,744 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:50.753  INFO 2025-06-13 13:49:50,753 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:50.757  INFO 2025-06-13 13:49:50,757 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:49:50.757  INFO 2025-06-13 13:49:50,757 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:49:50.757  INFO 2025-06-13 13:49:50,757 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:49:50.757  INFO 2025-06-13 13:49:50,757 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:49:50.757  INFO 2025-06-13 13:49:50,757 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:49:50.759  INFO 2025-06-13 13:49:50,759 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:49:50.759  INFO 2025-06-13 13:49:50,759 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 13:49:50.760  INFO 2025-06-13 13:49:50,760 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 13:49:50.769  INFO 2025-06-13 13:49:50,769 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:49:50.770  INFO 2025-06-13 13:49:50,770 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:49:55.313  INFO 2025-06-13 13:49:55,313 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:55.322  INFO 2025-06-13 13:49:55,322 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:55.371  INFO 2025-06-13 13:49:55,371 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:55.381  INFO 2025-06-13 13:49:55,381 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:55.419  INFO 2025-06-13 13:49:55,419 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:55.423  INFO 2025-06-13 13:49:55,423 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:55.514  INFO 2025-06-13 13:49:55,514 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:55.524  INFO 2025-06-13 13:49:55,524 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:56.984  INFO 2025-06-13 13:49:56,984 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:57.095  INFO 2025-06-13 13:49:57,095 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:57.210  INFO 2025-06-13 13:49:57,210 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:57.262  INFO 2025-06-13 13:49:57,262 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:57.383  INFO 2025-06-13 13:49:57,383 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:57.615  INFO 2025-06-13 13:49:57,615 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:49:59.230  INFO 2025-06-13 13:49:59,230 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:01.329  INFO 2025-06-13 13:50:01,329 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:01.520  INFO 2025-06-13 13:50:01,520 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:01.526  INFO 2025-06-13 13:50:01,526 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 13:50:01.528  INFO 2025-06-13 13:50:01,528 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:50:01.529  INFO 2025-06-13 13:50:01,529 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: null
2025-06-13 13:50:01.529  INFO 2025-06-13 13:50:01,529 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft memorials JSON is empty, falling back to original tree
2025-06-13 13:50:01.535  INFO 2025-06-13 13:50:01,535 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Returning 8 original tree memorials
2025-06-13 13:50:01.786  INFO 2025-06-13 13:50:01,786 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:01.792  INFO 2025-06-13 13:50:01,792 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 13:50:01.795  INFO 2025-06-13 13:50:01,795 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:50:01.795  INFO 2025-06-13 13:50:01,795 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Draft relations JSON: null
2025-06-13 13:50:01.795  INFO 2025-06-13 13:50:01,795 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Draft relations JSON is empty, falling back to original tree
2025-06-13 13:50:01.808  INFO 2025-06-13 13:50:01,808 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 13:50:02.180  INFO 2025-06-13 13:50:02,180 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:02.184  INFO 2025-06-13 13:50:02,184 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:50:02.185  INFO 2025-06-13 13:50:02,185 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:50:02.185  INFO 2025-06-13 13:50:02,185 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:50:02.185  INFO 2025-06-13 13:50:02,185 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:50:02.185  INFO 2025-06-13 13:50:02,185 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:50:02.187  INFO 2025-06-13 13:50:02,187 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:50:02.187  INFO 2025-06-13 13:50:02,187 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 13:50:02.188  INFO 2025-06-13 13:50:02,188 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 13:50:02.197  INFO 2025-06-13 13:50:02,197 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:50:02.197  INFO 2025-06-13 13:50:02,197 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:50:05.916  INFO 2025-06-13 13:50:05,916 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:05.953  INFO 2025-06-13 13:50:05,953 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 13:50:06.159  INFO 2025-06-13 13:50:06,159 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:06.164  INFO 2025-06-13 13:50:06,164 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 13:50:06.166  INFO 2025-06-13 13:50:06,166 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:50:06.166  INFO 2025-06-13 13:50:06,166 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":3,"fio":"Сергеев Андрей Иванович","birthDate":"1950-10-10","deathDate":"1980-05-15","biograph...
2025-06-13 13:50:06.171  INFO 2025-06-13 13:50:06,171 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 13:50:21.780  INFO 2025-06-13 13:50:21,780 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:21.802  INFO 2025-06-13 13:50:21,802 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 13:50:21.903  INFO 2025-06-13 13:50:21,903 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:21.910  INFO 2025-06-13 13:50:21,910 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 13:50:21.911  INFO 2025-06-13 13:50:21,911 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:50:21.911  INFO 2025-06-13 13:50:21,911 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 13:50:21.913  INFO 2025-06-13 13:50:21,913 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 13:50:24.257  INFO 2025-06-13 13:50:24,257 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:24.285  INFO 2025-06-13 13:50:24,285 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:24.394  INFO 2025-06-13 13:50:24,394 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:24.402  INFO 2025-06-13 13:50:24,402 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:24.558  INFO 2025-06-13 13:50:24,558 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:24.561  INFO 2025-06-13 13:50:24,561 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:27.480  INFO 2025-06-13 13:50:27,480 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:27.572  INFO 2025-06-13 13:50:27,572 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:50:27.576  INFO 2025-06-13 13:50:27,576 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Attempting to submit draft with ID: 1
2025-06-13 13:50:27.577  INFO 2025-06-13 13:50:27,577 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Found draft: ID=1, status=DRAFT, editorId=3, treeId=1
2025-06-13 13:50:27.577  INFO 2025-06-13 13:50:27,577 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Draft 1 has changes: true
2025-06-13 13:50:27.577  INFO 2025-06-13 13:50:27,577 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      :   - Name changed: false
2025-06-13 13:50:27.577  INFO 2025-06-13 13:50:27,577 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      :   - Description changed: false
2025-06-13 13:50:27.577  INFO 2025-06-13 13:50:27,577 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      :   - Public status changed: false
2025-06-13 13:50:27.577  INFO 2025-06-13 13:50:27,577 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      :   - Memorials changed: true
2025-06-13 13:50:27.577  INFO 2025-06-13 13:50:27,577 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      :   - Relations changed: true
2025-06-13 13:50:27.578  INFO 2025-06-13 13:50:27,578 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Draft 1 submitted for review (status remains DRAFT) with  changes
2025-06-13 13:50:27.579  INFO 2025-06-13 13:50:27,579 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Created submission record for draft 1 to notify owner
2025-06-13 13:50:39.263  INFO 2025-06-13 13:50:39,263 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 13:50:39.345  INFO 2025-06-13 13:50:39,345 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:50:39.346  INFO 2025-06-13 13:50:39,346 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 13:50:40.339  INFO 2025-06-13 13:50:40,339 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:50:40.415  INFO 2025-06-13 13:50:40,415 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:50:40.486  INFO 2025-06-13 13:50:40,486 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:50:40.489  INFO 2025-06-13 13:50:40,489 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:50:40.489  INFO 2025-06-13 13:50:40,489 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:50:40.490  INFO 2025-06-13 13:50:40,490 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:50:40.490  INFO 2025-06-13 13:50:40,490 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:50:40.490  INFO 2025-06-13 13:50:40,490 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:50:40.491  INFO 2025-06-13 13:50:40,491 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:50:40.492  INFO 2025-06-13 13:50:40,492 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:50:40.493  INFO 2025-06-13 13:50:40,493 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:50:40.498  INFO 2025-06-13 13:50:40,498 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:50:40.499  INFO 2025-06-13 13:50:40,499 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:50:51.432  INFO 2025-06-13 13:50:51,432 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:50:51.455  INFO 2025-06-13 13:50:51,455 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:50:51.550  INFO 2025-06-13 13:50:51,550 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:50:51.603  INFO 2025-06-13 13:50:51,603 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:50:51.629  INFO 2025-06-13 13:50:51,629 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:50:51.637  INFO 2025-06-13 13:50:51,637 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:50:51.747  INFO 2025-06-13 13:50:51,747 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:50:51.756  INFO 2025-06-13 13:50:51,756 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:50:54.301  INFO 2025-06-13 13:50:54,301 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:05.644  INFO 2025-06-13 13:51:05,644 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:05.656  INFO 2025-06-13 13:51:05,656 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:05.656  INFO 2025-06-13 13:51:05,656 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:05.693  INFO 2025-06-13 13:51:05,693 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:05.693  INFO 2025-06-13 13:51:05,693 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:10.725  INFO 2025-06-13 13:51:10,725 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:10.732  INFO 2025-06-13 13:51:10,732 --- [nio-8080-exec-5] r.c.services.DraftSubmissionService      : Submission 1 approved by owner with message: null
2025-06-13 13:51:10.734  INFO 2025-06-13 13:51:10,734 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Applying draft 1 changes to tree 1
2025-06-13 13:51:10.735  INFO 2025-06-13 13:51:10,735 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Applied draft metadata to tree 1: name='Семья Ивановых', description='Генеалогическое древо семьи Ивановых', isPublic=true
2025-06-13 13:51:10.736  INFO 2025-06-13 13:51:10,736 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Applying 9 memorials from draft to tree 1
2025-06-13 13:51:10.755  INFO 2025-06-13 13:51:10,755 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Added memorial 9 to tree 1
2025-06-13 13:51:10.756  INFO 2025-06-13 13:51:10,756 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Applying 13 relations from draft to tree 1
2025-06-13 13:51:10.763  INFO 2025-06-13 13:51:10,763 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Removed relation 1 from tree 1
2025-06-13 13:51:10.764  INFO 2025-06-13 13:51:10,764 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Removed relation 2 from tree 1
2025-06-13 13:51:10.764  INFO 2025-06-13 13:51:10,764 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Removed relation 3 from tree 1
2025-06-13 13:51:10.765  INFO 2025-06-13 13:51:10,765 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Removed relation 4 from tree 1
2025-06-13 13:51:10.765  INFO 2025-06-13 13:51:10,765 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Removed relation 5 from tree 1
2025-06-13 13:51:10.765  INFO 2025-06-13 13:51:10,765 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Removed relation 6 from tree 1
2025-06-13 13:51:10.765  INFO 2025-06-13 13:51:10,765 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Removed relation 7 from tree 1
2025-06-13 13:51:10.766  INFO 2025-06-13 13:51:10,766 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Removed relation 8 from tree 1
2025-06-13 13:51:10.766  INFO 2025-06-13 13:51:10,766 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Removed relation 9 from tree 1
2025-06-13 13:51:10.766  INFO 2025-06-13 13:51:10,766 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Removed relation 10 from tree 1
2025-06-13 13:51:10.766  INFO 2025-06-13 13:51:10,766 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Removed relation 11 from tree 1
2025-06-13 13:51:10.766  INFO 2025-06-13 13:51:10,766 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Removed relation 12 from tree 1
2025-06-13 13:51:10.770  INFO 2025-06-13 13:51:10,770 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Created new relation between 9 and 3 in tree 1
2025-06-13 13:51:10.770  INFO 2025-06-13 13:51:10,770 --- [nio-8080-exec-5] r.c.services.FamilyTreeDraftService      : Draft 1 changes applied successfully to tree 1
2025-06-13 13:51:10.770  INFO 2025-06-13 13:51:10,770 --- [nio-8080-exec-5] r.c.services.DraftSubmissionService      : Draft 1 changes applied to original tree
2025-06-13 13:51:11.003  INFO 2025-06-13 13:51:11,003 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:18.841  INFO 2025-06-13 13:51:18,841 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:18.968  INFO 2025-06-13 13:51:18,968 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:19.076  INFO 2025-06-13 13:51:19,076 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:19.129  INFO 2025-06-13 13:51:19,129 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:19.177  INFO 2025-06-13 13:51:19,177 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:19.301  INFO 2025-06-13 13:51:19,301 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:23.606  INFO 2025-06-13 13:51:23,606 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:26.933  INFO 2025-06-13 13:51:26,933 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:31.591  INFO 2025-06-13 13:51:31,591 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:31.643  INFO 2025-06-13 13:51:31,643 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:31.798  INFO 2025-06-13 13:51:31,798 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:31.808  INFO 2025-06-13 13:51:31,808 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:31.875  INFO 2025-06-13 13:51:31,875 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:51:31.878  INFO 2025-06-13 13:51:31,878 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:53:50.910  INFO 2025-06-13 13:53:50,910 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 13:53:50.913  INFO 2025-06-13 13:53:50,913 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 13:53:50.920  INFO 2025-06-13 13:53:50,920 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-13 13:53:58.659  INFO 2025-06-13 13:53:58,659 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 15644 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-13 13:53:58.662  INFO 2025-06-13 13:53:58,662 --- [           main] r.c.CemeterySystemApplication            : No active profile set, falling back to 1 default profile: "default"
2025-06-13 13:53:59.804  INFO 2025-06-13 13:53:59,804 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 13:53:59.910  INFO 2025-06-13 13:53:59,910 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 96 ms. Found 11 JPA repository interfaces.
2025-06-13 13:54:00.912  INFO 2025-06-13 13:54:00,912 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-13 13:54:00.940  INFO 2025-06-13 13:54:00,940 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-13 13:54:00.941  INFO 2025-06-13 13:54:00,941 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-13 13:54:01.026  INFO 2025-06-13 13:54:01,026 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-13 13:54:01.026  INFO 2025-06-13 13:54:01,026 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2297 ms
2025-06-13 13:54:01.065  INFO 2025-06-13 13:54:01,065 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-13 13:54:01.291  INFO 2025-06-13 13:54:01,291 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cemetery user=SA
2025-06-13 13:54:01.295  INFO 2025-06-13 13:54:01,295 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-13 13:54:01.307  INFO 2025-06-13 13:54:01,307 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:cemetery'
2025-06-13 13:54:01.446  INFO 2025-06-13 13:54:01,446 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 13:54:01.523  INFO 2025-06-13 13:54:01,523 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-13 13:54:01.575  INFO 2025-06-13 13:54:01,575 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-13 13:54:02.061  INFO 2025-06-13 13:54:02,061 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 13:54:05.581  INFO 2025-06-13 13:54:05,581 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 13:54:05.890  INFO 2025-06-13 13:54:05,890 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 13:54:06.566  INFO 2025-06-13 13:54:06,566 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 13:54:11.248  WARN 2025-06-13 13:54:11,248 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 13:54:11.321  INFO 2025-06-13 13:54:11,321 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-13 13:54:11.326  INFO 2025-06-13 13:54:11,326 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-13 13:54:11.328  WARN 2025-06-13 13:54:11,328 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-13 13:54:11.856  INFO 2025-06-13 13:54:11,856 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-13 13:54:11.918  INFO 2025-06-13 13:54:11,918 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-13 13:54:12.522  INFO 2025-06-13 13:54:12,522 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-13 13:54:12.532  INFO 2025-06-13 13:54:12,532 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 14.453 seconds (process running for 15.271)
2025-06-13 13:54:12.539  INFO 2025-06-13 13:54:12,539 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-13 13:54:12.539  INFO 2025-06-13 13:54:12,539 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-13 13:54:12.635  INFO 2025-06-13 13:54:12,635 --- [           main] ru.cemeterysystem.DataLoader             : Initializing test data...
2025-06-13 13:54:12.902  INFO 2025-06-13 13:54:12,902 --- [           main] ru.cemeterysystem.DataLoader             : Saving users to database...
2025-06-13 13:54:12.912  INFO 2025-06-13 13:54:12,912 --- [           main] ru.cemeterysystem.DataLoader             : Saving memorials to database...
2025-06-13 13:54:12.971  INFO 2025-06-13 13:54:12,971 --- [           main] ru.cemeterysystem.DataLoader             : Saving family tree to database...
2025-06-13 13:54:12.993  INFO 2025-06-13 13:54:12,993 --- [           main] ru.cemeterysystem.DataLoader             : Test notification created for admin
2025-06-13 13:54:13.081  INFO 2025-06-13 13:54:13,081 --- [           main] ru.cemeterysystem.DataLoader             : Test moderation notification created for admin
2025-06-13 13:54:13.097  INFO 2025-06-13 13:54:13,097 --- [           main] ru.cemeterysystem.DataLoader             : Test rejected notification created for user
2025-06-13 13:54:13.098  INFO 2025-06-13 13:54:13,098 --- [           main] ru.cemeterysystem.DataLoader             : Test data initialization completed successfully
2025-06-13 13:54:34.690  INFO 2025-06-13 13:54:34,690 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 13:54:34.691  INFO 2025-06-13 13:54:34,691 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-13 13:54:34.692  INFO 2025-06-13 13:54:34,692 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-06-13 13:54:34.936  INFO 2025-06-13 13:54:34,936 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:54:34.936  INFO 2025-06-13 13:54:34,936 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:54:34.937  INFO 2025-06-13 13:54:34,937 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:54:34.995  INFO 2025-06-13 13:54:34,995 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:54:34.996  INFO 2025-06-13 13:54:34,996 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:54:34.996  INFO 2025-06-13 13:54:34,996 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:54:34.996  INFO 2025-06-13 13:54:34,996 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:54:34.996  INFO 2025-06-13 13:54:34,996 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:54:35.000  INFO 2025-06-13 13:54:35,000 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:54:35.000  INFO 2025-06-13 13:54:35,000 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:54:35.006  INFO 2025-06-13 13:54:35,006 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:54:35.042  INFO 2025-06-13 13:54:35,042 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:54:35.043  INFO 2025-06-13 13:54:35,043 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:54:44.810  INFO 2025-06-13 13:54:44,810 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:54:45.007  INFO 2025-06-13 13:54:45,007 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:54:45.073  INFO 2025-06-13 13:54:45,073 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:54:45.382  INFO 2025-06-13 13:54:45,382 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:54:45.388  INFO 2025-06-13 13:54:45,388 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:54:45.520  INFO 2025-06-13 13:54:45,520 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:55:47.754  INFO 2025-06-13 13:55:47,754 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 13:55:47.861  INFO 2025-06-13 13:55:47,861 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:55:47.885  INFO 2025-06-13 13:55:47,885 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 13:55:49.231  INFO 2025-06-13 13:55:49,231 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:55:49.485  INFO 2025-06-13 13:55:49,485 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:55:49.492  INFO 2025-06-13 13:55:49,492 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:55:49.494  INFO 2025-06-13 13:55:49,494 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:55:49.494  INFO 2025-06-13 13:55:49,494 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:55:49.495  INFO 2025-06-13 13:55:49,495 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:55:49.495  INFO 2025-06-13 13:55:49,495 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:55:49.495  INFO 2025-06-13 13:55:49,495 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:55:49.499  INFO 2025-06-13 13:55:49,499 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:55:49.500  INFO 2025-06-13 13:55:49,500 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 13:55:49.502  INFO 2025-06-13 13:55:49,502 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 13:55:49.522  INFO 2025-06-13 13:55:49,522 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:55:49.522  INFO 2025-06-13 13:55:49,522 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:55:52.022  INFO 2025-06-13 13:55:52,022 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:55:52.202  INFO 2025-06-13 13:55:52,202 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:55:52.231  INFO 2025-06-13 13:55:52,231 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:55:52.271  INFO 2025-06-13 13:55:52,271 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:55:52.321  INFO 2025-06-13 13:55:52,321 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:55:52.429  INFO 2025-06-13 13:55:52,429 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:55:52.717  INFO 2025-06-13 13:55:52,717 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:55:53.586  INFO 2025-06-13 13:55:53,586 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:55:57.931  INFO 2025-06-13 13:55:57,931 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:55:58.002  INFO 2025-06-13 13:55:58,002 --- [nio-8080-exec-7] r.c.services.FamilyTreeAccessService     : Access request notification created for tree owner 1111
2025-06-13 13:55:58.002  INFO 2025-06-13 13:55:58,002 --- [nio-8080-exec-7] r.c.services.FamilyTreeAccessService     : Access request sent for family tree 1 by user 3
2025-06-13 13:56:03.524  INFO 2025-06-13 13:56:03,524 --- [nio-8080-exec-6] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 13:56:03.614  INFO 2025-06-13 13:56:03,614 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:56:03.615  INFO 2025-06-13 13:56:03,615 --- [nio-8080-exec-6] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 13:56:03.965  INFO 2025-06-13 13:56:03,965 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:56:04.032  INFO 2025-06-13 13:56:04,032 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:56:04.036  INFO 2025-06-13 13:56:04,036 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:56:04.036  INFO 2025-06-13 13:56:04,036 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:56:04.036  INFO 2025-06-13 13:56:04,036 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:56:04.036  INFO 2025-06-13 13:56:04,036 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:56:04.036  INFO 2025-06-13 13:56:04,036 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:56:04.036  INFO 2025-06-13 13:56:04,036 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:56:04.038  INFO 2025-06-13 13:56:04,038 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:56:04.038  INFO 2025-06-13 13:56:04,038 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:56:04.039  INFO 2025-06-13 13:56:04,039 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:56:04.052  INFO 2025-06-13 13:56:04,052 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:56:04.053  INFO 2025-06-13 13:56:04,053 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:56:05.051  INFO 2025-06-13 13:56:05,051 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:56:05.066  INFO 2025-06-13 13:56:05,066 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:56:05.109  INFO 2025-06-13 13:56:05,109 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:56:05.137  INFO 2025-06-13 13:56:05,137 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:56:05.174  INFO 2025-06-13 13:56:05,174 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:56:05.202  INFO 2025-06-13 13:56:05,202 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:56:05.354  INFO 2025-06-13 13:56:05,354 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:56:05.364  INFO 2025-06-13 13:56:05,364 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:56:06.885  INFO 2025-06-13 13:56:06,885 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:56:06.914  INFO 2025-06-13 13:56:06,914 --- [nio-8080-exec-2] r.c.services.FamilyTreeAccessService     : Draft created for user 3 for family tree 1
2025-06-13 13:56:06.917  INFO 2025-06-13 13:56:06,917 --- [nio-8080-exec-2] r.c.services.FamilyTreeAccessService     : Access granted notification created for user 2222
2025-06-13 13:56:06.917  INFO 2025-06-13 13:56:06,917 --- [nio-8080-exec-2] r.c.services.FamilyTreeAccessService     : Access granted to user 3 for family tree 1 by owner 2
2025-06-13 13:56:06.968  INFO 2025-06-13 13:56:06,968 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:56:13.107  INFO 2025-06-13 13:56:13,107 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 13:56:13.184  INFO 2025-06-13 13:56:13,184 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:13.185  INFO 2025-06-13 13:56:13,185 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 13:56:13.501  INFO 2025-06-13 13:56:13,501 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:13.534  INFO 2025-06-13 13:56:13,534 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:13.538  INFO 2025-06-13 13:56:13,538 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:56:13.538  INFO 2025-06-13 13:56:13,538 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:56:13.538  INFO 2025-06-13 13:56:13,538 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:56:13.538  INFO 2025-06-13 13:56:13,538 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:56:13.538  INFO 2025-06-13 13:56:13,538 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:56:13.539  INFO 2025-06-13 13:56:13,539 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:13.539  INFO 2025-06-13 13:56:13,539 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:56:13.540  INFO 2025-06-13 13:56:13,540 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 13:56:13.541  INFO 2025-06-13 13:56:13,541 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 13:56:13.551  INFO 2025-06-13 13:56:13,551 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:56:13.551  INFO 2025-06-13 13:56:13,551 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:56:56.306  INFO 2025-06-13 13:56:56,306 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:56.314  INFO 2025-06-13 13:56:56,314 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:56.368  INFO 2025-06-13 13:56:56,368 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:56.376  INFO 2025-06-13 13:56:56,376 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:56.391  INFO 2025-06-13 13:56:56,391 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:56.400  INFO 2025-06-13 13:56:56,400 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:56.489  INFO 2025-06-13 13:56:56,489 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:56.491  INFO 2025-06-13 13:56:56,491 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:57.696  INFO 2025-06-13 13:56:57,696 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:57.696  INFO 2025-06-13 13:56:57,696 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:57.861  INFO 2025-06-13 13:56:57,861 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:57.863  INFO 2025-06-13 13:56:57,863 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:58.787  INFO 2025-06-13 13:56:58,787 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:58.821  INFO 2025-06-13 13:56:58,821 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:58.881  INFO 2025-06-13 13:56:58,881 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:58.929  INFO 2025-06-13 13:56:58,929 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:58.957  INFO 2025-06-13 13:56:58,957 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:56:59.002  INFO 2025-06-13 13:56:59,002 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:00.675  INFO 2025-06-13 13:57:00,675 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:02.244  INFO 2025-06-13 13:57:02,244 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:02.310  INFO 2025-06-13 13:57:02,310 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:02.315  INFO 2025-06-13 13:57:02,315 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 13:57:02.317  INFO 2025-06-13 13:57:02,317 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:57:02.318  INFO 2025-06-13 13:57:02,318 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: null
2025-06-13 13:57:02.318  INFO 2025-06-13 13:57:02,318 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Draft memorials JSON is empty, falling back to original tree
2025-06-13 13:57:02.327  INFO 2025-06-13 13:57:02,327 --- [nio-8080-exec-2] r.c.services.FamilyTreeDraftService      : Returning 8 original tree memorials
2025-06-13 13:57:02.384  INFO 2025-06-13 13:57:02,384 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:02.390  INFO 2025-06-13 13:57:02,390 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 13:57:02.392  INFO 2025-06-13 13:57:02,392 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:57:02.392  INFO 2025-06-13 13:57:02,392 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft relations JSON: null
2025-06-13 13:57:02.392  INFO 2025-06-13 13:57:02,392 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft relations JSON is empty, falling back to original tree
2025-06-13 13:57:02.400  INFO 2025-06-13 13:57:02,400 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Returning 12 original tree relations
2025-06-13 13:57:02.517  INFO 2025-06-13 13:57:02,517 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:02.522  INFO 2025-06-13 13:57:02,522 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:57:02.522  INFO 2025-06-13 13:57:02,522 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:57:02.522  INFO 2025-06-13 13:57:02,522 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:57:02.522  INFO 2025-06-13 13:57:02,522 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:57:02.522  INFO 2025-06-13 13:57:02,522 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 13:57:02.524  INFO 2025-06-13 13:57:02,524 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 13:57:02.524  INFO 2025-06-13 13:57:02,524 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 13:57:02.525  INFO 2025-06-13 13:57:02,525 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 13:57:02.535  INFO 2025-06-13 13:57:02,535 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:57:02.535  INFO 2025-06-13 13:57:02,535 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 13:57:04.162  INFO 2025-06-13 13:57:04,162 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:04.194  INFO 2025-06-13 13:57:04,194 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Added memorial 9 to draft JSON for tree 1 by editor 3
2025-06-13 13:57:04.219  INFO 2025-06-13 13:57:04,219 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:04.224  INFO 2025-06-13 13:57:04,224 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 13:57:04.226  INFO 2025-06-13 13:57:04,226 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:57:04.227  INFO 2025-06-13 13:57:04,227 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft memorials JSON: [{"id":8,"fio":"Сергеева Ольга Николаевна","birthDate":"1928-12-15","deathDate":"1998-06-14","biogra...
2025-06-13 13:57:04.230  INFO 2025-06-13 13:57:04,230 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Returning 9 draft memorials
2025-06-13 13:57:11.126  INFO 2025-06-13 13:57:11,126 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:11.149  INFO 2025-06-13 13:57:11,149 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 13:57:11.221  INFO 2025-06-13 13:57:11,221 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:11.243  INFO 2025-06-13 13:57:11,243 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 13:57:11.246  INFO 2025-06-13 13:57:11,246 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Found draft 1 with status DRAFT
2025-06-13 13:57:11.247  INFO 2025-06-13 13:57:11,247 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 13:57:11.251  INFO 2025-06-13 13:57:11,251 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Returning 13 draft relations
2025-06-13 13:57:13.606  INFO 2025-06-13 13:57:13,606 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:13.641  INFO 2025-06-13 13:57:13,641 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:13.663  INFO 2025-06-13 13:57:13,663 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:13.673  INFO 2025-06-13 13:57:13,673 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:13.719  INFO 2025-06-13 13:57:13,719 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:13.722  INFO 2025-06-13 13:57:13,722 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:15.445  INFO 2025-06-13 13:57:15,445 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:15.496  INFO 2025-06-13 13:57:15,496 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 13:57:15.499  INFO 2025-06-13 13:57:15,499 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Attempting to submit draft with ID: 1
2025-06-13 13:57:15.500  INFO 2025-06-13 13:57:15,500 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Found draft: ID=1, status=DRAFT, editorId=3, treeId=1
2025-06-13 13:57:15.500  INFO 2025-06-13 13:57:15,500 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft 1 has changes: true
2025-06-13 13:57:15.500  INFO 2025-06-13 13:57:15,500 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Name changed: false
2025-06-13 13:57:15.500  INFO 2025-06-13 13:57:15,500 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Description changed: false
2025-06-13 13:57:15.500  INFO 2025-06-13 13:57:15,500 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Public status changed: false
2025-06-13 13:57:15.500  INFO 2025-06-13 13:57:15,500 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Memorials changed: true
2025-06-13 13:57:15.501  INFO 2025-06-13 13:57:15,501 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      :   - Relations changed: true
2025-06-13 13:57:15.504  INFO 2025-06-13 13:57:15,504 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Draft 1 submitted for review (status remains DRAFT) with  changes
2025-06-13 13:57:15.504  INFO 2025-06-13 13:57:15,504 --- [nio-8080-exec-3] r.c.services.FamilyTreeDraftService      : Created submission record for draft 1 to notify owner
2025-06-13 13:57:22.248  INFO 2025-06-13 13:57:22,248 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 13:57:22.324  INFO 2025-06-13 13:57:22,324 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:22.325  INFO 2025-06-13 13:57:22,325 --- [nio-8080-exec-1] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 13:57:22.627  INFO 2025-06-13 13:57:22,627 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:22.731  INFO 2025-06-13 13:57:22,731 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:22.741  INFO 2025-06-13 13:57:22,741 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:22.744  INFO 2025-06-13 13:57:22,744 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:57:22.744  INFO 2025-06-13 13:57:22,744 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:57:22.744  INFO 2025-06-13 13:57:22,744 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:57:22.744  INFO 2025-06-13 13:57:22,744 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:57:22.744  INFO 2025-06-13 13:57:22,744 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:57:22.745  INFO 2025-06-13 13:57:22,745 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:57:22.745  INFO 2025-06-13 13:57:22,745 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:57:22.746  INFO 2025-06-13 13:57:22,746 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:57:22.753  INFO 2025-06-13 13:57:22,753 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:57:22.753  INFO 2025-06-13 13:57:22,753 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:57:24.134  INFO 2025-06-13 13:57:24,134 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:24.155  INFO 2025-06-13 13:57:24,155 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:24.166  INFO 2025-06-13 13:57:24,166 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:24.211  INFO 2025-06-13 13:57:24,211 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:24.215  INFO 2025-06-13 13:57:24,215 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:24.219  INFO 2025-06-13 13:57:24,219 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:24.298  INFO 2025-06-13 13:57:24,298 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:24.302  INFO 2025-06-13 13:57:24,302 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:28.695  INFO 2025-06-13 13:57:28,695 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:28.703  INFO 2025-06-13 13:57:28,703 --- [io-8080-exec-10] r.c.services.DraftSubmissionService      : Submission 1 approved by owner with message: null
2025-06-13 13:57:28.704  INFO 2025-06-13 13:57:28,704 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Applying draft 1 changes to tree 1
2025-06-13 13:57:28.705  INFO 2025-06-13 13:57:28,705 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Applied draft metadata to tree 1: name='Семья Ивановых', description='Генеалогическое древо семьи Ивановых', isPublic=true
2025-06-13 13:57:28.706  INFO 2025-06-13 13:57:28,706 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Applying 9 memorials from draft to tree 1
2025-06-13 13:57:28.723  INFO 2025-06-13 13:57:28,723 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Added memorial 9 to tree 1
2025-06-13 13:57:28.724  INFO 2025-06-13 13:57:28,724 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Applying relation changes: 13 draft relations, 0 original relations
2025-06-13 13:57:28.727  INFO 2025-06-13 13:57:28,727 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Created new relation between 9 and 2 in tree 1
2025-06-13 13:57:28.727  INFO 2025-06-13 13:57:28,727 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Applied relation changes to tree 1
2025-06-13 13:57:28.727  INFO 2025-06-13 13:57:28,727 --- [io-8080-exec-10] r.c.services.FamilyTreeDraftService      : Draft 1 changes applied successfully to tree 1
2025-06-13 13:57:28.727  INFO 2025-06-13 13:57:28,727 --- [io-8080-exec-10] r.c.services.DraftSubmissionService      : Draft 1 changes applied to original tree
2025-06-13 13:57:28.764  INFO 2025-06-13 13:57:28,764 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:31.915  INFO 2025-06-13 13:57:31,915 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:31.951  INFO 2025-06-13 13:57:31,951 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:31.978  INFO 2025-06-13 13:57:31,978 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:32.063  INFO 2025-06-13 13:57:32,063 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:32.096  INFO 2025-06-13 13:57:32,096 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:32.119  INFO 2025-06-13 13:57:32,119 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:33.644  INFO 2025-06-13 13:57:33,644 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:35.014  INFO 2025-06-13 13:57:35,014 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:40.145  INFO 2025-06-13 13:57:40,145 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:40.153  INFO 2025-06-13 13:57:40,153 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:40.183  INFO 2025-06-13 13:57:40,183 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:40.189  INFO 2025-06-13 13:57:40,189 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:40.210  INFO 2025-06-13 13:57:40,210 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:40.231  INFO 2025-06-13 13:57:40,231 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:44.955  INFO 2025-06-13 13:57:44,955 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:44.955  INFO 2025-06-13 13:57:44,955 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:45.112  INFO 2025-06-13 13:57:45,112 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:57:45.117  INFO 2025-06-13 13:57:45,117 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:59:08.812  INFO 2025-06-13 13:59:08,812 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:59:08.935  INFO 2025-06-13 13:59:08,935 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:59:08.939  INFO 2025-06-13 13:59:08,939 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:59:08.942  INFO 2025-06-13 13:59:08,942 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 13:59:08.942  INFO 2025-06-13 13:59:08,942 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 13:59:08.942  INFO 2025-06-13 13:59:08,942 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 13:59:08.942  INFO 2025-06-13 13:59:08,942 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 13:59:08.942  INFO 2025-06-13 13:59:08,942 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 13:59:08.943  INFO 2025-06-13 13:59:08,943 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 13:59:08.943  INFO 2025-06-13 13:59:08,943 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 13:59:08.944  INFO 2025-06-13 13:59:08,944 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 13:59:08.951  INFO 2025-06-13 13:59:08,951 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:59:08.952  INFO 2025-06-13 13:59:08,952 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 13:59:13.777  INFO 2025-06-13 13:59:13,777 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:59:13.802  INFO 2025-06-13 13:59:13,802 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:59:13.889  INFO 2025-06-13 13:59:13,889 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:59:13.901  INFO 2025-06-13 13:59:13,901 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:59:13.921  INFO 2025-06-13 13:59:13,921 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:59:14.004  INFO 2025-06-13 13:59:14,004 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:59:14.104  INFO 2025-06-13 13:59:14,104 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 13:59:14.109  INFO 2025-06-13 13:59:14,109 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:00:54.907  INFO 2025-06-13 14:00:54,907 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:00:54.907  INFO 2025-06-13 14:00:54,907 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:00:55.056  INFO 2025-06-13 14:00:55,056 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:00:55.057  INFO 2025-06-13 14:00:55,057 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:15:46.118  INFO 2025-06-13 14:15:46,118 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:15:46.236  INFO 2025-06-13 14:15:46,236 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:15:46.244  INFO 2025-06-13 14:15:46,244 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:15:46.247  INFO 2025-06-13 14:15:46,247 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:15:46.248  INFO 2025-06-13 14:15:46,248 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:15:46.248  INFO 2025-06-13 14:15:46,248 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:15:46.248  INFO 2025-06-13 14:15:46,248 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:15:46.248  INFO 2025-06-13 14:15:46,248 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:15:46.249  INFO 2025-06-13 14:15:46,249 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:15:46.249  INFO 2025-06-13 14:15:46,249 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:15:46.250  INFO 2025-06-13 14:15:46,250 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:15:46.257  INFO 2025-06-13 14:15:46,257 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:15:46.257  INFO 2025-06-13 14:15:46,257 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:15:49.616  INFO 2025-06-13 14:15:49,616 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:15:49.703  INFO 2025-06-13 14:15:49,703 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:15:49.745  INFO 2025-06-13 14:15:49,745 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:15:49.781  INFO 2025-06-13 14:15:49,781 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:15:49.888  INFO 2025-06-13 14:15:49,888 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:15:49.931  INFO 2025-06-13 14:15:49,931 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:15:56.085  INFO 2025-06-13 14:15:56,085 --- [nio-8080-exec-6] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 14:15:56.165  INFO 2025-06-13 14:15:56,165 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:15:56.166  INFO 2025-06-13 14:15:56,166 --- [nio-8080-exec-6] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 14:15:56.515  INFO 2025-06-13 14:15:56,515 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:15:56.607  INFO 2025-06-13 14:15:56,607 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:15:56.713  INFO 2025-06-13 14:15:56,713 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:15:56.717  INFO 2025-06-13 14:15:56,717 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:15:56.717  INFO 2025-06-13 14:15:56,717 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:15:56.717  INFO 2025-06-13 14:15:56,717 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:15:56.717  INFO 2025-06-13 14:15:56,717 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:15:56.717  INFO 2025-06-13 14:15:56,717 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 14:15:56.718  INFO 2025-06-13 14:15:56,718 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 14:15:56.718  INFO 2025-06-13 14:15:56,718 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 14:15:56.719  INFO 2025-06-13 14:15:56,719 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 14:15:56.726  INFO 2025-06-13 14:15:56,726 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 14:15:56.726  INFO 2025-06-13 14:15:56,726 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 14:15:58.957  INFO 2025-06-13 14:15:58,957 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:15:59.035  INFO 2025-06-13 14:15:59,035 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:15:59.077  INFO 2025-06-13 14:15:59,077 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:15:59.126  INFO 2025-06-13 14:15:59,126 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:15:59.206  INFO 2025-06-13 14:15:59,206 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:15:59.248  INFO 2025-06-13 14:15:59,248 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:00.099  INFO 2025-06-13 14:16:00,099 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:02.051  INFO 2025-06-13 14:16:02,051 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:02.662  INFO 2025-06-13 14:16:02,662 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:02.700  INFO 2025-06-13 14:16:02,700 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:02.735  INFO 2025-06-13 14:16:02,735 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:03.538  INFO 2025-06-13 14:16:03,538 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:03.566  INFO 2025-06-13 14:16:03,566 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:03.619  INFO 2025-06-13 14:16:03,619 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:03.621  INFO 2025-06-13 14:16:03,621 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:03.638  INFO 2025-06-13 14:16:03,638 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:03.701  INFO 2025-06-13 14:16:03,701 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:03.739  INFO 2025-06-13 14:16:03,739 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:03.744  INFO 2025-06-13 14:16:03,744 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:06.579  INFO 2025-06-13 14:16:06,579 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:06.582  INFO 2025-06-13 14:16:06,582 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:06.796  INFO 2025-06-13 14:16:06,796 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:06.804  INFO 2025-06-13 14:16:06,804 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:08.781  INFO 2025-06-13 14:16:08,781 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:08.783  INFO 2025-06-13 14:16:08,783 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:15.609  INFO 2025-06-13 14:16:15,609 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 14:16:15.686  INFO 2025-06-13 14:16:15,686 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:15.687  INFO 2025-06-13 14:16:15,687 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 14:16:16.019  INFO 2025-06-13 14:16:16,019 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:16.114  INFO 2025-06-13 14:16:16,114 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:16.158  INFO 2025-06-13 14:16:16,158 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:16.160  INFO 2025-06-13 14:16:16,160 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:16:16.161  INFO 2025-06-13 14:16:16,161 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:16:16.161  INFO 2025-06-13 14:16:16,161 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:16:16.161  INFO 2025-06-13 14:16:16,161 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:16:16.161  INFO 2025-06-13 14:16:16,161 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:16:16.161  INFO 2025-06-13 14:16:16,161 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:16:16.161  INFO 2025-06-13 14:16:16,161 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:16:16.162  INFO 2025-06-13 14:16:16,162 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:16:16.167  INFO 2025-06-13 14:16:16,167 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:16:16.167  INFO 2025-06-13 14:16:16,167 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:16:17.065  INFO 2025-06-13 14:16:17,065 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:17.074  INFO 2025-06-13 14:16:17,074 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:17.099  INFO 2025-06-13 14:16:17,099 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:17.131  INFO 2025-06-13 14:16:17,131 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:17.151  INFO 2025-06-13 14:16:17,151 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:17.163  INFO 2025-06-13 14:16:17,163 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:17.234  INFO 2025-06-13 14:16:17,234 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:17.237  INFO 2025-06-13 14:16:17,237 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:19.661  INFO 2025-06-13 14:16:19,661 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:19.672 ERROR 2025-06-13 14:16:19,672 --- [nio-8080-exec-8] r.c.exceptions.GlobalExceptionHandler    : Runtime exception occurred
java.lang.RuntimeException: Submission already reviewed
	at ru.cemeterysystem.services.DraftSubmissionService.respondToSubmission(DraftSubmissionService.java:67)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.DraftSubmissionService$$SpringCGLIB$$0.respondToSubmission(<generated>)
	at ru.cemeterysystem.controllers.DraftSubmissionController.respondToSubmission(DraftSubmissionController.java:52)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 14:16:21.776  INFO 2025-06-13 14:16:21,776 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:21.778  INFO 2025-06-13 14:16:21,778 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:24.544  INFO 2025-06-13 14:16:24,544 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:24.549 ERROR 2025-06-13 14:16:24,549 --- [nio-8080-exec-5] r.c.exceptions.GlobalExceptionHandler    : Runtime exception occurred
java.lang.RuntimeException: Submission already reviewed
	at ru.cemeterysystem.services.DraftSubmissionService.respondToSubmission(DraftSubmissionService.java:67)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.DraftSubmissionService$$SpringCGLIB$$0.respondToSubmission(<generated>)
	at ru.cemeterysystem.controllers.DraftSubmissionController.respondToSubmission(DraftSubmissionController.java:52)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 14:16:29.691  INFO 2025-06-13 14:16:29,691 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:29.691  INFO 2025-06-13 14:16:29,691 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:16:47.562  INFO 2025-06-13 14:16:47,562 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 14:16:47.654  INFO 2025-06-13 14:16:47,654 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:47.655  INFO 2025-06-13 14:16:47,655 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 14:16:48.229  INFO 2025-06-13 14:16:48,229 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:48.356  INFO 2025-06-13 14:16:48,356 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:48.371  INFO 2025-06-13 14:16:48,371 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:48.377  INFO 2025-06-13 14:16:48,377 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:16:48.377  INFO 2025-06-13 14:16:48,377 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:16:48.377  INFO 2025-06-13 14:16:48,377 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:16:48.377  INFO 2025-06-13 14:16:48,377 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:16:48.377  INFO 2025-06-13 14:16:48,377 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 14:16:48.378  INFO 2025-06-13 14:16:48,378 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 14:16:48.378  INFO 2025-06-13 14:16:48,378 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 14:16:48.379  INFO 2025-06-13 14:16:48,379 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 14:16:48.384  INFO 2025-06-13 14:16:48,384 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 14:16:48.385  INFO 2025-06-13 14:16:48,385 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 14:16:50.042  INFO 2025-06-13 14:16:50,042 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:50.118  INFO 2025-06-13 14:16:50,118 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:50.153  INFO 2025-06-13 14:16:50,153 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:50.210  INFO 2025-06-13 14:16:50,210 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:50.301  INFO 2025-06-13 14:16:50,301 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:50.349  INFO 2025-06-13 14:16:50,349 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:51.770  INFO 2025-06-13 14:16:51,770 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:53.902  INFO 2025-06-13 14:16:53,902 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:53.971  INFO 2025-06-13 14:16:53,971 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:53.976  INFO 2025-06-13 14:16:53,976 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Getting draft memorials for tree 1 and editor 3
2025-06-13 14:16:53.977  INFO 2025-06-13 14:16:53,977 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : No active draft found for tree 1 and editor 3, falling back to original tree
2025-06-13 14:16:53.981  INFO 2025-06-13 14:16:53,981 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Returning 9 original tree memorials
2025-06-13 14:16:54.038  INFO 2025-06-13 14:16:54,038 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:54.043  INFO 2025-06-13 14:16:54,043 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 14:16:54.044  INFO 2025-06-13 14:16:54,044 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : No active draft found for tree 1 and editor 3, falling back to original tree
2025-06-13 14:16:54.048  INFO 2025-06-13 14:16:54,048 --- [nio-8080-exec-8] r.c.services.FamilyTreeDraftService      : Returning 13 original tree relations
2025-06-13 14:16:54.147  INFO 2025-06-13 14:16:54,147 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:16:54.151  INFO 2025-06-13 14:16:54,151 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:16:54.151  INFO 2025-06-13 14:16:54,151 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:16:54.151  INFO 2025-06-13 14:16:54,151 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:16:54.152  INFO 2025-06-13 14:16:54,152 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:16:54.152  INFO 2025-06-13 14:16:54,152 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 14:16:54.152  INFO 2025-06-13 14:16:54,152 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 14:16:54.152  INFO 2025-06-13 14:16:54,152 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 1000)
2025-06-13 14:16:54.153  INFO 2025-06-13 14:16:54,153 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=1000
2025-06-13 14:16:54.157  INFO 2025-06-13 14:16:54,157 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 14:16:54.158  INFO 2025-06-13 14:16:54,158 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 14:17:08.641  INFO 2025-06-13 14:17:08,641 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:08.654  INFO 2025-06-13 14:17:08,654 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Copied 9 memorials and 13 relations to draft for tree 1
2025-06-13 14:17:08.654  INFO 2025-06-13 14:17:08,654 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Created new draft for tree 1 by editor 3
2025-06-13 14:17:08.659  INFO 2025-06-13 14:17:08,659 --- [nio-8080-exec-4] r.c.services.FamilyTreeDraftService      : Added relation to draft JSON for tree 1 by editor 3
2025-06-13 14:17:08.692  INFO 2025-06-13 14:17:08,692 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:08.695  INFO 2025-06-13 14:17:08,695 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Getting draft relations for tree 1 and editor 3
2025-06-13 14:17:08.696  INFO 2025-06-13 14:17:08,696 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Found draft 2 with status DRAFT
2025-06-13 14:17:08.696  INFO 2025-06-13 14:17:08,696 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Draft relations JSON: [{"id":1,"familyTreeId":1,"sourceMemorial":{"id":1,"fio":"Иванов Иван Иванович","birthDate":"1980-05...
2025-06-13 14:17:08.697  INFO 2025-06-13 14:17:08,697 --- [nio-8080-exec-7] r.c.services.FamilyTreeDraftService      : Returning 14 draft relations
2025-06-13 14:17:10.552  INFO 2025-06-13 14:17:10,552 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:10.575  INFO 2025-06-13 14:17:10,575 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:10.602  INFO 2025-06-13 14:17:10,602 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:10.605  INFO 2025-06-13 14:17:10,605 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:10.646  INFO 2025-06-13 14:17:10,646 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:10.659  INFO 2025-06-13 14:17:10,659 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:17.733  INFO 2025-06-13 14:17:17,733 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:17.733  INFO 2025-06-13 14:17:17,733 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:17.783  INFO 2025-06-13 14:17:17,783 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:17.783  INFO 2025-06-13 14:17:17,783 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:17.822  INFO 2025-06-13 14:17:17,822 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:17.832  INFO 2025-06-13 14:17:17,832 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:17.919  INFO 2025-06-13 14:17:17,919 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:17.938  INFO 2025-06-13 14:17:17,938 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:18.071  INFO 2025-06-13 14:17:18,071 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:20.608  INFO 2025-06-13 14:17:20,608 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:20.643  INFO 2025-06-13 14:17:20,643 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:17:20.645  INFO 2025-06-13 14:17:20,645 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Attempting to submit draft with ID: 2
2025-06-13 14:17:20.646  INFO 2025-06-13 14:17:20,646 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Found draft: ID=2, status=DRAFT, editorId=3, treeId=1
2025-06-13 14:17:20.646  INFO 2025-06-13 14:17:20,646 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft 2 has changes: true
2025-06-13 14:17:20.646  INFO 2025-06-13 14:17:20,646 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      :   - Name changed: false
2025-06-13 14:17:20.646  INFO 2025-06-13 14:17:20,646 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      :   - Description changed: false
2025-06-13 14:17:20.646  INFO 2025-06-13 14:17:20,646 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      :   - Public status changed: false
2025-06-13 14:17:20.646  INFO 2025-06-13 14:17:20,646 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      :   - Memorials changed: false
2025-06-13 14:17:20.646  INFO 2025-06-13 14:17:20,646 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      :   - Relations changed: true
2025-06-13 14:17:20.648  INFO 2025-06-13 14:17:20,648 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Draft 2 submitted for review (status remains DRAFT) with  changes
2025-06-13 14:17:20.649  INFO 2025-06-13 14:17:20,649 --- [nio-8080-exec-6] r.c.services.FamilyTreeDraftService      : Created submission record for draft 2 to notify owner
2025-06-13 14:17:27.431  INFO 2025-06-13 14:17:27,431 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-13 14:17:27.516  INFO 2025-06-13 14:17:27,516 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:27.517  INFO 2025-06-13 14:17:27,517 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-13 14:17:27.915  INFO 2025-06-13 14:17:27,915 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:28.058  INFO 2025-06-13 14:17:28,058 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:28.061  INFO 2025-06-13 14:17:28,061 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:17:28.061  INFO 2025-06-13 14:17:28,061 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:17:28.062  INFO 2025-06-13 14:17:28,062 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:17:28.062  INFO 2025-06-13 14:17:28,062 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:17:28.062  INFO 2025-06-13 14:17:28,062 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:17:28.062  INFO 2025-06-13 14:17:28,062 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:17:28.062  INFO 2025-06-13 14:17:28,062 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:17:28.063  INFO 2025-06-13 14:17:28,063 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:17:28.068  INFO 2025-06-13 14:17:28,068 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:28.068  INFO 2025-06-13 14:17:28,068 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:17:28.068  INFO 2025-06-13 14:17:28,068 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:17:29.833  INFO 2025-06-13 14:17:29,833 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:29.849  INFO 2025-06-13 14:17:29,849 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:29.883  INFO 2025-06-13 14:17:29,883 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:29.894  INFO 2025-06-13 14:17:29,894 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:29.925  INFO 2025-06-13 14:17:29,925 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:29.928  INFO 2025-06-13 14:17:29,928 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:30.027  INFO 2025-06-13 14:17:30,027 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:30.027  INFO 2025-06-13 14:17:30,027 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:31.929  INFO 2025-06-13 14:17:31,929 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:31.931  INFO 2025-06-13 14:17:31,931 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:40.962  INFO 2025-06-13 14:17:40,962 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:40.965  INFO 2025-06-13 14:17:40,965 --- [nio-8080-exec-1] r.c.services.DraftSubmissionService      : Submission 2 approved by owner with message: null
2025-06-13 14:17:40.965  INFO 2025-06-13 14:17:40,965 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Applying draft 2 changes to tree 1
2025-06-13 14:17:40.966  INFO 2025-06-13 14:17:40,966 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Applied draft metadata to tree 1: name='Семья Ивановых', description='Генеалогическое древо семьи Ивановых', isPublic=true
2025-06-13 14:17:40.967  INFO 2025-06-13 14:17:40,967 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Applying 9 memorials from draft to tree 1
2025-06-13 14:17:40.972  INFO 2025-06-13 14:17:40,972 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Applying relation changes: 14 draft relations, 13 original relations
2025-06-13 14:17:40.976  INFO 2025-06-13 14:17:40,976 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Created new relation between 9 and 4 in tree 1
2025-06-13 14:17:40.976  INFO 2025-06-13 14:17:40,976 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Applied relation changes to tree 1
2025-06-13 14:17:40.976  INFO 2025-06-13 14:17:40,976 --- [nio-8080-exec-1] r.c.services.FamilyTreeDraftService      : Draft 2 changes applied successfully to tree 1
2025-06-13 14:17:40.976  INFO 2025-06-13 14:17:40,976 --- [nio-8080-exec-1] r.c.services.DraftSubmissionService      : Draft 2 changes applied to original tree
2025-06-13 14:17:41.002  INFO 2025-06-13 14:17:41,002 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:52.961  INFO 2025-06-13 14:17:52,961 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:52.964  INFO 2025-06-13 14:17:52,964 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:17:52.964  INFO 2025-06-13 14:17:52,964 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:17:52.964  INFO 2025-06-13 14:17:52,964 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:17:52.964  INFO 2025-06-13 14:17:52,964 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:17:52.964  INFO 2025-06-13 14:17:52,964 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:17:52.965  INFO 2025-06-13 14:17:52,965 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:17:52.965  INFO 2025-06-13 14:17:52,965 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:17:52.966  INFO 2025-06-13 14:17:52,966 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:17:52.970  INFO 2025-06-13 14:17:52,970 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:17:52.970  INFO 2025-06-13 14:17:52,970 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:17:53.123  INFO 2025-06-13 14:17:53,123 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:17:53.127  INFO 2025-06-13 14:17:53,127 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:17:53.127  INFO 2025-06-13 14:17:53,127 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:17:53.127  INFO 2025-06-13 14:17:53,127 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:17:53.127  INFO 2025-06-13 14:17:53,127 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:17:53.127  INFO 2025-06-13 14:17:53,127 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:17:53.128  INFO 2025-06-13 14:17:53,128 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:17:53.128  INFO 2025-06-13 14:17:53,128 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:17:53.128  INFO 2025-06-13 14:17:53,128 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:17:53.135  INFO 2025-06-13 14:17:53,135 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:17:53.135  INFO 2025-06-13 14:17:53,135 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:20:26.426  INFO 2025-06-13 14:20:26,426 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:26.462  INFO 2025-06-13 14:20:26,462 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:26.495  INFO 2025-06-13 14:20:26,495 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:26.559  INFO 2025-06-13 14:20:26,559 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:26.582  INFO 2025-06-13 14:20:26,582 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:26.604  INFO 2025-06-13 14:20:26,604 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:32.014  INFO 2025-06-13 14:20:32,014 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:32.016  INFO 2025-06-13 14:20:32,016 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:20:32.016  INFO 2025-06-13 14:20:32,016 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:20:32.016  INFO 2025-06-13 14:20:32,016 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:20:32.016  INFO 2025-06-13 14:20:32,016 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:20:32.016  INFO 2025-06-13 14:20:32,016 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:20:32.016  INFO 2025-06-13 14:20:32,016 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:20:32.016  INFO 2025-06-13 14:20:32,016 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:20:32.017  INFO 2025-06-13 14:20:32,017 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:20:32.020  INFO 2025-06-13 14:20:32,020 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:20:32.020  INFO 2025-06-13 14:20:32,020 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:20:32.160  INFO 2025-06-13 14:20:32,160 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:32.162  INFO 2025-06-13 14:20:32,162 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:20:32.162  INFO 2025-06-13 14:20:32,162 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:20:32.162  INFO 2025-06-13 14:20:32,162 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:20:32.162  INFO 2025-06-13 14:20:32,162 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:20:32.162  INFO 2025-06-13 14:20:32,162 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:20:32.163  INFO 2025-06-13 14:20:32,163 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:20:32.163  INFO 2025-06-13 14:20:32,163 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:20:32.163  INFO 2025-06-13 14:20:32,163 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:20:32.166  INFO 2025-06-13 14:20:32,166 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:20:32.166  INFO 2025-06-13 14:20:32,166 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:20:41.113  INFO 2025-06-13 14:20:41,113 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:41.116  INFO 2025-06-13 14:20:41,116 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:20:41.116  INFO 2025-06-13 14:20:41,116 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:20:41.116  INFO 2025-06-13 14:20:41,116 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:20:41.116  INFO 2025-06-13 14:20:41,116 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:20:41.116  INFO 2025-06-13 14:20:41,116 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:20:41.117  INFO 2025-06-13 14:20:41,117 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:20:41.117  INFO 2025-06-13 14:20:41,117 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:20:41.118  INFO 2025-06-13 14:20:41,118 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:20:41.122  INFO 2025-06-13 14:20:41,122 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:20:41.122  INFO 2025-06-13 14:20:41,122 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:20:41.135  INFO 2025-06-13 14:20:41,135 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:41.149  INFO 2025-06-13 14:20:41,149 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:41.156  INFO 2025-06-13 14:20:41,156 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:43.814  INFO 2025-06-13 14:20:43,814 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:43.820  INFO 2025-06-13 14:20:43,820 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:43.884  INFO 2025-06-13 14:20:43,884 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:43.888  INFO 2025-06-13 14:20:43,888 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:43.930  INFO 2025-06-13 14:20:43,930 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:43.930  INFO 2025-06-13 14:20:43,930 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:43.983  INFO 2025-06-13 14:20:43,983 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:44.031  INFO 2025-06-13 14:20:44,031 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:20:44.081  INFO 2025-06-13 14:20:44,081 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:21:37.611  INFO 2025-06-13 14:21:37,611 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:21:44.894  INFO 2025-06-13 14:21:44,894 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:21:44.931  INFO 2025-06-13 14:21:44,931 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:21:44.960  INFO 2025-06-13 14:21:44,960 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:21:54.353  INFO 2025-06-13 14:21:54,353 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:21:54.380  INFO 2025-06-13 14:21:54,380 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:21:54.498  INFO 2025-06-13 14:21:54,498 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:21:54.498  INFO 2025-06-13 14:21:54,498 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:24:05.900  INFO 2025-06-13 14:24:05,900 --- [nio-8080-exec-4] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 14:24:06.081  INFO 2025-06-13 14:24:06,081 --- [nio-8080-exec-7] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 14:24:12.354  INFO 2025-06-13 14:24:12,354 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:24:12.357  INFO 2025-06-13 14:24:12,357 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:24:12.357  INFO 2025-06-13 14:24:12,357 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:24:12.357  INFO 2025-06-13 14:24:12,357 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:24:12.357  INFO 2025-06-13 14:24:12,357 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:24:12.357  INFO 2025-06-13 14:24:12,357 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:24:12.358  INFO 2025-06-13 14:24:12,358 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:24:12.358  INFO 2025-06-13 14:24:12,358 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:24:12.358  INFO 2025-06-13 14:24:12,358 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:24:12.362  INFO 2025-06-13 14:24:12,362 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:24:12.362  INFO 2025-06-13 14:24:12,362 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:24:12.577  INFO 2025-06-13 14:24:12,577 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:24:12.581  INFO 2025-06-13 14:24:12,581 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:24:12.582  INFO 2025-06-13 14:24:12,582 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:24:12.582  INFO 2025-06-13 14:24:12,582 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:24:12.582  INFO 2025-06-13 14:24:12,582 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:24:12.582  INFO 2025-06-13 14:24:12,582 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:24:12.582  INFO 2025-06-13 14:24:12,582 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:24:12.582  INFO 2025-06-13 14:24:12,582 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:24:12.583  INFO 2025-06-13 14:24:12,583 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:24:12.588  INFO 2025-06-13 14:24:12,588 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:24:12.588  INFO 2025-06-13 14:24:12,588 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:24:16.131  INFO 2025-06-13 14:24:16,131 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:24:16.133  INFO 2025-06-13 14:24:16,133 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:24:16.133  INFO 2025-06-13 14:24:16,133 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:24:16.134  INFO 2025-06-13 14:24:16,134 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:24:16.134  INFO 2025-06-13 14:24:16,134 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:24:16.135  INFO 2025-06-13 14:24:16,135 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:24:16.137  INFO 2025-06-13 14:24:16,137 --- [nio-8080-exec-8] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:24:16.137  INFO 2025-06-13 14:24:16,137 --- [nio-8080-exec-8] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:24:19.565  INFO 2025-06-13 14:24:19,565 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:24:19.567  INFO 2025-06-13 14:24:19,567 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:24:19.567  INFO 2025-06-13 14:24:19,567 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:24:19.567  INFO 2025-06-13 14:24:19,567 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:24:19.567  INFO 2025-06-13 14:24:19,567 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:24:19.568  INFO 2025-06-13 14:24:19,568 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:24:19.568  INFO 2025-06-13 14:24:19,568 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:24:19.568  INFO 2025-06-13 14:24:19,568 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:24:23.774  INFO 2025-06-13 14:24:23,774 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:24:23.777  INFO 2025-06-13 14:24:23,777 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:24:23.777  INFO 2025-06-13 14:24:23,777 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:24:23.777  INFO 2025-06-13 14:24:23,777 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:24:23.777  INFO 2025-06-13 14:24:23,777 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:24:23.777  INFO 2025-06-13 14:24:23,777 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:24:23.778  INFO 2025-06-13 14:24:23,778 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:24:23.778  INFO 2025-06-13 14:24:23,778 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:24:23.779  INFO 2025-06-13 14:24:23,779 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:24:23.782  INFO 2025-06-13 14:24:23,782 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:24:23.782  INFO 2025-06-13 14:24:23,782 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:24:23.799  INFO 2025-06-13 14:24:23,799 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:24:23.806  INFO 2025-06-13 14:24:23,806 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:24:23.830  INFO 2025-06-13 14:24:23,830 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:04.552  INFO 2025-06-13 14:27:04,552 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:04.583  INFO 2025-06-13 14:27:04,583 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:04.593  INFO 2025-06-13 14:27:04,593 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:04.611  INFO 2025-06-13 14:27:04,611 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:04.614  INFO 2025-06-13 14:27:04,614 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:27:04.614  INFO 2025-06-13 14:27:04,614 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:04.614  INFO 2025-06-13 14:27:04,614 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:04.614  INFO 2025-06-13 14:27:04,614 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:04.614  INFO 2025-06-13 14:27:04,614 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:04.615  INFO 2025-06-13 14:27:04,615 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:04.615  INFO 2025-06-13 14:27:04,615 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:27:04.616  INFO 2025-06-13 14:27:04,616 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:27:04.619  INFO 2025-06-13 14:27:04,619 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:27:04.620  INFO 2025-06-13 14:27:04,620 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:27:06.053  INFO 2025-06-13 14:27:06,053 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:06.055  INFO 2025-06-13 14:27:06,055 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:06.056  INFO 2025-06-13 14:27:06,056 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:06.056  INFO 2025-06-13 14:27:06,056 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:06.056  INFO 2025-06-13 14:27:06,056 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:06.056  INFO 2025-06-13 14:27:06,056 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:06.057  INFO 2025-06-13 14:27:06,057 --- [nio-8080-exec-1] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:27:06.057  INFO 2025-06-13 14:27:06,057 --- [nio-8080-exec-1] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:27:08.926  INFO 2025-06-13 14:27:08,926 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:08.929  INFO 2025-06-13 14:27:08,929 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:08.929  INFO 2025-06-13 14:27:08,929 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:08.929  INFO 2025-06-13 14:27:08,929 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:08.929  INFO 2025-06-13 14:27:08,929 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:08.929  INFO 2025-06-13 14:27:08,929 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:08.931  INFO 2025-06-13 14:27:08,931 --- [nio-8080-exec-6] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:27:08.931  INFO 2025-06-13 14:27:08,931 --- [nio-8080-exec-6] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:27:25.248  INFO 2025-06-13 14:27:25,248 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:25.249  INFO 2025-06-13 14:27:25,249 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:25.249  INFO 2025-06-13 14:27:25,249 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:25.249  INFO 2025-06-13 14:27:25,249 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:25.249  INFO 2025-06-13 14:27:25,249 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:25.252  INFO 2025-06-13 14:27:25,252 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:25.253  INFO 2025-06-13 14:27:25,253 --- [nio-8080-exec-7] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:27:25.253  INFO 2025-06-13 14:27:25,253 --- [nio-8080-exec-7] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:27:25.272  INFO 2025-06-13 14:27:25,272 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:25.290  INFO 2025-06-13 14:27:25,290 --- [nio-8080-exec-4] r.c.services.MemorialService             : Обновление мемориала ID=6, пользователь=1111 (ID=2), isOwner=true, isEditor=false, статус=DRAFT
2025-06-13 14:27:25.290  INFO 2025-06-13 14:27:25,290 --- [nio-8080-exec-4] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=6
2025-06-13 14:27:25.877  INFO 2025-06-13 14:27:25,877 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:25.973  INFO 2025-06-13 14:27:25,973 --- [nio-8080-exec-3] r.c.services.MemorialService             : Загрузка фото для мемориала ID=6: пользователь=1111, isEditor=false, isOwner=true, isPublished=false
2025-06-13 14:27:26.961  INFO 2025-06-13 14:27:26,961 --- [nio-8080-exec-3] r.c.services.MemorialService             : Прямое применение фото для неопубликованного мемориала ID=6
2025-06-13 14:27:26.961  INFO 2025-06-13 14:27:26,961 --- [nio-8080-exec-3] r.c.services.MemorialService             : Фото напрямую применено для мемориала ID=6
2025-06-13 14:27:26.974  INFO 2025-06-13 14:27:26,974 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:26.976  INFO 2025-06-13 14:27:26,976 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:26.976  INFO 2025-06-13 14:27:26,976 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:26.976  INFO 2025-06-13 14:27:26,976 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:26.976  INFO 2025-06-13 14:27:26,976 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:26.977  INFO 2025-06-13 14:27:26,977 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:26.977  INFO 2025-06-13 14:27:26,977 --- [nio-8080-exec-5] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:27:26.977  INFO 2025-06-13 14:27:26,977 --- [nio-8080-exec-5] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:27:26.990  INFO 2025-06-13 14:27:26,990 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:26.992  INFO 2025-06-13 14:27:26,992 --- [nio-8080-exec-8] r.c.services.MemorialService             : Обновление мемориала ID=6, пользователь=1111 (ID=2), isOwner=true, isEditor=false, статус=DRAFT
2025-06-13 14:27:26.993  INFO 2025-06-13 14:27:26,993 --- [nio-8080-exec-8] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=6
2025-06-13 14:27:27.008  INFO 2025-06-13 14:27:27,008 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:27.011  INFO 2025-06-13 14:27:27,011 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:27.011  INFO 2025-06-13 14:27:27,011 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:27.011  INFO 2025-06-13 14:27:27,011 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:27.011  INFO 2025-06-13 14:27:27,011 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:27.012  INFO 2025-06-13 14:27:27,012 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:27.012  INFO 2025-06-13 14:27:27,012 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:27:27.012  INFO 2025-06-13 14:27:27,012 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:27:27.130  INFO 2025-06-13 14:27:27,130 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:27.147  INFO 2025-06-13 14:27:27,147 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:27.147  INFO 2025-06-13 14:27:27,147 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:27.150  INFO 2025-06-13 14:27:27,150 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:27:27.150  INFO 2025-06-13 14:27:27,150 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:27.150  INFO 2025-06-13 14:27:27,150 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:27.150  INFO 2025-06-13 14:27:27,150 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:27.150  INFO 2025-06-13 14:27:27,150 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:27.151  INFO 2025-06-13 14:27:27,151 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:27.151  INFO 2025-06-13 14:27:27,151 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:27:27.151  INFO 2025-06-13 14:27:27,151 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:27:27.155  INFO 2025-06-13 14:27:27,155 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:27.171  INFO 2025-06-13 14:27:27,171 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:27:27.171  INFO 2025-06-13 14:27:27,171 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:27:33.132  INFO 2025-06-13 14:27:33,132 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:33.134  INFO 2025-06-13 14:27:33,134 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:33.134  INFO 2025-06-13 14:27:33,134 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:33.134  INFO 2025-06-13 14:27:33,134 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:33.134  INFO 2025-06-13 14:27:33,134 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:33.135  INFO 2025-06-13 14:27:33,135 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:33.136  INFO 2025-06-13 14:27:33,136 --- [nio-8080-exec-7] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:27:33.136  INFO 2025-06-13 14:27:33,136 --- [nio-8080-exec-7] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:27:39.685  INFO 2025-06-13 14:27:39,685 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:39.687  INFO 2025-06-13 14:27:39,687 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:39.687  INFO 2025-06-13 14:27:39,687 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:39.687  INFO 2025-06-13 14:27:39,687 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:39.687  INFO 2025-06-13 14:27:39,687 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:39.687  INFO 2025-06-13 14:27:39,687 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:39.688  INFO 2025-06-13 14:27:39,688 --- [nio-8080-exec-4] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:27:39.688  INFO 2025-06-13 14:27:39,688 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:27:39.711  INFO 2025-06-13 14:27:39,711 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:39.715  INFO 2025-06-13 14:27:39,715 --- [nio-8080-exec-3] r.c.services.MemorialService             : Обновление мемориала ID=5, пользователь=1111 (ID=2), isOwner=true, isEditor=false, статус=DRAFT
2025-06-13 14:27:39.715  INFO 2025-06-13 14:27:39,715 --- [nio-8080-exec-3] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=5
2025-06-13 14:27:40.005  INFO 2025-06-13 14:27:40,005 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:40.071  INFO 2025-06-13 14:27:40,071 --- [nio-8080-exec-5] r.c.services.MemorialService             : Загрузка фото для мемориала ID=5: пользователь=1111, isEditor=false, isOwner=true, isPublished=false
2025-06-13 14:27:40.207  INFO 2025-06-13 14:27:40,207 --- [nio-8080-exec-5] r.c.services.MemorialService             : Прямое применение фото для неопубликованного мемориала ID=5
2025-06-13 14:27:40.207  INFO 2025-06-13 14:27:40,207 --- [nio-8080-exec-5] r.c.services.MemorialService             : Фото напрямую применено для мемориала ID=5
2025-06-13 14:27:40.227  INFO 2025-06-13 14:27:40,227 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:40.229  INFO 2025-06-13 14:27:40,229 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:40.229  INFO 2025-06-13 14:27:40,229 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:40.229  INFO 2025-06-13 14:27:40,229 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:40.229  INFO 2025-06-13 14:27:40,229 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:40.229  INFO 2025-06-13 14:27:40,229 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:40.230  INFO 2025-06-13 14:27:40,230 --- [nio-8080-exec-8] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:27:40.230  INFO 2025-06-13 14:27:40,230 --- [nio-8080-exec-8] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:27:40.245  INFO 2025-06-13 14:27:40,245 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:40.249  INFO 2025-06-13 14:27:40,249 --- [nio-8080-exec-9] r.c.services.MemorialService             : Обновление мемориала ID=5, пользователь=1111 (ID=2), isOwner=true, isEditor=false, статус=DRAFT
2025-06-13 14:27:40.249  INFO 2025-06-13 14:27:40,249 --- [nio-8080-exec-9] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=5
2025-06-13 14:27:40.272  INFO 2025-06-13 14:27:40,272 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:40.274  INFO 2025-06-13 14:27:40,274 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:40.274  INFO 2025-06-13 14:27:40,274 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:40.274  INFO 2025-06-13 14:27:40,274 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:40.274  INFO 2025-06-13 14:27:40,274 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:40.275  INFO 2025-06-13 14:27:40,275 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:40.276  INFO 2025-06-13 14:27:40,276 --- [nio-8080-exec-2] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:27:40.276  INFO 2025-06-13 14:27:40,276 --- [nio-8080-exec-2] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:27:40.526  INFO 2025-06-13 14:27:40,526 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:40.545  INFO 2025-06-13 14:27:40,545 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:40.547  INFO 2025-06-13 14:27:40,547 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:40.564  INFO 2025-06-13 14:27:40,564 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:40.566  INFO 2025-06-13 14:27:40,566 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:27:40.566  INFO 2025-06-13 14:27:40,566 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:40.566  INFO 2025-06-13 14:27:40,566 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:40.566  INFO 2025-06-13 14:27:40,566 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:40.566  INFO 2025-06-13 14:27:40,566 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:40.567  INFO 2025-06-13 14:27:40,567 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:40.567  INFO 2025-06-13 14:27:40,567 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:27:40.567  INFO 2025-06-13 14:27:40,567 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:27:40.570  INFO 2025-06-13 14:27:40,570 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:27:40.570  INFO 2025-06-13 14:27:40,570 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:27:43.011  INFO 2025-06-13 14:27:43,011 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:43.014  INFO 2025-06-13 14:27:43,014 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:43.014  INFO 2025-06-13 14:27:43,014 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:43.014  INFO 2025-06-13 14:27:43,014 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:43.014  INFO 2025-06-13 14:27:43,014 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:43.015  INFO 2025-06-13 14:27:43,015 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:43.015  INFO 2025-06-13 14:27:43,015 --- [nio-8080-exec-4] r.c.services.MemorialService             : getMemorialByIdForUser ID=4: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:27:43.015  INFO 2025-06-13 14:27:43,015 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=4 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:27:47.658  INFO 2025-06-13 14:27:47,658 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:47.660  INFO 2025-06-13 14:27:47,660 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:47.660  INFO 2025-06-13 14:27:47,660 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:47.660  INFO 2025-06-13 14:27:47,660 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:47.660  INFO 2025-06-13 14:27:47,660 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:47.661  INFO 2025-06-13 14:27:47,661 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:47.661  INFO 2025-06-13 14:27:47,661 --- [nio-8080-exec-3] r.c.services.MemorialService             : getMemorialByIdForUser ID=4: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:27:47.661  INFO 2025-06-13 14:27:47,661 --- [nio-8080-exec-3] r.c.services.MemorialService             : Мемориал ID=4 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:27:47.678  INFO 2025-06-13 14:27:47,678 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:47.681  INFO 2025-06-13 14:27:47,681 --- [nio-8080-exec-5] r.c.services.MemorialService             : Обновление мемориала ID=4, пользователь=1111 (ID=2), isOwner=true, isEditor=false, статус=REJECTED
2025-06-13 14:27:47.681  INFO 2025-06-13 14:27:47,681 --- [nio-8080-exec-5] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=4
2025-06-13 14:27:47.782  INFO 2025-06-13 14:27:47,782 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:47.795  INFO 2025-06-13 14:27:47,795 --- [nio-8080-exec-8] r.c.services.MemorialService             : Загрузка фото для мемориала ID=4: пользователь=1111, isEditor=false, isOwner=true, isPublished=false
2025-06-13 14:27:47.916  INFO 2025-06-13 14:27:47,916 --- [nio-8080-exec-8] r.c.services.MemorialService             : Прямое применение фото для неопубликованного мемориала ID=4
2025-06-13 14:27:47.916  INFO 2025-06-13 14:27:47,916 --- [nio-8080-exec-8] r.c.services.MemorialService             : Фото напрямую применено для мемориала ID=4
2025-06-13 14:27:47.939  INFO 2025-06-13 14:27:47,939 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:47.943  INFO 2025-06-13 14:27:47,943 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:47.943  INFO 2025-06-13 14:27:47,943 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:47.943  INFO 2025-06-13 14:27:47,943 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:47.943  INFO 2025-06-13 14:27:47,943 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:47.943  INFO 2025-06-13 14:27:47,943 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:47.945  INFO 2025-06-13 14:27:47,945 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=4: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:27:47.945  INFO 2025-06-13 14:27:47,945 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=4 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:27:47.964  INFO 2025-06-13 14:27:47,964 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:47.967  INFO 2025-06-13 14:27:47,967 --- [nio-8080-exec-2] r.c.services.MemorialService             : Обновление мемориала ID=4, пользователь=1111 (ID=2), isOwner=true, isEditor=false, статус=REJECTED
2025-06-13 14:27:47.967  INFO 2025-06-13 14:27:47,967 --- [nio-8080-exec-2] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=4
2025-06-13 14:27:47.992  INFO 2025-06-13 14:27:47,992 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:47.995  INFO 2025-06-13 14:27:47,995 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:47.995  INFO 2025-06-13 14:27:47,995 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:47.995  INFO 2025-06-13 14:27:47,995 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:47.995  INFO 2025-06-13 14:27:47,995 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:47.996  INFO 2025-06-13 14:27:47,996 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:47.997  INFO 2025-06-13 14:27:47,997 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=4: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:27:47.997  INFO 2025-06-13 14:27:47,997 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=4 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:27:48.096  INFO 2025-06-13 14:27:48,096 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:48.108  INFO 2025-06-13 14:27:48,108 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:48.122  INFO 2025-06-13 14:27:48,122 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:48.208  INFO 2025-06-13 14:27:48,208 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:27:48.213  INFO 2025-06-13 14:27:48,213 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:27:48.213  INFO 2025-06-13 14:27:48,213 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:48.213  INFO 2025-06-13 14:27:48,213 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:27:48.213  INFO 2025-06-13 14:27:48,213 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:27:48.213  INFO 2025-06-13 14:27:48,213 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:27:48.214  INFO 2025-06-13 14:27:48,214 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:27:48.214  INFO 2025-06-13 14:27:48,214 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:27:48.214  INFO 2025-06-13 14:27:48,214 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:27:48.220  INFO 2025-06-13 14:27:48,220 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:27:48.220  INFO 2025-06-13 14:27:48,220 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:28:36.832  INFO 2025-06-13 14:28:36,832 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:28:36.837  INFO 2025-06-13 14:28:36,837 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:28:36.892  INFO 2025-06-13 14:28:36,892 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:28:36.892  INFO 2025-06-13 14:28:36,892 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:28:36.933  INFO 2025-06-13 14:28:36,933 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:28:36.943  INFO 2025-06-13 14:28:36,943 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:28:36.981  INFO 2025-06-13 14:28:36,981 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:28:37.023  INFO 2025-06-13 14:28:37,023 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:28:37.083  INFO 2025-06-13 14:28:37,083 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:28:38.011  INFO 2025-06-13 14:28:38,011 --- [nio-8080-exec-4] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 14:28:38.199  INFO 2025-06-13 14:28:38,199 --- [nio-8080-exec-3] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-13 14:29:31.340  INFO 2025-06-13 14:29:31,340 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:29:31.342  INFO 2025-06-13 14:29:31,342 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:29:31.342  INFO 2025-06-13 14:29:31,342 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:29:31.342  INFO 2025-06-13 14:29:31,342 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:29:31.342  INFO 2025-06-13 14:29:31,342 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:29:31.343  INFO 2025-06-13 14:29:31,343 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:29:31.343  INFO 2025-06-13 14:29:31,343 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:29:31.343  INFO 2025-06-13 14:29:31,343 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:29:31.344  INFO 2025-06-13 14:29:31,344 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:29:31.349  INFO 2025-06-13 14:29:31,349 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:29:31.349  INFO 2025-06-13 14:29:31,349 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:29:31.538  INFO 2025-06-13 14:29:31,538 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:29:31.544  INFO 2025-06-13 14:29:31,544 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:29:31.544  INFO 2025-06-13 14:29:31,544 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:29:31.544  INFO 2025-06-13 14:29:31,544 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:29:31.544  INFO 2025-06-13 14:29:31,544 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:29:31.544  INFO 2025-06-13 14:29:31,544 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:29:31.546  INFO 2025-06-13 14:29:31,546 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:29:31.547  INFO 2025-06-13 14:29:31,547 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:29:31.547  INFO 2025-06-13 14:29:31,547 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:29:31.553  INFO 2025-06-13 14:29:31,553 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:29:31.554  INFO 2025-06-13 14:29:31,554 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:29:36.109  INFO 2025-06-13 14:29:36,109 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:29:36.112  INFO 2025-06-13 14:29:36,112 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:29:36.112  INFO 2025-06-13 14:29:36,112 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:29:36.112  INFO 2025-06-13 14:29:36,112 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:29:36.112  INFO 2025-06-13 14:29:36,112 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:29:36.113  INFO 2025-06-13 14:29:36,113 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:29:36.114  INFO 2025-06-13 14:29:36,114 --- [nio-8080-exec-6] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:29:36.114  INFO 2025-06-13 14:29:36,114 --- [nio-8080-exec-6] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:29:40.061  INFO 2025-06-13 14:29:40,061 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:29:40.064  INFO 2025-06-13 14:29:40,064 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:29:40.064  INFO 2025-06-13 14:29:40,064 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:29:40.064  INFO 2025-06-13 14:29:40,064 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:29:40.064  INFO 2025-06-13 14:29:40,064 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:29:40.065  INFO 2025-06-13 14:29:40,065 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:29:40.066  INFO 2025-06-13 14:29:40,066 --- [nio-8080-exec-4] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:29:40.066  INFO 2025-06-13 14:29:40,066 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-13 14:29:43.750  INFO 2025-06-13 14:29:43,750 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:29:43.752  INFO 2025-06-13 14:29:43,752 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:29:43.752  INFO 2025-06-13 14:29:43,752 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:29:43.752  INFO 2025-06-13 14:29:43,752 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:29:43.752  INFO 2025-06-13 14:29:43,752 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:29:43.752  INFO 2025-06-13 14:29:43,752 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-13 14:29:43.753  INFO 2025-06-13 14:29:43,753 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=2, login=1111, role=USER
2025-06-13 14:29:43.753  INFO 2025-06-13 14:29:43,753 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-13 14:29:43.753  INFO 2025-06-13 14:29:43,753 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=2, login=1111, страница=0, размер=10
2025-06-13 14:29:43.756  INFO 2025-06-13 14:29:43,756 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:29:43.756  INFO 2025-06-13 14:29:43,756 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 5 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-13 14:29:43.763  INFO 2025-06-13 14:29:43,763 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:29:43.783  INFO 2025-06-13 14:29:43,783 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:29:43.790  INFO 2025-06-13 14:29:43,790 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-13 14:29:56.884  INFO 2025-06-13 14:29:56,884 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-13 14:29:56.963  INFO 2025-06-13 14:29:56,963 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:29:56.963  INFO 2025-06-13 14:29:56,963 --- [nio-8080-exec-2] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-13 14:29:57.320  INFO 2025-06-13 14:29:57,320 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:29:57.414  INFO 2025-06-13 14:29:57,414 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:29:57.419  INFO 2025-06-13 14:29:57,419 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-13 14:29:57.419  INFO 2025-06-13 14:29:57,419 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:29:57.419  INFO 2025-06-13 14:29:57,419 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:29:57.419  INFO 2025-06-13 14:29:57,419 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:29:57.419  INFO 2025-06-13 14:29:57,419 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 14:29:57.419  INFO 2025-06-13 14:29:57,419 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 14:29:57.420  INFO 2025-06-13 14:29:57,420 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-13 14:29:57.420  INFO 2025-06-13 14:29:57,420 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=3, login=2222, страница=0, размер=10
2025-06-13 14:29:57.423  INFO 2025-06-13 14:29:57,423 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 14:29:57.423  INFO 2025-06-13 14:29:57,423 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-13 14:29:57.430  INFO 2025-06-13 14:29:57,430 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:30:03.001  INFO 2025-06-13 14:30:03,001 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:30:03.003  INFO 2025-06-13 14:30:03,003 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:30:03.003  INFO 2025-06-13 14:30:03,003 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:30:03.004  INFO 2025-06-13 14:30:03,004 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:30:03.004  INFO 2025-06-13 14:30:03,004 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 14:30:03.004  INFO 2025-06-13 14:30:03,004 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 14:30:03.006  INFO 2025-06-13 14:30:03,006 --- [nio-8080-exec-1] r.c.services.MemorialService             : getMemorialByIdForUser ID=9: пользователь=2222, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:30:03.006  INFO 2025-06-13 14:30:03,006 --- [nio-8080-exec-1] r.c.services.MemorialService             : Мемориал ID=9 получен пользователем 2222 (владелец: true, редактор: false, админ: false)
2025-06-13 14:30:06.793  INFO 2025-06-13 14:30:06,793 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-13 14:30:06.796  INFO 2025-06-13 14:30:06,796 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.0.100, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-13 14:30:06.796  INFO 2025-06-13 14:30:06,796 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-13 14:30:06.796  INFO 2025-06-13 14:30:06,796 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-13 14:30:06.796  INFO 2025-06-13 14:30:06,796 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-13 14:30:06.797  INFO 2025-06-13 14:30:06,797 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=3, login=2222, role=USER
2025-06-13 14:30:06.798  INFO 2025-06-13 14:30:06,798 --- [nio-8080-exec-4] r.c.services.MemorialService             : getMemorialByIdForUser ID=9: пользователь=2222, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-13 14:30:06.798  INFO 2025-06-13 14:30:06,798 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=9 получен пользователем 2222 (владелец: true, редактор: false, админ: false)
2025-06-13 14:30:20.395  INFO 2025-06-13 14:30:20,395 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: admin, role: ADMIN
2025-06-13 14:30:20.488  INFO 2025-06-13 14:30:20,488 --- [nio-8080-exec-5] r.c.controllers.admin.AdminController    : Admin home accessed by: admin with authorities: [ROLE_ADMIN]
2025-06-13 14:30:36.809  INFO 2025-06-13 14:30:36,809 --- [io-8080-exec-10] r.c.c.SimpleServerLogController          : Server logs page accessed
2025-06-13 14:32:33.065 ERROR 2025-06-13 14:32:33,065 --- [nio-8080-exec-7] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/settings.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-13 14:32:34.664  INFO 2025-06-13 14:32:34,664 --- [nio-8080-exec-4] r.c.c.SimpleServerLogController          : Server logs page accessed
2025-06-13 14:32:37.450  INFO 2025-06-13 14:32:37,450 --- [nio-8080-exec-5] r.c.c.admin.AdminReportsController       : Загрузка страницы отчётов
2025-06-13 14:32:38.950  INFO 2025-06-13 14:32:38,950 --- [nio-8080-exec-2] r.c.c.SimpleServerLogController          : Server logs page accessed
2025-06-13 14:32:40.673  INFO 2025-06-13 14:32:40,673 --- [nio-8080-exec-6] r.c.c.admin.AdminReportsController       : Загрузка страницы отчётов
2025-06-13 14:32:45.477  INFO 2025-06-13 14:32:45,477 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : === СТАТИСТИКА МЕМОРИАЛОВ ===
2025-06-13 14:32:45.477  INFO 2025-06-13 14:32:45,477 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : Total: 9, Public: 1, Pending Moderation: 1, Recent: 9
2025-06-13 14:32:45.477  INFO 2025-06-13 14:32:45,477 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : Monthly data: [0, 0, 0, 0, 0, 9, 0, 0, 0, 0, 0, 0]
2025-06-13 14:32:45.477  INFO 2025-06-13 14:32:45,477 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : Pie chart data: [1, 7, 1]
2025-06-13 14:46:54.397  INFO 2025-06-13 14:46:54,397 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 14:46:54.490  INFO 2025-06-13 14:46:54,490 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-13 14:46:54.612  INFO 2025-06-13 14:46:54,612 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
