2025-06-15 00:45:55.413  INFO 2025-06-15 00:45:55,413 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:45:55.413  INFO 2025-06-15 00:45:55,413 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:45:55.413  INFO 2025-06-15 00:45:55,413 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:45:55.425  INFO 2025-06-15 00:45:55,425 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 00:45:55.425  INFO 2025-06-15 00:45:55,425 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 00:45:55.425  INFO 2025-06-15 00:45:55,425 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 00:45:55.425  INFO 2025-06-15 00:45:55,425 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 00:45:55.425  INFO 2025-06-15 00:45:55,425 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 00:45:55.430  INFO 2025-06-15 00:45:55,430 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 00:45:55.430  INFO 2025-06-15 00:45:55,430 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 00:45:55.431  INFO 2025-06-15 00:45:55,431 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 00:45:55.436  INFO 2025-06-15 00:45:55,436 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 00:45:55.436  INFO 2025-06-15 00:45:55,436 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 00:46:20.715  INFO 2025-06-15 00:46:20,715 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:46:20.716  INFO 2025-06-15 00:46:20,716 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 00:46:20.716  INFO 2025-06-15 00:46:20,716 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 00:46:20.716  INFO 2025-06-15 00:46:20,716 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 00:46:20.716  INFO 2025-06-15 00:46:20,716 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 00:46:20.717  INFO 2025-06-15 00:46:20,717 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 00:46:20.720  INFO 2025-06-15 00:46:20,720 --- [nio-8080-exec-2] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 00:46:20.720  INFO 2025-06-15 00:46:20,720 --- [nio-8080-exec-2] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 00:46:23.236  INFO 2025-06-15 00:46:23,236 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:46:23.237  INFO 2025-06-15 00:46:23,237 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 00:46:23.237  INFO 2025-06-15 00:46:23,237 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 00:46:23.237  INFO 2025-06-15 00:46:23,237 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 00:46:23.237  INFO 2025-06-15 00:46:23,237 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 00:46:23.239  INFO 2025-06-15 00:46:23,239 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 00:46:23.240  INFO 2025-06-15 00:46:23,240 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 00:46:23.240  INFO 2025-06-15 00:46:23,240 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 00:47:07.473  INFO 2025-06-15 00:47:07,473 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:47:07.474  INFO 2025-06-15 00:47:07,474 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 00:47:07.475  INFO 2025-06-15 00:47:07,475 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 00:47:07.475  INFO 2025-06-15 00:47:07,475 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 00:47:07.475  INFO 2025-06-15 00:47:07,475 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 00:47:07.475  INFO 2025-06-15 00:47:07,475 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 00:47:07.478  INFO 2025-06-15 00:47:07,478 --- [nio-8080-exec-4] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 00:47:07.478  INFO 2025-06-15 00:47:07,478 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 00:47:08.026  INFO 2025-06-15 00:47:08,026 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:47:08.031  INFO 2025-06-15 00:47:08,031 --- [nio-8080-exec-5] r.c.services.MemorialService             : Обновление мемориала ID=2, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 00:47:08.031  INFO 2025-06-15 00:47:08,031 --- [nio-8080-exec-5] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=2
2025-06-15 00:47:08.605  INFO 2025-06-15 00:47:08,605 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:47:09.550  INFO 2025-06-15 00:47:09,550 --- [nio-8080-exec-9] r.c.services.MemorialService             : Загрузка фото для мемориала ID=2: пользователь=1111, isEditor=false, isOwner=true, isPublished=false
2025-06-15 00:47:10.395  INFO 2025-06-15 00:47:10,395 --- [nio-8080-exec-9] r.c.services.MemorialService             : Прямое применение фото для неопубликованного мемориала ID=2
2025-06-15 00:47:10.395  INFO 2025-06-15 00:47:10,395 --- [nio-8080-exec-9] r.c.services.MemorialService             : Фото напрямую применено для мемориала ID=2
2025-06-15 00:47:10.888  INFO 2025-06-15 00:47:10,888 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:47:10.889  INFO 2025-06-15 00:47:10,889 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 00:47:10.889  INFO 2025-06-15 00:47:10,889 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 00:47:10.889  INFO 2025-06-15 00:47:10,889 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 00:47:10.889  INFO 2025-06-15 00:47:10,889 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 00:47:10.890  INFO 2025-06-15 00:47:10,890 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 00:47:10.892  INFO 2025-06-15 00:47:10,892 --- [nio-8080-exec-7] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 00:47:10.893  INFO 2025-06-15 00:47:10,893 --- [nio-8080-exec-7] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 00:47:11.395  INFO 2025-06-15 00:47:11,395 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:47:11.399  INFO 2025-06-15 00:47:11,399 --- [nio-8080-exec-8] r.c.services.MemorialService             : Обновление мемориала ID=2, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 00:47:11.399  INFO 2025-06-15 00:47:11,399 --- [nio-8080-exec-8] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=2
2025-06-15 00:47:11.855  INFO 2025-06-15 00:47:11,855 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:47:11.856  INFO 2025-06-15 00:47:11,856 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 00:47:11.856  INFO 2025-06-15 00:47:11,856 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 00:47:11.856  INFO 2025-06-15 00:47:11,856 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 00:47:11.856  INFO 2025-06-15 00:47:11,856 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 00:47:11.857  INFO 2025-06-15 00:47:11,857 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 00:47:11.859  INFO 2025-06-15 00:47:11,859 --- [nio-8080-exec-1] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 00:47:11.859  INFO 2025-06-15 00:47:11,859 --- [nio-8080-exec-1] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 00:47:12.038  INFO 2025-06-15 00:47:12,038 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:47:12.075  INFO 2025-06-15 00:47:12,075 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:47:12.077  INFO 2025-06-15 00:47:12,077 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 00:47:12.077  INFO 2025-06-15 00:47:12,077 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 00:47:12.077  INFO 2025-06-15 00:47:12,077 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 00:47:12.077  INFO 2025-06-15 00:47:12,077 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 00:47:12.077  INFO 2025-06-15 00:47:12,077 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 00:47:12.078  INFO 2025-06-15 00:47:12,078 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 00:47:12.078  INFO 2025-06-15 00:47:12,078 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 00:47:12.079  INFO 2025-06-15 00:47:12,079 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 00:47:12.083  INFO 2025-06-15 00:47:12,083 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 00:47:12.083  INFO 2025-06-15 00:47:12,083 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 00:50:02.066  INFO 2025-06-15 00:50:02,066 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:50:02.067  INFO 2025-06-15 00:50:02,067 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:50:02.067  INFO 2025-06-15 00:50:02,067 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:50:02.071  INFO 2025-06-15 00:50:02,071 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 00:50:02.071  INFO 2025-06-15 00:50:02,071 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 00:50:02.071  INFO 2025-06-15 00:50:02,071 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 00:50:02.071  INFO 2025-06-15 00:50:02,071 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 00:50:02.071  INFO 2025-06-15 00:50:02,071 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 00:50:02.078  INFO 2025-06-15 00:50:02,078 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 00:50:02.078  INFO 2025-06-15 00:50:02,078 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 00:50:02.079  INFO 2025-06-15 00:50:02,079 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 00:50:02.087  INFO 2025-06-15 00:50:02,087 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 00:50:02.087  INFO 2025-06-15 00:50:02,087 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 00:50:27.447  INFO 2025-06-15 00:50:27,447 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:50:27.450  INFO 2025-06-15 00:50:27,450 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Quick search: query=Сергей, limit=20
2025-06-15 00:50:27.450  INFO 2025-06-15 00:50:27,450 --- [nio-8080-exec-8] r.c.services.MemorialService             : Quick search for query: Сергей, limit: 20
2025-06-15 00:50:44.907  INFO 2025-06-15 00:50:44,907 --- [nio-8080-exec-1] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 0 публичных мемориалов на странице 1 из 0
2025-06-15 00:50:45.464  INFO 2025-06-15 00:50:45,464 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:50:45.466  INFO 2025-06-15 00:50:45,466 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 00:50:45.466  INFO 2025-06-15 00:50:45,466 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 00:50:45.466  INFO 2025-06-15 00:50:45,466 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 00:50:45.466  INFO 2025-06-15 00:50:45,466 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 00:50:45.466  INFO 2025-06-15 00:50:45,466 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 00:50:45.467  INFO 2025-06-15 00:50:45,467 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 00:50:45.467  INFO 2025-06-15 00:50:45,467 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 00:50:45.468  INFO 2025-06-15 00:50:45,468 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 00:50:45.471  INFO 2025-06-15 00:50:45,471 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 00:50:45.471  INFO 2025-06-15 00:50:45,471 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 00:50:55.494  INFO 2025-06-15 00:50:55,494 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:50:55.497  INFO 2025-06-15 00:50:55,497 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Advanced search: query=null, firstName=Сергей, lastName=null, middleName=null, location=null
2025-06-15 00:50:55.497  INFO 2025-06-15 00:50:55,497 --- [io-8080-exec-10] r.c.services.MemorialService             : Advanced search with parameters: query=null, firstName=Сергей, lastName=null, middleName=null, location=null
2025-06-15 00:50:55.515  WARN 2025-06-15 00:50:55,515 --- [io-8080-exec-10] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 42846
2025-06-15 00:50:55.515 ERROR 2025-06-15 00:50:55,515 --- [io-8080-exec-10] o.h.engine.jdbc.spi.SqlExceptionHelper   : ОШИБКА: привести тип bytea к date нельзя
  Позиция: 1534
2025-06-15 00:50:55.521 ERROR 2025-06-15 00:50:55,521 --- [io-8080-exec-10] r.c.exceptions.GlobalExceptionHandler    : Runtime exception occurred
org.springframework.dao.InvalidDataAccessResourceUsageException: JDBC exception executing SQL [select m1_0.id,m1_0.biography,m1_0.birth_date,m1_0.block_reason,m1_0.blocked_at,m1_0.blocked_by,m1_0.burial_address,m1_0.burial_latitude,m1_0.burial_longitude,m1_0.changes_under_moderation,m1_0.created_at,m1_0.created_by,m1_0.death_date,m1_0.doc_url,m1_0.fio,m1_0.first_name,m1_0.is_blocked,m1_0.is_public,m1_0.last_editor_id,m1_0.last_name,m1_0.main_address,m1_0.main_latitude,m1_0.main_longitude,m1_0.middle_name,m1_0.pending_biography,m1_0.pending_birth_date,m1_0.pending_burial_address,m1_0.pending_burial_latitude,m1_0.pending_burial_longitude,m1_0.pending_changes,m1_0.pending_death_date,m1_0.pending_document_url,m1_0.pending_fio,m1_0.pending_first_name,m1_0.pending_is_public,m1_0.pending_last_name,m1_0.pending_main_address,m1_0.pending_main_latitude,m1_0.pending_main_longitude,m1_0.pending_middle_name,m1_0.pending_photo_url,m1_0.photo_url,m1_0.previous_state,m1_0.proposed_changes,m1_0.publication_status,m1_0.tree_id,m1_0.updated_at,m1_0.user_id,m1_0.view_count,m1_0.xcoord,m1_0.ycoord from memorials m1_0 where (? is null or ?='' or lower(m1_0.fio) like lower(('%'||?||'%')) escape '' or lower((m1_0.last_name||' '||m1_0.first_name||' '||coalesce(m1_0.middle_name,''))) like lower(('%'||?||'%')) escape '') and (? is null or ?='' or lower(m1_0.first_name) like lower(('%'||?||'%')) escape '') and (? is null or ?='' or lower(m1_0.last_name) like lower(('%'||?||'%')) escape '') and (? is null or ?='' or lower(m1_0.middle_name) like lower(('%'||?||'%')) escape '') and (? is null or m1_0.birth_date>=cast(? as date)) and (? is null or m1_0.birth_date<=cast(? as date)) and (? is null or m1_0.death_date>=cast(? as date)) and (? is null or m1_0.death_date<=cast(? as date)) and (? is null or ?='' or lower(m1_0.main_address) like lower(('%'||?||'%')) escape '' or lower(m1_0.burial_address) like lower(('%'||?||'%')) escape '') and (? is null or m1_0.is_public=?) and m1_0.is_blocked=false and m1_0.publication_status='PUBLISHED' order by case when ?='lastName' and ?='asc' then m1_0.last_name end,case when ?='lastName' and ?='desc' then m1_0.last_name end desc,case when ?='firstName' and ?='asc' then m1_0.first_name end,case when ?='firstName' and ?='desc' then m1_0.first_name end desc,case when ?='birthDate' and ?='asc' then m1_0.birth_date end,case when ?='birthDate' and ?='desc' then m1_0.birth_date end desc,case when ?='deathDate' and ?='asc' then m1_0.death_date end,case when ?='deathDate' and ?='desc' then m1_0.death_date end desc,case when ?='createdAt' and ?='asc' then m1_0.created_at end,case when ?='createdAt' and ?='desc' then m1_0.created_at end desc,m1_0.last_name] [ОШИБКА: привести тип bytea к date нельзя
  Позиция: 1534] [n/a]; SQL [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy157.advancedSearch(Unknown Source)
	at ru.cemeterysystem.services.MemorialService.advancedSearchMemorials(MemorialService.java:1897)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.MemorialService$$SpringCGLIB$$0.advancedSearchMemorials(<generated>)
	at ru.cemeterysystem.controllers.MemorialController.advancedSearchMemorials(MemorialController.java:793)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.SQLGrammarException: JDBC exception executing SQL [select m1_0.id,m1_0.biography,m1_0.birth_date,m1_0.block_reason,m1_0.blocked_at,m1_0.blocked_by,m1_0.burial_address,m1_0.burial_latitude,m1_0.burial_longitude,m1_0.changes_under_moderation,m1_0.created_at,m1_0.created_by,m1_0.death_date,m1_0.doc_url,m1_0.fio,m1_0.first_name,m1_0.is_blocked,m1_0.is_public,m1_0.last_editor_id,m1_0.last_name,m1_0.main_address,m1_0.main_latitude,m1_0.main_longitude,m1_0.middle_name,m1_0.pending_biography,m1_0.pending_birth_date,m1_0.pending_burial_address,m1_0.pending_burial_latitude,m1_0.pending_burial_longitude,m1_0.pending_changes,m1_0.pending_death_date,m1_0.pending_document_url,m1_0.pending_fio,m1_0.pending_first_name,m1_0.pending_is_public,m1_0.pending_last_name,m1_0.pending_main_address,m1_0.pending_main_latitude,m1_0.pending_main_longitude,m1_0.pending_middle_name,m1_0.pending_photo_url,m1_0.photo_url,m1_0.previous_state,m1_0.proposed_changes,m1_0.publication_status,m1_0.tree_id,m1_0.updated_at,m1_0.user_id,m1_0.view_count,m1_0.xcoord,m1_0.ycoord from memorials m1_0 where (? is null or ?='' or lower(m1_0.fio) like lower(('%'||?||'%')) escape '' or lower((m1_0.last_name||' '||m1_0.first_name||' '||coalesce(m1_0.middle_name,''))) like lower(('%'||?||'%')) escape '') and (? is null or ?='' or lower(m1_0.first_name) like lower(('%'||?||'%')) escape '') and (? is null or ?='' or lower(m1_0.last_name) like lower(('%'||?||'%')) escape '') and (? is null or ?='' or lower(m1_0.middle_name) like lower(('%'||?||'%')) escape '') and (? is null or m1_0.birth_date>=cast(? as date)) and (? is null or m1_0.birth_date<=cast(? as date)) and (? is null or m1_0.death_date>=cast(? as date)) and (? is null or m1_0.death_date<=cast(? as date)) and (? is null or ?='' or lower(m1_0.main_address) like lower(('%'||?||'%')) escape '' or lower(m1_0.burial_address) like lower(('%'||?||'%')) escape '') and (? is null or m1_0.is_public=?) and m1_0.is_blocked=false and m1_0.publication_status='PUBLISHED' order by case when ?='lastName' and ?='asc' then m1_0.last_name end,case when ?='lastName' and ?='desc' then m1_0.last_name end desc,case when ?='firstName' and ?='asc' then m1_0.first_name end,case when ?='firstName' and ?='desc' then m1_0.first_name end desc,case when ?='birthDate' and ?='asc' then m1_0.birth_date end,case when ?='birthDate' and ?='desc' then m1_0.birth_date end desc,case when ?='deathDate' and ?='asc' then m1_0.death_date end,case when ?='deathDate' and ?='desc' then m1_0.death_date end desc,case when ?='createdAt' and ?='asc' then m1_0.created_at end,case when ?='createdAt' and ?='desc' then m1_0.created_at end desc,m1_0.last_name] [ОШИБКА: привести тип bytea к date нельзя
  Позиция: 1534] [n/a]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:91)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:264)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:265)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:145)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:67)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:204)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:211)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:139)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:382)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:302)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:526)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:423)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:169)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:148)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 121 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: привести тип bytea к date нельзя
  Позиция: 1534
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:246)
	... 153 common frames omitted
2025-06-15 00:50:55.526  WARN 2025-06-15 00:50:55,526 --- [  LogExecutor-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 22001
2025-06-15 00:50:55.526 ERROR 2025-06-15 00:50:55,526 --- [  LogExecutor-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : ОШИБКА: значение не умещается в тип character varying(1000)
2025-06-15 00:50:55.529 ERROR 2025-06-15 00:50:55,529 --- [  LogExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void ru.cemeterysystem.services.SystemLogService.logAction(ru.cemeterysystem.models.SystemLog$ActionType,ru.cemeterysystem.models.SystemLog$EntityType,java.lang.Long,java.lang.String,java.lang.String,ru.cemeterysystem.models.User,java.lang.String,java.lang.String,ru.cemeterysystem.models.SystemLog$Severity)
org.springframework.dao.DataIntegrityViolationException: could not execute statement [ОШИБКА: значение не умещается в тип character varying(1000)] [insert into system_logs (action_type,created_at,description,details,entity_id,entity_type,ip_address,severity,user_id,user_agent) values (?,?,?,?,?,?,?,?,?,?) returning id]; SQL [insert into system_logs (action_type,created_at,description,details,entity_id,entity_type,ip_address,severity,user_id,user_agent) values (?,?,?,?,?,?,?,?,?,?) returning id]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:293)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy153.save(Unknown Source)
	at ru.cemeterysystem.services.SystemLogService.logAction(SystemLogService.java:104)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:113)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.DataException: could not execute statement [ОШИБКА: значение не умещается в тип character varying(1000)] [insert into system_logs (action_type,created_at,description,details,entity_id,entity_type,ip_address,severity,user_id,user_agent) values (?,?,?,?,?,?,?,?,?,?) returning id]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:103)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.execute(ResultSetReturnImpl.java:145)
	at org.hibernate.id.insert.InsertReturningDelegate.executeAndExtractReturning(InsertReturningDelegate.java:96)
	at org.hibernate.id.insert.AbstractReturningDelegate.performMutation(AbstractReturningDelegate.java:58)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:671)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:292)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:273)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:323)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:391)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:305)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:224)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:137)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:757)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:741)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:319)
	at jdk.proxy2/jdk.proxy2.$Proxy145.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:626)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:173)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:148)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 23 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: значение не умещается в тип character varying(1000)
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.execute(PgPreparedStatement.java:180)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.execute(ResultSetReturnImpl.java:129)
	... 70 common frames omitted
2025-06-15 00:51:09.659  INFO 2025-06-15 00:51:09,659 --- [nio-8080-exec-6] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 0 публичных мемориалов на странице 1 из 0
2025-06-15 00:51:10.227  INFO 2025-06-15 00:51:10,227 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:51:10.230  INFO 2025-06-15 00:51:10,230 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 00:51:10.230  INFO 2025-06-15 00:51:10,230 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 00:51:10.230  INFO 2025-06-15 00:51:10,230 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 00:51:10.230  INFO 2025-06-15 00:51:10,230 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 00:51:10.230  INFO 2025-06-15 00:51:10,230 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 00:51:10.231  INFO 2025-06-15 00:51:10,231 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 00:51:10.231  INFO 2025-06-15 00:51:10,231 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 00:51:10.232  INFO 2025-06-15 00:51:10,232 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 00:51:10.238  INFO 2025-06-15 00:51:10,238 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 00:51:10.238  INFO 2025-06-15 00:51:10,238 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 00:51:28.135  INFO 2025-06-15 00:51:28,135 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 00:51:28.136  INFO 2025-06-15 00:51:28,136 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Advanced search: query=сергей, firstName=null, lastName=null, middleName=null, location=null
2025-06-15 00:51:28.136  INFO 2025-06-15 00:51:28,136 --- [nio-8080-exec-5] r.c.services.MemorialService             : Advanced search with parameters: query=сергей, firstName=null, lastName=null, middleName=null, location=null
2025-06-15 00:51:28.138  WARN 2025-06-15 00:51:28,138 --- [nio-8080-exec-5] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 42846
2025-06-15 00:51:28.138 ERROR 2025-06-15 00:51:28,138 --- [nio-8080-exec-5] o.h.engine.jdbc.spi.SqlExceptionHelper   : ОШИБКА: привести тип bytea к date нельзя
  Позиция: 1534
2025-06-15 00:51:28.138 ERROR 2025-06-15 00:51:28,138 --- [nio-8080-exec-5] r.c.exceptions.GlobalExceptionHandler    : Runtime exception occurred
org.springframework.dao.InvalidDataAccessResourceUsageException: JDBC exception executing SQL [select m1_0.id,m1_0.biography,m1_0.birth_date,m1_0.block_reason,m1_0.blocked_at,m1_0.blocked_by,m1_0.burial_address,m1_0.burial_latitude,m1_0.burial_longitude,m1_0.changes_under_moderation,m1_0.created_at,m1_0.created_by,m1_0.death_date,m1_0.doc_url,m1_0.fio,m1_0.first_name,m1_0.is_blocked,m1_0.is_public,m1_0.last_editor_id,m1_0.last_name,m1_0.main_address,m1_0.main_latitude,m1_0.main_longitude,m1_0.middle_name,m1_0.pending_biography,m1_0.pending_birth_date,m1_0.pending_burial_address,m1_0.pending_burial_latitude,m1_0.pending_burial_longitude,m1_0.pending_changes,m1_0.pending_death_date,m1_0.pending_document_url,m1_0.pending_fio,m1_0.pending_first_name,m1_0.pending_is_public,m1_0.pending_last_name,m1_0.pending_main_address,m1_0.pending_main_latitude,m1_0.pending_main_longitude,m1_0.pending_middle_name,m1_0.pending_photo_url,m1_0.photo_url,m1_0.previous_state,m1_0.proposed_changes,m1_0.publication_status,m1_0.tree_id,m1_0.updated_at,m1_0.user_id,m1_0.view_count,m1_0.xcoord,m1_0.ycoord from memorials m1_0 where (? is null or ?='' or lower(m1_0.fio) like lower(('%'||?||'%')) escape '' or lower((m1_0.last_name||' '||m1_0.first_name||' '||coalesce(m1_0.middle_name,''))) like lower(('%'||?||'%')) escape '') and (? is null or ?='' or lower(m1_0.first_name) like lower(('%'||?||'%')) escape '') and (? is null or ?='' or lower(m1_0.last_name) like lower(('%'||?||'%')) escape '') and (? is null or ?='' or lower(m1_0.middle_name) like lower(('%'||?||'%')) escape '') and (? is null or m1_0.birth_date>=cast(? as date)) and (? is null or m1_0.birth_date<=cast(? as date)) and (? is null or m1_0.death_date>=cast(? as date)) and (? is null or m1_0.death_date<=cast(? as date)) and (? is null or ?='' or lower(m1_0.main_address) like lower(('%'||?||'%')) escape '' or lower(m1_0.burial_address) like lower(('%'||?||'%')) escape '') and (? is null or m1_0.is_public=?) and m1_0.is_blocked=false and m1_0.publication_status='PUBLISHED' order by case when ?='lastName' and ?='asc' then m1_0.last_name end,case when ?='lastName' and ?='desc' then m1_0.last_name end desc,case when ?='firstName' and ?='asc' then m1_0.first_name end,case when ?='firstName' and ?='desc' then m1_0.first_name end desc,case when ?='birthDate' and ?='asc' then m1_0.birth_date end,case when ?='birthDate' and ?='desc' then m1_0.birth_date end desc,case when ?='deathDate' and ?='asc' then m1_0.death_date end,case when ?='deathDate' and ?='desc' then m1_0.death_date end desc,case when ?='createdAt' and ?='asc' then m1_0.created_at end,case when ?='createdAt' and ?='desc' then m1_0.created_at end desc,m1_0.last_name] [ОШИБКА: привести тип bytea к date нельзя
  Позиция: 1534] [n/a]; SQL [n/a]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy157.advancedSearch(Unknown Source)
	at ru.cemeterysystem.services.MemorialService.advancedSearchMemorials(MemorialService.java:1897)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.MemorialService$$SpringCGLIB$$0.advancedSearchMemorials(<generated>)
	at ru.cemeterysystem.controllers.MemorialController.advancedSearchMemorials(MemorialController.java:793)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.SQLGrammarException: JDBC exception executing SQL [select m1_0.id,m1_0.biography,m1_0.birth_date,m1_0.block_reason,m1_0.blocked_at,m1_0.blocked_by,m1_0.burial_address,m1_0.burial_latitude,m1_0.burial_longitude,m1_0.changes_under_moderation,m1_0.created_at,m1_0.created_by,m1_0.death_date,m1_0.doc_url,m1_0.fio,m1_0.first_name,m1_0.is_blocked,m1_0.is_public,m1_0.last_editor_id,m1_0.last_name,m1_0.main_address,m1_0.main_latitude,m1_0.main_longitude,m1_0.middle_name,m1_0.pending_biography,m1_0.pending_birth_date,m1_0.pending_burial_address,m1_0.pending_burial_latitude,m1_0.pending_burial_longitude,m1_0.pending_changes,m1_0.pending_death_date,m1_0.pending_document_url,m1_0.pending_fio,m1_0.pending_first_name,m1_0.pending_is_public,m1_0.pending_last_name,m1_0.pending_main_address,m1_0.pending_main_latitude,m1_0.pending_main_longitude,m1_0.pending_middle_name,m1_0.pending_photo_url,m1_0.photo_url,m1_0.previous_state,m1_0.proposed_changes,m1_0.publication_status,m1_0.tree_id,m1_0.updated_at,m1_0.user_id,m1_0.view_count,m1_0.xcoord,m1_0.ycoord from memorials m1_0 where (? is null or ?='' or lower(m1_0.fio) like lower(('%'||?||'%')) escape '' or lower((m1_0.last_name||' '||m1_0.first_name||' '||coalesce(m1_0.middle_name,''))) like lower(('%'||?||'%')) escape '') and (? is null or ?='' or lower(m1_0.first_name) like lower(('%'||?||'%')) escape '') and (? is null or ?='' or lower(m1_0.last_name) like lower(('%'||?||'%')) escape '') and (? is null or ?='' or lower(m1_0.middle_name) like lower(('%'||?||'%')) escape '') and (? is null or m1_0.birth_date>=cast(? as date)) and (? is null or m1_0.birth_date<=cast(? as date)) and (? is null or m1_0.death_date>=cast(? as date)) and (? is null or m1_0.death_date<=cast(? as date)) and (? is null or ?='' or lower(m1_0.main_address) like lower(('%'||?||'%')) escape '' or lower(m1_0.burial_address) like lower(('%'||?||'%')) escape '') and (? is null or m1_0.is_public=?) and m1_0.is_blocked=false and m1_0.publication_status='PUBLISHED' order by case when ?='lastName' and ?='asc' then m1_0.last_name end,case when ?='lastName' and ?='desc' then m1_0.last_name end desc,case when ?='firstName' and ?='asc' then m1_0.first_name end,case when ?='firstName' and ?='desc' then m1_0.first_name end desc,case when ?='birthDate' and ?='asc' then m1_0.birth_date end,case when ?='birthDate' and ?='desc' then m1_0.birth_date end desc,case when ?='deathDate' and ?='asc' then m1_0.death_date end,case when ?='deathDate' and ?='desc' then m1_0.death_date end desc,case when ?='createdAt' and ?='asc' then m1_0.created_at end,case when ?='createdAt' and ?='desc' then m1_0.created_at end desc,m1_0.last_name] [ОШИБКА: привести тип bytea к date нельзя
  Позиция: 1534] [n/a]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:91)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:264)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:265)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:145)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:67)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:204)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:211)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:139)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:382)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:302)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:526)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:423)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:169)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:148)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 121 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: привести тип bytea к date нельзя
  Позиция: 1534
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:137)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:246)
	... 153 common frames omitted
2025-06-15 00:51:28.142  WARN 2025-06-15 00:51:28,142 --- [  LogExecutor-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 22001
2025-06-15 00:51:28.143 ERROR 2025-06-15 00:51:28,143 --- [  LogExecutor-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : ОШИБКА: значение не умещается в тип character varying(1000)
2025-06-15 00:51:28.143 ERROR 2025-06-15 00:51:28,143 --- [  LogExecutor-2] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void ru.cemeterysystem.services.SystemLogService.logAction(ru.cemeterysystem.models.SystemLog$ActionType,ru.cemeterysystem.models.SystemLog$EntityType,java.lang.Long,java.lang.String,java.lang.String,ru.cemeterysystem.models.User,java.lang.String,java.lang.String,ru.cemeterysystem.models.SystemLog$Severity)
org.springframework.dao.DataIntegrityViolationException: could not execute statement [ОШИБКА: значение не умещается в тип character varying(1000)] [insert into system_logs (action_type,created_at,description,details,entity_id,entity_type,ip_address,severity,user_id,user_agent) values (?,?,?,?,?,?,?,?,?,?) returning id]; SQL [insert into system_logs (action_type,created_at,description,details,entity_id,entity_type,ip_address,severity,user_id,user_agent) values (?,?,?,?,?,?,?,?,?,?) returning id]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:293)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy153.save(Unknown Source)
	at ru.cemeterysystem.services.SystemLogService.logAction(SystemLogService.java:104)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:113)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.DataException: could not execute statement [ОШИБКА: значение не умещается в тип character varying(1000)] [insert into system_logs (action_type,created_at,description,details,entity_id,entity_type,ip_address,severity,user_id,user_agent) values (?,?,?,?,?,?,?,?,?,?) returning id]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:103)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.execute(ResultSetReturnImpl.java:145)
	at org.hibernate.id.insert.InsertReturningDelegate.executeAndExtractReturning(InsertReturningDelegate.java:96)
	at org.hibernate.id.insert.AbstractReturningDelegate.performMutation(AbstractReturningDelegate.java:58)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:671)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:292)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:273)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:323)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:391)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:305)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:224)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:137)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:757)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:741)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:319)
	at jdk.proxy2/jdk.proxy2.$Proxy145.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:626)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:173)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:148)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 23 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: значение не умещается в тип character varying(1000)
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.execute(PgPreparedStatement.java:180)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.execute(ResultSetReturnImpl.java:129)
	... 70 common frames omitted
2025-06-15 03:40:27.786  INFO 2025-06-15 03:40:27,786 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: admin, role: ADMIN
2025-06-15 03:40:28.048  INFO 2025-06-15 03:40:28,048 --- [nio-8080-exec-2] r.c.controllers.admin.AdminController    : Admin home accessed by: admin with authorities: [ROLE_ADMIN]
2025-06-15 03:40:39.325  INFO 2025-06-15 03:40:39,325 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : === СТАТИСТИКА МЕМОРИАЛОВ ===
2025-06-15 03:40:39.325  INFO 2025-06-15 03:40:39,325 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : Total: 4, Public: 0, Pending Moderation: 0, Recent: 4
2025-06-15 03:40:39.325  INFO 2025-06-15 03:40:39,325 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : Monthly data: [0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0]
2025-06-15 03:40:39.326  INFO 2025-06-15 03:40:39,326 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : Pie chart data: [0, 4, 0]
2025-06-15 03:40:58.470 ERROR 2025-06-15 03:40:58,470 --- [nio-8080-exec-7] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public java.lang.String ru.cemeterysystem.controllers.admin.AdminMemorialController.updateMemorial(java.lang.Long,ru.cemeterysystem.models.Memorial,java.lang.Long,org.springframework.web.multipart.MultipartFile,boolean,org.springframework.ui.Model): [Field error in object 'memorial' on field 'burialLocation': rejected value []; codes [typeMismatch.memorial.burialLocation,typeMismatch.burialLocation,typeMismatch.ru.cemeterysystem.models.Location,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [memorial.burialLocation,burialLocation]; arguments []; default message [burialLocation]]; default message [Failed to convert property value of type 'java.lang.String' to required type 'ru.cemeterysystem.models.Location' for property 'burialLocation'; Cannot convert value of type 'java.lang.String' to required type 'ru.cemeterysystem.models.Location' for property 'burialLocation': no matching editors or conversion strategy found]] 
	at org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:158)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:224)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:178)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 03:40:58.476  WARN 2025-06-15 03:40:58,476 --- [  LogExecutor-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 22001
2025-06-15 03:40:58.476 ERROR 2025-06-15 03:40:58,476 --- [  LogExecutor-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : ОШИБКА: значение не умещается в тип character varying(1000)
2025-06-15 03:40:58.477 ERROR 2025-06-15 03:40:58,477 --- [  LogExecutor-2] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void ru.cemeterysystem.services.SystemLogService.logAction(ru.cemeterysystem.models.SystemLog$ActionType,ru.cemeterysystem.models.SystemLog$EntityType,java.lang.Long,java.lang.String,java.lang.String,ru.cemeterysystem.models.User,java.lang.String,java.lang.String,ru.cemeterysystem.models.SystemLog$Severity)
org.springframework.dao.DataIntegrityViolationException: could not execute statement [ОШИБКА: значение не умещается в тип character varying(1000)] [insert into system_logs (action_type,created_at,description,details,entity_id,entity_type,ip_address,severity,user_id,user_agent) values (?,?,?,?,?,?,?,?,?,?) returning id]; SQL [insert into system_logs (action_type,created_at,description,details,entity_id,entity_type,ip_address,severity,user_id,user_agent) values (?,?,?,?,?,?,?,?,?,?) returning id]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:293)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy153.save(Unknown Source)
	at ru.cemeterysystem.services.SystemLogService.logAction(SystemLogService.java:104)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:113)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.DataException: could not execute statement [ОШИБКА: значение не умещается в тип character varying(1000)] [insert into system_logs (action_type,created_at,description,details,entity_id,entity_type,ip_address,severity,user_id,user_agent) values (?,?,?,?,?,?,?,?,?,?) returning id]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:103)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.execute(ResultSetReturnImpl.java:145)
	at org.hibernate.id.insert.InsertReturningDelegate.executeAndExtractReturning(InsertReturningDelegate.java:96)
	at org.hibernate.id.insert.AbstractReturningDelegate.performMutation(AbstractReturningDelegate.java:58)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:671)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:292)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:273)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:323)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:391)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:305)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:224)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:137)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:757)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:741)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:319)
	at jdk.proxy2/jdk.proxy2.$Proxy145.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:626)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:173)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:148)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 23 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: значение не умещается в тип character varying(1000)
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.execute(PgPreparedStatement.java:180)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.execute(ResultSetReturnImpl.java:129)
	... 70 common frames omitted
2025-06-15 03:42:46.762  INFO 2025-06-15 03:42:46,762 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:42:46.765  INFO 2025-06-15 03:42:46,765 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:42:46.768  INFO 2025-06-15 03:42:46,768 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 03:42:46.768  INFO 2025-06-15 03:42:46,768 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:42:46.768  INFO 2025-06-15 03:42:46,768 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:42:46.768  INFO 2025-06-15 03:42:46,768 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:42:46.768  INFO 2025-06-15 03:42:46,768 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:42:46.772  INFO 2025-06-15 03:42:46,772 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:42:46.772  INFO 2025-06-15 03:42:46,772 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 03:42:46.773  INFO 2025-06-15 03:42:46,773 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 03:42:46.773  INFO 2025-06-15 03:42:46,773 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:42:46.780  INFO 2025-06-15 03:42:46,780 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:42:46.780  INFO 2025-06-15 03:42:46,780 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:43:00.920  INFO 2025-06-15 03:43:00,920 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:00.927  INFO 2025-06-15 03:43:00,927 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:00.929  INFO 2025-06-15 03:43:00,929 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 03:43:00.929  INFO 2025-06-15 03:43:00,929 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:00.930  INFO 2025-06-15 03:43:00,930 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:00.930  INFO 2025-06-15 03:43:00,930 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:43:00.930  INFO 2025-06-15 03:43:00,930 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:43:00.931  INFO 2025-06-15 03:43:00,931 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:43:00.931  INFO 2025-06-15 03:43:00,931 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 03:43:00.931  INFO 2025-06-15 03:43:00,931 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 03:43:00.936  INFO 2025-06-15 03:43:00,936 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:43:00.936  INFO 2025-06-15 03:43:00,936 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:43:03.272  INFO 2025-06-15 03:43:03,272 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:03.275  INFO 2025-06-15 03:43:03,275 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:03.275  INFO 2025-06-15 03:43:03,275 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:03.275  INFO 2025-06-15 03:43:03,275 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:43:03.275  INFO 2025-06-15 03:43:03,275 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:43:03.276  INFO 2025-06-15 03:43:03,276 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:43:03.278  INFO 2025-06-15 03:43:03,278 --- [nio-8080-exec-5] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:43:03.278  INFO 2025-06-15 03:43:03,278 --- [nio-8080-exec-5] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:43:05.360  INFO 2025-06-15 03:43:05,360 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:05.363  INFO 2025-06-15 03:43:05,363 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:05.363  INFO 2025-06-15 03:43:05,363 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:05.363  INFO 2025-06-15 03:43:05,363 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:43:05.363  INFO 2025-06-15 03:43:05,363 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:43:05.364  INFO 2025-06-15 03:43:05,364 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:43:05.367  INFO 2025-06-15 03:43:05,367 --- [nio-8080-exec-7] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:43:05.367  INFO 2025-06-15 03:43:05,367 --- [nio-8080-exec-7] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:43:23.723  INFO 2025-06-15 03:43:23,723 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:23.725  INFO 2025-06-15 03:43:23,725 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:23.725  INFO 2025-06-15 03:43:23,725 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:23.725  INFO 2025-06-15 03:43:23,725 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:43:23.725  INFO 2025-06-15 03:43:23,725 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:43:23.725  INFO 2025-06-15 03:43:23,725 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:43:23.727  INFO 2025-06-15 03:43:23,727 --- [nio-8080-exec-8] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:43:23.727  INFO 2025-06-15 03:43:23,727 --- [nio-8080-exec-8] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:43:23.910  INFO 2025-06-15 03:43:23,910 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:23.916  INFO 2025-06-15 03:43:23,916 --- [nio-8080-exec-1] r.c.services.MemorialService             : Обновление мемориала ID=1, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 03:43:23.916  INFO 2025-06-15 03:43:23,916 --- [nio-8080-exec-1] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=1
2025-06-15 03:43:24.192  INFO 2025-06-15 03:43:24,192 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:24.769  INFO 2025-06-15 03:43:24,769 --- [nio-8080-exec-2] r.c.services.MemorialService             : Загрузка фото для мемориала ID=1: пользователь=1111, isEditor=false, isOwner=true, isPublished=false
2025-06-15 03:43:25.578  INFO 2025-06-15 03:43:25,578 --- [nio-8080-exec-2] r.c.services.MemorialService             : Прямое применение фото для неопубликованного мемориала ID=1
2025-06-15 03:43:25.578  INFO 2025-06-15 03:43:25,578 --- [nio-8080-exec-2] r.c.services.MemorialService             : Фото напрямую применено для мемориала ID=1
2025-06-15 03:43:25.760  INFO 2025-06-15 03:43:25,760 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:25.762  INFO 2025-06-15 03:43:25,762 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:25.762  INFO 2025-06-15 03:43:25,762 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:25.762  INFO 2025-06-15 03:43:25,762 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:43:25.762  INFO 2025-06-15 03:43:25,762 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:43:25.763  INFO 2025-06-15 03:43:25,763 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:43:25.765  INFO 2025-06-15 03:43:25,765 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:43:25.765  INFO 2025-06-15 03:43:25,765 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:43:25.968  INFO 2025-06-15 03:43:25,968 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:25.973  INFO 2025-06-15 03:43:25,973 --- [nio-8080-exec-4] r.c.services.MemorialService             : Обновление мемориала ID=1, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 03:43:25.973  INFO 2025-06-15 03:43:25,973 --- [nio-8080-exec-4] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=1
2025-06-15 03:43:26.206  INFO 2025-06-15 03:43:26,206 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:26.207  INFO 2025-06-15 03:43:26,207 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:26.207  INFO 2025-06-15 03:43:26,207 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:26.207  INFO 2025-06-15 03:43:26,207 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:43:26.207  INFO 2025-06-15 03:43:26,207 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:43:26.208  INFO 2025-06-15 03:43:26,208 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:43:26.210  INFO 2025-06-15 03:43:26,210 --- [nio-8080-exec-3] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:43:26.210  INFO 2025-06-15 03:43:26,210 --- [nio-8080-exec-3] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:43:26.336  INFO 2025-06-15 03:43:26,336 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:26.339  INFO 2025-06-15 03:43:26,339 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:26.342  INFO 2025-06-15 03:43:26,342 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 03:43:26.342  INFO 2025-06-15 03:43:26,342 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:26.342  INFO 2025-06-15 03:43:26,342 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:26.342  INFO 2025-06-15 03:43:26,342 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:43:26.342  INFO 2025-06-15 03:43:26,342 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:43:26.343  INFO 2025-06-15 03:43:26,343 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:43:26.343  INFO 2025-06-15 03:43:26,343 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 03:43:26.344  INFO 2025-06-15 03:43:26,344 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 03:43:26.349  INFO 2025-06-15 03:43:26,349 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:43:26.349  INFO 2025-06-15 03:43:26,349 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:43:43.928  INFO 2025-06-15 03:43:43,928 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:43.942  INFO 2025-06-15 03:43:43,942 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:43.945  INFO 2025-06-15 03:43:43,945 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 03:43:43.945  INFO 2025-06-15 03:43:43,945 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:43.945  INFO 2025-06-15 03:43:43,945 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:43.945  INFO 2025-06-15 03:43:43,945 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:43:43.945  INFO 2025-06-15 03:43:43,945 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:43:43.946  INFO 2025-06-15 03:43:43,946 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:43:43.946  INFO 2025-06-15 03:43:43,946 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 03:43:43.946  INFO 2025-06-15 03:43:43,946 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 03:43:43.951  INFO 2025-06-15 03:43:43,951 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:43:43.951  INFO 2025-06-15 03:43:43,951 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:43:49.354  INFO 2025-06-15 03:43:49,354 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:49.356  INFO 2025-06-15 03:43:49,356 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:49.356  INFO 2025-06-15 03:43:49,356 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:49.356  INFO 2025-06-15 03:43:49,356 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:43:49.356  INFO 2025-06-15 03:43:49,356 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:43:49.357  INFO 2025-06-15 03:43:49,357 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:43:49.358  INFO 2025-06-15 03:43:49,358 --- [nio-8080-exec-1] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:43:49.358  INFO 2025-06-15 03:43:49,358 --- [nio-8080-exec-1] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:43:51.617  INFO 2025-06-15 03:43:51,617 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:43:51.619  INFO 2025-06-15 03:43:51,619 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:51.619  INFO 2025-06-15 03:43:51,619 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:43:51.619  INFO 2025-06-15 03:43:51,619 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:43:51.619  INFO 2025-06-15 03:43:51,619 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:43:51.619  INFO 2025-06-15 03:43:51,619 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:43:51.620  INFO 2025-06-15 03:43:51,620 --- [nio-8080-exec-2] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:43:51.620  INFO 2025-06-15 03:43:51,620 --- [nio-8080-exec-2] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:44:14.962  INFO 2025-06-15 03:44:14,962 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:44:14.964  INFO 2025-06-15 03:44:14,964 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:44:14.964  INFO 2025-06-15 03:44:14,964 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:44:14.964  INFO 2025-06-15 03:44:14,964 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:44:14.964  INFO 2025-06-15 03:44:14,964 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:44:14.965  INFO 2025-06-15 03:44:14,965 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:44:14.966  INFO 2025-06-15 03:44:14,966 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:44:14.966  INFO 2025-06-15 03:44:14,966 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:44:15.145  INFO 2025-06-15 03:44:15,145 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:44:15.150  INFO 2025-06-15 03:44:15,150 --- [nio-8080-exec-4] r.c.services.MemorialService             : Обновление мемориала ID=1, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 03:44:15.150  INFO 2025-06-15 03:44:15,150 --- [nio-8080-exec-4] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=1
2025-06-15 03:44:15.464  INFO 2025-06-15 03:44:15,464 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:44:15.465  INFO 2025-06-15 03:44:15,465 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:44:15.467  INFO 2025-06-15 03:44:15,467 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 03:44:15.467  INFO 2025-06-15 03:44:15,467 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:44:15.467  INFO 2025-06-15 03:44:15,467 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:44:15.467  INFO 2025-06-15 03:44:15,467 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:44:15.467  INFO 2025-06-15 03:44:15,467 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:44:15.468  INFO 2025-06-15 03:44:15,468 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:44:15.468  INFO 2025-06-15 03:44:15,468 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 03:44:15.469  INFO 2025-06-15 03:44:15,469 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 03:44:15.474  INFO 2025-06-15 03:44:15,474 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:44:15.474  INFO 2025-06-15 03:44:15,474 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:49:42.726  INFO 2025-06-15 03:49:42,726 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : === АДМИН ПРОСМАТРИВАЕТ МЕМОРИАЛ ===
2025-06-15 03:49:42.726  INFO 2025-06-15 03:49:42,726 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: запрос на просмотр мемориала ID=3
2025-06-15 03:49:42.741  INFO 2025-06-15 03:49:42,741 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : Найден мемориал ID=3, ФИО='Севостьянов Сергей Вячеславович', changesUnderModeration=false, publicationStatus=DRAFT
2025-06-15 03:49:42.741  INFO 2025-06-15 03:49:42,741 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : Текущий пользователь: admin
2025-06-15 03:49:42.743  INFO 2025-06-15 03:49:42,743 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : Найден пользователь: ID=7, роль=ADMIN
2025-06-15 03:49:42.744  INFO 2025-06-15 03:49:42,744 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: мемориал ID=3, changesUnderModeration=false, currentUser=admin, role=ADMIN
2025-06-15 03:49:42.745  INFO 2025-06-15 03:49:42,745 --- [nio-8080-exec-7] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=admin, роль=ADMIN, isOwner=false, isEditor=false, isAdmin=true, changesUnderModeration=false
2025-06-15 03:49:42.745  INFO 2025-06-15 03:49:42,745 --- [nio-8080-exec-7] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем admin (владелец: false, редактор: false, админ: true)
2025-06-15 03:49:42.745  INFO 2025-06-15 03:49:42,745 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: получен DTO для админа - ID=3, ФИО='Севостьянов Сергей Вячеславович', changesUnderModeration=false
2025-06-15 03:49:42.745  INFO 2025-06-15 03:49:42,745 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : ФЛАГ needsModeration НЕ установлен, так как publicationStatus=DRAFT
2025-06-15 03:49:42.745  INFO 2025-06-15 03:49:42,745 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : ФЛАГ changesNeedModeration НЕ установлен для мемориала ID=3
2025-06-15 03:49:42.745  INFO 2025-06-15 03:49:42,745 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : ИТОГОВЫЕ ФЛАГИ для admin/memorial-view: needsModeration=null, changesNeedModeration=null
2025-06-15 03:49:57.308 ERROR 2025-06-15 03:49:57,308 --- [io-8080-exec-10] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public java.lang.String ru.cemeterysystem.controllers.admin.AdminMemorialController.updateMemorial(java.lang.Long,ru.cemeterysystem.models.Memorial,java.lang.Long,org.springframework.web.multipart.MultipartFile,boolean,org.springframework.ui.Model): [Field error in object 'memorial' on field 'burialLocation': rejected value []; codes [typeMismatch.memorial.burialLocation,typeMismatch.burialLocation,typeMismatch.ru.cemeterysystem.models.Location,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [memorial.burialLocation,burialLocation]; arguments []; default message [burialLocation]]; default message [Failed to convert property value of type 'java.lang.String' to required type 'ru.cemeterysystem.models.Location' for property 'burialLocation'; Cannot convert value of type 'java.lang.String' to required type 'ru.cemeterysystem.models.Location' for property 'burialLocation': no matching editors or conversion strategy found]] 
	at org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:158)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:224)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:178)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:64)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 03:49:57.317  WARN 2025-06-15 03:49:57,317 --- [  LogExecutor-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 22001
2025-06-15 03:49:57.317 ERROR 2025-06-15 03:49:57,317 --- [  LogExecutor-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : ОШИБКА: значение не умещается в тип character varying(1000)
2025-06-15 03:49:57.317 ERROR 2025-06-15 03:49:57,317 --- [  LogExecutor-2] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void ru.cemeterysystem.services.SystemLogService.logAction(ru.cemeterysystem.models.SystemLog$ActionType,ru.cemeterysystem.models.SystemLog$EntityType,java.lang.Long,java.lang.String,java.lang.String,ru.cemeterysystem.models.User,java.lang.String,java.lang.String,ru.cemeterysystem.models.SystemLog$Severity)
org.springframework.dao.DataIntegrityViolationException: could not execute statement [ОШИБКА: значение не умещается в тип character varying(1000)] [insert into system_logs (action_type,created_at,description,details,entity_id,entity_type,ip_address,severity,user_id,user_agent) values (?,?,?,?,?,?,?,?,?,?) returning id]; SQL [insert into system_logs (action_type,created_at,description,details,entity_id,entity_type,ip_address,severity,user_id,user_agent) values (?,?,?,?,?,?,?,?,?,?) returning id]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:293)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy153.save(Unknown Source)
	at ru.cemeterysystem.services.SystemLogService.logAction(SystemLogService.java:104)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:113)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.DataException: could not execute statement [ОШИБКА: значение не умещается в тип character varying(1000)] [insert into system_logs (action_type,created_at,description,details,entity_id,entity_type,ip_address,severity,user_id,user_agent) values (?,?,?,?,?,?,?,?,?,?) returning id]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:103)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.execute(ResultSetReturnImpl.java:145)
	at org.hibernate.id.insert.InsertReturningDelegate.executeAndExtractReturning(InsertReturningDelegate.java:96)
	at org.hibernate.id.insert.AbstractReturningDelegate.performMutation(AbstractReturningDelegate.java:58)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:671)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:292)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:273)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:323)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:391)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:305)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:224)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:137)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:757)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:741)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:319)
	at jdk.proxy2/jdk.proxy2.$Proxy145.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:626)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:173)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:148)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 23 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: значение не умещается в тип character varying(1000)
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.execute(PgPreparedStatement.java:180)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.execute(ResultSetReturnImpl.java:129)
	... 70 common frames omitted
2025-06-15 03:51:31.403  INFO 2025-06-15 03:51:31,403 --- [nio-8080-exec-7] r.c.controllers.admin.AdminController    : Admin home accessed by: admin with authorities: [ROLE_ADMIN]
2025-06-15 03:52:15.517  INFO 2025-06-15 03:52:15,517 --- [nio-8080-exec-2] r.c.c.SimpleServerLogController          : Server logs page accessed
2025-06-15 03:52:39.104  INFO 2025-06-15 03:52:39,104 --- [nio-8080-exec-4] r.c.c.admin.AdminReportsController       : Загрузка страницы отчётов
2025-06-15 03:52:40.604  INFO 2025-06-15 03:52:40,604 --- [nio-8080-exec-3] r.c.c.SimpleServerLogController          : Server logs page accessed
2025-06-15 03:53:05.103  INFO 2025-06-15 03:53:05,103 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:05.104  INFO 2025-06-15 03:53:05,104 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:05.106  INFO 2025-06-15 03:53:05,106 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 03:53:05.106  INFO 2025-06-15 03:53:05,106 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:05.106  INFO 2025-06-15 03:53:05,106 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:05.106  INFO 2025-06-15 03:53:05,106 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:53:05.106  INFO 2025-06-15 03:53:05,106 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:53:05.108  INFO 2025-06-15 03:53:05,108 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:53:05.109  INFO 2025-06-15 03:53:05,109 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 03:53:05.109  INFO 2025-06-15 03:53:05,109 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 03:53:05.115  INFO 2025-06-15 03:53:05,115 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:53:05.115  INFO 2025-06-15 03:53:05,115 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:53:05.883  INFO 2025-06-15 03:53:05,883 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:09.217  INFO 2025-06-15 03:53:09,217 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:09.220  INFO 2025-06-15 03:53:09,220 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:09.220  INFO 2025-06-15 03:53:09,220 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:09.220  INFO 2025-06-15 03:53:09,220 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:53:09.220  INFO 2025-06-15 03:53:09,220 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:53:09.221  INFO 2025-06-15 03:53:09,221 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:53:09.224  INFO 2025-06-15 03:53:09,224 --- [nio-8080-exec-8] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:53:09.224  INFO 2025-06-15 03:53:09,224 --- [nio-8080-exec-8] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:53:11.486  INFO 2025-06-15 03:53:11,486 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:11.487  INFO 2025-06-15 03:53:11,487 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:11.487  INFO 2025-06-15 03:53:11,487 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:11.487  INFO 2025-06-15 03:53:11,487 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:53:11.487  INFO 2025-06-15 03:53:11,487 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:53:11.488  INFO 2025-06-15 03:53:11,488 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:53:11.492  INFO 2025-06-15 03:53:11,492 --- [nio-8080-exec-2] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:53:11.492  INFO 2025-06-15 03:53:11,492 --- [nio-8080-exec-2] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:53:25.611  INFO 2025-06-15 03:53:25,611 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:25.613  INFO 2025-06-15 03:53:25,613 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:25.613  INFO 2025-06-15 03:53:25,613 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:25.613  INFO 2025-06-15 03:53:25,613 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:53:25.613  INFO 2025-06-15 03:53:25,613 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:53:25.614  INFO 2025-06-15 03:53:25,614 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:53:25.616  INFO 2025-06-15 03:53:25,616 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:53:25.616  INFO 2025-06-15 03:53:25,616 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:53:25.798  INFO 2025-06-15 03:53:25,798 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:25.806  INFO 2025-06-15 03:53:25,806 --- [nio-8080-exec-4] r.c.services.MemorialService             : Обновление мемориала ID=1, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 03:53:25.806  INFO 2025-06-15 03:53:25,806 --- [nio-8080-exec-4] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=1
2025-06-15 03:53:26.133  INFO 2025-06-15 03:53:26,133 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:26.143  INFO 2025-06-15 03:53:26,143 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:26.147  INFO 2025-06-15 03:53:26,147 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 03:53:26.147  INFO 2025-06-15 03:53:26,147 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:26.147  INFO 2025-06-15 03:53:26,147 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:26.147  INFO 2025-06-15 03:53:26,147 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:53:26.147  INFO 2025-06-15 03:53:26,147 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:53:26.149  INFO 2025-06-15 03:53:26,149 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:53:26.149  INFO 2025-06-15 03:53:26,149 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 03:53:26.149  INFO 2025-06-15 03:53:26,149 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 03:53:26.156  INFO 2025-06-15 03:53:26,156 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:53:26.156  INFO 2025-06-15 03:53:26,156 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:53:33.711  INFO 2025-06-15 03:53:33,711 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:33.714  INFO 2025-06-15 03:53:33,714 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:33.714  INFO 2025-06-15 03:53:33,714 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:33.714  INFO 2025-06-15 03:53:33,714 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:53:33.714  INFO 2025-06-15 03:53:33,714 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:53:33.716  INFO 2025-06-15 03:53:33,716 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:53:33.719  INFO 2025-06-15 03:53:33,719 --- [nio-8080-exec-5] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:53:33.719  INFO 2025-06-15 03:53:33,719 --- [nio-8080-exec-5] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:53:38.112  INFO 2025-06-15 03:53:38,112 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:38.114  INFO 2025-06-15 03:53:38,114 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:38.114  INFO 2025-06-15 03:53:38,114 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:38.114  INFO 2025-06-15 03:53:38,114 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:53:38.114  INFO 2025-06-15 03:53:38,114 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:53:38.115  INFO 2025-06-15 03:53:38,115 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:53:38.117  INFO 2025-06-15 03:53:38,117 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:53:38.117  INFO 2025-06-15 03:53:38,117 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:53:46.739  INFO 2025-06-15 03:53:46,739 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:46.741  INFO 2025-06-15 03:53:46,741 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:46.741  INFO 2025-06-15 03:53:46,741 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:46.741  INFO 2025-06-15 03:53:46,741 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:53:46.741  INFO 2025-06-15 03:53:46,741 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:53:46.742  INFO 2025-06-15 03:53:46,742 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:53:46.745  INFO 2025-06-15 03:53:46,745 --- [nio-8080-exec-8] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:53:46.745  INFO 2025-06-15 03:53:46,745 --- [nio-8080-exec-8] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:53:46.923  INFO 2025-06-15 03:53:46,923 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:46.929  INFO 2025-06-15 03:53:46,929 --- [nio-8080-exec-1] r.c.services.MemorialService             : Обновление мемориала ID=2, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 03:53:46.929  INFO 2025-06-15 03:53:46,929 --- [nio-8080-exec-1] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=2
2025-06-15 03:53:47.452  INFO 2025-06-15 03:53:47,452 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:49.999  INFO 2025-06-15 03:53:49,999 --- [nio-8080-exec-2] r.c.services.MemorialService             : Загрузка фото для мемориала ID=2: пользователь=1111, isEditor=false, isOwner=true, isPublished=false
2025-06-15 03:53:54.656  INFO 2025-06-15 03:53:54,656 --- [nio-8080-exec-2] r.c.services.MemorialService             : Прямое применение фото для неопубликованного мемориала ID=2
2025-06-15 03:53:54.795  INFO 2025-06-15 03:53:54,795 --- [nio-8080-exec-2] r.c.services.MemorialService             : Фото напрямую применено для мемориала ID=2
2025-06-15 03:53:55.097  INFO 2025-06-15 03:53:55,097 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:55.101  INFO 2025-06-15 03:53:55,101 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:55.101  INFO 2025-06-15 03:53:55,101 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:55.101  INFO 2025-06-15 03:53:55,101 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:53:55.101  INFO 2025-06-15 03:53:55,101 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:53:55.103  INFO 2025-06-15 03:53:55,103 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:53:55.105  INFO 2025-06-15 03:53:55,105 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:53:55.105  INFO 2025-06-15 03:53:55,105 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:53:55.485  INFO 2025-06-15 03:53:55,485 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:55.492  INFO 2025-06-15 03:53:55,492 --- [nio-8080-exec-4] r.c.services.MemorialService             : Обновление мемориала ID=2, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 03:53:55.492  INFO 2025-06-15 03:53:55,492 --- [nio-8080-exec-4] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=2
2025-06-15 03:53:55.747  INFO 2025-06-15 03:53:55,747 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:55.750  INFO 2025-06-15 03:53:55,750 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:55.750  INFO 2025-06-15 03:53:55,750 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:55.750  INFO 2025-06-15 03:53:55,750 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:53:55.750  INFO 2025-06-15 03:53:55,750 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:53:55.751  INFO 2025-06-15 03:53:55,751 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:53:55.754  INFO 2025-06-15 03:53:55,754 --- [nio-8080-exec-3] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:53:55.755  INFO 2025-06-15 03:53:55,755 --- [nio-8080-exec-3] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:53:55.979  INFO 2025-06-15 03:53:55,979 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:53:55.982  INFO 2025-06-15 03:53:55,982 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 03:53:55.982  INFO 2025-06-15 03:53:55,982 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:55.982  INFO 2025-06-15 03:53:55,982 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:53:55.982  INFO 2025-06-15 03:53:55,982 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:53:55.982  INFO 2025-06-15 03:53:55,982 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:53:55.984  INFO 2025-06-15 03:53:55,984 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:53:55.984  INFO 2025-06-15 03:53:55,984 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 03:53:55.985  INFO 2025-06-15 03:53:55,985 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 03:53:55.992  INFO 2025-06-15 03:53:55,992 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:53:55.992  INFO 2025-06-15 03:53:55,992 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:53:56.001  INFO 2025-06-15 03:53:56,001 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:54:45.908  INFO 2025-06-15 03:54:45,908 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:54:46.075  INFO 2025-06-15 03:54:46,075 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:54:46.181  INFO 2025-06-15 03:54:46,181 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:54:46.331  INFO 2025-06-15 03:54:46,331 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:54:46.376  INFO 2025-06-15 03:54:46,376 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:54:46.537  INFO 2025-06-15 03:54:46,537 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:55:19.189  INFO 2025-06-15 03:55:19,189 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:55:19.194  INFO 2025-06-15 03:55:19,194 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 03:55:19.194  INFO 2025-06-15 03:55:19,194 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:55:19.194  INFO 2025-06-15 03:55:19,194 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:55:19.194  INFO 2025-06-15 03:55:19,194 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:55:19.194  INFO 2025-06-15 03:55:19,194 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:55:19.196  INFO 2025-06-15 03:55:19,196 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:55:19.196  INFO 2025-06-15 03:55:19,196 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 03:55:19.196  INFO 2025-06-15 03:55:19,196 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 03:55:19.207  INFO 2025-06-15 03:55:19,207 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:55:19.207  INFO 2025-06-15 03:55:19,207 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:56:26.136  INFO 2025-06-15 03:56:26,136 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:56:26.139  INFO 2025-06-15 03:56:26,139 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 03:56:26.139  INFO 2025-06-15 03:56:26,139 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:56:26.139  INFO 2025-06-15 03:56:26,139 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:56:26.139  INFO 2025-06-15 03:56:26,139 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:56:26.139  INFO 2025-06-15 03:56:26,139 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:56:26.140  INFO 2025-06-15 03:56:26,140 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:56:26.140  INFO 2025-06-15 03:56:26,140 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 03:56:26.140  INFO 2025-06-15 03:56:26,140 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 03:56:26.147  INFO 2025-06-15 03:56:26,147 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:56:26.147  INFO 2025-06-15 03:56:26,147 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:56:26.165  INFO 2025-06-15 03:56:26,165 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:56:26.165  INFO 2025-06-15 03:56:26,165 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:56:54.876  INFO 2025-06-15 03:56:54,876 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:56:54.879  INFO 2025-06-15 03:56:54,879 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:56:54.879  INFO 2025-06-15 03:56:54,879 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:56:54.879  INFO 2025-06-15 03:56:54,879 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:56:54.879  INFO 2025-06-15 03:56:54,879 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:56:54.880  INFO 2025-06-15 03:56:54,880 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:56:54.881  INFO 2025-06-15 03:56:54,881 --- [nio-8080-exec-5] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:56:54.882  INFO 2025-06-15 03:56:54,882 --- [nio-8080-exec-5] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:56:57.054  INFO 2025-06-15 03:56:57,054 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:56:57.056  INFO 2025-06-15 03:56:57,056 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:56:57.056  INFO 2025-06-15 03:56:57,056 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:56:57.056  INFO 2025-06-15 03:56:57,056 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:56:57.056  INFO 2025-06-15 03:56:57,056 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:56:57.057  INFO 2025-06-15 03:56:57,057 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:56:57.059  INFO 2025-06-15 03:56:57,059 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:56:57.059  INFO 2025-06-15 03:56:57,059 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:57:01.785  INFO 2025-06-15 03:57:01,785 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:57:01.787  INFO 2025-06-15 03:57:01,787 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:57:01.787  INFO 2025-06-15 03:57:01,787 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:57:01.787  INFO 2025-06-15 03:57:01,787 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:57:01.787  INFO 2025-06-15 03:57:01,787 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:57:01.788  INFO 2025-06-15 03:57:01,788 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:57:01.789  INFO 2025-06-15 03:57:01,789 --- [nio-8080-exec-7] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:57:01.790  INFO 2025-06-15 03:57:01,790 --- [nio-8080-exec-7] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:57:02.008  INFO 2025-06-15 03:57:02,008 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:57:02.013  INFO 2025-06-15 03:57:02,013 --- [nio-8080-exec-8] r.c.services.MemorialService             : Обновление мемориала ID=2, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 03:57:02.013  INFO 2025-06-15 03:57:02,013 --- [nio-8080-exec-8] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=2
2025-06-15 03:57:02.399  INFO 2025-06-15 03:57:02,399 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:57:02.401  INFO 2025-06-15 03:57:02,401 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 03:57:02.401  INFO 2025-06-15 03:57:02,401 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:57:02.401  INFO 2025-06-15 03:57:02,401 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:57:02.401  INFO 2025-06-15 03:57:02,401 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:57:02.401  INFO 2025-06-15 03:57:02,401 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:57:02.402  INFO 2025-06-15 03:57:02,402 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:57:02.402  INFO 2025-06-15 03:57:02,402 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 03:57:02.402  INFO 2025-06-15 03:57:02,402 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 03:57:02.408  INFO 2025-06-15 03:57:02,408 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:57:02.408  INFO 2025-06-15 03:57:02,408 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:57:02.413  INFO 2025-06-15 03:57:02,413 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:57:11.946  INFO 2025-06-15 03:57:11,946 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:57:11.948  INFO 2025-06-15 03:57:11,948 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:57:11.948  INFO 2025-06-15 03:57:11,948 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:57:11.949  INFO 2025-06-15 03:57:11,949 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:57:11.949  INFO 2025-06-15 03:57:11,949 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:57:11.950  INFO 2025-06-15 03:57:11,950 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:57:11.951  INFO 2025-06-15 03:57:11,951 --- [nio-8080-exec-4] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 03:57:11.952  INFO 2025-06-15 03:57:11,952 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 03:57:14.146  INFO 2025-06-15 03:57:14,146 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:57:14.151  INFO 2025-06-15 03:57:14,151 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:57:14.154  INFO 2025-06-15 03:57:14,154 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 03:57:14.154  INFO 2025-06-15 03:57:14,154 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:57:14.154  INFO 2025-06-15 03:57:14,154 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:57:14.154  INFO 2025-06-15 03:57:14,154 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:57:14.154  INFO 2025-06-15 03:57:14,154 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:57:14.155  INFO 2025-06-15 03:57:14,155 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:57:14.155  INFO 2025-06-15 03:57:14,155 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 03:57:14.155  INFO 2025-06-15 03:57:14,155 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 03:57:14.160  INFO 2025-06-15 03:57:14,160 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:57:14.160  INFO 2025-06-15 03:57:14,160 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:57:16.141  INFO 2025-06-15 03:57:16,141 --- [nio-8080-exec-5] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 0 публичных мемориалов на странице 1 из 0
2025-06-15 03:57:16.673  INFO 2025-06-15 03:57:16,673 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:57:16.675  INFO 2025-06-15 03:57:16,675 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 03:57:16.675  INFO 2025-06-15 03:57:16,675 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 03:57:16.675  INFO 2025-06-15 03:57:16,675 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 03:57:16.675  INFO 2025-06-15 03:57:16,675 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 03:57:16.675  INFO 2025-06-15 03:57:16,675 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 03:57:16.676  INFO 2025-06-15 03:57:16,676 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 03:57:16.676  INFO 2025-06-15 03:57:16,676 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 03:57:16.676  INFO 2025-06-15 03:57:16,676 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 03:57:16.681  INFO 2025-06-15 03:57:16,681 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:57:16.682  INFO 2025-06-15 03:57:16,682 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 03:57:19.001  INFO 2025-06-15 03:57:19,001 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:57:19.158  INFO 2025-06-15 03:57:19,158 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:57:19.264  INFO 2025-06-15 03:57:19,264 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:57:19.400  INFO 2025-06-15 03:57:19,400 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:57:19.463  INFO 2025-06-15 03:57:19,463 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 03:57:19.598  INFO 2025-06-15 03:57:19,598 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:01:25.376  INFO 2025-06-15 04:01:25,376 --- [nio-8080-exec-9] r.c.c.SimpleServerLogController          : Server logs page accessed
2025-06-15 04:02:39.119  INFO 2025-06-15 04:02:39,119 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:02:39.121  INFO 2025-06-15 04:02:39,121 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:02:39.121  INFO 2025-06-15 04:02:39,121 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:02:39.121  INFO 2025-06-15 04:02:39,121 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:02:39.121  INFO 2025-06-15 04:02:39,121 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:02:39.121  INFO 2025-06-15 04:02:39,121 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:02:39.122  INFO 2025-06-15 04:02:39,122 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:02:39.122  INFO 2025-06-15 04:02:39,122 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:02:39.123  INFO 2025-06-15 04:02:39,123 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:02:39.131  INFO 2025-06-15 04:02:39,131 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:02:39.131  INFO 2025-06-15 04:02:39,131 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:02:39.190  INFO 2025-06-15 04:02:39,190 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:02:39.191  INFO 2025-06-15 04:02:39,191 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:02:42.715  INFO 2025-06-15 04:02:42,715 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:02:42.886  INFO 2025-06-15 04:02:42,886 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:02:42.954  INFO 2025-06-15 04:02:42,954 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:02:43.120  INFO 2025-06-15 04:02:43,120 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:02:43.159  INFO 2025-06-15 04:02:43,159 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:02:43.316  INFO 2025-06-15 04:02:43,316 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:02:46.530  INFO 2025-06-15 04:02:46,530 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:02:48.927  INFO 2025-06-15 04:02:48,927 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:21.971  INFO 2025-06-15 04:05:21,971 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:22.042  INFO 2025-06-15 04:05:22,042 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:22.042  INFO 2025-06-15 04:05:22,042 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:22.045  INFO 2025-06-15 04:05:22,045 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:05:22.045  INFO 2025-06-15 04:05:22,045 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:05:22.045  INFO 2025-06-15 04:05:22,045 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:05:22.045  INFO 2025-06-15 04:05:22,045 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:05:22.045  INFO 2025-06-15 04:05:22,045 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:05:22.048  INFO 2025-06-15 04:05:22,048 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:05:22.048  INFO 2025-06-15 04:05:22,048 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:05:22.049  INFO 2025-06-15 04:05:22,049 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:05:22.056  INFO 2025-06-15 04:05:22,056 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:05:22.057  INFO 2025-06-15 04:05:22,057 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:05:24.256  INFO 2025-06-15 04:05:24,256 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:24.425  INFO 2025-06-15 04:05:24,425 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:24.489  INFO 2025-06-15 04:05:24,489 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:24.649  INFO 2025-06-15 04:05:24,649 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:24.690  INFO 2025-06-15 04:05:24,690 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:24.839  INFO 2025-06-15 04:05:24,839 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:26.637  INFO 2025-06-15 04:05:26,637 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:27.357  INFO 2025-06-15 04:05:27,357 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:27.575  INFO 2025-06-15 04:05:27,575 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:27.776  INFO 2025-06-15 04:05:27,776 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:28.880  INFO 2025-06-15 04:05:28,880 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:30.169  INFO 2025-06-15 04:05:30,169 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:34.898  INFO 2025-06-15 04:05:34,898 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:34.908  INFO 2025-06-15 04:05:34,908 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:35.097  INFO 2025-06-15 04:05:35,097 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:35.483  INFO 2025-06-15 04:05:35,483 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:35.483  INFO 2025-06-15 04:05:35,483 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:35.675  INFO 2025-06-15 04:05:35,675 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:38.040  INFO 2025-06-15 04:05:38,040 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:39.407  INFO 2025-06-15 04:05:39,407 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:51.185  INFO 2025-06-15 04:05:51,185 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:51.194  INFO 2025-06-15 04:05:51,194 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:51.378  INFO 2025-06-15 04:05:51,378 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:51.458  INFO 2025-06-15 04:05:51,458 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:51.556  INFO 2025-06-15 04:05:51,556 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:51.638  INFO 2025-06-15 04:05:51,638 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:54.741  INFO 2025-06-15 04:05:54,741 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:56.029  INFO 2025-06-15 04:05:56,029 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:58.561  INFO 2025-06-15 04:05:58,561 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:58.570  INFO 2025-06-15 04:05:58,570 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:58.754  INFO 2025-06-15 04:05:58,754 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:59.139  INFO 2025-06-15 04:05:59,139 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:59.139  INFO 2025-06-15 04:05:59,139 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:05:59.631  INFO 2025-06-15 04:05:59,631 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:06:07.894  INFO 2025-06-15 04:06:07,894 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:06:08.826  INFO 2025-06-15 04:06:08,826 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:06:09.048  INFO 2025-06-15 04:06:09,048 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:06:09.235  INFO 2025-06-15 04:06:09,235 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:06:10.003  INFO 2025-06-15 04:06:10,003 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:06:10.004  INFO 2025-06-15 04:06:10,004 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:06:10.005  INFO 2025-06-15 04:06:10,005 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:06:10.005  INFO 2025-06-15 04:06:10,005 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:06:10.005  INFO 2025-06-15 04:06:10,005 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:06:10.005  INFO 2025-06-15 04:06:10,005 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:06:10.005  INFO 2025-06-15 04:06:10,005 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:06:10.005  INFO 2025-06-15 04:06:10,005 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:06:10.005  INFO 2025-06-15 04:06:10,005 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:06:10.010  INFO 2025-06-15 04:06:10,010 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:06:10.010  INFO 2025-06-15 04:06:10,010 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:06:12.825  INFO 2025-06-15 04:06:12,825 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:06:12.826  INFO 2025-06-15 04:06:12,826 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:06:12.827  INFO 2025-06-15 04:06:12,827 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:06:12.827  INFO 2025-06-15 04:06:12,827 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:06:12.827  INFO 2025-06-15 04:06:12,827 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:06:12.827  INFO 2025-06-15 04:06:12,827 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:06:12.828  INFO 2025-06-15 04:06:12,828 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:06:12.828  INFO 2025-06-15 04:06:12,828 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:06:21.109  INFO 2025-06-15 04:06:21,109 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:06:21.111  INFO 2025-06-15 04:06:21,111 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:06:21.111  INFO 2025-06-15 04:06:21,111 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:06:21.111  INFO 2025-06-15 04:06:21,111 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:06:21.111  INFO 2025-06-15 04:06:21,111 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:06:21.112  INFO 2025-06-15 04:06:21,112 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:06:21.113  INFO 2025-06-15 04:06:21,113 --- [nio-8080-exec-7] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:06:21.113  INFO 2025-06-15 04:06:21,113 --- [nio-8080-exec-7] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:06:49.689  INFO 2025-06-15 04:06:49,689 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:06:49.689  INFO 2025-06-15 04:06:49,689 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:06:49.691  INFO 2025-06-15 04:06:49,691 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:06:49.691  INFO 2025-06-15 04:06:49,691 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:06:49.691  INFO 2025-06-15 04:06:49,691 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:06:49.691  INFO 2025-06-15 04:06:49,691 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:06:49.691  INFO 2025-06-15 04:06:49,691 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:06:49.694  INFO 2025-06-15 04:06:49,694 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:06:49.694  INFO 2025-06-15 04:06:49,694 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:06:49.694  INFO 2025-06-15 04:06:49,694 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:06:49.700  INFO 2025-06-15 04:06:49,700 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:06:49.700  INFO 2025-06-15 04:06:49,700 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:07:49.031  INFO 2025-06-15 04:07:49,031 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:07:49.034  INFO 2025-06-15 04:07:49,034 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:07:49.034  INFO 2025-06-15 04:07:49,034 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:07:49.034  INFO 2025-06-15 04:07:49,034 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:07:49.034  INFO 2025-06-15 04:07:49,034 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:07:49.035  INFO 2025-06-15 04:07:49,035 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:07:49.037  INFO 2025-06-15 04:07:49,037 --- [nio-8080-exec-3] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:07:49.037  INFO 2025-06-15 04:07:49,037 --- [nio-8080-exec-3] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:07:50.844  INFO 2025-06-15 04:07:50,844 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:07:50.846  INFO 2025-06-15 04:07:50,846 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:07:50.846  INFO 2025-06-15 04:07:50,846 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:07:50.846  INFO 2025-06-15 04:07:50,846 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:07:50.846  INFO 2025-06-15 04:07:50,846 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:07:50.847  INFO 2025-06-15 04:07:50,847 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:07:50.848  INFO 2025-06-15 04:07:50,848 --- [nio-8080-exec-8] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:07:50.848  INFO 2025-06-15 04:07:50,848 --- [nio-8080-exec-8] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:16:11.728  INFO 2025-06-15 04:16:11,728 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:16:11.729  INFO 2025-06-15 04:16:11,729 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:16:11.729  INFO 2025-06-15 04:16:11,729 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:16:11.732  INFO 2025-06-15 04:16:11,732 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:16:11.732  INFO 2025-06-15 04:16:11,732 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:16:11.732  INFO 2025-06-15 04:16:11,732 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:16:11.732  INFO 2025-06-15 04:16:11,732 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:16:11.732  INFO 2025-06-15 04:16:11,732 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:16:11.738  INFO 2025-06-15 04:16:11,738 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:16:11.738  INFO 2025-06-15 04:16:11,738 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:16:11.738  INFO 2025-06-15 04:16:11,738 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:16:11.747  INFO 2025-06-15 04:16:11,747 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:16:11.747  INFO 2025-06-15 04:16:11,747 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:16:15.834  INFO 2025-06-15 04:16:15,834 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:16:15.836  INFO 2025-06-15 04:16:15,836 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:16:15.836  INFO 2025-06-15 04:16:15,836 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:16:15.836  INFO 2025-06-15 04:16:15,836 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:16:15.836  INFO 2025-06-15 04:16:15,836 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:16:15.838  INFO 2025-06-15 04:16:15,838 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:16:15.840  INFO 2025-06-15 04:16:15,840 --- [nio-8080-exec-3] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:16:15.840  INFO 2025-06-15 04:16:15,840 --- [nio-8080-exec-3] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:16:17.987  INFO 2025-06-15 04:16:17,987 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:16:17.991  INFO 2025-06-15 04:16:17,991 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:16:17.991  INFO 2025-06-15 04:16:17,991 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:16:17.991  INFO 2025-06-15 04:16:17,991 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:16:17.991  INFO 2025-06-15 04:16:17,991 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:16:17.992  INFO 2025-06-15 04:16:17,992 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:16:17.997  INFO 2025-06-15 04:16:17,997 --- [nio-8080-exec-5] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:16:17.997  INFO 2025-06-15 04:16:17,997 --- [nio-8080-exec-5] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:17:24.471  INFO 2025-06-15 04:17:24,471 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:17:24.471  INFO 2025-06-15 04:17:24,471 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:17:24.474  INFO 2025-06-15 04:17:24,474 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:17:24.474  INFO 2025-06-15 04:17:24,474 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:17:24.474  INFO 2025-06-15 04:17:24,474 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:17:24.474  INFO 2025-06-15 04:17:24,474 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:17:24.474  INFO 2025-06-15 04:17:24,474 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:17:24.475  INFO 2025-06-15 04:17:24,475 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:17:24.475  INFO 2025-06-15 04:17:24,475 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:17:24.475  INFO 2025-06-15 04:17:24,475 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:17:24.481  INFO 2025-06-15 04:17:24,481 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:17:24.481  INFO 2025-06-15 04:17:24,481 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:17:33.850  INFO 2025-06-15 04:17:33,850 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:17:33.853  INFO 2025-06-15 04:17:33,853 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:17:33.853  INFO 2025-06-15 04:17:33,853 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:17:33.853  INFO 2025-06-15 04:17:33,853 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:17:33.853  INFO 2025-06-15 04:17:33,853 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:17:33.854  INFO 2025-06-15 04:17:33,854 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:17:33.856  INFO 2025-06-15 04:17:33,856 --- [nio-8080-exec-6] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:17:33.856  INFO 2025-06-15 04:17:33,856 --- [nio-8080-exec-6] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:17:41.758  INFO 2025-06-15 04:17:41,758 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:17:41.761  INFO 2025-06-15 04:17:41,761 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:17:41.761  INFO 2025-06-15 04:17:41,761 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:17:41.761  INFO 2025-06-15 04:17:41,761 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:17:41.761  INFO 2025-06-15 04:17:41,761 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:17:41.762  INFO 2025-06-15 04:17:41,762 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:17:41.765  INFO 2025-06-15 04:17:41,765 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:17:41.765  INFO 2025-06-15 04:17:41,765 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:18:18.326  INFO 2025-06-15 04:18:18,326 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:18.328  INFO 2025-06-15 04:18:18,328 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:18:18.329  INFO 2025-06-15 04:18:18,329 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:18:18.329  INFO 2025-06-15 04:18:18,329 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:18:18.329  INFO 2025-06-15 04:18:18,329 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:18:18.330  INFO 2025-06-15 04:18:18,330 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:18:18.333  INFO 2025-06-15 04:18:18,333 --- [nio-8080-exec-4] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:18:18.333  INFO 2025-06-15 04:18:18,333 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:18:18.652  INFO 2025-06-15 04:18:18,652 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:18.661  INFO 2025-06-15 04:18:18,661 --- [nio-8080-exec-3] r.c.services.MemorialService             : Обновление мемориала ID=3, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 04:18:18.661  INFO 2025-06-15 04:18:18,661 --- [nio-8080-exec-3] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=3
2025-06-15 04:18:20.125  INFO 2025-06-15 04:18:20,125 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:24.342  INFO 2025-06-15 04:18:24,342 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:18:24.342  INFO 2025-06-15 04:18:24,342 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:18:24.342  INFO 2025-06-15 04:18:24,342 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:18:24.342  INFO 2025-06-15 04:18:24,342 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:18:24.343  INFO 2025-06-15 04:18:24,343 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:18:24.343  INFO 2025-06-15 04:18:24,343 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Загрузка документа для мемориала ID=3 пользователем 1111
2025-06-15 04:18:24.347  INFO 2025-06-15 04:18:24,347 --- [nio-8080-exec-5] r.c.services.MemorialService             : Загрузка документа для мемориала ID=3: пользователь=1111, размер=648810, тип=application/pdf
2025-06-15 04:18:25.553  INFO 2025-06-15 04:18:25,553 --- [nio-8080-exec-5] r.c.services.MemorialService             : Документ загружен для мемориала ID=3, URL: https://s3.timeweb.cloud/ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d/diplomSS/1662e63f-7f12-41c4-b2a5-b46ea9a4f56c.pdf
2025-06-15 04:18:26.247  INFO 2025-06-15 04:18:26,247 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:26.249  INFO 2025-06-15 04:18:26,249 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:18:26.249  INFO 2025-06-15 04:18:26,249 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:18:26.249  INFO 2025-06-15 04:18:26,249 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:18:26.249  INFO 2025-06-15 04:18:26,249 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:18:26.250  INFO 2025-06-15 04:18:26,250 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:18:26.253  INFO 2025-06-15 04:18:26,253 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:18:26.253  INFO 2025-06-15 04:18:26,253 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:18:36.230  INFO 2025-06-15 04:18:36,230 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:36.233  INFO 2025-06-15 04:18:36,233 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:18:36.233  INFO 2025-06-15 04:18:36,233 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:18:36.233  INFO 2025-06-15 04:18:36,233 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:18:36.233  INFO 2025-06-15 04:18:36,233 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:18:36.234  INFO 2025-06-15 04:18:36,234 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:18:36.234  INFO 2025-06-15 04:18:36,234 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Отправка мемориала ID=3 на модерацию пользователем 1111
2025-06-15 04:18:36.245  INFO 2025-06-15 04:18:36,245 --- [nio-8080-exec-7] r.c.services.MemorialService             : Уведомление о модерации создано для администратора admin
2025-06-15 04:18:36.245  INFO 2025-06-15 04:18:36,245 --- [nio-8080-exec-7] r.c.services.MemorialService             : Мемориал ID=3 отправлен на модерацию пользователем ID=8
2025-06-15 04:18:37.574  INFO 2025-06-15 04:18:37,574 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:37.667  INFO 2025-06-15 04:18:37,667 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:37.684  INFO 2025-06-15 04:18:37,684 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:37.748  INFO 2025-06-15 04:18:37,748 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:37.749  INFO 2025-06-15 04:18:37,749 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:37.783  INFO 2025-06-15 04:18:37,783 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:37.862  INFO 2025-06-15 04:18:37,862 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:37.902  INFO 2025-06-15 04:18:37,902 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:37.930  INFO 2025-06-15 04:18:37,930 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:37.932  INFO 2025-06-15 04:18:37,932 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:18:37.932  INFO 2025-06-15 04:18:37,932 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:18:37.932  INFO 2025-06-15 04:18:37,932 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:18:37.932  INFO 2025-06-15 04:18:37,932 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:18:37.932  INFO 2025-06-15 04:18:37,932 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:18:37.933  INFO 2025-06-15 04:18:37,933 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:18:37.933  INFO 2025-06-15 04:18:37,933 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:18:37.934  INFO 2025-06-15 04:18:37,934 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:18:37.941  INFO 2025-06-15 04:18:37,941 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:18:37.941  INFO 2025-06-15 04:18:37,941 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:18:37.943  INFO 2025-06-15 04:18:37,943 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:37.972  INFO 2025-06-15 04:18:37,972 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:38.318  INFO 2025-06-15 04:18:38,318 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:38.319  INFO 2025-06-15 04:18:38,319 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:42.391  INFO 2025-06-15 04:18:42,391 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:42.392  INFO 2025-06-15 04:18:42,392 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:43.049  INFO 2025-06-15 04:18:43,049 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:43.050  INFO 2025-06-15 04:18:43,050 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:45.937  INFO 2025-06-15 04:18:45,937 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:45.937  INFO 2025-06-15 04:18:45,937 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:45.953  INFO 2025-06-15 04:18:45,953 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:46.019  INFO 2025-06-15 04:18:46,019 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:48.582  INFO 2025-06-15 04:18:48,582 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:18:48.585  INFO 2025-06-15 04:18:48,585 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:18:48.585  INFO 2025-06-15 04:18:48,585 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:18:48.585  INFO 2025-06-15 04:18:48,585 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:18:48.585  INFO 2025-06-15 04:18:48,585 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:18:48.585  INFO 2025-06-15 04:18:48,585 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:18:48.586  INFO 2025-06-15 04:18:48,586 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:18:48.586  INFO 2025-06-15 04:18:48,586 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:18:48.586  INFO 2025-06-15 04:18:48,586 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:18:48.593  INFO 2025-06-15 04:18:48,593 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:18:48.593  INFO 2025-06-15 04:18:48,593 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:19:02.205  INFO 2025-06-15 04:19:02,205 --- [nio-8080-exec-7] r.c.c.SimpleServerLogController          : Server logs page accessed
2025-06-15 04:19:08.204  INFO 2025-06-15 04:19:08,204 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : === АДМИН ПРОСМАТРИВАЕТ МЕМОРИАЛ ===
2025-06-15 04:19:08.205  INFO 2025-06-15 04:19:08,205 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: запрос на просмотр мемориала ID=3
2025-06-15 04:19:08.211  INFO 2025-06-15 04:19:08,211 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : Найден мемориал ID=3, ФИО='Севостьянов Сергей Вячеславович', changesUnderModeration=false, publicationStatus=PENDING_MODERATION
2025-06-15 04:19:08.211  INFO 2025-06-15 04:19:08,211 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : Текущий пользователь: admin
2025-06-15 04:19:08.212  INFO 2025-06-15 04:19:08,212 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : Найден пользователь: ID=7, роль=ADMIN
2025-06-15 04:19:08.212  INFO 2025-06-15 04:19:08,212 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: мемориал ID=3, changesUnderModeration=false, currentUser=admin, role=ADMIN
2025-06-15 04:19:08.213  INFO 2025-06-15 04:19:08,213 --- [nio-8080-exec-4] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=admin, роль=ADMIN, isOwner=false, isEditor=false, isAdmin=true, changesUnderModeration=false
2025-06-15 04:19:08.213  INFO 2025-06-15 04:19:08,213 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем admin (владелец: false, редактор: false, админ: true)
2025-06-15 04:19:08.213  INFO 2025-06-15 04:19:08,213 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: получен DTO для админа - ID=3, ФИО='Севостьянов Сергей Вячеславович', changesUnderModeration=false
2025-06-15 04:19:08.213  INFO 2025-06-15 04:19:08,213 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : УСТАНОВЛЕН ФЛАГ needsModeration=true для мемориала ID=3
2025-06-15 04:19:08.213  INFO 2025-06-15 04:19:08,213 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : ФЛАГ changesNeedModeration НЕ установлен для мемориала ID=3
2025-06-15 04:19:08.213  INFO 2025-06-15 04:19:08,213 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : ИТОГОВЫЕ ФЛАГИ для admin/memorial-view: needsModeration=true, changesNeedModeration=null
2025-06-15 04:19:21.055  INFO 2025-06-15 04:19:21,055 --- [nio-8080-exec-3] r.c.c.admin.AdminMemorialController      : === АДМИН ЗАПРАШИВАЕТ ДОКУМЕНТ ===
2025-06-15 04:19:21.055  INFO 2025-06-15 04:19:21,055 --- [nio-8080-exec-3] r.c.c.admin.AdminMemorialController      : AdminMemorialController.getMemorialDocument: запрос документа мемориала ID=3
2025-06-15 04:19:21.055  INFO 2025-06-15 04:19:21,055 --- [nio-8080-exec-3] r.c.c.admin.AdminMemorialController      : Текущий админ: admin
2025-06-15 04:19:21.057  INFO 2025-06-15 04:19:21,057 --- [nio-8080-exec-3] r.c.c.admin.AdminMemorialController      : Найден пользователь: ID=7, роль=ADMIN
2025-06-15 04:19:21.059  INFO 2025-06-15 04:19:21,059 --- [nio-8080-exec-3] r.c.c.admin.AdminMemorialController      : Мемориал найден: ID=3, ФИО='Севостьянов Сергей Вячеславович', documentUrl=https://s3.timeweb.cloud/ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d/diplomSS/1662e63f-7f12-41c4-b2a5-b46ea9a4f56c.pdf
2025-06-15 04:19:21.059  INFO 2025-06-15 04:19:21,059 --- [nio-8080-exec-3] r.c.c.admin.AdminMemorialController      : Админ получает документ через MemorialService...
2025-06-15 04:19:21.059  INFO 2025-06-15 04:19:21,059 --- [nio-8080-exec-3] r.c.services.MemorialService             : MemorialService.getMemorialDocument: начало получения документа для мемориала 3
2025-06-15 04:19:21.059  INFO 2025-06-15 04:19:21,059 --- [nio-8080-exec-3] r.c.services.MemorialService             : MemorialService.getMemorialDocument: мемориал найден, documentUrl=https://s3.timeweb.cloud/ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d/diplomSS/1662e63f-7f12-41c4-b2a5-b46ea9a4f56c.pdf
2025-06-15 04:19:21.059  INFO 2025-06-15 04:19:21,059 --- [nio-8080-exec-3] r.c.services.MemorialService             : MemorialService.getMemorialDocument: передаем запрос в FileStorageService для URL: https://s3.timeweb.cloud/ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d/diplomSS/1662e63f-7f12-41c4-b2a5-b46ea9a4f56c.pdf
2025-06-15 04:19:21.059  INFO 2025-06-15 04:19:21,059 --- [nio-8080-exec-3] r.c.services.FileStorageService          : FileStorageService.getFile: начало получения файла по URL: https://s3.timeweb.cloud/ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d/diplomSS/1662e63f-7f12-41c4-b2a5-b46ea9a4f56c.pdf
2025-06-15 04:19:21.059  INFO 2025-06-15 04:19:21,059 --- [nio-8080-exec-3] r.c.services.FileStorageService          : FileStorageService.getFile: извлеченный ключ S3: diplomSS/1662e63f-7f12-41c4-b2a5-b46ea9a4f56c.pdf
2025-06-15 04:19:21.059  INFO 2025-06-15 04:19:21,059 --- [nio-8080-exec-3] r.c.services.FileStorageService          : FileStorageService.getFile: используемый bucket: ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d
2025-06-15 04:19:21.064  INFO 2025-06-15 04:19:21,064 --- [nio-8080-exec-3] r.c.services.FileStorageService          : FileStorageService.getFile: отправляем запрос в S3...
2025-06-15 04:19:21.673  INFO 2025-06-15 04:19:21,673 --- [nio-8080-exec-3] r.c.services.FileStorageService          : FileStorageService.getFile: ответ от S3 получен, contentType: application/pdf, contentLength: 648810
2025-06-15 04:19:21.673  INFO 2025-06-15 04:19:21,673 --- [nio-8080-exec-3] r.c.services.FileStorageService          : FileStorageService.getFile: извлеченное имя файла: 1662e63f-7f12-41c4-b2a5-b46ea9a4f56c.pdf
2025-06-15 04:19:21.674  INFO 2025-06-15 04:19:21,674 --- [nio-8080-exec-3] r.c.services.FileStorageService          : FileStorageService.getFile: файл успешно подготовлен для отправки
2025-06-15 04:19:21.674  INFO 2025-06-15 04:19:21,674 --- [nio-8080-exec-3] r.c.services.MemorialService             : MemorialService.getMemorialDocument: документ успешно получен из FileStorageService, статус: 200 OK
2025-06-15 04:19:21.674  INFO 2025-06-15 04:19:21,674 --- [nio-8080-exec-3] r.c.c.admin.AdminMemorialController      : === КОНЕЦ ЗАПРОСА ДОКУМЕНТА АДМИНОМ ===
2025-06-15 04:19:33.592  INFO 2025-06-15 04:19:33,592 --- [nio-8080-exec-5] r.c.services.MemorialService             : === МОДЕРАЦИЯ МЕМОРИАЛА ===
2025-06-15 04:19:33.592  INFO 2025-06-15 04:19:33,592 --- [nio-8080-exec-5] r.c.services.MemorialService             : moderateMemorial: ID=3, approved=true, admin=admin, reason='null'
2025-06-15 04:19:33.593  INFO 2025-06-15 04:19:33,593 --- [nio-8080-exec-5] r.c.services.MemorialService             : Найден мемориал ID=3, текущий статус: PENDING_MODERATION, isPublic: false
2025-06-15 04:19:33.593  INFO 2025-06-15 04:19:33,593 --- [nio-8080-exec-5] r.c.services.MemorialService             : ОДОБРЯЕМ мемориал ID=3: устанавливаем PUBLISHED и isPublic=true
2025-06-15 04:19:33.593  INFO 2025-06-15 04:19:33,593 --- [nio-8080-exec-5] r.c.services.MemorialService             : Сохраняем мемориал ID=3 с новым статусом: PUBLISHED, isPublic: true
2025-06-15 04:19:33.594  INFO 2025-06-15 04:19:33,594 --- [nio-8080-exec-5] r.c.services.MemorialService             : Мемориал ID=3 сохранен в БД! Финальный статус: PUBLISHED, isPublic: true
2025-06-15 04:19:33.594  INFO 2025-06-15 04:19:33,594 --- [nio-8080-exec-5] r.c.services.MemorialService             : === СОЗДАНИЕ УВЕДОМЛЕНИЯ О РЕЗУЛЬТАТЕ МОДЕРАЦИИ ===
2025-06-15 04:19:33.594  INFO 2025-06-15 04:19:33,594 --- [nio-8080-exec-5] r.c.services.MemorialService             : createModerationResponseNotification: ID=3, approved=true, reason='null'
2025-06-15 04:19:33.596  INFO 2025-06-15 04:19:33,596 --- [nio-8080-exec-5] r.c.services.MemorialService             : Уведомление о результате модерации (одобрение) создано для пользователя 1111
2025-06-15 04:19:33.596  INFO 2025-06-15 04:19:33,596 --- [nio-8080-exec-5] r.c.services.MemorialService             : Модерация мемориала ID=3: одобрен
2025-06-15 04:19:33.596  INFO 2025-06-15 04:19:33,596 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем DTO: ID=3, publicationStatus=PUBLISHED, isPublic=true
2025-06-15 04:19:33.600  INFO 2025-06-15 04:19:33,600 --- [nio-8080-exec-5] r.c.c.admin.AdminMemorialController      : Обновлен статус уведомления ID=1 для мемориала ID=3 на ACCEPTED
2025-06-15 04:19:33.774  INFO 2025-06-15 04:19:33,774 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : === АДМИН ПРОСМАТРИВАЕТ МЕМОРИАЛ ===
2025-06-15 04:19:33.774  INFO 2025-06-15 04:19:33,774 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: запрос на просмотр мемориала ID=3
2025-06-15 04:19:33.776  INFO 2025-06-15 04:19:33,776 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : Найден мемориал ID=3, ФИО='Севостьянов Сергей Вячеславович', changesUnderModeration=false, publicationStatus=PUBLISHED
2025-06-15 04:19:33.776  INFO 2025-06-15 04:19:33,776 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : Текущий пользователь: admin
2025-06-15 04:19:33.776  INFO 2025-06-15 04:19:33,776 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : Найден пользователь: ID=7, роль=ADMIN
2025-06-15 04:19:33.776  INFO 2025-06-15 04:19:33,776 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: мемориал ID=3, changesUnderModeration=false, currentUser=admin, role=ADMIN
2025-06-15 04:19:33.777  INFO 2025-06-15 04:19:33,777 --- [nio-8080-exec-8] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=admin, роль=ADMIN, isOwner=false, isEditor=false, isAdmin=true, changesUnderModeration=false
2025-06-15 04:19:33.777  INFO 2025-06-15 04:19:33,777 --- [nio-8080-exec-8] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем admin (владелец: false, редактор: false, админ: true)
2025-06-15 04:19:33.777  INFO 2025-06-15 04:19:33,777 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: получен DTO для админа - ID=3, ФИО='Севостьянов Сергей Вячеславович', changesUnderModeration=false
2025-06-15 04:19:33.777  INFO 2025-06-15 04:19:33,777 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : ФЛАГ needsModeration НЕ установлен, так как publicationStatus=PUBLISHED
2025-06-15 04:19:33.777  INFO 2025-06-15 04:19:33,777 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : ФЛАГ changesNeedModeration НЕ установлен для мемориала ID=3
2025-06-15 04:19:33.777  INFO 2025-06-15 04:19:33,777 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : ИТОГОВЫЕ ФЛАГИ для admin/memorial-view: needsModeration=null, changesNeedModeration=null
2025-06-15 04:19:38.508  INFO 2025-06-15 04:19:38,508 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : === СТАТИСТИКА МЕМОРИАЛОВ ===
2025-06-15 04:19:38.508  INFO 2025-06-15 04:19:38,508 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : Total: 4, Public: 1, Pending Moderation: 0, Recent: 4
2025-06-15 04:19:38.508  INFO 2025-06-15 04:19:38,508 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : Monthly data: [0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0]
2025-06-15 04:19:38.508  INFO 2025-06-15 04:19:38,508 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : Pie chart data: [1, 3, 0]
2025-06-15 04:19:48.626  INFO 2025-06-15 04:19:48,626 --- [nio-8080-exec-4] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-15 04:19:49.757  INFO 2025-06-15 04:19:49,757 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:19:49.759  INFO 2025-06-15 04:19:49,759 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:19:49.759  INFO 2025-06-15 04:19:49,759 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:19:49.759  INFO 2025-06-15 04:19:49,759 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:19:49.759  INFO 2025-06-15 04:19:49,759 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:19:49.759  INFO 2025-06-15 04:19:49,759 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:19:49.760  INFO 2025-06-15 04:19:49,760 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:19:49.760  INFO 2025-06-15 04:19:49,760 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:19:49.760  INFO 2025-06-15 04:19:49,760 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:19:49.765  INFO 2025-06-15 04:19:49,765 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:19:49.765  INFO 2025-06-15 04:19:49,765 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:19:55.133  INFO 2025-06-15 04:19:55,133 --- [nio-8080-exec-3] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-15 04:19:58.860  INFO 2025-06-15 04:19:58,860 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:19:58.991  INFO 2025-06-15 04:19:58,991 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:19:59.106  INFO 2025-06-15 04:19:59,106 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:19:59.226  INFO 2025-06-15 04:19:59,226 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:19:59.312  INFO 2025-06-15 04:19:59,312 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:19:59.460  INFO 2025-06-15 04:19:59,460 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:01.811  INFO 2025-06-15 04:20:01,811 --- [nio-8080-exec-6] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-15 04:20:01.961  INFO 2025-06-15 04:20:01,961 --- [nio-8080-exec-4] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-15 04:20:11.245  INFO 2025-06-15 04:20:11,245 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:11.247  INFO 2025-06-15 04:20:11,247 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:20:11.247  INFO 2025-06-15 04:20:11,247 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:20:11.247  INFO 2025-06-15 04:20:11,247 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:20:11.247  INFO 2025-06-15 04:20:11,247 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:20:11.247  INFO 2025-06-15 04:20:11,247 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:20:11.248  INFO 2025-06-15 04:20:11,248 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:20:11.248  INFO 2025-06-15 04:20:11,248 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:20:11.248  INFO 2025-06-15 04:20:11,248 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:20:11.253  INFO 2025-06-15 04:20:11,253 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:20:11.253  INFO 2025-06-15 04:20:11,253 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:20:20.280  INFO 2025-06-15 04:20:20,280 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:20.351  INFO 2025-06-15 04:20:20,351 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:20.352  INFO 2025-06-15 04:20:20,352 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:20.352  INFO 2025-06-15 04:20:20,352 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:20.352  INFO 2025-06-15 04:20:20,352 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:20.469  INFO 2025-06-15 04:20:20,469 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:20.565  INFO 2025-06-15 04:20:20,565 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:20.578  INFO 2025-06-15 04:20:20,578 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:22.975  INFO 2025-06-15 04:20:22,975 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:22.976  INFO 2025-06-15 04:20:22,976 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:23.161  INFO 2025-06-15 04:20:23,161 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:23.184  INFO 2025-06-15 04:20:23,184 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:24.382  INFO 2025-06-15 04:20:24,382 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:24.384  INFO 2025-06-15 04:20:24,384 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:26.572  INFO 2025-06-15 04:20:26,572 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:26.576  INFO 2025-06-15 04:20:26,576 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:20:26.576  INFO 2025-06-15 04:20:26,576 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:20:26.576  INFO 2025-06-15 04:20:26,576 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:20:26.576  INFO 2025-06-15 04:20:26,576 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:20:26.576  INFO 2025-06-15 04:20:26,576 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:20:26.577  INFO 2025-06-15 04:20:26,577 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:20:26.577  INFO 2025-06-15 04:20:26,577 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:20:26.578  INFO 2025-06-15 04:20:26,578 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:20:26.583  INFO 2025-06-15 04:20:26,583 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:20:26.583  INFO 2025-06-15 04:20:26,583 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:20:27.574  INFO 2025-06-15 04:20:27,574 --- [nio-8080-exec-3] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-15 04:20:28.558  INFO 2025-06-15 04:20:28,558 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:28.560  INFO 2025-06-15 04:20:28,560 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:20:28.560  INFO 2025-06-15 04:20:28,560 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:20:28.560  INFO 2025-06-15 04:20:28,560 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:20:28.560  INFO 2025-06-15 04:20:28,560 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:20:28.560  INFO 2025-06-15 04:20:28,560 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:20:28.561  INFO 2025-06-15 04:20:28,561 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:20:28.561  INFO 2025-06-15 04:20:28,561 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:20:28.561  INFO 2025-06-15 04:20:28,561 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:20:28.565  INFO 2025-06-15 04:20:28,565 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:20:28.565  INFO 2025-06-15 04:20:28,565 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:20:40.294  INFO 2025-06-15 04:20:40,294 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:40.294  INFO 2025-06-15 04:20:40,294 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:40.527  INFO 2025-06-15 04:20:40,527 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:40.532  INFO 2025-06-15 04:20:40,532 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:41.225  INFO 2025-06-15 04:20:41,225 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:43.653  INFO 2025-06-15 04:20:43,653 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:43.655  INFO 2025-06-15 04:20:43,655 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:20:43.655  INFO 2025-06-15 04:20:43,655 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:20:43.655  INFO 2025-06-15 04:20:43,655 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:20:43.655  INFO 2025-06-15 04:20:43,655 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:20:43.655  INFO 2025-06-15 04:20:43,655 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:20:43.656  INFO 2025-06-15 04:20:43,656 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:20:43.656  INFO 2025-06-15 04:20:43,656 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:20:43.657  INFO 2025-06-15 04:20:43,657 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:20:43.661  INFO 2025-06-15 04:20:43,661 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:20:43.661  INFO 2025-06-15 04:20:43,661 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:20:45.814  INFO 2025-06-15 04:20:45,814 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:45.815  INFO 2025-06-15 04:20:45,815 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:46.001  INFO 2025-06-15 04:20:46,001 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:46.134  INFO 2025-06-15 04:20:46,134 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:46.236  INFO 2025-06-15 04:20:46,236 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:46.307  INFO 2025-06-15 04:20:46,307 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:46.366  INFO 2025-06-15 04:20:46,366 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:46.431  INFO 2025-06-15 04:20:46,431 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:46.525  INFO 2025-06-15 04:20:46,525 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:47.811  INFO 2025-06-15 04:20:47,811 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:20:54.454  INFO 2025-06-15 04:20:54,454 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:21:06.058  INFO 2025-06-15 04:21:06,058 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:21:06.065  INFO 2025-06-15 04:21:06,065 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Memorial 5 in tree 3 is not public (isPublic: false, status: DRAFT)
2025-06-15 04:21:06.066 ERROR 2025-06-15 04:21:06,066 --- [nio-8080-exec-5] r.c.services.FamilyTreeService           : Error sending family tree 3 for moderation: All memorials in the tree must be public before submitting for moderation
java.lang.RuntimeException: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:576)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.sendForModeration(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.sendFamilyTreeForModeration(FamilyTreeController.java:188)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 04:21:06.068 ERROR 2025-06-15 04:21:06,068 --- [nio-8080-exec-5] r.c.controllers.FamilyTreeController     : Error sending family tree 3 for moderation: Failed to send family tree for moderation: All memorials in the tree must be public before submitting for moderation
java.lang.RuntimeException: Failed to send family tree for moderation: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:592)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.sendForModeration(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.sendFamilyTreeForModeration(FamilyTreeController.java:188)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.RuntimeException: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:576)
	... 114 common frames omitted
2025-06-15 04:21:06.763  INFO 2025-06-15 04:21:06,763 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:21:06.947  INFO 2025-06-15 04:21:06,947 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:21:07.156  INFO 2025-06-15 04:21:07,156 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:21:09.256  INFO 2025-06-15 04:21:09,256 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:21:10.131  INFO 2025-06-15 04:21:10,131 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:21:10.434  INFO 2025-06-15 04:21:10,434 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:21:10.649  INFO 2025-06-15 04:21:10,649 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:21:12.278  INFO 2025-06-15 04:21:12,278 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:27:08.770  INFO 2025-06-15 04:27:08,770 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:27:08.771  INFO 2025-06-15 04:27:08,771 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:27:08.771  INFO 2025-06-15 04:27:08,771 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:27:08.772  INFO 2025-06-15 04:27:08,772 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:27:08.772  INFO 2025-06-15 04:27:08,772 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:27:08.772  INFO 2025-06-15 04:27:08,772 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:27:08.773  INFO 2025-06-15 04:27:08,773 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:27:08.773  INFO 2025-06-15 04:27:08,773 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:27:08.776  INFO 2025-06-15 04:27:08,776 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:27:08.776  INFO 2025-06-15 04:27:08,776 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:27:08.777  INFO 2025-06-15 04:27:08,777 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:27:08.785  INFO 2025-06-15 04:27:08,785 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:27:08.785  INFO 2025-06-15 04:27:08,785 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:27:26.868  INFO 2025-06-15 04:27:26,868 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:27:27.043  INFO 2025-06-15 04:27:27,043 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:27:27.125  INFO 2025-06-15 04:27:27,125 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:27:27.297  INFO 2025-06-15 04:27:27,297 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:27:27.327  INFO 2025-06-15 04:27:27,327 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:27:27.482  INFO 2025-06-15 04:27:27,482 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:27:29.863  INFO 2025-06-15 04:27:29,863 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:27:32.480  INFO 2025-06-15 04:27:32,480 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:27:32.486  INFO 2025-06-15 04:27:32,486 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Memorial 5 in tree 3 is not public (isPublic: false, status: DRAFT)
2025-06-15 04:27:32.486 ERROR 2025-06-15 04:27:32,486 --- [nio-8080-exec-7] r.c.services.FamilyTreeService           : Error sending family tree 3 for moderation: All memorials in the tree must be public before submitting for moderation
java.lang.RuntimeException: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:576)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.sendForModeration(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.sendFamilyTreeForModeration(FamilyTreeController.java:188)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 04:27:32.489 ERROR 2025-06-15 04:27:32,489 --- [nio-8080-exec-7] r.c.controllers.FamilyTreeController     : Error sending family tree 3 for moderation: Failed to send family tree for moderation: All memorials in the tree must be public before submitting for moderation
java.lang.RuntimeException: Failed to send family tree for moderation: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:592)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.sendForModeration(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.sendFamilyTreeForModeration(FamilyTreeController.java:188)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.RuntimeException: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:576)
	... 114 common frames omitted
2025-06-15 04:27:33.239  INFO 2025-06-15 04:27:33,239 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:27:33.445  INFO 2025-06-15 04:27:33,445 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:27:33.661  INFO 2025-06-15 04:27:33,661 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:28:58.730  INFO 2025-06-15 04:28:58,730 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:29:01.668  INFO 2025-06-15 04:29:01,668 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:29:01.676  INFO 2025-06-15 04:29:01,676 --- [nio-8080-exec-1] r.c.services.FamilyTreeService           : Memorial 5 in tree 3 is not public (isPublic: false, status: DRAFT)
2025-06-15 04:29:01.676 ERROR 2025-06-15 04:29:01,676 --- [nio-8080-exec-1] r.c.services.FamilyTreeService           : Error sending family tree 3 for moderation: All memorials in the tree must be public before submitting for moderation
java.lang.RuntimeException: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:576)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.sendForModeration(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.sendFamilyTreeForModeration(FamilyTreeController.java:188)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 04:29:01.678 ERROR 2025-06-15 04:29:01,678 --- [nio-8080-exec-1] r.c.controllers.FamilyTreeController     : Error sending family tree 3 for moderation: Failed to send family tree for moderation: All memorials in the tree must be public before submitting for moderation
java.lang.RuntimeException: Failed to send family tree for moderation: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:592)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.sendForModeration(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.sendFamilyTreeForModeration(FamilyTreeController.java:188)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.RuntimeException: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:576)
	... 114 common frames omitted
2025-06-15 04:29:02.454  INFO 2025-06-15 04:29:02,454 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:29:02.831  INFO 2025-06-15 04:29:02,831 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:29:03.048  INFO 2025-06-15 04:29:03,048 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:34:38.699  INFO 2025-06-15 04:34:38,699 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:34:38.725  INFO 2025-06-15 04:34:38,725 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:34:38.726  INFO 2025-06-15 04:34:38,726 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:34:38.728  INFO 2025-06-15 04:34:38,728 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:34:38.728  INFO 2025-06-15 04:34:38,728 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:34:38.728  INFO 2025-06-15 04:34:38,728 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:34:38.729  INFO 2025-06-15 04:34:38,729 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:34:38.729  INFO 2025-06-15 04:34:38,729 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:34:38.732  INFO 2025-06-15 04:34:38,732 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:34:38.732  INFO 2025-06-15 04:34:38,732 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:34:38.733  INFO 2025-06-15 04:34:38,733 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:34:38.744  INFO 2025-06-15 04:34:38,744 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:34:38.744  INFO 2025-06-15 04:34:38,744 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:34:42.408  INFO 2025-06-15 04:34:42,408 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:34:42.615  INFO 2025-06-15 04:34:42,615 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:34:42.782  INFO 2025-06-15 04:34:42,782 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:34:42.933  INFO 2025-06-15 04:34:42,933 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:34:42.976  INFO 2025-06-15 04:34:42,976 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:34:43.578  INFO 2025-06-15 04:34:43,578 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:34:45.401  INFO 2025-06-15 04:34:45,401 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:34:48.544  INFO 2025-06-15 04:34:48,544 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:34:53.182  INFO 2025-06-15 04:34:53,182 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:34:57.083  INFO 2025-06-15 04:34:57,083 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:34:57.091  INFO 2025-06-15 04:34:57,091 --- [nio-8080-exec-3] r.c.services.FamilyTreeService           : Memorial 5 in tree 3 is not public (isPublic: false, status: DRAFT)
2025-06-15 04:34:57.091 ERROR 2025-06-15 04:34:57,091 --- [nio-8080-exec-3] r.c.services.FamilyTreeService           : Error sending family tree 3 for moderation: All memorials in the tree must be public before submitting for moderation
java.lang.RuntimeException: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:576)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.sendForModeration(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.sendFamilyTreeForModeration(FamilyTreeController.java:188)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 04:34:57.092 ERROR 2025-06-15 04:34:57,092 --- [nio-8080-exec-3] r.c.controllers.FamilyTreeController     : Error sending family tree 3 for moderation: Failed to send family tree for moderation: All memorials in the tree must be public before submitting for moderation
java.lang.RuntimeException: Failed to send family tree for moderation: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:592)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.sendForModeration(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.sendFamilyTreeForModeration(FamilyTreeController.java:188)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.RuntimeException: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:576)
	... 114 common frames omitted
2025-06-15 04:35:03.332  INFO 2025-06-15 04:35:03,332 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:08.621  INFO 2025-06-15 04:35:08,621 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:08.628  INFO 2025-06-15 04:35:08,628 --- [nio-8080-exec-8] r.c.services.FamilyTreeService           : Memorial 5 in tree 3 is not public (isPublic: false, status: DRAFT)
2025-06-15 04:35:08.628 ERROR 2025-06-15 04:35:08,628 --- [nio-8080-exec-8] r.c.services.FamilyTreeService           : Error sending family tree 3 for moderation: All memorials in the tree must be public before submitting for moderation
java.lang.RuntimeException: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:576)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.sendForModeration(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.sendFamilyTreeForModeration(FamilyTreeController.java:188)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 04:35:08.629 ERROR 2025-06-15 04:35:08,629 --- [nio-8080-exec-8] r.c.controllers.FamilyTreeController     : Error sending family tree 3 for moderation: Failed to send family tree for moderation: All memorials in the tree must be public before submitting for moderation
java.lang.RuntimeException: Failed to send family tree for moderation: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:592)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.sendForModeration(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.sendFamilyTreeForModeration(FamilyTreeController.java:188)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.RuntimeException: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:576)
	... 114 common frames omitted
2025-06-15 04:35:15.666  INFO 2025-06-15 04:35:15,666 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:15.672  INFO 2025-06-15 04:35:15,672 --- [nio-8080-exec-1] r.c.services.FamilyTreeService           : Memorial 5 in tree 3 is not public (isPublic: false, status: DRAFT)
2025-06-15 04:35:15.673 ERROR 2025-06-15 04:35:15,673 --- [nio-8080-exec-1] r.c.services.FamilyTreeService           : Error sending family tree 3 for moderation: All memorials in the tree must be public before submitting for moderation
java.lang.RuntimeException: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:576)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.sendForModeration(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.sendFamilyTreeForModeration(FamilyTreeController.java:188)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 04:35:15.674 ERROR 2025-06-15 04:35:15,674 --- [nio-8080-exec-1] r.c.controllers.FamilyTreeController     : Error sending family tree 3 for moderation: Failed to send family tree for moderation: All memorials in the tree must be public before submitting for moderation
java.lang.RuntimeException: Failed to send family tree for moderation: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:592)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.FamilyTreeService$$SpringCGLIB$$0.sendForModeration(<generated>)
	at ru.cemeterysystem.controllers.FamilyTreeController.sendFamilyTreeForModeration(FamilyTreeController.java:188)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.lang.RuntimeException: All memorials in the tree must be public before submitting for moderation
	at ru.cemeterysystem.services.FamilyTreeService.sendForModeration(FamilyTreeService.java:576)
	... 114 common frames omitted
2025-06-15 04:35:21.383  INFO 2025-06-15 04:35:21,383 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:23.853  INFO 2025-06-15 04:35:23,853 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:23.856  INFO 2025-06-15 04:35:23,856 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:35:23.856  INFO 2025-06-15 04:35:23,856 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:35:23.856  INFO 2025-06-15 04:35:23,856 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:35:23.856  INFO 2025-06-15 04:35:23,856 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:35:23.856  INFO 2025-06-15 04:35:23,856 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:35:23.858  INFO 2025-06-15 04:35:23,858 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:35:23.858  INFO 2025-06-15 04:35:23,858 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:35:23.858  INFO 2025-06-15 04:35:23,858 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:35:23.869  INFO 2025-06-15 04:35:23,869 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:35:23.869  INFO 2025-06-15 04:35:23,869 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:35:25.183  INFO 2025-06-15 04:35:25,183 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:25.503  INFO 2025-06-15 04:35:25,503 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:25.503  INFO 2025-06-15 04:35:25,503 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:25.583  INFO 2025-06-15 04:35:25,583 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:25.721  INFO 2025-06-15 04:35:25,721 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:25.828  INFO 2025-06-15 04:35:25,828 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:25.844  INFO 2025-06-15 04:35:25,844 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:25.971  INFO 2025-06-15 04:35:25,971 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:26.086  INFO 2025-06-15 04:35:26,086 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:46.258  INFO 2025-06-15 04:35:46,258 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:49.395  INFO 2025-06-15 04:35:49,395 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:52.787  INFO 2025-06-15 04:35:52,787 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:52.787  INFO 2025-06-15 04:35:52,787 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:53.013  INFO 2025-06-15 04:35:53,013 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:53.056  INFO 2025-06-15 04:35:53,056 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:53.207  INFO 2025-06-15 04:35:53,207 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:53.247  INFO 2025-06-15 04:35:53,247 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:54.346  INFO 2025-06-15 04:35:54,346 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:56.262  INFO 2025-06-15 04:35:56,262 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:56.480  INFO 2025-06-15 04:35:56,480 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:56.708  INFO 2025-06-15 04:35:56,708 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:56.943  INFO 2025-06-15 04:35:56,943 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:56.945  INFO 2025-06-15 04:35:56,945 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:35:56.945  INFO 2025-06-15 04:35:56,945 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:35:56.945  INFO 2025-06-15 04:35:56,945 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:35:56.945  INFO 2025-06-15 04:35:56,945 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:35:56.945  INFO 2025-06-15 04:35:56,945 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:35:56.946  INFO 2025-06-15 04:35:56,946 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:35:56.946  INFO 2025-06-15 04:35:56,946 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 1000)
2025-06-15 04:35:56.946  INFO 2025-06-15 04:35:56,946 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=1000
2025-06-15 04:35:56.952  INFO 2025-06-15 04:35:56,952 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:35:56.952  INFO 2025-06-15 04:35:56,952 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:35:58.465  INFO 2025-06-15 04:35:58,465 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:58.507  INFO 2025-06-15 04:35:58,507 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:58.676  INFO 2025-06-15 04:35:58,676 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:58.748  INFO 2025-06-15 04:35:58,748 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:58.885  INFO 2025-06-15 04:35:58,885 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:35:59.319  INFO 2025-06-15 04:35:59,319 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:36:03.711  INFO 2025-06-15 04:36:03,711 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:36:17.716  INFO 2025-06-15 04:36:17,716 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:36:17.718  INFO 2025-06-15 04:36:17,718 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:36:17.718  INFO 2025-06-15 04:36:17,718 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:36:17.718  INFO 2025-06-15 04:36:17,718 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:36:17.718  INFO 2025-06-15 04:36:17,718 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:36:17.718  INFO 2025-06-15 04:36:17,718 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:36:17.719  INFO 2025-06-15 04:36:17,719 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:36:17.719  INFO 2025-06-15 04:36:17,719 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:36:17.719  INFO 2025-06-15 04:36:17,719 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:36:17.724  INFO 2025-06-15 04:36:17,724 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:36:17.724  INFO 2025-06-15 04:36:17,724 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:36:20.380  INFO 2025-06-15 04:36:20,380 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:36:20.382  INFO 2025-06-15 04:36:20,382 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:36:20.382  INFO 2025-06-15 04:36:20,382 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:36:20.382  INFO 2025-06-15 04:36:20,382 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:36:20.382  INFO 2025-06-15 04:36:20,382 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:36:20.383  INFO 2025-06-15 04:36:20,383 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:36:20.384  INFO 2025-06-15 04:36:20,384 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:36:20.384  INFO 2025-06-15 04:36:20,384 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:36:23.228  INFO 2025-06-15 04:36:23,228 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:36:23.231  INFO 2025-06-15 04:36:23,231 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:36:23.231  INFO 2025-06-15 04:36:23,231 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:36:23.231  INFO 2025-06-15 04:36:23,231 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:36:23.231  INFO 2025-06-15 04:36:23,231 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:36:23.232  INFO 2025-06-15 04:36:23,232 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:36:23.234  INFO 2025-06-15 04:36:23,234 --- [nio-8080-exec-3] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:36:23.234  INFO 2025-06-15 04:36:23,234 --- [nio-8080-exec-3] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:36:54.638  INFO 2025-06-15 04:36:54,638 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:36:54.641  INFO 2025-06-15 04:36:54,641 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:36:54.641  INFO 2025-06-15 04:36:54,641 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:36:54.641  INFO 2025-06-15 04:36:54,641 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:36:54.641  INFO 2025-06-15 04:36:54,641 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:36:54.642  INFO 2025-06-15 04:36:54,642 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:36:54.643  INFO 2025-06-15 04:36:54,643 --- [nio-8080-exec-5] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:36:54.643  INFO 2025-06-15 04:36:54,643 --- [nio-8080-exec-5] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:36:54.876  INFO 2025-06-15 04:36:54,876 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:36:54.881  INFO 2025-06-15 04:36:54,881 --- [nio-8080-exec-8] r.c.services.MemorialService             : Обновление мемориала ID=5, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 04:36:54.881  INFO 2025-06-15 04:36:54,881 --- [nio-8080-exec-8] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=5
2025-06-15 04:36:57.178  INFO 2025-06-15 04:36:57,178 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:01.438  INFO 2025-06-15 04:37:01,438 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:01.438  INFO 2025-06-15 04:37:01,438 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:01.438  INFO 2025-06-15 04:37:01,438 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:37:01.438  INFO 2025-06-15 04:37:01,438 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:37:01.441  INFO 2025-06-15 04:37:01,441 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:37:01.441  INFO 2025-06-15 04:37:01,441 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Загрузка документа для мемориала ID=5 пользователем 1111
2025-06-15 04:37:01.444  INFO 2025-06-15 04:37:01,444 --- [nio-8080-exec-1] r.c.services.MemorialService             : Загрузка документа для мемориала ID=5: пользователь=1111, размер=648810, тип=application/pdf
2025-06-15 04:37:12.897  INFO 2025-06-15 04:37:12,897 --- [nio-8080-exec-1] r.c.services.MemorialService             : Документ загружен для мемориала ID=5, URL: https://s3.timeweb.cloud/ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d/diplomSS/25964af2-2cad-4b29-b855-e521de0aaf04.pdf
2025-06-15 04:37:13.324  INFO 2025-06-15 04:37:13,324 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:13.361  INFO 2025-06-15 04:37:13,361 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:13.364  INFO 2025-06-15 04:37:13,364 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:37:13.364  INFO 2025-06-15 04:37:13,364 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:13.364  INFO 2025-06-15 04:37:13,364 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:13.364  INFO 2025-06-15 04:37:13,364 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:37:13.364  INFO 2025-06-15 04:37:13,364 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:37:13.366  INFO 2025-06-15 04:37:13,366 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:37:13.366  INFO 2025-06-15 04:37:13,366 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:37:13.366  INFO 2025-06-15 04:37:13,366 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:37:13.373  INFO 2025-06-15 04:37:13,373 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:37:13.373  INFO 2025-06-15 04:37:13,373 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:37:40.809  INFO 2025-06-15 04:37:40,809 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:40.811  INFO 2025-06-15 04:37:40,811 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:40.811  INFO 2025-06-15 04:37:40,811 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:40.811  INFO 2025-06-15 04:37:40,811 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:37:40.811  INFO 2025-06-15 04:37:40,811 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:37:40.814  INFO 2025-06-15 04:37:40,814 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:37:40.816  INFO 2025-06-15 04:37:40,816 --- [nio-8080-exec-2] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:37:40.817  INFO 2025-06-15 04:37:40,817 --- [nio-8080-exec-2] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:37:44.165  INFO 2025-06-15 04:37:44,165 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:44.168  INFO 2025-06-15 04:37:44,168 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:44.168  INFO 2025-06-15 04:37:44,168 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:44.168  INFO 2025-06-15 04:37:44,168 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:37:44.168  INFO 2025-06-15 04:37:44,168 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:37:44.169  INFO 2025-06-15 04:37:44,169 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:37:44.169  INFO 2025-06-15 04:37:44,169 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Отправка мемориала ID=5 на модерацию пользователем 1111
2025-06-15 04:37:44.175  INFO 2025-06-15 04:37:44,175 --- [nio-8080-exec-4] r.c.services.MemorialService             : Уведомление о модерации создано для администратора admin
2025-06-15 04:37:44.175  INFO 2025-06-15 04:37:44,175 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=5 отправлен на модерацию пользователем ID=8
2025-06-15 04:37:45.560  INFO 2025-06-15 04:37:45,560 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:45.661  INFO 2025-06-15 04:37:45,661 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:45.685  INFO 2025-06-15 04:37:45,685 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:45.735  INFO 2025-06-15 04:37:45,735 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:45.737  INFO 2025-06-15 04:37:45,737 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:45.777  INFO 2025-06-15 04:37:45,777 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:45.993  INFO 2025-06-15 04:37:45,993 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:46.064  INFO 2025-06-15 04:37:46,064 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:46.088  INFO 2025-06-15 04:37:46,088 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:46.101  INFO 2025-06-15 04:37:46,101 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:46.115  INFO 2025-06-15 04:37:46,115 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:46.118  INFO 2025-06-15 04:37:46,118 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:37:46.118  INFO 2025-06-15 04:37:46,118 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:46.118  INFO 2025-06-15 04:37:46,118 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:46.118  INFO 2025-06-15 04:37:46,118 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:37:46.118  INFO 2025-06-15 04:37:46,118 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:37:46.119  INFO 2025-06-15 04:37:46,119 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:37:46.119  INFO 2025-06-15 04:37:46,119 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:37:46.119  INFO 2025-06-15 04:37:46,119 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:37:46.124  INFO 2025-06-15 04:37:46,124 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:37:46.124  INFO 2025-06-15 04:37:46,124 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:37:46.730  INFO 2025-06-15 04:37:46,730 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:46.749  INFO 2025-06-15 04:37:46,749 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:48.972  INFO 2025-06-15 04:37:48,972 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:48.978  INFO 2025-06-15 04:37:48,978 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:37:48.978  INFO 2025-06-15 04:37:48,978 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:48.978  INFO 2025-06-15 04:37:48,978 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:48.978  INFO 2025-06-15 04:37:48,978 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:37:48.978  INFO 2025-06-15 04:37:48,978 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:37:48.980  INFO 2025-06-15 04:37:48,980 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:37:48.980  INFO 2025-06-15 04:37:48,980 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:37:48.981  INFO 2025-06-15 04:37:48,981 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:37:48.988  INFO 2025-06-15 04:37:48,988 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:37:48.988  INFO 2025-06-15 04:37:48,988 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:37:51.730  INFO 2025-06-15 04:37:51,730 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:51.733  INFO 2025-06-15 04:37:51,733 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:51.733  INFO 2025-06-15 04:37:51,733 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:51.733  INFO 2025-06-15 04:37:51,733 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:37:51.733  INFO 2025-06-15 04:37:51,733 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:37:51.734  INFO 2025-06-15 04:37:51,734 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:37:51.735  INFO 2025-06-15 04:37:51,735 --- [nio-8080-exec-6] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:37:51.736  INFO 2025-06-15 04:37:51,736 --- [nio-8080-exec-6] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:37:54.512  INFO 2025-06-15 04:37:54,512 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:54.549  INFO 2025-06-15 04:37:54,549 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:54.553  INFO 2025-06-15 04:37:54,553 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:37:54.553  INFO 2025-06-15 04:37:54,553 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:54.554  INFO 2025-06-15 04:37:54,554 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:37:54.554  INFO 2025-06-15 04:37:54,554 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:37:54.554  INFO 2025-06-15 04:37:54,554 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:37:54.555  INFO 2025-06-15 04:37:54,555 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:37:54.555  INFO 2025-06-15 04:37:54,555 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:37:54.555  INFO 2025-06-15 04:37:54,555 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:37:54.563  INFO 2025-06-15 04:37:54,563 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:37:54.563  INFO 2025-06-15 04:37:54,563 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:37:54.603  INFO 2025-06-15 04:37:54,603 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:37:54.644  INFO 2025-06-15 04:37:54,644 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:08.807  INFO 2025-06-15 04:38:08,807 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : === АДМИН ПРОСМАТРИВАЕТ МЕМОРИАЛ ===
2025-06-15 04:38:08.807  INFO 2025-06-15 04:38:08,807 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: запрос на просмотр мемориала ID=5
2025-06-15 04:38:08.810  INFO 2025-06-15 04:38:08,810 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : Найден мемориал ID=5, ФИО='Сочнева Александра Алексеевна', changesUnderModeration=false, publicationStatus=PENDING_MODERATION
2025-06-15 04:38:08.810  INFO 2025-06-15 04:38:08,810 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : Текущий пользователь: admin
2025-06-15 04:38:08.811  INFO 2025-06-15 04:38:08,811 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : Найден пользователь: ID=7, роль=ADMIN
2025-06-15 04:38:08.811  INFO 2025-06-15 04:38:08,811 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: мемориал ID=5, changesUnderModeration=false, currentUser=admin, role=ADMIN
2025-06-15 04:38:08.812  INFO 2025-06-15 04:38:08,812 --- [nio-8080-exec-7] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=admin, роль=ADMIN, isOwner=false, isEditor=false, isAdmin=true, changesUnderModeration=false
2025-06-15 04:38:08.812  INFO 2025-06-15 04:38:08,812 --- [nio-8080-exec-7] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем admin (владелец: false, редактор: false, админ: true)
2025-06-15 04:38:08.812  INFO 2025-06-15 04:38:08,812 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: получен DTO для админа - ID=5, ФИО='Сочнева Александра Алексеевна', changesUnderModeration=false
2025-06-15 04:38:08.812  INFO 2025-06-15 04:38:08,812 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : УСТАНОВЛЕН ФЛАГ needsModeration=true для мемориала ID=5
2025-06-15 04:38:08.812  INFO 2025-06-15 04:38:08,812 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : ФЛАГ changesNeedModeration НЕ установлен для мемориала ID=5
2025-06-15 04:38:08.812  INFO 2025-06-15 04:38:08,812 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : ИТОГОВЫЕ ФЛАГИ для admin/memorial-view: needsModeration=true, changesNeedModeration=null
2025-06-15 04:38:24.973  INFO 2025-06-15 04:38:24,973 --- [nio-8080-exec-4] r.c.services.MemorialService             : === МОДЕРАЦИЯ МЕМОРИАЛА ===
2025-06-15 04:38:24.973  INFO 2025-06-15 04:38:24,973 --- [nio-8080-exec-4] r.c.services.MemorialService             : moderateMemorial: ID=5, approved=false, admin=admin, reason='Недостаточно данных для публикации'
2025-06-15 04:38:24.975  INFO 2025-06-15 04:38:24,975 --- [nio-8080-exec-4] r.c.services.MemorialService             : Найден мемориал ID=5, текущий статус: PENDING_MODERATION, isPublic: false
2025-06-15 04:38:24.975  INFO 2025-06-15 04:38:24,975 --- [nio-8080-exec-4] r.c.services.MemorialService             : ОТКЛОНЯЕМ мемориал ID=5: устанавливаем REJECTED и isPublic=false, причина: 'Недостаточно данных для публикации'
2025-06-15 04:38:24.975  INFO 2025-06-15 04:38:24,975 --- [nio-8080-exec-4] r.c.services.MemorialService             : Сохраняем мемориал ID=5 с новым статусом: REJECTED, isPublic: false
2025-06-15 04:38:24.975  INFO 2025-06-15 04:38:24,975 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=5 сохранен в БД! Финальный статус: REJECTED, isPublic: false
2025-06-15 04:38:24.975  INFO 2025-06-15 04:38:24,975 --- [nio-8080-exec-4] r.c.services.MemorialService             : === СОЗДАНИЕ УВЕДОМЛЕНИЯ О РЕЗУЛЬТАТЕ МОДЕРАЦИИ ===
2025-06-15 04:38:24.975  INFO 2025-06-15 04:38:24,975 --- [nio-8080-exec-4] r.c.services.MemorialService             : createModerationResponseNotification: ID=5, approved=false, reason='Недостаточно данных для публикации'
2025-06-15 04:38:24.976  INFO 2025-06-15 04:38:24,976 --- [nio-8080-exec-4] r.c.services.MemorialService             : Добавляем причину отклонения в сообщение: 'Недостаточно данных для публикации'
2025-06-15 04:38:24.976  INFO 2025-06-15 04:38:24,976 --- [nio-8080-exec-4] r.c.services.MemorialService             : Финальное сообщение уведомления: 'Ваш мемориал "Сочнева Александра Алексеевна" был отклонен администратором.

Причина отклонения: Недостаточно данных для публикации

Вы можете внести изменения и повторно отправить его на модерацию.'
2025-06-15 04:38:24.978  INFO 2025-06-15 04:38:24,978 --- [nio-8080-exec-4] r.c.services.MemorialService             : Уведомление о результате модерации (отклонение) создано для пользователя 1111
2025-06-15 04:38:24.978  INFO 2025-06-15 04:38:24,978 --- [nio-8080-exec-4] r.c.services.MemorialService             : Модерация мемориала ID=5: отклонен
2025-06-15 04:38:24.978  INFO 2025-06-15 04:38:24,978 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем DTO: ID=5, publicationStatus=REJECTED, isPublic=false
2025-06-15 04:38:25.166  INFO 2025-06-15 04:38:25,166 --- [io-8080-exec-10] r.c.c.admin.AdminMemorialController      : === АДМИН ПРОСМАТРИВАЕТ МЕМОРИАЛ ===
2025-06-15 04:38:25.166  INFO 2025-06-15 04:38:25,166 --- [io-8080-exec-10] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: запрос на просмотр мемориала ID=5
2025-06-15 04:38:25.171  INFO 2025-06-15 04:38:25,171 --- [io-8080-exec-10] r.c.c.admin.AdminMemorialController      : Найден мемориал ID=5, ФИО='Сочнева Александра Алексеевна', changesUnderModeration=false, publicationStatus=REJECTED
2025-06-15 04:38:25.171  INFO 2025-06-15 04:38:25,171 --- [io-8080-exec-10] r.c.c.admin.AdminMemorialController      : Текущий пользователь: admin
2025-06-15 04:38:25.172  INFO 2025-06-15 04:38:25,172 --- [io-8080-exec-10] r.c.c.admin.AdminMemorialController      : Найден пользователь: ID=7, роль=ADMIN
2025-06-15 04:38:25.172  INFO 2025-06-15 04:38:25,172 --- [io-8080-exec-10] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: мемориал ID=5, changesUnderModeration=false, currentUser=admin, role=ADMIN
2025-06-15 04:38:25.173  INFO 2025-06-15 04:38:25,173 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=admin, роль=ADMIN, isOwner=false, isEditor=false, isAdmin=true, changesUnderModeration=false
2025-06-15 04:38:25.173  INFO 2025-06-15 04:38:25,173 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем admin (владелец: false, редактор: false, админ: true)
2025-06-15 04:38:25.173  INFO 2025-06-15 04:38:25,173 --- [io-8080-exec-10] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: получен DTO для админа - ID=5, ФИО='Сочнева Александра Алексеевна', changesUnderModeration=false
2025-06-15 04:38:25.173  INFO 2025-06-15 04:38:25,173 --- [io-8080-exec-10] r.c.c.admin.AdminMemorialController      : ФЛАГ needsModeration НЕ установлен, так как publicationStatus=REJECTED
2025-06-15 04:38:25.173  INFO 2025-06-15 04:38:25,173 --- [io-8080-exec-10] r.c.c.admin.AdminMemorialController      : ФЛАГ changesNeedModeration НЕ установлен для мемориала ID=5
2025-06-15 04:38:25.173  INFO 2025-06-15 04:38:25,173 --- [io-8080-exec-10] r.c.c.admin.AdminMemorialController      : ИТОГОВЫЕ ФЛАГИ для admin/memorial-view: needsModeration=null, changesNeedModeration=null
2025-06-15 04:38:30.345  INFO 2025-06-15 04:38:30,345 --- [nio-8080-exec-5] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 1 публичных мемориалов на странице 1 из 1
2025-06-15 04:38:31.472  INFO 2025-06-15 04:38:31,472 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:31.476  INFO 2025-06-15 04:38:31,476 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:38:31.476  INFO 2025-06-15 04:38:31,476 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:38:31.477  INFO 2025-06-15 04:38:31,477 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:38:31.477  INFO 2025-06-15 04:38:31,477 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:38:31.477  INFO 2025-06-15 04:38:31,477 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:38:31.478  INFO 2025-06-15 04:38:31,478 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:38:31.478  INFO 2025-06-15 04:38:31,478 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:38:31.478  INFO 2025-06-15 04:38:31,478 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:38:31.486  INFO 2025-06-15 04:38:31,486 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:38:31.486  INFO 2025-06-15 04:38:31,486 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:38:34.261  INFO 2025-06-15 04:38:34,261 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:34.271  INFO 2025-06-15 04:38:34,271 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:34.331  INFO 2025-06-15 04:38:34,331 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:34.343  INFO 2025-06-15 04:38:34,343 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:34.343  INFO 2025-06-15 04:38:34,343 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:34.660  INFO 2025-06-15 04:38:34,660 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:34.728  INFO 2025-06-15 04:38:34,728 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:34.731  INFO 2025-06-15 04:38:34,731 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:37.250  INFO 2025-06-15 04:38:37,250 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:43.274  INFO 2025-06-15 04:38:43,274 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:43.278  INFO 2025-06-15 04:38:43,278 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:38:43.278  INFO 2025-06-15 04:38:43,278 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:38:43.278  INFO 2025-06-15 04:38:43,278 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:38:43.278  INFO 2025-06-15 04:38:43,278 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:38:43.278  INFO 2025-06-15 04:38:43,278 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:38:43.280  INFO 2025-06-15 04:38:43,280 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:38:43.280  INFO 2025-06-15 04:38:43,280 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:38:43.280  INFO 2025-06-15 04:38:43,280 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:38:43.287  INFO 2025-06-15 04:38:43,287 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:38:43.287  INFO 2025-06-15 04:38:43,287 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:38:46.677  INFO 2025-06-15 04:38:46,677 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:46.681  INFO 2025-06-15 04:38:46,681 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:38:46.681  INFO 2025-06-15 04:38:46,681 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:38:46.681  INFO 2025-06-15 04:38:46,681 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:38:46.681  INFO 2025-06-15 04:38:46,681 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:38:46.683  INFO 2025-06-15 04:38:46,683 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:38:46.685  INFO 2025-06-15 04:38:46,685 --- [nio-8080-exec-2] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:38:46.685  INFO 2025-06-15 04:38:46,685 --- [nio-8080-exec-2] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:38:50.770  INFO 2025-06-15 04:38:50,770 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:50.773  INFO 2025-06-15 04:38:50,773 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:38:50.773  INFO 2025-06-15 04:38:50,773 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:38:50.773  INFO 2025-06-15 04:38:50,773 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:38:50.773  INFO 2025-06-15 04:38:50,773 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:38:50.774  INFO 2025-06-15 04:38:50,774 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:38:50.775  INFO 2025-06-15 04:38:50,775 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Отправка мемориала ID=5 на модерацию пользователем 1111
2025-06-15 04:38:50.781  INFO 2025-06-15 04:38:50,781 --- [nio-8080-exec-4] r.c.services.MemorialService             : Уведомление о модерации создано для администратора admin
2025-06-15 04:38:50.782  INFO 2025-06-15 04:38:50,782 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=5 отправлен на модерацию пользователем ID=8
2025-06-15 04:38:52.591  INFO 2025-06-15 04:38:52,591 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:52.694  INFO 2025-06-15 04:38:52,694 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:52.695  INFO 2025-06-15 04:38:52,695 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:52.695  INFO 2025-06-15 04:38:52,695 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:52.695  INFO 2025-06-15 04:38:52,695 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:53.330  INFO 2025-06-15 04:38:53,330 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:53.474  INFO 2025-06-15 04:38:53,474 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:53.477  INFO 2025-06-15 04:38:53,477 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:53.481  INFO 2025-06-15 04:38:53,481 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:38:53.481  INFO 2025-06-15 04:38:53,481 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:38:53.481  INFO 2025-06-15 04:38:53,481 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:38:53.481  INFO 2025-06-15 04:38:53,481 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:38:53.481  INFO 2025-06-15 04:38:53,481 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:38:53.484  INFO 2025-06-15 04:38:53,484 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:38:53.485  INFO 2025-06-15 04:38:53,485 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:38:53.485  INFO 2025-06-15 04:38:53,485 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:38:53.493  INFO 2025-06-15 04:38:53,493 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:38:53.493  INFO 2025-06-15 04:38:53,493 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:38:53.499  INFO 2025-06-15 04:38:53,499 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:53.603  INFO 2025-06-15 04:38:53,603 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:53.820  INFO 2025-06-15 04:38:53,820 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:54.476  INFO 2025-06-15 04:38:54,476 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:38:54.570  INFO 2025-06-15 04:38:54,570 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:39:03.614  INFO 2025-06-15 04:39:03,614 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:39:03.656  INFO 2025-06-15 04:39:03,656 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:39:08.445  INFO 2025-06-15 04:39:08,445 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:39:08.448  INFO 2025-06-15 04:39:08,448 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:39:08.448  INFO 2025-06-15 04:39:08,448 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:39:08.448  INFO 2025-06-15 04:39:08,448 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:39:08.448  INFO 2025-06-15 04:39:08,448 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:39:08.448  INFO 2025-06-15 04:39:08,448 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:39:08.450  INFO 2025-06-15 04:39:08,450 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:39:08.450  INFO 2025-06-15 04:39:08,450 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:39:08.450  INFO 2025-06-15 04:39:08,450 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:39:08.457  INFO 2025-06-15 04:39:08,457 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:39:08.457  INFO 2025-06-15 04:39:08,457 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:39:11.931  INFO 2025-06-15 04:39:11,931 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : === АДМИН ПРОСМАТРИВАЕТ МЕМОРИАЛ ===
2025-06-15 04:39:11.931  INFO 2025-06-15 04:39:11,931 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: запрос на просмотр мемориала ID=5
2025-06-15 04:39:11.939  INFO 2025-06-15 04:39:11,939 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : Найден мемориал ID=5, ФИО='Сочнева Александра Алексеевна', changesUnderModeration=false, publicationStatus=PENDING_MODERATION
2025-06-15 04:39:11.940  INFO 2025-06-15 04:39:11,940 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : Текущий пользователь: admin
2025-06-15 04:39:11.941  INFO 2025-06-15 04:39:11,941 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : Найден пользователь: ID=7, роль=ADMIN
2025-06-15 04:39:11.941  INFO 2025-06-15 04:39:11,941 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: мемориал ID=5, changesUnderModeration=false, currentUser=admin, role=ADMIN
2025-06-15 04:39:11.941  INFO 2025-06-15 04:39:11,941 --- [nio-8080-exec-8] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=admin, роль=ADMIN, isOwner=false, isEditor=false, isAdmin=true, changesUnderModeration=false
2025-06-15 04:39:11.941  INFO 2025-06-15 04:39:11,941 --- [nio-8080-exec-8] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем admin (владелец: false, редактор: false, админ: true)
2025-06-15 04:39:11.942  INFO 2025-06-15 04:39:11,942 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: получен DTO для админа - ID=5, ФИО='Сочнева Александра Алексеевна', changesUnderModeration=false
2025-06-15 04:39:11.942  INFO 2025-06-15 04:39:11,942 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : УСТАНОВЛЕН ФЛАГ needsModeration=true для мемориала ID=5
2025-06-15 04:39:11.942  INFO 2025-06-15 04:39:11,942 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : ФЛАГ changesNeedModeration НЕ установлен для мемориала ID=5
2025-06-15 04:39:11.942  INFO 2025-06-15 04:39:11,942 --- [nio-8080-exec-8] r.c.c.admin.AdminMemorialController      : ИТОГОВЫЕ ФЛАГИ для admin/memorial-view: needsModeration=true, changesNeedModeration=null
2025-06-15 04:39:13.587  INFO 2025-06-15 04:39:13,587 --- [nio-8080-exec-9] r.c.c.admin.AdminMemorialController      : === ОДОБРЕНИЕ ПУБЛИКАЦИИ МЕМОРИАЛА ===
2025-06-15 04:39:13.587  INFO 2025-06-15 04:39:13,587 --- [nio-8080-exec-9] r.c.c.admin.AdminMemorialController      : approveMemorialPost: запрос на одобрение мемориала ID=5
2025-06-15 04:39:13.588  WARN 2025-06-15 04:39:13,588 --- [nio-8080-exec-9] r.c.c.admin.AdminMemorialController      : ВНИМАНИЕ! approveMemorialPost вызван для мемориала ID=5 со статусом: publicationStatus=PENDING_MODERATION, changesUnderModeration=false
2025-06-15 04:39:13.588  INFO 2025-06-15 04:39:13,588 --- [nio-8080-exec-9] r.c.c.admin.AdminMemorialController      : Текущий пользователь: admin
2025-06-15 04:39:13.589  INFO 2025-06-15 04:39:13,589 --- [nio-8080-exec-9] r.c.c.admin.AdminMemorialController      : Найден пользователь: ID=7, роль=ADMIN
2025-06-15 04:39:13.590  INFO 2025-06-15 04:39:13,590 --- [nio-8080-exec-9] r.c.c.admin.AdminMemorialController      : СОСТОЯНИЕ ДО МОДЕРАЦИИ: ID=5, publicationStatus=PENDING_MODERATION, isPublic=false
2025-06-15 04:39:13.590  INFO 2025-06-15 04:39:13,590 --- [nio-8080-exec-9] r.c.c.admin.AdminMemorialController      : Вызываем memorialService.moderateMemorial(5, true, admin, null)
2025-06-15 04:39:13.590  INFO 2025-06-15 04:39:13,590 --- [nio-8080-exec-9] r.c.services.MemorialService             : === МОДЕРАЦИЯ МЕМОРИАЛА ===
2025-06-15 04:39:13.590  INFO 2025-06-15 04:39:13,590 --- [nio-8080-exec-9] r.c.services.MemorialService             : moderateMemorial: ID=5, approved=true, admin=admin, reason='null'
2025-06-15 04:39:13.590  INFO 2025-06-15 04:39:13,590 --- [nio-8080-exec-9] r.c.services.MemorialService             : Найден мемориал ID=5, текущий статус: PENDING_MODERATION, isPublic: false
2025-06-15 04:39:13.590  INFO 2025-06-15 04:39:13,590 --- [nio-8080-exec-9] r.c.services.MemorialService             : ОДОБРЯЕМ мемориал ID=5: устанавливаем PUBLISHED и isPublic=true
2025-06-15 04:39:13.590  INFO 2025-06-15 04:39:13,590 --- [nio-8080-exec-9] r.c.services.MemorialService             : Сохраняем мемориал ID=5 с новым статусом: PUBLISHED, isPublic: true
2025-06-15 04:39:13.591  INFO 2025-06-15 04:39:13,591 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=5 сохранен в БД! Финальный статус: PUBLISHED, isPublic: true
2025-06-15 04:39:13.591  INFO 2025-06-15 04:39:13,591 --- [nio-8080-exec-9] r.c.services.MemorialService             : === СОЗДАНИЕ УВЕДОМЛЕНИЯ О РЕЗУЛЬТАТЕ МОДЕРАЦИИ ===
2025-06-15 04:39:13.591  INFO 2025-06-15 04:39:13,591 --- [nio-8080-exec-9] r.c.services.MemorialService             : createModerationResponseNotification: ID=5, approved=true, reason='null'
2025-06-15 04:39:13.593  INFO 2025-06-15 04:39:13,593 --- [nio-8080-exec-9] r.c.services.MemorialService             : Уведомление о результате модерации (одобрение) создано для пользователя 1111
2025-06-15 04:39:13.593  INFO 2025-06-15 04:39:13,593 --- [nio-8080-exec-9] r.c.services.MemorialService             : Модерация мемориала ID=5: одобрен
2025-06-15 04:39:13.593  INFO 2025-06-15 04:39:13,593 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем DTO: ID=5, publicationStatus=PUBLISHED, isPublic=true
2025-06-15 04:39:13.596  INFO 2025-06-15 04:39:13,596 --- [nio-8080-exec-9] r.c.c.admin.AdminMemorialController      : Результат moderateMemorial: ID=5, publicationStatus=PUBLISHED, isPublic=true
2025-06-15 04:39:13.597  INFO 2025-06-15 04:39:13,597 --- [nio-8080-exec-9] r.c.c.admin.AdminMemorialController      : СОСТОЯНИЕ ПОСЛЕ МОДЕРАЦИИ: ID=5, publicationStatus=PUBLISHED, isPublic=true
2025-06-15 04:39:13.597  INFO 2025-06-15 04:39:13,597 --- [nio-8080-exec-9] r.c.c.admin.AdminMemorialController      : Перенаправляем на /admin/memorials/5
2025-06-15 04:39:13.777  INFO 2025-06-15 04:39:13,777 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : === АДМИН ПРОСМАТРИВАЕТ МЕМОРИАЛ ===
2025-06-15 04:39:13.777  INFO 2025-06-15 04:39:13,777 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: запрос на просмотр мемориала ID=5
2025-06-15 04:39:13.781  INFO 2025-06-15 04:39:13,781 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : Найден мемориал ID=5, ФИО='Сочнева Александра Алексеевна', changesUnderModeration=false, publicationStatus=PUBLISHED
2025-06-15 04:39:13.781  INFO 2025-06-15 04:39:13,781 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : Текущий пользователь: admin
2025-06-15 04:39:13.782  INFO 2025-06-15 04:39:13,782 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : Найден пользователь: ID=7, роль=ADMIN
2025-06-15 04:39:13.782  INFO 2025-06-15 04:39:13,782 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: мемориал ID=5, changesUnderModeration=false, currentUser=admin, role=ADMIN
2025-06-15 04:39:13.782  INFO 2025-06-15 04:39:13,782 --- [nio-8080-exec-6] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=admin, роль=ADMIN, isOwner=false, isEditor=false, isAdmin=true, changesUnderModeration=false
2025-06-15 04:39:13.783  INFO 2025-06-15 04:39:13,783 --- [nio-8080-exec-6] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем admin (владелец: false, редактор: false, админ: true)
2025-06-15 04:39:13.783  INFO 2025-06-15 04:39:13,783 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: получен DTO для админа - ID=5, ФИО='Сочнева Александра Алексеевна', changesUnderModeration=false
2025-06-15 04:39:13.783  INFO 2025-06-15 04:39:13,783 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : ФЛАГ needsModeration НЕ установлен, так как publicationStatus=PUBLISHED
2025-06-15 04:39:13.783  INFO 2025-06-15 04:39:13,783 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : ФЛАГ changesNeedModeration НЕ установлен для мемориала ID=5
2025-06-15 04:39:13.783  INFO 2025-06-15 04:39:13,783 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : ИТОГОВЫЕ ФЛАГИ для admin/memorial-view: needsModeration=null, changesNeedModeration=null
2025-06-15 04:39:17.289  INFO 2025-06-15 04:39:17,289 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : === СТАТИСТИКА МЕМОРИАЛОВ ===
2025-06-15 04:39:17.289  INFO 2025-06-15 04:39:17,289 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : Total: 4, Public: 2, Pending Moderation: 0, Recent: 4
2025-06-15 04:39:17.289  INFO 2025-06-15 04:39:17,289 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : Monthly data: [0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0]
2025-06-15 04:39:17.289  INFO 2025-06-15 04:39:17,289 --- [nio-8080-exec-4] r.c.c.admin.AdminMemorialController      : Pie chart data: [2, 2, 0]
2025-06-15 04:40:03.100  INFO 2025-06-15 04:40:03,100 --- [nio-8080-exec-1] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 04:40:04.686  INFO 2025-06-15 04:40:04,686 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:40:04.689  INFO 2025-06-15 04:40:04,689 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:40:04.689  INFO 2025-06-15 04:40:04,689 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:40:04.689  INFO 2025-06-15 04:40:04,689 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:40:04.689  INFO 2025-06-15 04:40:04,689 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:40:04.689  INFO 2025-06-15 04:40:04,689 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:40:04.693  INFO 2025-06-15 04:40:04,693 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:40:04.693  INFO 2025-06-15 04:40:04,693 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:40:04.694  INFO 2025-06-15 04:40:04,694 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:40:04.707  INFO 2025-06-15 04:40:04,707 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:40:04.707  INFO 2025-06-15 04:40:04,707 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:41:54.854  INFO 2025-06-15 04:41:54,854 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:41:54.900  INFO 2025-06-15 04:41:54,900 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:41:54.903  INFO 2025-06-15 04:41:54,903 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:41:54.903  INFO 2025-06-15 04:41:54,903 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:41:54.903  INFO 2025-06-15 04:41:54,903 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:41:54.903  INFO 2025-06-15 04:41:54,903 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:41:54.903  INFO 2025-06-15 04:41:54,903 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:41:54.904  INFO 2025-06-15 04:41:54,904 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:41:54.904  INFO 2025-06-15 04:41:54,904 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:41:54.904  INFO 2025-06-15 04:41:54,904 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:41:54.909  INFO 2025-06-15 04:41:54,909 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:41:54.909  INFO 2025-06-15 04:41:54,909 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:41:54.959  INFO 2025-06-15 04:41:54,959 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:41:58.224  INFO 2025-06-15 04:41:58,224 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:41:58.255  INFO 2025-06-15 04:41:58,255 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:41:58.295  INFO 2025-06-15 04:41:58,295 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:41:58.304  INFO 2025-06-15 04:41:58,304 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:41:58.305  INFO 2025-06-15 04:41:58,305 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:41:58.477  INFO 2025-06-15 04:41:58,477 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:41:58.575  INFO 2025-06-15 04:41:58,575 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:41:58.576  INFO 2025-06-15 04:41:58,576 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:41:59.602  INFO 2025-06-15 04:41:59,602 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:42:01.981  INFO 2025-06-15 04:42:01,981 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:42:01.984  INFO 2025-06-15 04:42:01,984 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:42:01.984  INFO 2025-06-15 04:42:01,984 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:42:01.984  INFO 2025-06-15 04:42:01,984 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:42:01.984  INFO 2025-06-15 04:42:01,984 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:42:01.984  INFO 2025-06-15 04:42:01,984 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:42:01.985  INFO 2025-06-15 04:42:01,985 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:42:01.985  INFO 2025-06-15 04:42:01,985 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:42:01.985  INFO 2025-06-15 04:42:01,985 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:42:01.991  INFO 2025-06-15 04:42:01,991 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:42:01.991  INFO 2025-06-15 04:42:01,991 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:42:20.468  INFO 2025-06-15 04:42:20,468 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:42:20.488  INFO 2025-06-15 04:42:20,488 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:42:20.488  INFO 2025-06-15 04:42:20,488 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:42:20.490  INFO 2025-06-15 04:42:20,490 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:42:20.491  INFO 2025-06-15 04:42:20,491 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:42:20.491  INFO 2025-06-15 04:42:20,491 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:42:20.491  INFO 2025-06-15 04:42:20,491 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:42:20.491  INFO 2025-06-15 04:42:20,491 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:42:20.494  INFO 2025-06-15 04:42:20,494 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:42:20.494  INFO 2025-06-15 04:42:20,494 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:42:20.494  INFO 2025-06-15 04:42:20,494 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:42:20.499  INFO 2025-06-15 04:42:20,499 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:42:20.500  INFO 2025-06-15 04:42:20,500 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:42:20.561  INFO 2025-06-15 04:42:20,561 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:42:22.679  INFO 2025-06-15 04:42:22,679 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:42:22.682  INFO 2025-06-15 04:42:22,682 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:42:22.682  INFO 2025-06-15 04:42:22,682 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:42:22.682  INFO 2025-06-15 04:42:22,682 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:42:22.682  INFO 2025-06-15 04:42:22,682 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:42:22.683  INFO 2025-06-15 04:42:22,683 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:42:22.685  INFO 2025-06-15 04:42:22,685 --- [nio-8080-exec-3] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:42:22.685  INFO 2025-06-15 04:42:22,685 --- [nio-8080-exec-3] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:42:25.752  INFO 2025-06-15 04:42:25,752 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:42:25.754  INFO 2025-06-15 04:42:25,754 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:42:25.755  INFO 2025-06-15 04:42:25,755 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:42:25.755  INFO 2025-06-15 04:42:25,755 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:42:25.755  INFO 2025-06-15 04:42:25,755 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:42:25.755  INFO 2025-06-15 04:42:25,755 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:42:25.756  INFO 2025-06-15 04:42:25,756 --- [nio-8080-exec-8] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:42:25.756  INFO 2025-06-15 04:42:25,756 --- [nio-8080-exec-8] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:42:51.363  INFO 2025-06-15 04:42:51,363 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:42:51.366  INFO 2025-06-15 04:42:51,366 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:42:51.366  INFO 2025-06-15 04:42:51,366 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:42:51.366  INFO 2025-06-15 04:42:51,366 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:42:51.366  INFO 2025-06-15 04:42:51,366 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:42:51.367  INFO 2025-06-15 04:42:51,367 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:42:51.368  INFO 2025-06-15 04:42:51,368 --- [nio-8080-exec-1] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:42:51.368  INFO 2025-06-15 04:42:51,368 --- [nio-8080-exec-1] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:42:51.576  INFO 2025-06-15 04:42:51,576 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:42:51.583  INFO 2025-06-15 04:42:51,583 --- [nio-8080-exec-6] r.c.services.MemorialService             : Обновление мемориала ID=1, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 04:42:51.583  INFO 2025-06-15 04:42:51,583 --- [nio-8080-exec-6] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=1
2025-06-15 04:42:52.216  INFO 2025-06-15 04:42:52,216 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:42:52.898  INFO 2025-06-15 04:42:52,898 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:42:52.898  INFO 2025-06-15 04:42:52,898 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:42:52.898  INFO 2025-06-15 04:42:52,898 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:42:52.898  INFO 2025-06-15 04:42:52,898 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:42:52.899  INFO 2025-06-15 04:42:52,899 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:42:52.899  INFO 2025-06-15 04:42:52,899 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Загрузка документа для мемориала ID=1 пользователем 1111
2025-06-15 04:42:52.901  INFO 2025-06-15 04:42:52,901 --- [nio-8080-exec-9] r.c.services.MemorialService             : Загрузка документа для мемориала ID=1: пользователь=1111, размер=447138, тип=image/png
2025-06-15 04:42:54.174  INFO 2025-06-15 04:42:54,174 --- [nio-8080-exec-9] r.c.services.MemorialService             : Документ загружен для мемориала ID=1, URL: https://s3.timeweb.cloud/ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d/diplomSS/49b50720-f81b-4178-8512-dcaf66c59b0e.png
2025-06-15 04:42:54.783  INFO 2025-06-15 04:42:54,783 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:42:54.799  INFO 2025-06-15 04:42:54,799 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:42:54.801  INFO 2025-06-15 04:42:54,801 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:42:54.801  INFO 2025-06-15 04:42:54,801 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:42:54.801  INFO 2025-06-15 04:42:54,801 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:42:54.801  INFO 2025-06-15 04:42:54,801 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:42:54.801  INFO 2025-06-15 04:42:54,801 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:42:54.801  INFO 2025-06-15 04:42:54,801 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:42:54.802  INFO 2025-06-15 04:42:54,802 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:42:54.803  INFO 2025-06-15 04:42:54,803 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:42:54.803  INFO 2025-06-15 04:42:54,803 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:42:54.808  INFO 2025-06-15 04:42:54,808 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:42:54.808  INFO 2025-06-15 04:42:54,808 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:42:54.873  INFO 2025-06-15 04:42:54,873 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:43:30.347  INFO 2025-06-15 04:43:30,347 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:43:30.351  INFO 2025-06-15 04:43:30,351 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:43:30.351  INFO 2025-06-15 04:43:30,351 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:43:30.351  INFO 2025-06-15 04:43:30,351 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:43:30.351  INFO 2025-06-15 04:43:30,351 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:43:30.352  INFO 2025-06-15 04:43:30,352 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:43:30.354  INFO 2025-06-15 04:43:30,354 --- [nio-8080-exec-3] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:43:30.355  INFO 2025-06-15 04:43:30,355 --- [nio-8080-exec-3] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:43:36.985  INFO 2025-06-15 04:43:36,985 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:43:36.989  INFO 2025-06-15 04:43:36,989 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:43:36.989  INFO 2025-06-15 04:43:36,989 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:43:36.989  INFO 2025-06-15 04:43:36,989 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:43:36.989  INFO 2025-06-15 04:43:36,989 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:43:36.991  INFO 2025-06-15 04:43:36,991 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:43:36.993  INFO 2025-06-15 04:43:36,993 --- [nio-8080-exec-8] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:43:36.993  INFO 2025-06-15 04:43:36,993 --- [nio-8080-exec-8] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:43:37.206  INFO 2025-06-15 04:43:37,206 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:43:37.215  INFO 2025-06-15 04:43:37,215 --- [nio-8080-exec-1] r.c.services.MemorialService             : Обновление мемориала ID=1, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 04:43:37.215  INFO 2025-06-15 04:43:37,215 --- [nio-8080-exec-1] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=1
2025-06-15 04:43:38.031  INFO 2025-06-15 04:43:38,031 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:43:38.048  INFO 2025-06-15 04:43:38,048 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:43:38.069  INFO 2025-06-15 04:43:38,069 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:43:38.112  INFO 2025-06-15 04:43:38,112 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:43:38.115  INFO 2025-06-15 04:43:38,115 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:43:38.115  INFO 2025-06-15 04:43:38,115 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:43:38.115  INFO 2025-06-15 04:43:38,115 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:43:38.115  INFO 2025-06-15 04:43:38,115 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:43:38.115  INFO 2025-06-15 04:43:38,115 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:43:38.116  INFO 2025-06-15 04:43:38,116 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:43:38.116  INFO 2025-06-15 04:43:38,116 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:43:38.116  INFO 2025-06-15 04:43:38,116 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:43:38.122  INFO 2025-06-15 04:43:38,122 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:43:38.123  INFO 2025-06-15 04:43:38,123 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:45:31.411  INFO 2025-06-15 04:45:31,411 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:45:31.431  INFO 2025-06-15 04:45:31,431 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:45:31.431  INFO 2025-06-15 04:45:31,431 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:45:31.453  INFO 2025-06-15 04:45:31,453 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:45:31.453  INFO 2025-06-15 04:45:31,453 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:45:31.454  INFO 2025-06-15 04:45:31,454 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:45:31.454  INFO 2025-06-15 04:45:31,454 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:45:31.454  INFO 2025-06-15 04:45:31,454 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:45:31.459  INFO 2025-06-15 04:45:31,459 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:45:31.459  INFO 2025-06-15 04:45:31,459 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:45:31.460  INFO 2025-06-15 04:45:31,460 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:45:31.469  INFO 2025-06-15 04:45:31,469 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:45:31.469  INFO 2025-06-15 04:45:31,469 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:45:35.412  INFO 2025-06-15 04:45:35,412 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:45:35.414  INFO 2025-06-15 04:45:35,414 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:45:35.414  INFO 2025-06-15 04:45:35,414 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:45:35.414  INFO 2025-06-15 04:45:35,414 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:45:35.414  INFO 2025-06-15 04:45:35,414 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:45:35.416  INFO 2025-06-15 04:45:35,416 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:45:35.418  INFO 2025-06-15 04:45:35,418 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:45:35.418  INFO 2025-06-15 04:45:35,418 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:45:40.166  INFO 2025-06-15 04:45:40,166 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:45:40.169  INFO 2025-06-15 04:45:40,169 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:45:40.169  INFO 2025-06-15 04:45:40,169 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:45:40.169  INFO 2025-06-15 04:45:40,169 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:45:40.169  INFO 2025-06-15 04:45:40,169 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:45:40.170  INFO 2025-06-15 04:45:40,170 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:45:40.175  INFO 2025-06-15 04:45:40,175 --- [nio-8080-exec-4] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:45:40.175  INFO 2025-06-15 04:45:40,175 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:45:52.381  INFO 2025-06-15 04:45:52,381 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:45:52.383  INFO 2025-06-15 04:45:52,383 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:45:52.383  INFO 2025-06-15 04:45:52,383 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:45:52.383  INFO 2025-06-15 04:45:52,383 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:45:52.383  INFO 2025-06-15 04:45:52,383 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:45:52.384  INFO 2025-06-15 04:45:52,384 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:45:52.386  INFO 2025-06-15 04:45:52,386 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:45:52.386  INFO 2025-06-15 04:45:52,386 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:45:52.654  INFO 2025-06-15 04:45:52,654 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:45:52.661  INFO 2025-06-15 04:45:52,661 --- [nio-8080-exec-2] r.c.services.MemorialService             : Обновление мемориала ID=1, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 04:45:52.661  INFO 2025-06-15 04:45:52,661 --- [nio-8080-exec-2] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=1
2025-06-15 04:45:52.941  INFO 2025-06-15 04:45:52,941 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:45:53.402  INFO 2025-06-15 04:45:53,402 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:45:53.402  INFO 2025-06-15 04:45:53,402 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:45:53.402  INFO 2025-06-15 04:45:53,402 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:45:53.402  INFO 2025-06-15 04:45:53,402 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:45:53.403  INFO 2025-06-15 04:45:53,403 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:45:53.403  INFO 2025-06-15 04:45:53,403 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Загрузка документа для мемориала ID=1 пользователем 1111
2025-06-15 04:45:53.406  INFO 2025-06-15 04:45:53,406 --- [nio-8080-exec-5] r.c.services.MemorialService             : Загрузка документа для мемориала ID=1: пользователь=1111, размер=51299, тип=image/jpeg
2025-06-15 04:45:54.391  INFO 2025-06-15 04:45:54,391 --- [nio-8080-exec-5] r.c.services.MemorialService             : Документ загружен для мемориала ID=1, URL: https://s3.timeweb.cloud/ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d/diplomSS/38ca66c9-f8be-4b65-905c-82fff43af292.jpg
2025-06-15 04:45:56.387  INFO 2025-06-15 04:45:56,387 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:45:56.390  INFO 2025-06-15 04:45:56,390 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:45:56.392  INFO 2025-06-15 04:45:56,392 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:45:56.392  INFO 2025-06-15 04:45:56,392 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:45:56.392  INFO 2025-06-15 04:45:56,392 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:45:56.392  INFO 2025-06-15 04:45:56,392 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:45:56.392  INFO 2025-06-15 04:45:56,392 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:45:56.394  INFO 2025-06-15 04:45:56,394 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:45:56.394  INFO 2025-06-15 04:45:56,394 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:45:56.394  INFO 2025-06-15 04:45:56,394 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:45:56.403  INFO 2025-06-15 04:45:56,403 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:45:56.403  INFO 2025-06-15 04:45:56,403 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:51:01.299  INFO 2025-06-15 04:51:01,299 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:01.299  INFO 2025-06-15 04:51:01,299 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:01.299  INFO 2025-06-15 04:51:01,299 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:01.301  INFO 2025-06-15 04:51:01,301 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:51:01.301  INFO 2025-06-15 04:51:01,301 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:01.301  INFO 2025-06-15 04:51:01,301 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:01.301  INFO 2025-06-15 04:51:01,301 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:51:01.301  INFO 2025-06-15 04:51:01,301 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:51:01.308  INFO 2025-06-15 04:51:01,308 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:51:01.308  INFO 2025-06-15 04:51:01,308 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:51:01.308  INFO 2025-06-15 04:51:01,308 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:51:01.316  INFO 2025-06-15 04:51:01,316 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:51:01.316  INFO 2025-06-15 04:51:01,316 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:51:20.980  INFO 2025-06-15 04:51:20,980 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:20.982  INFO 2025-06-15 04:51:20,982 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:20.982  INFO 2025-06-15 04:51:20,982 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:20.982  INFO 2025-06-15 04:51:20,982 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:51:20.982  INFO 2025-06-15 04:51:20,982 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:51:20.983  INFO 2025-06-15 04:51:20,983 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:51:20.986  INFO 2025-06-15 04:51:20,986 --- [nio-8080-exec-2] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:51:20.986  INFO 2025-06-15 04:51:20,986 --- [nio-8080-exec-2] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:51:32.040  INFO 2025-06-15 04:51:32,040 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:32.042  INFO 2025-06-15 04:51:32,042 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:32.042  INFO 2025-06-15 04:51:32,042 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:32.042  INFO 2025-06-15 04:51:32,042 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:51:32.042  INFO 2025-06-15 04:51:32,042 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:51:32.043  INFO 2025-06-15 04:51:32,043 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:51:32.045  INFO 2025-06-15 04:51:32,045 --- [nio-8080-exec-5] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:51:32.045  INFO 2025-06-15 04:51:32,045 --- [nio-8080-exec-5] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:51:32.238  INFO 2025-06-15 04:51:32,238 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:32.244  INFO 2025-06-15 04:51:32,244 --- [nio-8080-exec-7] r.c.services.MemorialService             : Обновление мемориала ID=1, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 04:51:32.244  INFO 2025-06-15 04:51:32,244 --- [nio-8080-exec-7] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=1
2025-06-15 04:51:32.557  INFO 2025-06-15 04:51:32,557 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:33.189  INFO 2025-06-15 04:51:33,189 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:33.189  INFO 2025-06-15 04:51:33,189 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:33.189  INFO 2025-06-15 04:51:33,189 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:51:33.189  INFO 2025-06-15 04:51:33,189 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:51:33.190  INFO 2025-06-15 04:51:33,190 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:51:33.190  INFO 2025-06-15 04:51:33,190 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Загрузка документа для мемориала ID=1 пользователем 1111
2025-06-15 04:51:33.193  INFO 2025-06-15 04:51:33,193 --- [nio-8080-exec-3] r.c.services.MemorialService             : Загрузка документа для мемориала ID=1: пользователь=1111, размер=51299, тип=image/jpeg
2025-06-15 04:51:34.204  INFO 2025-06-15 04:51:34,204 --- [nio-8080-exec-3] r.c.services.MemorialService             : Документ загружен для мемориала ID=1, URL: https://s3.timeweb.cloud/ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d/diplomSS/6208f7b4-25cd-47ef-bb4f-e2e3cd9c1d3d.jpg
2025-06-15 04:51:41.145  INFO 2025-06-15 04:51:41,145 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:41.151  INFO 2025-06-15 04:51:41,151 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:41.153  INFO 2025-06-15 04:51:41,153 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:51:41.153  INFO 2025-06-15 04:51:41,153 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:41.153  INFO 2025-06-15 04:51:41,153 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:41.153  INFO 2025-06-15 04:51:41,153 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:51:41.153  INFO 2025-06-15 04:51:41,153 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:51:41.155  INFO 2025-06-15 04:51:41,155 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:51:41.155  INFO 2025-06-15 04:51:41,155 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:51:41.155  INFO 2025-06-15 04:51:41,155 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:51:41.160  INFO 2025-06-15 04:51:41,160 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:51:41.160  INFO 2025-06-15 04:51:41,160 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:51:43.702  INFO 2025-06-15 04:51:43,702 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:43.705  INFO 2025-06-15 04:51:43,705 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:43.705  INFO 2025-06-15 04:51:43,705 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:43.705  INFO 2025-06-15 04:51:43,705 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:51:43.705  INFO 2025-06-15 04:51:43,705 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:51:43.706  INFO 2025-06-15 04:51:43,706 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:51:43.709  INFO 2025-06-15 04:51:43,709 --- [nio-8080-exec-1] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:51:43.709  INFO 2025-06-15 04:51:43,709 --- [nio-8080-exec-1] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:51:45.901  INFO 2025-06-15 04:51:45,901 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:45.904  INFO 2025-06-15 04:51:45,904 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:45.904  INFO 2025-06-15 04:51:45,904 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:45.904  INFO 2025-06-15 04:51:45,904 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:51:45.904  INFO 2025-06-15 04:51:45,904 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:51:45.905  INFO 2025-06-15 04:51:45,905 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:51:45.907  INFO 2025-06-15 04:51:45,907 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:51:45.907  INFO 2025-06-15 04:51:45,907 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:51:52.144  INFO 2025-06-15 04:51:52,144 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:52.146  INFO 2025-06-15 04:51:52,146 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:52.146  INFO 2025-06-15 04:51:52,146 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:52.146  INFO 2025-06-15 04:51:52,146 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:51:52.146  INFO 2025-06-15 04:51:52,146 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:51:52.146  INFO 2025-06-15 04:51:52,146 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:51:52.147  INFO 2025-06-15 04:51:52,147 --- [nio-8080-exec-4] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:51:52.147  INFO 2025-06-15 04:51:52,147 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:51:52.332  INFO 2025-06-15 04:51:52,332 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:52.335  INFO 2025-06-15 04:51:52,335 --- [io-8080-exec-10] r.c.services.MemorialService             : Обновление мемориала ID=1, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 04:51:52.335  INFO 2025-06-15 04:51:52,335 --- [io-8080-exec-10] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=1
2025-06-15 04:51:53.924  INFO 2025-06-15 04:51:53,924 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:53.963  INFO 2025-06-15 04:51:53,963 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:53.965  INFO 2025-06-15 04:51:53,965 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 04:51:53.965  INFO 2025-06-15 04:51:53,965 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:53.965  INFO 2025-06-15 04:51:53,965 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:53.965  INFO 2025-06-15 04:51:53,965 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:51:53.965  INFO 2025-06-15 04:51:53,965 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:51:53.966  INFO 2025-06-15 04:51:53,966 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:51:53.966  INFO 2025-06-15 04:51:53,966 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 04:51:53.966  INFO 2025-06-15 04:51:53,966 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 04:51:53.972  INFO 2025-06-15 04:51:53,972 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:51:53.972  INFO 2025-06-15 04:51:53,972 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 04:51:57.172  INFO 2025-06-15 04:51:57,172 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:57.174  INFO 2025-06-15 04:51:57,174 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:57.174  INFO 2025-06-15 04:51:57,174 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:57.174  INFO 2025-06-15 04:51:57,174 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:51:57.174  INFO 2025-06-15 04:51:57,174 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:51:57.175  INFO 2025-06-15 04:51:57,175 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:51:57.176  INFO 2025-06-15 04:51:57,176 --- [nio-8080-exec-7] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:51:57.176  INFO 2025-06-15 04:51:57,176 --- [nio-8080-exec-7] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:51:59.293  INFO 2025-06-15 04:51:59,293 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 04:51:59.294  INFO 2025-06-15 04:51:59,294 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:59.295  INFO 2025-06-15 04:51:59,295 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 04:51:59.295  INFO 2025-06-15 04:51:59,295 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 04:51:59.295  INFO 2025-06-15 04:51:59,295 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 04:51:59.296  INFO 2025-06-15 04:51:59,296 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 04:51:59.297  INFO 2025-06-15 04:51:59,297 --- [nio-8080-exec-3] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 04:51:59.297  INFO 2025-06-15 04:51:59,297 --- [nio-8080-exec-3] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 04:52:42.148  INFO 2025-06-15 04:52:42,148 --- [nio-8080-exec-6] r.c.c.admin.AdminReportsController       : Загрузка страницы отчётов
2025-06-15 04:52:45.224  INFO 2025-06-15 04:52:45,224 --- [nio-8080-exec-1] r.c.c.admin.AdminMemorialController      : === СТАТИСТИКА МЕМОРИАЛОВ ===
2025-06-15 04:52:45.224  INFO 2025-06-15 04:52:45,224 --- [nio-8080-exec-1] r.c.c.admin.AdminMemorialController      : Total: 4, Public: 2, Pending Moderation: 0, Recent: 4
2025-06-15 04:52:45.224  INFO 2025-06-15 04:52:45,224 --- [nio-8080-exec-1] r.c.c.admin.AdminMemorialController      : Monthly data: [0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0]
2025-06-15 04:52:45.224  INFO 2025-06-15 04:52:45,224 --- [nio-8080-exec-1] r.c.c.admin.AdminMemorialController      : Pie chart data: [2, 2, 0]
2025-06-15 04:54:12.759  INFO 2025-06-15 04:54:12,759 --- [nio-8080-exec-5] r.c.c.admin.AdminMemorialController      : === АДМИН ПРОСМАТРИВАЕТ МЕМОРИАЛ ===
2025-06-15 04:54:12.759  INFO 2025-06-15 04:54:12,759 --- [nio-8080-exec-5] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: запрос на просмотр мемориала ID=1
2025-06-15 04:54:12.761  INFO 2025-06-15 04:54:12,761 --- [nio-8080-exec-5] r.c.c.admin.AdminMemorialController      : Найден мемориал ID=1, ФИО='Иванов Иван Иванович', changesUnderModeration=false, publicationStatus=DRAFT
2025-06-15 04:54:12.761  INFO 2025-06-15 04:54:12,761 --- [nio-8080-exec-5] r.c.c.admin.AdminMemorialController      : Текущий пользователь: admin
2025-06-15 04:54:12.762  INFO 2025-06-15 04:54:12,762 --- [nio-8080-exec-5] r.c.c.admin.AdminMemorialController      : Найден пользователь: ID=7, роль=ADMIN
2025-06-15 04:54:12.762  INFO 2025-06-15 04:54:12,762 --- [nio-8080-exec-5] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: мемориал ID=1, changesUnderModeration=false, currentUser=admin, role=ADMIN
2025-06-15 04:54:12.762  INFO 2025-06-15 04:54:12,762 --- [nio-8080-exec-5] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=admin, роль=ADMIN, isOwner=false, isEditor=false, isAdmin=true, changesUnderModeration=false
2025-06-15 04:54:12.762  INFO 2025-06-15 04:54:12,762 --- [nio-8080-exec-5] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем admin (владелец: false, редактор: false, админ: true)
2025-06-15 04:54:12.762  INFO 2025-06-15 04:54:12,762 --- [nio-8080-exec-5] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: получен DTO для админа - ID=1, ФИО='Иванов Иван Иванович', changesUnderModeration=false
2025-06-15 04:54:12.762  INFO 2025-06-15 04:54:12,762 --- [nio-8080-exec-5] r.c.c.admin.AdminMemorialController      : ФЛАГ needsModeration НЕ установлен, так как publicationStatus=DRAFT
2025-06-15 04:54:12.762  INFO 2025-06-15 04:54:12,762 --- [nio-8080-exec-5] r.c.c.admin.AdminMemorialController      : ФЛАГ changesNeedModeration НЕ установлен для мемориала ID=1
2025-06-15 04:54:12.762  INFO 2025-06-15 04:54:12,762 --- [nio-8080-exec-5] r.c.c.admin.AdminMemorialController      : ИТОГОВЫЕ ФЛАГИ для admin/memorial-view: needsModeration=null, changesNeedModeration=null
2025-06-15 04:54:14.386  INFO 2025-06-15 04:54:14,386 --- [nio-8080-exec-3] r.c.c.admin.AdminMemorialController      : === АДМИН ЗАПРАШИВАЕТ ДОКУМЕНТ ===
2025-06-15 04:54:14.386  INFO 2025-06-15 04:54:14,386 --- [nio-8080-exec-3] r.c.c.admin.AdminMemorialController      : AdminMemorialController.getMemorialDocument: запрос документа мемориала ID=1
2025-06-15 04:54:14.386  INFO 2025-06-15 04:54:14,386 --- [nio-8080-exec-3] r.c.c.admin.AdminMemorialController      : Текущий админ: admin
2025-06-15 04:54:14.389  INFO 2025-06-15 04:54:14,389 --- [nio-8080-exec-3] r.c.c.admin.AdminMemorialController      : Найден пользователь: ID=7, роль=ADMIN
2025-06-15 04:54:14.389  INFO 2025-06-15 04:54:14,389 --- [nio-8080-exec-3] r.c.c.admin.AdminMemorialController      : Мемориал найден: ID=1, ФИО='Иванов Иван Иванович', documentUrl=https://s3.timeweb.cloud/ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d/diplomSS/6208f7b4-25cd-47ef-bb4f-e2e3cd9c1d3d.jpg
2025-06-15 04:54:14.390  INFO 2025-06-15 04:54:14,390 --- [nio-8080-exec-3] r.c.c.admin.AdminMemorialController      : Админ получает документ через MemorialService...
2025-06-15 04:54:14.390  INFO 2025-06-15 04:54:14,390 --- [nio-8080-exec-3] r.c.services.MemorialService             : MemorialService.getMemorialDocument: начало получения документа для мемориала 1
2025-06-15 04:54:14.390  INFO 2025-06-15 04:54:14,390 --- [nio-8080-exec-3] r.c.services.MemorialService             : MemorialService.getMemorialDocument: мемориал найден, documentUrl=https://s3.timeweb.cloud/ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d/diplomSS/6208f7b4-25cd-47ef-bb4f-e2e3cd9c1d3d.jpg
2025-06-15 04:54:14.390  INFO 2025-06-15 04:54:14,390 --- [nio-8080-exec-3] r.c.services.MemorialService             : MemorialService.getMemorialDocument: передаем запрос в FileStorageService для URL: https://s3.timeweb.cloud/ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d/diplomSS/6208f7b4-25cd-47ef-bb4f-e2e3cd9c1d3d.jpg
2025-06-15 04:54:14.390  INFO 2025-06-15 04:54:14,390 --- [nio-8080-exec-3] r.c.services.FileStorageService          : FileStorageService.getFile: начало получения файла по URL: https://s3.timeweb.cloud/ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d/diplomSS/6208f7b4-25cd-47ef-bb4f-e2e3cd9c1d3d.jpg
2025-06-15 04:54:14.390  INFO 2025-06-15 04:54:14,390 --- [nio-8080-exec-3] r.c.services.FileStorageService          : FileStorageService.getFile: извлеченный ключ S3: diplomSS/6208f7b4-25cd-47ef-bb4f-e2e3cd9c1d3d.jpg
2025-06-15 04:54:14.390  INFO 2025-06-15 04:54:14,390 --- [nio-8080-exec-3] r.c.services.FileStorageService          : FileStorageService.getFile: используемый bucket: ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d
2025-06-15 04:54:14.390  INFO 2025-06-15 04:54:14,390 --- [nio-8080-exec-3] r.c.services.FileStorageService          : FileStorageService.getFile: отправляем запрос в S3...
2025-06-15 04:54:14.979  INFO 2025-06-15 04:54:14,979 --- [nio-8080-exec-3] r.c.services.FileStorageService          : FileStorageService.getFile: ответ от S3 получен, contentType: image/jpeg, contentLength: 51299
2025-06-15 04:54:14.979  INFO 2025-06-15 04:54:14,979 --- [nio-8080-exec-3] r.c.services.FileStorageService          : FileStorageService.getFile: извлеченное имя файла: 6208f7b4-25cd-47ef-bb4f-e2e3cd9c1d3d.jpg
2025-06-15 04:54:14.979  INFO 2025-06-15 04:54:14,979 --- [nio-8080-exec-3] r.c.services.FileStorageService          : FileStorageService.getFile: файл успешно подготовлен для отправки
2025-06-15 04:54:14.979  INFO 2025-06-15 04:54:14,979 --- [nio-8080-exec-3] r.c.services.MemorialService             : MemorialService.getMemorialDocument: документ успешно получен из FileStorageService, статус: 200 OK
2025-06-15 04:54:14.979  INFO 2025-06-15 04:54:14,979 --- [nio-8080-exec-3] r.c.c.admin.AdminMemorialController      : === КОНЕЦ ЗАПРОСА ДОКУМЕНТА АДМИНОМ ===
2025-06-15 04:55:53.310  INFO 2025-06-15 04:55:53,310 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : === АДМИН ПРОСМАТРИВАЕТ МЕМОРИАЛ ===
2025-06-15 04:55:53.310  INFO 2025-06-15 04:55:53,310 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: запрос на просмотр мемориала ID=5
2025-06-15 04:55:53.315  INFO 2025-06-15 04:55:53,315 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : Найден мемориал ID=5, ФИО='Сочнева Александра Алексеевна', changesUnderModeration=false, publicationStatus=PUBLISHED
2025-06-15 04:55:53.315  INFO 2025-06-15 04:55:53,315 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : Текущий пользователь: admin
2025-06-15 04:55:53.316  INFO 2025-06-15 04:55:53,316 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : Найден пользователь: ID=7, роль=ADMIN
2025-06-15 04:55:53.316  INFO 2025-06-15 04:55:53,316 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: мемориал ID=5, changesUnderModeration=false, currentUser=admin, role=ADMIN
2025-06-15 04:55:53.317  INFO 2025-06-15 04:55:53,317 --- [nio-8080-exec-6] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=admin, роль=ADMIN, isOwner=false, isEditor=false, isAdmin=true, changesUnderModeration=false
2025-06-15 04:55:53.317  INFO 2025-06-15 04:55:53,317 --- [nio-8080-exec-6] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем admin (владелец: false, редактор: false, админ: true)
2025-06-15 04:55:53.317  INFO 2025-06-15 04:55:53,317 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: получен DTO для админа - ID=5, ФИО='Сочнева Александра Алексеевна', changesUnderModeration=false
2025-06-15 04:55:53.317  INFO 2025-06-15 04:55:53,317 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : ФЛАГ needsModeration НЕ установлен, так как publicationStatus=PUBLISHED
2025-06-15 04:55:53.317  INFO 2025-06-15 04:55:53,317 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : ФЛАГ changesNeedModeration НЕ установлен для мемориала ID=5
2025-06-15 04:55:53.317  INFO 2025-06-15 04:55:53,317 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : ИТОГОВЫЕ ФЛАГИ для admin/memorial-view: needsModeration=null, changesNeedModeration=null
2025-06-15 04:56:07.000  INFO 2025-06-15 04:56:07,000 --- [nio-8080-exec-9] r.c.c.admin.AdminMemorialController      : === СТАТИСТИКА МЕМОРИАЛОВ ===
2025-06-15 04:56:07.000  INFO 2025-06-15 04:56:07,000 --- [nio-8080-exec-9] r.c.c.admin.AdminMemorialController      : Total: 4, Public: 2, Pending Moderation: 0, Recent: 4
2025-06-15 04:56:07.000  INFO 2025-06-15 04:56:07,000 --- [nio-8080-exec-9] r.c.c.admin.AdminMemorialController      : Monthly data: [0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0]
2025-06-15 04:56:07.000  INFO 2025-06-15 04:56:07,000 --- [nio-8080-exec-9] r.c.c.admin.AdminMemorialController      : Pie chart data: [2, 2, 0]
2025-06-15 05:03:39.945  INFO 2025-06-15 05:03:39,945 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:03:39.946  INFO 2025-06-15 05:03:39,946 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:03:39.948  INFO 2025-06-15 05:03:39,948 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:03:39.948  INFO 2025-06-15 05:03:39,948 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:03:39.948  INFO 2025-06-15 05:03:39,948 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:03:39.948  INFO 2025-06-15 05:03:39,948 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:03:39.948  INFO 2025-06-15 05:03:39,948 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:03:39.980  INFO 2025-06-15 05:03:39,980 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:03:39.980  INFO 2025-06-15 05:03:39,980 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:03:39.981  INFO 2025-06-15 05:03:39,981 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:03:40.012  INFO 2025-06-15 05:03:40,012 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:03:40.012  INFO 2025-06-15 05:03:40,012 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:03:40.016  INFO 2025-06-15 05:03:40,016 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:03:43.164  INFO 2025-06-15 05:03:43,164 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:03:43.167  INFO 2025-06-15 05:03:43,167 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:03:43.168  INFO 2025-06-15 05:03:43,168 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:03:43.168  INFO 2025-06-15 05:03:43,168 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:03:43.168  INFO 2025-06-15 05:03:43,168 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:03:43.169  INFO 2025-06-15 05:03:43,169 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:03:43.173  INFO 2025-06-15 05:03:43,173 --- [nio-8080-exec-3] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:03:43.173  INFO 2025-06-15 05:03:43,173 --- [nio-8080-exec-3] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:03:45.518  INFO 2025-06-15 05:03:45,518 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:03:45.521  INFO 2025-06-15 05:03:45,521 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:03:45.521  INFO 2025-06-15 05:03:45,521 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:03:45.521  INFO 2025-06-15 05:03:45,521 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:03:45.521  INFO 2025-06-15 05:03:45,521 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:03:45.522  INFO 2025-06-15 05:03:45,522 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:03:45.525  INFO 2025-06-15 05:03:45,525 --- [nio-8080-exec-8] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:03:45.525  INFO 2025-06-15 05:03:45,525 --- [nio-8080-exec-8] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:03:49.766  INFO 2025-06-15 05:03:49,766 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:03:49.768  INFO 2025-06-15 05:03:49,768 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:03:49.768  INFO 2025-06-15 05:03:49,768 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:03:49.768  INFO 2025-06-15 05:03:49,768 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:03:49.768  INFO 2025-06-15 05:03:49,768 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:03:49.769  INFO 2025-06-15 05:03:49,769 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:03:49.771  INFO 2025-06-15 05:03:49,771 --- [nio-8080-exec-6] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:03:49.771  INFO 2025-06-15 05:03:49,771 --- [nio-8080-exec-6] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:03:49.965  INFO 2025-06-15 05:03:49,965 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:03:49.971  INFO 2025-06-15 05:03:49,971 --- [nio-8080-exec-1] r.c.services.MemorialService             : Обновление мемориала ID=1, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 05:03:49.971  INFO 2025-06-15 05:03:49,971 --- [nio-8080-exec-1] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=1
2025-06-15 05:03:51.886  INFO 2025-06-15 05:03:51,886 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:03:51.886  INFO 2025-06-15 05:03:51,886 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:03:51.889  INFO 2025-06-15 05:03:51,889 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:03:51.889  INFO 2025-06-15 05:03:51,889 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:03:51.889  INFO 2025-06-15 05:03:51,889 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:03:51.889  INFO 2025-06-15 05:03:51,889 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:03:51.889  INFO 2025-06-15 05:03:51,889 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:03:51.890  INFO 2025-06-15 05:03:51,890 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:03:51.891  INFO 2025-06-15 05:03:51,891 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:03:51.891  INFO 2025-06-15 05:03:51,891 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:03:51.901  INFO 2025-06-15 05:03:51,901 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:03:51.901  INFO 2025-06-15 05:03:51,901 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:04:00.010  INFO 2025-06-15 05:04:00,010 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:04:00.012  INFO 2025-06-15 05:04:00,012 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:04:00.012  INFO 2025-06-15 05:04:00,012 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:04:00.012  INFO 2025-06-15 05:04:00,012 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:04:00.012  INFO 2025-06-15 05:04:00,012 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:04:00.013  INFO 2025-06-15 05:04:00,013 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:04:00.016  INFO 2025-06-15 05:04:00,016 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:04:00.016  INFO 2025-06-15 05:04:00,016 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:04:01.821  INFO 2025-06-15 05:04:01,821 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:04:01.823  INFO 2025-06-15 05:04:01,823 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:04:01.823  INFO 2025-06-15 05:04:01,823 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:04:01.823  INFO 2025-06-15 05:04:01,823 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:04:01.823  INFO 2025-06-15 05:04:01,823 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:04:01.824  INFO 2025-06-15 05:04:01,824 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:04:01.827  INFO 2025-06-15 05:04:01,827 --- [nio-8080-exec-5] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:04:01.828  INFO 2025-06-15 05:04:01,828 --- [nio-8080-exec-5] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:04:37.485  INFO 2025-06-15 05:04:37,485 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:04:37.488  INFO 2025-06-15 05:04:37,488 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:04:37.488  INFO 2025-06-15 05:04:37,488 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:04:37.488  INFO 2025-06-15 05:04:37,488 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:04:37.488  INFO 2025-06-15 05:04:37,488 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:04:37.489  INFO 2025-06-15 05:04:37,489 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:04:37.491  INFO 2025-06-15 05:04:37,491 --- [nio-8080-exec-2] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:04:37.491  INFO 2025-06-15 05:04:37,491 --- [nio-8080-exec-2] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:04:37.679  INFO 2025-06-15 05:04:37,679 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:04:37.684  INFO 2025-06-15 05:04:37,684 --- [nio-8080-exec-7] r.c.services.MemorialService             : Обновление мемориала ID=1, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 05:04:37.684  INFO 2025-06-15 05:04:37,684 --- [nio-8080-exec-7] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=1
2025-06-15 05:04:49.162  INFO 2025-06-15 05:04:49,162 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:04:49.162  INFO 2025-06-15 05:04:49,162 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:04:49.164  INFO 2025-06-15 05:04:49,164 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:04:49.164  INFO 2025-06-15 05:04:49,164 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:04:49.164  INFO 2025-06-15 05:04:49,164 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:04:49.164  INFO 2025-06-15 05:04:49,164 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:04:49.164  INFO 2025-06-15 05:04:49,164 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:04:49.166  INFO 2025-06-15 05:04:49,166 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:04:49.166  INFO 2025-06-15 05:04:49,166 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:04:49.166  INFO 2025-06-15 05:04:49,166 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:04:49.170  INFO 2025-06-15 05:04:49,170 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:04:49.170  INFO 2025-06-15 05:04:49,170 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:07:23.748  INFO 2025-06-15 05:07:23,748 --- [io-8080-exec-10] r.c.controllers.UserController           : Login attempt for user: 1111
2025-06-15 05:07:23.825  INFO 2025-06-15 05:07:23,825 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:07:23.832  INFO 2025-06-15 05:07:23,832 --- [io-8080-exec-10] r.c.controllers.UserController           : Login successful for user: 1111
2025-06-15 05:07:24.660  INFO 2025-06-15 05:07:24,660 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:07:24.663  INFO 2025-06-15 05:07:24,663 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:07:24.663  INFO 2025-06-15 05:07:24,663 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:07:24.663  INFO 2025-06-15 05:07:24,663 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:07:24.663  INFO 2025-06-15 05:07:24,663 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:07:24.663  INFO 2025-06-15 05:07:24,663 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:07:24.665  INFO 2025-06-15 05:07:24,665 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:07:24.665  INFO 2025-06-15 05:07:24,665 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:07:24.665  INFO 2025-06-15 05:07:24,665 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:07:24.671  INFO 2025-06-15 05:07:24,671 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:07:24.672  INFO 2025-06-15 05:07:24,672 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:07:24.733  INFO 2025-06-15 05:07:24,733 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:07:24.733  INFO 2025-06-15 05:07:24,733 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:07:42.978 ERROR 2025-06-15 05:07:42,978 --- [nio-8080-exec-8] r.c.exceptions.GlobalExceptionHandler    : Runtime exception occurred
org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `ru.cemeterysystem.models.User` from Array value (token `JsonToken.START_ARRAY`)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:406)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:354)
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:184)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:161)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:135)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:224)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:178)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `ru.cemeterysystem.models.User` from Array value (token `JsonToken.START_ARRAY`)
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1]
	at com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)
	at com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1767)
	at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1541)
	at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1488)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeFromArray(BeanDeserializer.java:660)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:211)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:2125)
	at com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1501)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:395)
	... 103 common frames omitted
2025-06-15 05:08:51.036 ERROR 2025-06-15 05:08:51,036 --- [io-8080-exec-10] r.c.exceptions.GlobalExceptionHandler    : Runtime exception occurred
org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `ru.cemeterysystem.models.User` from Array value (token `JsonToken.START_ARRAY`)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:406)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:354)
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:184)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:161)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:135)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:224)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:178)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `ru.cemeterysystem.models.User` from Array value (token `JsonToken.START_ARRAY`)
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1]
	at com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)
	at com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1767)
	at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1541)
	at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1488)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeFromArray(BeanDeserializer.java:660)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:211)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectReader._bindAndClose(ObjectReader.java:2125)
	at com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:1501)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:395)
	... 103 common frames omitted
2025-06-15 05:10:51.273  WARN 2025-06-15 05:10:51,273 --- [nio-8080-exec-2] r.c.exceptions.GlobalExceptionHandler    : Illegal argument exception occurred
java.lang.IllegalArgumentException: Guest with this login already exists.
	at ru.cemeterysystem.services.UserService.registerGuest(UserService.java:70)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:57)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at ru.cemeterysystem.services.UserService$$SpringCGLIB$$0.registerGuest(<generated>)
	at ru.cemeterysystem.controllers.UserController.registerGuest(UserController.java:37)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 05:12:37.980  INFO 2025-06-15 05:12:37,980 --- [nio-8080-exec-1] r.c.controllers.admin.AdminController    : Admin home accessed by: admin with authorities: [ROLE_ADMIN]
2025-06-15 05:17:09.708  INFO 2025-06-15 05:17:09,708 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-15 05:17:09.713  INFO 2025-06-15 05:17:09,713 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-15 05:17:09.715  INFO 2025-06-15 05:17:09,715 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-15 05:17:17.630  INFO 2025-06-15 05:17:17,630 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 22560 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-15 05:17:17.633  INFO 2025-06-15 05:17:17,633 --- [           main] r.c.CemeterySystemApplication            : The following 1 profile is active: "postgresql"
2025-06-15 05:17:18.518  INFO 2025-06-15 05:17:18,518 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-15 05:17:18.633  INFO 2025-06-15 05:17:18,633 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 105 ms. Found 11 JPA repository interfaces.
2025-06-15 05:17:19.798  INFO 2025-06-15 05:17:19,798 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-15 05:17:19.817  INFO 2025-06-15 05:17:19,817 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-15 05:17:19.817  INFO 2025-06-15 05:17:19,817 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-15 05:17:19.903  INFO 2025-06-15 05:17:19,903 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-15 05:17:19.903  INFO 2025-06-15 05:17:19,903 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2219 ms
2025-06-15 05:17:20.107  INFO 2025-06-15 05:17:20,107 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-15 05:17:20.209  INFO 2025-06-15 05:17:20,209 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-15 05:17:20.288  INFO 2025-06-15 05:17:20,288 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-15 05:17:20.780  INFO 2025-06-15 05:17:20,780 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-15 05:17:20.814  INFO 2025-06-15 05:17:20,814 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-15 05:17:20.965  INFO 2025-06-15 05:17:20,965 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-15 05:17:21.052  WARN 2025-06-15 05:17:21,052 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-15 05:17:23.383  INFO 2025-06-15 05:17:23,383 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-15 05:17:23.760  INFO 2025-06-15 05:17:23,760 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-15 05:17:24.737  INFO 2025-06-15 05:17:24,737 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-15 05:17:33.049  WARN 2025-06-15 05:17:33,049 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-15 05:17:33.212  INFO 2025-06-15 05:17:33,212 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-15 05:17:33.218  INFO 2025-06-15 05:17:33,218 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-15 05:17:33.221  WARN 2025-06-15 05:17:33,221 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-15 05:17:33.882  INFO 2025-06-15 05:17:33,882 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-15 05:17:33.948  INFO 2025-06-15 05:17:33,948 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-15 05:17:34.741  INFO 2025-06-15 05:17:34,741 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-15 05:17:34.751  INFO 2025-06-15 05:17:34,751 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 17.601 seconds (process running for 18.434)
2025-06-15 05:17:34.756  INFO 2025-06-15 05:17:34,756 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-15 05:17:34.896  INFO 2025-06-15 05:17:34,896 --- [           main] ru.cemeterysystem.DataLoader             : Database already contains data, skipping initialization
2025-06-15 05:17:34.903  INFO 2025-06-15 05:17:34,903 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-15 05:17:38.341  INFO 2025-06-15 05:17:38,341 --- [nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-15 05:17:38.342  INFO 2025-06-15 05:17:38,342 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-15 05:17:38.344  INFO 2025-06-15 05:17:38,344 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-06-15 05:17:38.589  INFO 2025-06-15 05:17:38,589 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:17:38.589  INFO 2025-06-15 05:17:38,589 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:17:38.590  INFO 2025-06-15 05:17:38,590 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:17:38.633  INFO 2025-06-15 05:17:38,633 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:17:38.633  INFO 2025-06-15 05:17:38,633 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:17:38.634  INFO 2025-06-15 05:17:38,634 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:17:38.634  INFO 2025-06-15 05:17:38,634 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:17:38.634  INFO 2025-06-15 05:17:38,634 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:17:38.719  INFO 2025-06-15 05:17:38,719 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:17:38.719  INFO 2025-06-15 05:17:38,719 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:17:38.726  INFO 2025-06-15 05:17:38,726 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:17:38.772  INFO 2025-06-15 05:17:38,772 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:17:38.772  INFO 2025-06-15 05:17:38,772 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:17:46.332  INFO 2025-06-15 05:17:46,332 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:17:46.339  INFO 2025-06-15 05:17:46,339 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:17:46.339  INFO 2025-06-15 05:17:46,339 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:17:46.339  INFO 2025-06-15 05:17:46,339 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:17:46.339  INFO 2025-06-15 05:17:46,339 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:17:46.343  INFO 2025-06-15 05:17:46,343 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:17:46.352  INFO 2025-06-15 05:17:46,352 --- [nio-8080-exec-4] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:17:46.353  INFO 2025-06-15 05:17:46,353 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:17:48.543  INFO 2025-06-15 05:17:48,543 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:17:48.547  INFO 2025-06-15 05:17:48,547 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:17:48.547  INFO 2025-06-15 05:17:48,547 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:17:48.547  INFO 2025-06-15 05:17:48,547 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:17:48.548  INFO 2025-06-15 05:17:48,548 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:17:48.551  INFO 2025-06-15 05:17:48,551 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:17:48.556  INFO 2025-06-15 05:17:48,556 --- [nio-8080-exec-7] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:17:48.557  INFO 2025-06-15 05:17:48,557 --- [nio-8080-exec-7] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:17:53.119  INFO 2025-06-15 05:17:53,119 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:17:53.123  INFO 2025-06-15 05:17:53,123 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:17:53.123  INFO 2025-06-15 05:17:53,123 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:17:53.123  INFO 2025-06-15 05:17:53,123 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:17:53.123  INFO 2025-06-15 05:17:53,123 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:17:53.125  INFO 2025-06-15 05:17:53,125 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:17:53.130  INFO 2025-06-15 05:17:53,130 --- [nio-8080-exec-8] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:17:53.130  INFO 2025-06-15 05:17:53,130 --- [nio-8080-exec-8] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:17:53.329  INFO 2025-06-15 05:17:53,329 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:17:53.386  INFO 2025-06-15 05:17:53,386 --- [nio-8080-exec-5] r.c.services.MemorialService             : Обновление мемориала ID=1, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 05:17:53.386  INFO 2025-06-15 05:17:53,386 --- [nio-8080-exec-5] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=1
2025-06-15 05:17:55.369  INFO 2025-06-15 05:17:55,369 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:17:55.370  INFO 2025-06-15 05:17:55,370 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:17:55.373  INFO 2025-06-15 05:17:55,373 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:17:55.373  INFO 2025-06-15 05:17:55,373 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:17:55.373  INFO 2025-06-15 05:17:55,373 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:17:55.373  INFO 2025-06-15 05:17:55,373 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:17:55.373  INFO 2025-06-15 05:17:55,373 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:17:55.381  INFO 2025-06-15 05:17:55,381 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:17:55.381  INFO 2025-06-15 05:17:55,381 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:17:55.382  INFO 2025-06-15 05:17:55,382 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:17:55.397  INFO 2025-06-15 05:17:55,397 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:17:55.398  INFO 2025-06-15 05:17:55,398 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:17:58.298  INFO 2025-06-15 05:17:58,298 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:17:58.302  INFO 2025-06-15 05:17:58,302 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:17:58.302  INFO 2025-06-15 05:17:58,302 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:17:58.302  INFO 2025-06-15 05:17:58,302 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:17:58.302  INFO 2025-06-15 05:17:58,302 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:17:58.305  INFO 2025-06-15 05:17:58,305 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:17:58.308  INFO 2025-06-15 05:17:58,308 --- [nio-8080-exec-6] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:17:58.308  INFO 2025-06-15 05:17:58,308 --- [nio-8080-exec-6] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:18:00.241  INFO 2025-06-15 05:18:00,241 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:18:00.245  INFO 2025-06-15 05:18:00,245 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:18:00.245  INFO 2025-06-15 05:18:00,245 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:18:00.245  INFO 2025-06-15 05:18:00,245 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:18:00.245  INFO 2025-06-15 05:18:00,245 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:18:00.247  INFO 2025-06-15 05:18:00,247 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:18:00.251  INFO 2025-06-15 05:18:00,251 --- [nio-8080-exec-3] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:18:00.251  INFO 2025-06-15 05:18:00,251 --- [nio-8080-exec-3] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:18:22.126  INFO 2025-06-15 05:18:22,126 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:18:22.129  INFO 2025-06-15 05:18:22,129 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:18:22.129  INFO 2025-06-15 05:18:22,129 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:18:22.129  INFO 2025-06-15 05:18:22,129 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:18:22.129  INFO 2025-06-15 05:18:22,129 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:18:22.131  INFO 2025-06-15 05:18:22,131 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:18:22.136  INFO 2025-06-15 05:18:22,136 --- [nio-8080-exec-2] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:18:22.136  INFO 2025-06-15 05:18:22,136 --- [nio-8080-exec-2] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:18:22.336  INFO 2025-06-15 05:18:22,336 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:18:22.349  INFO 2025-06-15 05:18:22,349 --- [nio-8080-exec-1] r.c.services.MemorialService             : Обновление мемориала ID=1, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 05:18:22.350  INFO 2025-06-15 05:18:22,350 --- [nio-8080-exec-1] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=1
2025-06-15 05:18:24.965  INFO 2025-06-15 05:18:24,965 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:18:24.967  INFO 2025-06-15 05:18:24,967 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:18:24.971  INFO 2025-06-15 05:18:24,971 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:18:24.971  INFO 2025-06-15 05:18:24,971 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:18:24.971  INFO 2025-06-15 05:18:24,971 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:18:24.971  INFO 2025-06-15 05:18:24,971 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:18:24.971  INFO 2025-06-15 05:18:24,971 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:18:24.978  INFO 2025-06-15 05:18:24,978 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:18:24.978  INFO 2025-06-15 05:18:24,978 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:18:24.978  INFO 2025-06-15 05:18:24,978 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:18:24.991  INFO 2025-06-15 05:18:24,991 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:18:24.992  INFO 2025-06-15 05:18:24,992 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:18:55.513  INFO 2025-06-15 05:18:55,513 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:18:55.517  INFO 2025-06-15 05:18:55,517 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:18:55.517  INFO 2025-06-15 05:18:55,517 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:18:55.518  INFO 2025-06-15 05:18:55,518 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:18:55.518  INFO 2025-06-15 05:18:55,518 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:18:55.520  INFO 2025-06-15 05:18:55,520 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:18:55.524  INFO 2025-06-15 05:18:55,524 --- [nio-8080-exec-5] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:18:55.524  INFO 2025-06-15 05:18:55,524 --- [nio-8080-exec-5] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:20:07.743  INFO 2025-06-15 05:20:07,743 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:20:07.744  INFO 2025-06-15 05:20:07,744 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:20:07.748  INFO 2025-06-15 05:20:07,748 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:20:07.748  INFO 2025-06-15 05:20:07,748 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:20:07.748  INFO 2025-06-15 05:20:07,748 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:20:07.748  INFO 2025-06-15 05:20:07,748 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:20:07.748  INFO 2025-06-15 05:20:07,748 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:20:07.760  INFO 2025-06-15 05:20:07,760 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:20:07.760  INFO 2025-06-15 05:20:07,760 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:20:07.761  INFO 2025-06-15 05:20:07,761 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:20:07.776  INFO 2025-06-15 05:20:07,776 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:20:07.776  INFO 2025-06-15 05:20:07,776 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:21:12.902  INFO 2025-06-15 05:21:12,902 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:12.902  INFO 2025-06-15 05:21:12,902 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:12.946  INFO 2025-06-15 05:21:12,946 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:12.950  INFO 2025-06-15 05:21:12,950 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:21:12.950  INFO 2025-06-15 05:21:12,950 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:12.950  INFO 2025-06-15 05:21:12,950 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:12.950  INFO 2025-06-15 05:21:12,950 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:21:12.950  INFO 2025-06-15 05:21:12,950 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:21:12.952  INFO 2025-06-15 05:21:12,952 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:21:12.952  INFO 2025-06-15 05:21:12,952 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:21:12.953  INFO 2025-06-15 05:21:12,953 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:21:12.966  INFO 2025-06-15 05:21:12,966 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:21:12.967  INFO 2025-06-15 05:21:12,967 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:21:17.216  INFO 2025-06-15 05:21:17,216 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:17.223  INFO 2025-06-15 05:21:17,223 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:17.223  INFO 2025-06-15 05:21:17,223 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:17.223  INFO 2025-06-15 05:21:17,223 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:21:17.223  INFO 2025-06-15 05:21:17,223 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:21:17.226  INFO 2025-06-15 05:21:17,226 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:21:17.231  INFO 2025-06-15 05:21:17,231 --- [nio-8080-exec-5] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:21:17.231  INFO 2025-06-15 05:21:17,231 --- [nio-8080-exec-5] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:21:19.283  INFO 2025-06-15 05:21:19,283 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:19.286  INFO 2025-06-15 05:21:19,286 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:19.286  INFO 2025-06-15 05:21:19,286 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:19.286  INFO 2025-06-15 05:21:19,286 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:21:19.286  INFO 2025-06-15 05:21:19,286 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:21:19.288  INFO 2025-06-15 05:21:19,288 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:21:19.289  INFO 2025-06-15 05:21:19,289 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:21:19.290  INFO 2025-06-15 05:21:19,290 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:21:26.947  INFO 2025-06-15 05:21:26,947 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:26.951  INFO 2025-06-15 05:21:26,951 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:26.951  INFO 2025-06-15 05:21:26,951 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:26.951  INFO 2025-06-15 05:21:26,951 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:21:26.951  INFO 2025-06-15 05:21:26,951 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:21:26.953  INFO 2025-06-15 05:21:26,953 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:21:26.956  INFO 2025-06-15 05:21:26,956 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:21:26.956  INFO 2025-06-15 05:21:26,956 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:21:27.158  INFO 2025-06-15 05:21:27,158 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:27.168  INFO 2025-06-15 05:21:27,168 --- [nio-8080-exec-3] r.c.services.MemorialService             : Обновление мемориала ID=1, пользователь=1111 (ID=8), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 05:21:27.168  INFO 2025-06-15 05:21:27,168 --- [nio-8080-exec-3] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=1
2025-06-15 05:21:27.364  INFO 2025-06-15 05:21:27,364 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:27.367  INFO 2025-06-15 05:21:27,367 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === НАЧАЛО УДАЛЕНИЯ ДОКУМЕНТА ===
2025-06-15 05:21:27.367  INFO 2025-06-15 05:21:27,367 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Удаление документа для мемориала с ID: 1
2025-06-15 05:21:27.367  INFO 2025-06-15 05:21:27,367 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:27.367  INFO 2025-06-15 05:21:27,367 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:27.367  INFO 2025-06-15 05:21:27,367 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:21:27.367  INFO 2025-06-15 05:21:27,367 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:21:27.369  INFO 2025-06-15 05:21:27,369 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:21:27.370  INFO 2025-06-15 05:21:27,370 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Пользователь: 1111
2025-06-15 05:21:27.371  INFO 2025-06-15 05:21:27,371 --- [nio-8080-exec-6] r.c.services.MemorialService             : === НАЧАЛО УДАЛЕНИЯ ДОКУМЕНТА В СЕРВИСЕ ===
2025-06-15 05:21:27.371  INFO 2025-06-15 05:21:27,371 --- [nio-8080-exec-6] r.c.services.MemorialService             : Удаление документа для мемориала ID=1 пользователем 1111
2025-06-15 05:21:27.373  INFO 2025-06-15 05:21:27,373 --- [nio-8080-exec-6] r.c.services.MemorialService             : Удаляем документ по URL: https://s3.timeweb.cloud/ae7fbace-1c221cb3-0d91-488a-b4e8-7599cc2f425d/diplomSS/6208f7b4-25cd-47ef-bb4f-e2e3cd9c1d3d.jpg
2025-06-15 05:21:28.565  INFO 2025-06-15 05:21:28,565 --- [nio-8080-exec-6] r.c.services.MemorialService             : Файл документа успешно удален из хранилища
2025-06-15 05:21:28.566  INFO 2025-06-15 05:21:28,566 --- [nio-8080-exec-6] r.c.services.MemorialService             : Документ успешно удален для мемориала ID=1
2025-06-15 05:21:28.566  INFO 2025-06-15 05:21:28,566 --- [nio-8080-exec-6] r.c.services.MemorialService             : === КОНЕЦ УДАЛЕНИЯ ДОКУМЕНТА В СЕРВИСЕ ===
2025-06-15 05:21:28.584  INFO 2025-06-15 05:21:28,584 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Документ успешно удален для мемориала: 1
2025-06-15 05:21:28.584  INFO 2025-06-15 05:21:28,584 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === КОНЕЦ УДАЛЕНИЯ ДОКУМЕНТА ===
2025-06-15 05:21:30.854  INFO 2025-06-15 05:21:30,854 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:30.868  INFO 2025-06-15 05:21:30,868 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:30.871  INFO 2025-06-15 05:21:30,871 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:21:30.871  INFO 2025-06-15 05:21:30,871 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:30.871  INFO 2025-06-15 05:21:30,871 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:30.871  INFO 2025-06-15 05:21:30,871 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:21:30.871  INFO 2025-06-15 05:21:30,871 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:21:30.874  INFO 2025-06-15 05:21:30,874 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:21:30.874  INFO 2025-06-15 05:21:30,874 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:21:30.874  INFO 2025-06-15 05:21:30,874 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:21:30.886  INFO 2025-06-15 05:21:30,886 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:21:30.886  INFO 2025-06-15 05:21:30,886 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:21:32.671  INFO 2025-06-15 05:21:32,671 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:32.674  INFO 2025-06-15 05:21:32,674 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:32.674  INFO 2025-06-15 05:21:32,674 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:32.674  INFO 2025-06-15 05:21:32,674 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:21:32.674  INFO 2025-06-15 05:21:32,674 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:21:32.676  INFO 2025-06-15 05:21:32,676 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:21:32.679  INFO 2025-06-15 05:21:32,679 --- [nio-8080-exec-7] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:21:32.679  INFO 2025-06-15 05:21:32,679 --- [nio-8080-exec-7] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:21:34.402  INFO 2025-06-15 05:21:34,402 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:34.406  INFO 2025-06-15 05:21:34,406 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:34.406  INFO 2025-06-15 05:21:34,406 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:34.406  INFO 2025-06-15 05:21:34,406 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:21:34.406  INFO 2025-06-15 05:21:34,406 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:21:34.409  INFO 2025-06-15 05:21:34,409 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:21:34.413  INFO 2025-06-15 05:21:34,413 --- [nio-8080-exec-4] r.c.services.MemorialService             : getMemorialByIdForUser ID=1: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:21:34.413  INFO 2025-06-15 05:21:34,413 --- [nio-8080-exec-4] r.c.services.MemorialService             : Мемориал ID=1 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:21:38.235  INFO 2025-06-15 05:21:38,235 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:38.250  INFO 2025-06-15 05:21:38,250 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:38.253  INFO 2025-06-15 05:21:38,253 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:21:38.253  INFO 2025-06-15 05:21:38,253 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:38.253  INFO 2025-06-15 05:21:38,253 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:38.253  INFO 2025-06-15 05:21:38,253 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:21:38.253  INFO 2025-06-15 05:21:38,253 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:21:38.255  INFO 2025-06-15 05:21:38,255 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:21:38.256  INFO 2025-06-15 05:21:38,256 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:21:38.256  INFO 2025-06-15 05:21:38,256 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:21:38.263  INFO 2025-06-15 05:21:38,263 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:21:38.263  INFO 2025-06-15 05:21:38,263 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:21:52.656  INFO 2025-06-15 05:21:52,656 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:52.660  INFO 2025-06-15 05:21:52,660 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:52.660  INFO 2025-06-15 05:21:52,660 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:52.660  INFO 2025-06-15 05:21:52,660 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:21:52.660  INFO 2025-06-15 05:21:52,660 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:21:52.662  INFO 2025-06-15 05:21:52,662 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:21:52.664  INFO 2025-06-15 05:21:52,664 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:21:52.664  INFO 2025-06-15 05:21:52,664 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:21:54.440  INFO 2025-06-15 05:21:54,440 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:21:54.444  INFO 2025-06-15 05:21:54,444 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:54.445  INFO 2025-06-15 05:21:54,445 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:21:54.445  INFO 2025-06-15 05:21:54,445 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:21:54.445  INFO 2025-06-15 05:21:54,445 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:21:54.447  INFO 2025-06-15 05:21:54,447 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:21:54.449  INFO 2025-06-15 05:21:54,449 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:21:54.449  INFO 2025-06-15 05:21:54,449 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:26:34.615  INFO 2025-06-15 05:26:34,615 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-15 05:26:34.619  INFO 2025-06-15 05:26:34,619 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-15 05:26:34.621  INFO 2025-06-15 05:26:34,621 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-06-15 05:26:42.924  INFO 2025-06-15 05:26:42,924 --- [           main] r.c.CemeterySystemApplication            : Starting CemeterySystemApplication using Java 21 with PID 256 (C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem\target\classes started by User in C:\Users\User\AndroidStudioProjects\AISCemetery\CemeterySystem)
2025-06-15 05:26:42.927  INFO 2025-06-15 05:26:42,927 --- [           main] r.c.CemeterySystemApplication            : The following 1 profile is active: "postgresql"
2025-06-15 05:26:44.736  INFO 2025-06-15 05:26:44,736 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-15 05:26:44.960  INFO 2025-06-15 05:26:44,960 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 207 ms. Found 11 JPA repository interfaces.
2025-06-15 05:26:46.839  INFO 2025-06-15 05:26:46,839 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-06-15 05:26:46.890  INFO 2025-06-15 05:26:46,890 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-06-15 05:26:46.893  INFO 2025-06-15 05:26:46,893 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-06-15 05:26:47.138  INFO 2025-06-15 05:26:47,138 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-06-15 05:26:47.140  INFO 2025-06-15 05:26:47,140 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4120 ms
2025-06-15 05:26:47.660  INFO 2025-06-15 05:26:47,660 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-15 05:26:47.903  INFO 2025-06-15 05:26:47,903 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-06-15 05:26:48.116  INFO 2025-06-15 05:26:48,116 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-06-15 05:26:49.268  INFO 2025-06-15 05:26:49,268 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-15 05:26:49.377  INFO 2025-06-15 05:26:49,377 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-06-15 05:26:49.845  INFO 2025-06-15 05:26:49,845 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-06-15 05:26:50.019  WARN 2025-06-15 05:26:50,019 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-15 05:26:53.345  INFO 2025-06-15 05:26:53,345 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-15 05:26:53.792  INFO 2025-06-15 05:26:53,792 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-15 05:26:54.755  INFO 2025-06-15 05:26:54,755 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-15 05:26:59.661  WARN 2025-06-15 05:26:59,661 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-15 05:26:59.727  INFO 2025-06-15 05:26:59,727 --- [           main] r.cemeterysystem.config.SecurityConfig   : Authentication provider configured
2025-06-15 05:26:59.735  INFO 2025-06-15 05:26:59,735 --- [           main] eAuthenticationProviderManagerConfigurer : Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-15 05:26:59.738  WARN 2025-06-15 05:26:59,738 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-06-15 05:27:00.333  INFO 2025-06-15 05:27:00,333 --- [           main] r.cemeterysystem.config.SecurityConfig   : API Security configuration applied
2025-06-15 05:27:00.409  INFO 2025-06-15 05:27:00,409 --- [           main] r.cemeterysystem.config.SecurityConfig   : Web Security configuration applied
2025-06-15 05:27:01.071  INFO 2025-06-15 05:27:01,071 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-06-15 05:27:01.080  INFO 2025-06-15 05:27:01,080 --- [           main] r.c.CemeterySystemApplication            : Started CemeterySystemApplication in 19.385 seconds (process running for 20.772)
2025-06-15 05:27:01.088  INFO 2025-06-15 05:27:01,088 --- [           main] r.c.config.ApplicationStartupLogger      : Система логирования инициализирована и готова к работе
2025-06-15 05:27:01.208  INFO 2025-06-15 05:27:01,208 --- [           main] ru.cemeterysystem.DataLoader             : Running DataLoader...
2025-06-15 05:27:01.276  INFO 2025-06-15 05:27:01,276 --- [           main] ru.cemeterysystem.DataLoader             : Database already contains data, skipping initialization
2025-06-15 05:27:04.031  INFO 2025-06-15 05:27:04,031 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-15 05:27:04.032  INFO 2025-06-15 05:27:04,032 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-06-15 05:27:04.035  INFO 2025-06-15 05:27:04,035 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-06-15 05:27:04.284  INFO 2025-06-15 05:27:04,284 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:04.527  INFO 2025-06-15 05:27:04,527 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:04.716  INFO 2025-06-15 05:27:04,716 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:04.858  INFO 2025-06-15 05:27:04,858 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:04.933  INFO 2025-06-15 05:27:04,933 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:05.078  INFO 2025-06-15 05:27:05,078 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:06.425  INFO 2025-06-15 05:27:06,425 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:06.440  INFO 2025-06-15 05:27:06,440 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:27:06.440  INFO 2025-06-15 05:27:06,440 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:27:06.440  INFO 2025-06-15 05:27:06,440 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:27:06.440  INFO 2025-06-15 05:27:06,440 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:27:06.440  INFO 2025-06-15 05:27:06,440 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:27:06.444  INFO 2025-06-15 05:27:06,444 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:27:06.444  INFO 2025-06-15 05:27:06,444 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:27:06.451  INFO 2025-06-15 05:27:06,451 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:27:06.482  INFO 2025-06-15 05:27:06,482 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:27:06.482  INFO 2025-06-15 05:27:06,482 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:27:09.280  INFO 2025-06-15 05:27:09,280 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:09.285  INFO 2025-06-15 05:27:09,285 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:27:09.286  INFO 2025-06-15 05:27:09,286 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:27:09.286  INFO 2025-06-15 05:27:09,286 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:27:09.286  INFO 2025-06-15 05:27:09,286 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:27:09.288  INFO 2025-06-15 05:27:09,288 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:27:09.292  INFO 2025-06-15 05:27:09,292 --- [nio-8080-exec-8] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:27:09.292  INFO 2025-06-15 05:27:09,292 --- [nio-8080-exec-8] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:27:11.075  INFO 2025-06-15 05:27:11,075 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:11.078  INFO 2025-06-15 05:27:11,078 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:27:11.079  INFO 2025-06-15 05:27:11,079 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:27:11.079  INFO 2025-06-15 05:27:11,079 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:27:11.079  INFO 2025-06-15 05:27:11,079 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:27:11.081  INFO 2025-06-15 05:27:11,081 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:27:11.084  INFO 2025-06-15 05:27:11,084 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:27:11.084  INFO 2025-06-15 05:27:11,084 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:27:19.791  INFO 2025-06-15 05:27:19,791 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:19.795  INFO 2025-06-15 05:27:19,795 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:27:19.795  INFO 2025-06-15 05:27:19,795 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:27:19.795  INFO 2025-06-15 05:27:19,795 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:27:19.795  INFO 2025-06-15 05:27:19,795 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:27:19.795  INFO 2025-06-15 05:27:19,795 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:27:19.798  INFO 2025-06-15 05:27:19,798 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:27:19.798  INFO 2025-06-15 05:27:19,798 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:27:19.798  INFO 2025-06-15 05:27:19,798 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:27:19.812  INFO 2025-06-15 05:27:19,812 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:27:19.812  INFO 2025-06-15 05:27:19,812 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:27:20.157  INFO 2025-06-15 05:27:20,157 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:25.140  INFO 2025-06-15 05:27:25,140 --- [nio-8080-exec-2] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 05:27:27.865  INFO 2025-06-15 05:27:27,865 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:27.869  INFO 2025-06-15 05:27:27,869 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:27:27.869  INFO 2025-06-15 05:27:27,869 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:27:27.869  INFO 2025-06-15 05:27:27,869 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:27:27.869  INFO 2025-06-15 05:27:27,869 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:27:27.869  INFO 2025-06-15 05:27:27,869 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:27:27.871  INFO 2025-06-15 05:27:27,871 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:27:27.872  INFO 2025-06-15 05:27:27,872 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:27:27.872  INFO 2025-06-15 05:27:27,872 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:27:27.884  INFO 2025-06-15 05:27:27,884 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:27:27.884  INFO 2025-06-15 05:27:27,884 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:27:29.869  INFO 2025-06-15 05:27:29,869 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:29.887  INFO 2025-06-15 05:27:29,887 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:29.951  INFO 2025-06-15 05:27:29,951 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:29.952  INFO 2025-06-15 05:27:29,952 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:29.953  INFO 2025-06-15 05:27:29,953 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:30.121  INFO 2025-06-15 05:27:30,121 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:30.124  INFO 2025-06-15 05:27:30,124 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:30.151  INFO 2025-06-15 05:27:30,151 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:31.769  INFO 2025-06-15 05:27:31,769 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:31.770  INFO 2025-06-15 05:27:31,770 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:31.948  INFO 2025-06-15 05:27:31,948 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:31.960  INFO 2025-06-15 05:27:31,960 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:33.548  INFO 2025-06-15 05:27:33,548 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:33.551  INFO 2025-06-15 05:27:33,551 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:35.168  INFO 2025-06-15 05:27:35,168 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:35.168  INFO 2025-06-15 05:27:35,168 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:35.344  INFO 2025-06-15 05:27:35,344 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:35.344  INFO 2025-06-15 05:27:35,344 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:36.396  INFO 2025-06-15 05:27:36,396 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:36.409  INFO 2025-06-15 05:27:36,409 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:40.171  INFO 2025-06-15 05:27:40,171 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:43.950  INFO 2025-06-15 05:27:43,950 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:27:43.954  INFO 2025-06-15 05:27:43,954 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:27:43.954  INFO 2025-06-15 05:27:43,954 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:27:43.955  INFO 2025-06-15 05:27:43,955 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:27:43.955  INFO 2025-06-15 05:27:43,955 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:27:43.955  INFO 2025-06-15 05:27:43,955 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:27:43.957  INFO 2025-06-15 05:27:43,957 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:27:43.957  INFO 2025-06-15 05:27:43,957 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:27:43.958  INFO 2025-06-15 05:27:43,958 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:27:43.969  INFO 2025-06-15 05:27:43,969 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:27:43.969  INFO 2025-06-15 05:27:43,969 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:27:56.996  INFO 2025-06-15 05:27:56,996 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: admin, role: ADMIN
2025-06-15 05:27:57.256  INFO 2025-06-15 05:27:57,256 --- [nio-8080-exec-3] r.c.controllers.admin.AdminController    : Admin home accessed by: admin with authorities: [ROLE_ADMIN]
2025-06-15 05:31:40.568  INFO 2025-06-15 05:31:40,568 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:31:40.573  INFO 2025-06-15 05:31:40,573 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:31:40.574  INFO 2025-06-15 05:31:40,574 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:31:40.574  INFO 2025-06-15 05:31:40,574 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:31:40.574  INFO 2025-06-15 05:31:40,574 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:31:40.577  INFO 2025-06-15 05:31:40,577 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:31:40.580  INFO 2025-06-15 05:31:40,580 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:31:40.580  INFO 2025-06-15 05:31:40,580 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:31:42.552  INFO 2025-06-15 05:31:42,552 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:31:42.555  INFO 2025-06-15 05:31:42,555 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:31:42.555  INFO 2025-06-15 05:31:42,555 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:31:42.556  INFO 2025-06-15 05:31:42,556 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:31:42.556  INFO 2025-06-15 05:31:42,556 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:31:42.558  INFO 2025-06-15 05:31:42,558 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:31:42.560  INFO 2025-06-15 05:31:42,560 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:31:42.560  INFO 2025-06-15 05:31:42,560 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:31:50.529  INFO 2025-06-15 05:31:50,529 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:31:50.529  INFO 2025-06-15 05:31:50,529 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:31:50.530  INFO 2025-06-15 05:31:50,530 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:31:50.531  INFO 2025-06-15 05:31:50,531 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:31:50.533  INFO 2025-06-15 05:31:50,533 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:31:50.533  INFO 2025-06-15 05:31:50,533 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:31:50.533  INFO 2025-06-15 05:31:50,533 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:31:50.533  INFO 2025-06-15 05:31:50,533 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:31:50.533  INFO 2025-06-15 05:31:50,533 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:31:50.538  INFO 2025-06-15 05:31:50,538 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:31:50.538  INFO 2025-06-15 05:31:50,538 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:31:50.539  INFO 2025-06-15 05:31:50,539 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:31:50.551  INFO 2025-06-15 05:31:50,551 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:31:50.552  INFO 2025-06-15 05:31:50,552 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:42:47.294  INFO 2025-06-15 05:42:47,294 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:42:47.295  INFO 2025-06-15 05:42:47,295 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:42:47.296  INFO 2025-06-15 05:42:47,296 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:42:47.300  INFO 2025-06-15 05:42:47,300 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:42:47.300  INFO 2025-06-15 05:42:47,300 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:42:47.300  INFO 2025-06-15 05:42:47,300 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:42:47.300  INFO 2025-06-15 05:42:47,300 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:42:47.300  INFO 2025-06-15 05:42:47,300 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:42:47.317  INFO 2025-06-15 05:42:47,317 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:42:47.318  INFO 2025-06-15 05:42:47,318 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:42:47.319  INFO 2025-06-15 05:42:47,319 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:42:47.344  INFO 2025-06-15 05:42:47,344 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:42:47.344  INFO 2025-06-15 05:42:47,344 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:44:35.077  INFO 2025-06-15 05:44:35,077 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:44:35.081  INFO 2025-06-15 05:44:35,081 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:44:35.081  INFO 2025-06-15 05:44:35,081 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:44:35.081  INFO 2025-06-15 05:44:35,081 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:44:35.081  INFO 2025-06-15 05:44:35,081 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:44:35.081  INFO 2025-06-15 05:44:35,081 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:44:35.083  INFO 2025-06-15 05:44:35,083 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:44:35.084  INFO 2025-06-15 05:44:35,084 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:44:35.085  INFO 2025-06-15 05:44:35,085 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:44:35.100  INFO 2025-06-15 05:44:35,100 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:44:35.101  INFO 2025-06-15 05:44:35,101 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:44:39.357  INFO 2025-06-15 05:44:39,357 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:44:39.361  INFO 2025-06-15 05:44:39,361 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:44:39.361  INFO 2025-06-15 05:44:39,361 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:44:39.361  INFO 2025-06-15 05:44:39,361 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:44:39.361  INFO 2025-06-15 05:44:39,361 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:44:39.363  INFO 2025-06-15 05:44:39,363 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:44:39.369  INFO 2025-06-15 05:44:39,369 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=2: пользователь=1111, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:44:39.369  INFO 2025-06-15 05:44:39,369 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=2 получен пользователем 1111 (владелец: true, редактор: false, админ: false)
2025-06-15 05:44:41.519  INFO 2025-06-15 05:44:41,519 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:44:41.525  INFO 2025-06-15 05:44:41,525 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:44:41.529  INFO 2025-06-15 05:44:41,529 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:44:41.529  INFO 2025-06-15 05:44:41,529 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:44:41.530  INFO 2025-06-15 05:44:41,530 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:44:41.530  INFO 2025-06-15 05:44:41,530 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:44:41.530  INFO 2025-06-15 05:44:41,530 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:44:41.535  INFO 2025-06-15 05:44:41,535 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:44:41.536  INFO 2025-06-15 05:44:41,536 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:44:41.537  INFO 2025-06-15 05:44:41,537 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:44:41.551  INFO 2025-06-15 05:44:41,551 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:44:41.551  INFO 2025-06-15 05:44:41,551 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:44:58.521  INFO 2025-06-15 05:44:58,521 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-15 05:44:58.639  INFO 2025-06-15 05:44:58,639 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:44:58.656  INFO 2025-06-15 05:44:58,656 --- [nio-8080-exec-4] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-15 05:44:59.902  INFO 2025-06-15 05:44:59,902 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:45:00.330  INFO 2025-06-15 05:45:00,330 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:45:00.337  INFO 2025-06-15 05:45:00,337 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:45:00.338  INFO 2025-06-15 05:45:00,338 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:45:00.338  INFO 2025-06-15 05:45:00,338 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:45:00.338  INFO 2025-06-15 05:45:00,338 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:45:00.338  INFO 2025-06-15 05:45:00,338 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-15 05:45:00.341  INFO 2025-06-15 05:45:00,341 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=9, login=2222, role=USER
2025-06-15 05:45:00.341  INFO 2025-06-15 05:45:00,341 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-15 05:45:00.343  INFO 2025-06-15 05:45:00,343 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=9, login=2222, страница=0, размер=10
2025-06-15 05:45:00.355  INFO 2025-06-15 05:45:00,355 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-15 05:45:00.355  INFO 2025-06-15 05:45:00,355 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-15 05:45:00.499  INFO 2025-06-15 05:45:00,499 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:45:30.463  INFO 2025-06-15 05:45:30,463 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login attempt for user: 2222
2025-06-15 05:45:30.575  INFO 2025-06-15 05:45:30,575 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:45:30.576  INFO 2025-06-15 05:45:30,576 --- [nio-8080-exec-7] r.c.controllers.UserController           : Login successful for user: 2222
2025-06-15 05:45:32.203  INFO 2025-06-15 05:45:32,203 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:45:32.339  INFO 2025-06-15 05:45:32,339 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:45:32.358  INFO 2025-06-15 05:45:32,358 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:45:32.363  INFO 2025-06-15 05:45:32,363 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:45:32.363  INFO 2025-06-15 05:45:32,363 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:45:32.363  INFO 2025-06-15 05:45:32,363 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:45:32.364  INFO 2025-06-15 05:45:32,364 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:45:32.364  INFO 2025-06-15 05:45:32,364 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-15 05:45:32.367  INFO 2025-06-15 05:45:32,367 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=9, login=2222, role=USER
2025-06-15 05:45:32.367  INFO 2025-06-15 05:45:32,367 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-15 05:45:32.368  INFO 2025-06-15 05:45:32,368 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=9, login=2222, страница=0, размер=10
2025-06-15 05:45:32.378  INFO 2025-06-15 05:45:32,378 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-15 05:45:32.378  INFO 2025-06-15 05:45:32,378 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя 2222
2025-06-15 05:46:33.204  INFO 2025-06-15 05:46:33,204 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:46:33.259  INFO 2025-06-15 05:46:33,259 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:46:33.259  INFO 2025-06-15 05:46:33,259 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:46:33.259  INFO 2025-06-15 05:46:33,259 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:46:33.259  INFO 2025-06-15 05:46:33,259 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-15 05:46:33.262  INFO 2025-06-15 05:46:33,262 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=9, login=2222, role=USER
2025-06-15 05:46:35.395  INFO 2025-06-15 05:46:35,395 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:46:35.401  INFO 2025-06-15 05:46:35,401 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:46:35.401  INFO 2025-06-15 05:46:35,401 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:46:35.401  INFO 2025-06-15 05:46:35,401 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:46:35.401  INFO 2025-06-15 05:46:35,401 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:46:35.401  INFO 2025-06-15 05:46:35,401 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-15 05:46:35.404  INFO 2025-06-15 05:46:35,404 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=9, login=2222, role=USER
2025-06-15 05:46:35.404  INFO 2025-06-15 05:46:35,404 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-15 05:46:35.405  INFO 2025-06-15 05:46:35,405 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=9, login=2222, страница=0, размер=10
2025-06-15 05:46:35.417  INFO 2025-06-15 05:46:35,417 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-15 05:46:35.417  INFO 2025-06-15 05:46:35,417 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-15 05:46:35.451  INFO 2025-06-15 05:46:35,451 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:46:39.201  INFO 2025-06-15 05:46:39,201 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:46:39.207  INFO 2025-06-15 05:46:39,207 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:46:39.207  INFO 2025-06-15 05:46:39,207 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:46:39.207  INFO 2025-06-15 05:46:39,207 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:46:39.207  INFO 2025-06-15 05:46:39,207 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-15 05:46:39.210  INFO 2025-06-15 05:46:39,210 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=9, login=2222, role=USER
2025-06-15 05:46:39.216  INFO 2025-06-15 05:46:39,216 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=6: пользователь=2222, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:46:39.216  INFO 2025-06-15 05:46:39,216 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=6 получен пользователем 2222 (владелец: true, редактор: false, админ: false)
2025-06-15 05:46:50.757  INFO 2025-06-15 05:46:50,757 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:46:50.776  INFO 2025-06-15 05:46:50,776 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:46:50.782  INFO 2025-06-15 05:46:50,782 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:46:50.782  INFO 2025-06-15 05:46:50,782 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:46:50.782  INFO 2025-06-15 05:46:50,782 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:46:50.782  INFO 2025-06-15 05:46:50,782 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:46:50.782  INFO 2025-06-15 05:46:50,782 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-15 05:46:50.785  INFO 2025-06-15 05:46:50,785 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=9, login=2222, role=USER
2025-06-15 05:46:50.785  INFO 2025-06-15 05:46:50,785 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-15 05:46:50.788  INFO 2025-06-15 05:46:50,788 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=9, login=2222, страница=0, размер=10
2025-06-15 05:46:50.804  INFO 2025-06-15 05:46:50,804 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-15 05:46:50.804  INFO 2025-06-15 05:46:50,804 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-15 05:46:59.537  INFO 2025-06-15 05:46:59,537 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:46:59.680  INFO 2025-06-15 05:46:59,680 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:46:59.835  INFO 2025-06-15 05:46:59,835 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:47:00.102  INFO 2025-06-15 05:47:00,102 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:47:00.165  INFO 2025-06-15 05:47:00,165 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:47:00.338  INFO 2025-06-15 05:47:00,338 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:47:29.325  INFO 2025-06-15 05:47:29,325 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:47:29.606  INFO 2025-06-15 05:47:29,606 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:47:29.625  INFO 2025-06-15 05:47:29,625 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:47:29.835  INFO 2025-06-15 05:47:29,835 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:47:29.857  INFO 2025-06-15 05:47:29,857 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:47:30.037  INFO 2025-06-15 05:47:30,037 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:47:30.066  INFO 2025-06-15 05:47:30,066 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:48:06.253  INFO 2025-06-15 05:48:06,253 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:48:06.257  INFO 2025-06-15 05:48:06,257 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:48:06.257  INFO 2025-06-15 05:48:06,257 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:48:06.257  INFO 2025-06-15 05:48:06,257 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:48:06.257  INFO 2025-06-15 05:48:06,257 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:48:06.257  INFO 2025-06-15 05:48:06,257 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-15 05:48:06.259  INFO 2025-06-15 05:48:06,259 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=9, login=2222, role=USER
2025-06-15 05:48:06.259  INFO 2025-06-15 05:48:06,259 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-15 05:48:06.259  INFO 2025-06-15 05:48:06,259 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=9, login=2222, страница=0, размер=10
2025-06-15 05:48:06.267  INFO 2025-06-15 05:48:06,267 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-15 05:48:06.267  INFO 2025-06-15 05:48:06,267 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-15 05:48:06.321  INFO 2025-06-15 05:48:06,321 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:48:06.322  INFO 2025-06-15 05:48:06,322 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:50:46.289  INFO 2025-06-15 05:50:46,289 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:50:46.292  INFO 2025-06-15 05:50:46,292 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:50:46.292  INFO 2025-06-15 05:50:46,292 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:50:46.292  INFO 2025-06-15 05:50:46,292 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:50:46.292  INFO 2025-06-15 05:50:46,292 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:50:46.292  INFO 2025-06-15 05:50:46,292 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-15 05:50:46.294  INFO 2025-06-15 05:50:46,294 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=9, login=2222, role=USER
2025-06-15 05:50:46.294  INFO 2025-06-15 05:50:46,294 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-15 05:50:46.294  INFO 2025-06-15 05:50:46,294 --- [nio-8080-exec-6] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=9, login=2222, страница=0, размер=10
2025-06-15 05:50:46.303  INFO 2025-06-15 05:50:46,303 --- [nio-8080-exec-6] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-15 05:50:46.303  INFO 2025-06-15 05:50:46,303 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-15 05:50:58.086  INFO 2025-06-15 05:50:58,086 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:50:58.246  INFO 2025-06-15 05:50:58,246 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:50:58.336  INFO 2025-06-15 05:50:58,336 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:50:58.461  INFO 2025-06-15 05:50:58,461 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:50:58.583  INFO 2025-06-15 05:50:58,583 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:50:58.798  INFO 2025-06-15 05:50:58,798 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:50:58.964  INFO 2025-06-15 05:50:58,964 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: 2222, role: USER
2025-06-15 05:50:58.967  INFO 2025-06-15 05:50:58,967 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:50:58.967  INFO 2025-06-15 05:50:58,967 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:50:58.967  INFO 2025-06-15 05:50:58,967 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=2222, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:50:58.967  INFO 2025-06-15 05:50:58,967 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:50:58.967  INFO 2025-06-15 05:50:58,967 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 2222
2025-06-15 05:50:58.968  INFO 2025-06-15 05:50:58,968 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=9, login=2222, role=USER
2025-06-15 05:50:58.968  INFO 2025-06-15 05:50:58,968 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 2222 (страница 0, размер 10)
2025-06-15 05:50:58.969  INFO 2025-06-15 05:50:58,969 --- [nio-8080-exec-2] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=9, login=2222, страница=0, размер=10
2025-06-15 05:50:58.976  INFO 2025-06-15 05:50:58,976 --- [nio-8080-exec-2] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-15 05:50:58.976  INFO 2025-06-15 05:50:58,976 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя 2222
2025-06-15 05:51:31.922  INFO 2025-06-15 05:51:31,922 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login attempt for user: nastya_kuz
2025-06-15 05:51:32.039  INFO 2025-06-15 05:51:32,039 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:51:32.041  INFO 2025-06-15 05:51:32,041 --- [nio-8080-exec-3] r.c.controllers.UserController           : Login successful for user: nastya_kuz
2025-06-15 05:51:33.363  INFO 2025-06-15 05:51:33,363 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:51:33.375  INFO 2025-06-15 05:51:33,375 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:51:33.496  INFO 2025-06-15 05:51:33,496 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:51:33.501  INFO 2025-06-15 05:51:33,501 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:51:33.502  INFO 2025-06-15 05:51:33,502 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:51:33.502  INFO 2025-06-15 05:51:33,502 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:51:33.502  INFO 2025-06-15 05:51:33,502 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:51:33.502  INFO 2025-06-15 05:51:33,502 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = nastya_kuz
2025-06-15 05:51:33.504  INFO 2025-06-15 05:51:33,504 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=30, login=nastya_kuz, role=USER
2025-06-15 05:51:33.504  INFO 2025-06-15 05:51:33,504 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: nastya_kuz (страница 0, размер 10)
2025-06-15 05:51:33.505  INFO 2025-06-15 05:51:33,505 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=30, login=nastya_kuz, страница=0, размер=10
2025-06-15 05:51:33.511  INFO 2025-06-15 05:51:33,511 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 05:51:33.512  INFO 2025-06-15 05:51:33,512 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 05:51:39.469  INFO 2025-06-15 05:51:39,469 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:51:39.484  INFO 2025-06-15 05:51:39,484 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:51:39.489  INFO 2025-06-15 05:51:39,489 --- [io-8080-exec-10] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:51:39.489  INFO 2025-06-15 05:51:39,489 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:51:39.489  INFO 2025-06-15 05:51:39,489 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:51:39.489  INFO 2025-06-15 05:51:39,489 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:51:39.489  INFO 2025-06-15 05:51:39,489 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = nastya_kuz
2025-06-15 05:51:39.490  INFO 2025-06-15 05:51:39,490 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=30, login=nastya_kuz, role=USER
2025-06-15 05:51:39.491  INFO 2025-06-15 05:51:39,491 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: nastya_kuz (страница 0, размер 10)
2025-06-15 05:51:39.491  INFO 2025-06-15 05:51:39,491 --- [io-8080-exec-10] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=30, login=nastya_kuz, страница=0, размер=10
2025-06-15 05:51:39.498  INFO 2025-06-15 05:51:39,498 --- [io-8080-exec-10] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 05:51:39.498  INFO 2025-06-15 05:51:39,498 --- [io-8080-exec-10] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 05:51:53.196  INFO 2025-06-15 05:51:53,196 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:51:53.197  INFO 2025-06-15 05:51:53,197 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:51:53.258  INFO 2025-06-15 05:51:53,258 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: 1111, role: USER
2025-06-15 05:51:53.260  INFO 2025-06-15 05:51:53,260 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:51:53.261  INFO 2025-06-15 05:51:53,261 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:51:53.261  INFO 2025-06-15 05:51:53,261 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=1111, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:51:53.261  INFO 2025-06-15 05:51:53,261 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:51:53.261  INFO 2025-06-15 05:51:53,261 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = 1111
2025-06-15 05:51:53.263  INFO 2025-06-15 05:51:53,263 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=8, login=1111, role=USER
2025-06-15 05:51:53.263  INFO 2025-06-15 05:51:53,263 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: 1111 (страница 0, размер 10)
2025-06-15 05:51:53.263  INFO 2025-06-15 05:51:53,263 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=8, login=1111, страница=0, размер=10
2025-06-15 05:51:53.270  INFO 2025-06-15 05:51:53,270 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:51:53.270  INFO 2025-06-15 05:51:53,270 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 4 мемориалов на странице 1 из 1 для пользователя 1111
2025-06-15 05:52:22.466  INFO 2025-06-15 05:52:22,466 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login attempt for user: den_bor
2025-06-15 05:52:22.542  INFO 2025-06-15 05:52:22,542 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:52:22.543  INFO 2025-06-15 05:52:22,543 --- [nio-8080-exec-8] r.c.controllers.UserController           : Login successful for user: den_bor
2025-06-15 05:52:24.141  INFO 2025-06-15 05:52:24,141 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:52:24.141  INFO 2025-06-15 05:52:24,141 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:52:24.171  INFO 2025-06-15 05:52:24,171 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:52:24.174  INFO 2025-06-15 05:52:24,174 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:52:24.174  INFO 2025-06-15 05:52:24,174 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:52:24.174  INFO 2025-06-15 05:52:24,174 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:52:24.174  INFO 2025-06-15 05:52:24,174 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:52:24.174  INFO 2025-06-15 05:52:24,174 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:52:24.175  INFO 2025-06-15 05:52:24,175 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:52:24.175  INFO 2025-06-15 05:52:24,175 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: den_bor (страница 0, размер 10)
2025-06-15 05:52:24.176  INFO 2025-06-15 05:52:24,176 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=31, login=den_bor, страница=0, размер=10
2025-06-15 05:52:24.180  INFO 2025-06-15 05:52:24,180 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя den_bor
2025-06-15 05:52:24.180  INFO 2025-06-15 05:52:24,180 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя den_bor
2025-06-15 05:53:04.652  INFO 2025-06-15 05:53:04,652 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:53:04.657  INFO 2025-06-15 05:53:04,657 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:04.657  INFO 2025-06-15 05:53:04,657 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:04.657  INFO 2025-06-15 05:53:04,657 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:53:04.657  INFO 2025-06-15 05:53:04,657 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:53:04.658  INFO 2025-06-15 05:53:04,658 --- [nio-8080-exec-6] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:53:05.215  INFO 2025-06-15 05:53:05,215 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:53:05.215  INFO 2025-06-15 05:53:05,215 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:53:05.219  INFO 2025-06-15 05:53:05,219 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:53:05.219  INFO 2025-06-15 05:53:05,219 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:05.219  INFO 2025-06-15 05:53:05,219 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:05.219  INFO 2025-06-15 05:53:05,219 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:53:05.219  INFO 2025-06-15 05:53:05,219 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:53:05.223  INFO 2025-06-15 05:53:05,223 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:53:05.223  INFO 2025-06-15 05:53:05,223 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: den_bor (страница 0, размер 10)
2025-06-15 05:53:05.225  INFO 2025-06-15 05:53:05,225 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=31, login=den_bor, страница=0, размер=10
2025-06-15 05:53:05.235  INFO 2025-06-15 05:53:05,235 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя den_bor
2025-06-15 05:53:05.235  INFO 2025-06-15 05:53:05,235 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя den_bor
2025-06-15 05:53:07.181  INFO 2025-06-15 05:53:07,181 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:53:07.184  INFO 2025-06-15 05:53:07,184 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:07.185  INFO 2025-06-15 05:53:07,185 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:07.185  INFO 2025-06-15 05:53:07,185 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:53:07.185  INFO 2025-06-15 05:53:07,185 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:53:07.186  INFO 2025-06-15 05:53:07,186 --- [io-8080-exec-10] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:53:07.189  INFO 2025-06-15 05:53:07,189 --- [io-8080-exec-10] r.c.services.MemorialService             : getMemorialByIdForUser ID=7: пользователь=den_bor, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:53:07.189  INFO 2025-06-15 05:53:07,189 --- [io-8080-exec-10] r.c.services.MemorialService             : Мемориал ID=7 получен пользователем den_bor (владелец: true, редактор: false, админ: false)
2025-06-15 05:53:10.718  INFO 2025-06-15 05:53:10,718 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:53:10.720  INFO 2025-06-15 05:53:10,720 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:10.721  INFO 2025-06-15 05:53:10,721 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:10.721  INFO 2025-06-15 05:53:10,721 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:53:10.721  INFO 2025-06-15 05:53:10,721 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:53:10.723  INFO 2025-06-15 05:53:10,723 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:53:10.727  INFO 2025-06-15 05:53:10,727 --- [nio-8080-exec-9] r.c.services.MemorialService             : getMemorialByIdForUser ID=7: пользователь=den_bor, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:53:10.727  INFO 2025-06-15 05:53:10,727 --- [nio-8080-exec-9] r.c.services.MemorialService             : Мемориал ID=7 получен пользователем den_bor (владелец: true, редактор: false, админ: false)
2025-06-15 05:53:30.047  INFO 2025-06-15 05:53:30,047 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:53:30.050  INFO 2025-06-15 05:53:30,050 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:30.050  INFO 2025-06-15 05:53:30,050 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:30.050  INFO 2025-06-15 05:53:30,050 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:53:30.050  INFO 2025-06-15 05:53:30,050 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:53:30.052  INFO 2025-06-15 05:53:30,052 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:53:30.057  INFO 2025-06-15 05:53:30,057 --- [nio-8080-exec-2] r.c.services.MemorialService             : getMemorialByIdForUser ID=7: пользователь=den_bor, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:53:30.057  INFO 2025-06-15 05:53:30,057 --- [nio-8080-exec-2] r.c.services.MemorialService             : Мемориал ID=7 получен пользователем den_bor (владелец: true, редактор: false, админ: false)
2025-06-15 05:53:30.570  INFO 2025-06-15 05:53:30,570 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:53:30.580  INFO 2025-06-15 05:53:30,580 --- [nio-8080-exec-3] r.c.services.MemorialService             : Обновление мемориала ID=7, пользователь=den_bor (ID=31), isOwner=true, isEditor=false, статус=DRAFT
2025-06-15 05:53:30.580  INFO 2025-06-15 05:53:30,580 --- [nio-8080-exec-3] r.c.services.MemorialService             : Прямое применение изменений для мемориала ID=7
2025-06-15 05:53:31.126  INFO 2025-06-15 05:53:31,126 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:53:31.129  INFO 2025-06-15 05:53:31,129 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:53:31.130  INFO 2025-06-15 05:53:31,130 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:53:31.130  INFO 2025-06-15 05:53:31,130 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:31.130  INFO 2025-06-15 05:53:31,130 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:31.130  INFO 2025-06-15 05:53:31,130 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:53:31.130  INFO 2025-06-15 05:53:31,130 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:53:31.131  INFO 2025-06-15 05:53:31,131 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:53:31.131  INFO 2025-06-15 05:53:31,131 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: den_bor (страница 0, размер 10)
2025-06-15 05:53:31.131  INFO 2025-06-15 05:53:31,131 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=31, login=den_bor, страница=0, размер=10
2025-06-15 05:53:31.137  INFO 2025-06-15 05:53:31,137 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя den_bor
2025-06-15 05:53:31.137  INFO 2025-06-15 05:53:31,137 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя den_bor
2025-06-15 05:53:33.389  INFO 2025-06-15 05:53:33,389 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:53:33.392  INFO 2025-06-15 05:53:33,392 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:33.392  INFO 2025-06-15 05:53:33,392 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:33.392  INFO 2025-06-15 05:53:33,392 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:53:33.392  INFO 2025-06-15 05:53:33,392 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:53:33.393  INFO 2025-06-15 05:53:33,393 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:53:33.395  INFO 2025-06-15 05:53:33,395 --- [nio-8080-exec-5] r.c.services.MemorialService             : getMemorialByIdForUser ID=7: пользователь=den_bor, роль=USER, isOwner=true, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:53:33.396  INFO 2025-06-15 05:53:33,396 --- [nio-8080-exec-5] r.c.services.MemorialService             : Мемориал ID=7 получен пользователем den_bor (владелец: true, редактор: false, админ: false)
2025-06-15 05:53:34.680  INFO 2025-06-15 05:53:34,680 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:53:34.684  INFO 2025-06-15 05:53:34,684 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:53:34.684  INFO 2025-06-15 05:53:34,684 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:34.684  INFO 2025-06-15 05:53:34,684 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:53:34.684  INFO 2025-06-15 05:53:34,684 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:53:34.684  INFO 2025-06-15 05:53:34,684 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:53:34.685  INFO 2025-06-15 05:53:34,685 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:53:34.685  INFO 2025-06-15 05:53:34,685 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: den_bor (страница 0, размер 10)
2025-06-15 05:53:34.686  INFO 2025-06-15 05:53:34,686 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=31, login=den_bor, страница=0, размер=10
2025-06-15 05:53:34.692  INFO 2025-06-15 05:53:34,692 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 1 мемориалов на странице 1 из 1 для пользователя den_bor
2025-06-15 05:53:34.692  INFO 2025-06-15 05:53:34,692 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 1 мемориалов на странице 1 из 1 для пользователя den_bor
2025-06-15 05:53:34.693  INFO 2025-06-15 05:53:34,693 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:04.166  INFO 2025-06-15 05:54:04,166 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:04.168  INFO 2025-06-15 05:54:04,168 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:54:04.168  INFO 2025-06-15 05:54:04,168 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:54:04.168  INFO 2025-06-15 05:54:04,168 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:54:04.168  INFO 2025-06-15 05:54:04,168 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:54:04.169  INFO 2025-06-15 05:54:04,169 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:54:04.659  INFO 2025-06-15 05:54:04,659 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:04.668  INFO 2025-06-15 05:54:04,668 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:04.670  INFO 2025-06-15 05:54:04,670 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:54:04.670  INFO 2025-06-15 05:54:04,670 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:54:04.670  INFO 2025-06-15 05:54:04,670 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:54:04.670  INFO 2025-06-15 05:54:04,670 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:54:04.670  INFO 2025-06-15 05:54:04,670 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:54:04.671  INFO 2025-06-15 05:54:04,671 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:54:04.671  INFO 2025-06-15 05:54:04,671 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: den_bor (страница 0, размер 10)
2025-06-15 05:54:04.672  INFO 2025-06-15 05:54:04,672 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=31, login=den_bor, страница=0, размер=10
2025-06-15 05:54:04.676  INFO 2025-06-15 05:54:04,676 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 2 мемориалов на странице 1 из 1 для пользователя den_bor
2025-06-15 05:54:04.676  INFO 2025-06-15 05:54:04,676 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 2 мемориалов на странице 1 из 1 для пользователя den_bor
2025-06-15 05:54:35.039  INFO 2025-06-15 05:54:35,039 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:35.042  INFO 2025-06-15 05:54:35,042 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:54:35.042  INFO 2025-06-15 05:54:35,042 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:54:35.042  INFO 2025-06-15 05:54:35,042 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:54:35.042  INFO 2025-06-15 05:54:35,042 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:54:35.043  INFO 2025-06-15 05:54:35,043 --- [nio-8080-exec-2] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:54:35.628  INFO 2025-06-15 05:54:35,628 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:35.636  INFO 2025-06-15 05:54:35,636 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:35.639  INFO 2025-06-15 05:54:35,639 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:54:35.639  INFO 2025-06-15 05:54:35,639 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:54:35.639  INFO 2025-06-15 05:54:35,639 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:54:35.639  INFO 2025-06-15 05:54:35,639 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:54:35.639  INFO 2025-06-15 05:54:35,639 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:54:35.641  INFO 2025-06-15 05:54:35,641 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:54:35.641  INFO 2025-06-15 05:54:35,641 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: den_bor (страница 0, размер 10)
2025-06-15 05:54:35.642  INFO 2025-06-15 05:54:35,642 --- [nio-8080-exec-8] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=31, login=den_bor, страница=0, размер=10
2025-06-15 05:54:35.652  INFO 2025-06-15 05:54:35,652 --- [nio-8080-exec-8] r.c.services.MemorialService             : Возвращаем 3 мемориалов на странице 1 из 1 для пользователя den_bor
2025-06-15 05:54:35.652  INFO 2025-06-15 05:54:35,652 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : Найдено 3 мемориалов на странице 1 из 1 для пользователя den_bor
2025-06-15 05:54:40.462  INFO 2025-06-15 05:54:40,462 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:40.703  INFO 2025-06-15 05:54:40,703 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:40.922  INFO 2025-06-15 05:54:40,922 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:41.229  INFO 2025-06-15 05:54:41,229 --- [io-8080-exec-10] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 05:54:41.412  INFO 2025-06-15 05:54:41,412 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:41.476  INFO 2025-06-15 05:54:41,476 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:41.552  INFO 2025-06-15 05:54:41,552 --- [nio-8080-exec-1] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 05:54:41.918  INFO 2025-06-15 05:54:41,918 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:41.999  INFO 2025-06-15 05:54:41,999 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:42.140  INFO 2025-06-15 05:54:42,140 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:42.167  INFO 2025-06-15 05:54:42,167 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:42.167  INFO 2025-06-15 05:54:42,167 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:42.240  INFO 2025-06-15 05:54:42,240 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:42.347  INFO 2025-06-15 05:54:42,347 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:42.573  INFO 2025-06-15 05:54:42,573 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:42.821  INFO 2025-06-15 05:54:42,821 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:43.233  INFO 2025-06-15 05:54:43,233 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:43.236  INFO 2025-06-15 05:54:43,236 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:54:43.236  INFO 2025-06-15 05:54:43,236 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:54:43.236  INFO 2025-06-15 05:54:43,236 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:54:43.236  INFO 2025-06-15 05:54:43,236 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:54:43.237  INFO 2025-06-15 05:54:43,237 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:54:43.237  INFO 2025-06-15 05:54:43,237 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:54:43.238  INFO 2025-06-15 05:54:43,238 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: den_bor (страница 0, размер 10)
2025-06-15 05:54:43.238  INFO 2025-06-15 05:54:43,238 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=31, login=den_bor, страница=0, размер=10
2025-06-15 05:54:43.243  INFO 2025-06-15 05:54:43,243 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 3 мемориалов на странице 1 из 1 для пользователя den_bor
2025-06-15 05:54:43.244  INFO 2025-06-15 05:54:43,244 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 3 мемориалов на странице 1 из 1 для пользователя den_bor
2025-06-15 05:54:43.499  INFO 2025-06-15 05:54:43,499 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:54:43.499  INFO 2025-06-15 05:54:43,499 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:54:43.509  INFO 2025-06-15 05:54:43,509 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:54:43.512  INFO 2025-06-15 05:54:43,512 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:54:43.512  INFO 2025-06-15 05:54:43,512 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:54:43.512  INFO 2025-06-15 05:54:43,512 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:54:43.512  INFO 2025-06-15 05:54:43,512 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:54:43.512  INFO 2025-06-15 05:54:43,512 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = nastya_kuz
2025-06-15 05:54:43.513  INFO 2025-06-15 05:54:43,513 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=30, login=nastya_kuz, role=USER
2025-06-15 05:54:43.513  INFO 2025-06-15 05:54:43,513 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: nastya_kuz (страница 0, размер 10)
2025-06-15 05:54:43.514  INFO 2025-06-15 05:54:43,514 --- [nio-8080-exec-9] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=30, login=nastya_kuz, страница=0, размер=10
2025-06-15 05:54:43.519  INFO 2025-06-15 05:54:43,519 --- [nio-8080-exec-9] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 05:54:43.519  INFO 2025-06-15 05:54:43,519 --- [nio-8080-exec-9] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 05:54:44.302  INFO 2025-06-15 05:54:44,302 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:44.480  INFO 2025-06-15 05:54:44,480 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:44.521  INFO 2025-06-15 05:54:44,521 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:44.627  INFO 2025-06-15 05:54:44,627 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:45.484  INFO 2025-06-15 05:54:45,484 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:45.700  INFO 2025-06-15 05:54:45,700 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:45.897  INFO 2025-06-15 05:54:45,897 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:45.919  INFO 2025-06-15 05:54:45,919 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:46.957  INFO 2025-06-15 05:54:46,957 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: den_bor, role: USER
2025-06-15 05:54:46.959  INFO 2025-06-15 05:54:46,959 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:54:46.959  INFO 2025-06-15 05:54:46,959 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:54:46.959  INFO 2025-06-15 05:54:46,959 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=den_bor, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:54:46.959  INFO 2025-06-15 05:54:46,959 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:54:46.959  INFO 2025-06-15 05:54:46,959 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = den_bor
2025-06-15 05:54:46.959  INFO 2025-06-15 05:54:46,959 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=31, login=den_bor, role=USER
2025-06-15 05:54:46.959  INFO 2025-06-15 05:54:46,959 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: den_bor (страница 0, размер 10)
2025-06-15 05:54:46.960  INFO 2025-06-15 05:54:46,960 --- [nio-8080-exec-1] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=31, login=den_bor, страница=0, размер=10
2025-06-15 05:54:46.963  INFO 2025-06-15 05:54:46,963 --- [nio-8080-exec-1] r.c.services.MemorialService             : Возвращаем 3 мемориалов на странице 1 из 1 для пользователя den_bor
2025-06-15 05:54:46.963  INFO 2025-06-15 05:54:46,963 --- [nio-8080-exec-1] r.c.controllers.MemorialController       : Найдено 3 мемориалов на странице 1 из 1 для пользователя den_bor
2025-06-15 05:55:26.084  INFO 2025-06-15 05:55:26,084 --- [nio-8080-exec-2] r.c.controllers.admin.AdminController    : Admin home accessed by: admin with authorities: [ROLE_ADMIN]
2025-06-15 05:55:32.253  INFO 2025-06-15 05:55:32,253 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : === СТАТИСТИКА МЕМОРИАЛОВ ===
2025-06-15 05:55:32.253  INFO 2025-06-15 05:55:32,253 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : Total: 8, Public: 2, Pending Moderation: 0, Recent: 8
2025-06-15 05:55:32.253  INFO 2025-06-15 05:55:32,253 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : Monthly data: [0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0, 0]
2025-06-15 05:55:32.253  INFO 2025-06-15 05:55:32,253 --- [nio-8080-exec-6] r.c.c.admin.AdminMemorialController      : Pie chart data: [2, 6, 0]
2025-06-15 05:55:53.470  INFO 2025-06-15 05:55:53,470 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:55:53.472  INFO 2025-06-15 05:55:53,472 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:55:53.472  INFO 2025-06-15 05:55:53,472 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:55:53.472  INFO 2025-06-15 05:55:53,472 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:55:53.472  INFO 2025-06-15 05:55:53,472 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:55:53.472  INFO 2025-06-15 05:55:53,472 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = nastya_kuz
2025-06-15 05:55:53.474  INFO 2025-06-15 05:55:53,474 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=30, login=nastya_kuz, role=USER
2025-06-15 05:55:53.474  INFO 2025-06-15 05:55:53,474 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: nastya_kuz (страница 0, размер 10)
2025-06-15 05:55:53.474  INFO 2025-06-15 05:55:53,474 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=30, login=nastya_kuz, страница=0, размер=10
2025-06-15 05:55:53.477  INFO 2025-06-15 05:55:53,477 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 05:55:53.477  INFO 2025-06-15 05:55:53,477 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 05:55:55.276  INFO 2025-06-15 05:55:55,276 --- [nio-8080-exec-6] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 05:55:56.195  INFO 2025-06-15 05:55:56,195 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:55:56.197  INFO 2025-06-15 05:55:56,197 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 05:55:56.197  INFO 2025-06-15 05:55:56,197 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:55:56.197  INFO 2025-06-15 05:55:56,197 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:55:56.197  INFO 2025-06-15 05:55:56,197 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:55:56.197  INFO 2025-06-15 05:55:56,197 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = nastya_kuz
2025-06-15 05:55:56.199  INFO 2025-06-15 05:55:56,199 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=30, login=nastya_kuz, role=USER
2025-06-15 05:55:56.199  INFO 2025-06-15 05:55:56,199 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: nastya_kuz (страница 0, размер 10)
2025-06-15 05:55:56.200  INFO 2025-06-15 05:55:56,200 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=30, login=nastya_kuz, страница=0, размер=10
2025-06-15 05:55:56.203  INFO 2025-06-15 05:55:56,203 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 05:55:56.203  INFO 2025-06-15 05:55:56,203 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 05:55:56.917  INFO 2025-06-15 05:55:56,917 --- [nio-8080-exec-7] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 05:55:58.480  INFO 2025-06-15 05:55:58,480 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:55:58.639  INFO 2025-06-15 05:55:58,639 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:55:58.702  INFO 2025-06-15 05:55:58,702 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:55:58.853  INFO 2025-06-15 05:55:58,853 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:55:58.897  INFO 2025-06-15 05:55:58,897 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:55:59.209  INFO 2025-06-15 05:55:59,209 --- [nio-8080-exec-8] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 05:55:59.373  INFO 2025-06-15 05:55:59,373 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:55:59.427  INFO 2025-06-15 05:55:59,427 --- [nio-8080-exec-6] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 05:56:20.703  INFO 2025-06-15 05:56:20,703 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:56:20.706  INFO 2025-06-15 05:56:20,706 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 05:56:20.706  INFO 2025-06-15 05:56:20,706 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 05:56:20.706  INFO 2025-06-15 05:56:20,706 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 05:56:20.706  INFO 2025-06-15 05:56:20,706 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = nastya_kuz
2025-06-15 05:56:20.707  INFO 2025-06-15 05:56:20,707 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=30, login=nastya_kuz, role=USER
2025-06-15 05:56:20.709  INFO 2025-06-15 05:56:20,709 --- [nio-8080-exec-5] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=nastya_kuz, роль=USER, isOwner=false, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 05:56:20.710  INFO 2025-06-15 05:56:20,710 --- [nio-8080-exec-5] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем nastya_kuz (владелец: false, редактор: false, админ: false)
2025-06-15 05:56:25.294  INFO 2025-06-15 05:56:25,294 --- [nio-8080-exec-7] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 05:56:25.308  INFO 2025-06-15 05:56:25,308 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 05:56:52.474  INFO 2025-06-15 05:56:52,474 --- [io-8080-exec-10] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 05:56:52.669  INFO 2025-06-15 05:56:52,669 --- [nio-8080-exec-2] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:01:16.080  INFO 2025-06-15 06:01:16,080 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:01:16.151  INFO 2025-06-15 06:01:16,151 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:01:16.151  INFO 2025-06-15 06:01:16,151 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:01:16.154  INFO 2025-06-15 06:01:16,154 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 06:01:16.154  INFO 2025-06-15 06:01:16,154 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 06:01:16.154  INFO 2025-06-15 06:01:16,154 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 06:01:16.154  INFO 2025-06-15 06:01:16,154 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 06:01:16.154  INFO 2025-06-15 06:01:16,154 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = nastya_kuz
2025-06-15 06:01:16.156  INFO 2025-06-15 06:01:16,156 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=30, login=nastya_kuz, role=USER
2025-06-15 06:01:16.156  INFO 2025-06-15 06:01:16,156 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: nastya_kuz (страница 0, размер 10)
2025-06-15 06:01:16.157  INFO 2025-06-15 06:01:16,157 --- [nio-8080-exec-7] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=30, login=nastya_kuz, страница=0, размер=10
2025-06-15 06:01:16.160  INFO 2025-06-15 06:01:16,160 --- [nio-8080-exec-7] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 06:01:16.160  INFO 2025-06-15 06:01:16,160 --- [nio-8080-exec-7] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 06:01:19.174  INFO 2025-06-15 06:01:19,174 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:01:19.358  INFO 2025-06-15 06:01:19,358 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:01:19.422  INFO 2025-06-15 06:01:19,422 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:01:19.606  INFO 2025-06-15 06:01:19,606 --- [nio-8080-exec-2] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:01:19.652  INFO 2025-06-15 06:01:19,652 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:01:19.851  INFO 2025-06-15 06:01:19,851 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:01:20.699  INFO 2025-06-15 06:01:20,699 --- [nio-8080-exec-3] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:01:20.939  INFO 2025-06-15 06:01:20,939 --- [nio-8080-exec-6] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:01:24.854  INFO 2025-06-15 06:01:24,854 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:01:24.856  INFO 2025-06-15 06:01:24,856 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 06:01:24.856  INFO 2025-06-15 06:01:24,856 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 06:01:24.856  INFO 2025-06-15 06:01:24,856 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 06:01:24.856  INFO 2025-06-15 06:01:24,856 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 06:01:24.856  INFO 2025-06-15 06:01:24,856 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = nastya_kuz
2025-06-15 06:01:24.857  INFO 2025-06-15 06:01:24,857 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=30, login=nastya_kuz, role=USER
2025-06-15 06:01:24.857  INFO 2025-06-15 06:01:24,857 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: nastya_kuz (страница 0, размер 10)
2025-06-15 06:01:24.858  INFO 2025-06-15 06:01:24,858 --- [nio-8080-exec-5] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=30, login=nastya_kuz, страница=0, размер=10
2025-06-15 06:01:24.860  INFO 2025-06-15 06:01:24,860 --- [nio-8080-exec-5] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 06:01:24.860  INFO 2025-06-15 06:01:24,860 --- [nio-8080-exec-5] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 06:01:25.691  INFO 2025-06-15 06:01:25,691 --- [nio-8080-exec-7] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:01:26.078  INFO 2025-06-15 06:01:26,078 --- [nio-8080-exec-9] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:02:51.938  INFO 2025-06-15 06:02:51,938 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:02:51.940  INFO 2025-06-15 06:02:51,940 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 06:02:51.941  INFO 2025-06-15 06:02:51,941 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 06:02:51.941  INFO 2025-06-15 06:02:51,941 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 06:02:51.941  INFO 2025-06-15 06:02:51,941 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = nastya_kuz
2025-06-15 06:02:51.941  INFO 2025-06-15 06:02:51,941 --- [nio-8080-exec-8] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=30, login=nastya_kuz, role=USER
2025-06-15 06:02:51.944  INFO 2025-06-15 06:02:51,944 --- [nio-8080-exec-8] r.c.services.MemorialService             : getMemorialByIdForUser ID=3: пользователь=nastya_kuz, роль=USER, isOwner=false, isEditor=false, isAdmin=false, changesUnderModeration=false
2025-06-15 06:02:51.944  INFO 2025-06-15 06:02:51,944 --- [nio-8080-exec-8] r.c.services.MemorialService             : Мемориал ID=3 получен пользователем nastya_kuz (владелец: false, редактор: false, админ: false)
2025-06-15 06:02:53.567  INFO 2025-06-15 06:02:53,567 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:11:05.322  INFO 2025-06-15 06:11:05,322 --- [nio-8080-exec-7] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:11:05.323  INFO 2025-06-15 06:11:05,323 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:11:05.324  INFO 2025-06-15 06:11:05,324 --- [nio-8080-exec-9] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:11:05.326  INFO 2025-06-15 06:11:05,326 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 06:11:05.326  INFO 2025-06-15 06:11:05,326 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 06:11:05.326  INFO 2025-06-15 06:11:05,326 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 06:11:05.326  INFO 2025-06-15 06:11:05,326 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 06:11:05.326  INFO 2025-06-15 06:11:05,326 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = nastya_kuz
2025-06-15 06:11:05.331  INFO 2025-06-15 06:11:05,331 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=30, login=nastya_kuz, role=USER
2025-06-15 06:11:05.331  INFO 2025-06-15 06:11:05,331 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: nastya_kuz (страница 0, размер 10)
2025-06-15 06:11:05.331  INFO 2025-06-15 06:11:05,331 --- [nio-8080-exec-4] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=30, login=nastya_kuz, страница=0, размер=10
2025-06-15 06:11:05.346  INFO 2025-06-15 06:11:05,346 --- [nio-8080-exec-4] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 06:11:05.347  INFO 2025-06-15 06:11:05,347 --- [nio-8080-exec-4] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 06:11:10.108  INFO 2025-06-15 06:11:10,108 --- [io-8080-exec-10] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:11:10.643  INFO 2025-06-15 06:11:10,643 --- [nio-8080-exec-2] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:23:16.867  INFO 2025-06-15 06:23:16,867 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : === АДМИН ПРОСМАТРИВАЕТ МЕМОРИАЛ ===
2025-06-15 06:23:16.867  INFO 2025-06-15 06:23:16,867 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: запрос на просмотр мемориала ID=5
2025-06-15 06:23:16.872  INFO 2025-06-15 06:23:16,872 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : Найден мемориал ID=5, ФИО='Сочнева Александра Алексеевна', changesUnderModeration=false, publicationStatus=PUBLISHED
2025-06-15 06:23:16.872  INFO 2025-06-15 06:23:16,872 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : Текущий пользователь: admin
2025-06-15 06:23:16.873  INFO 2025-06-15 06:23:16,873 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : Найден пользователь: ID=7, роль=ADMIN
2025-06-15 06:23:16.873  INFO 2025-06-15 06:23:16,873 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: мемориал ID=5, changesUnderModeration=false, currentUser=admin, role=ADMIN
2025-06-15 06:23:16.873  INFO 2025-06-15 06:23:16,873 --- [nio-8080-exec-7] r.c.services.MemorialService             : getMemorialByIdForUser ID=5: пользователь=admin, роль=ADMIN, isOwner=false, isEditor=false, isAdmin=true, changesUnderModeration=false
2025-06-15 06:23:16.873  INFO 2025-06-15 06:23:16,873 --- [nio-8080-exec-7] r.c.services.MemorialService             : Мемориал ID=5 получен пользователем admin (владелец: false, редактор: false, админ: true)
2025-06-15 06:23:16.873  INFO 2025-06-15 06:23:16,873 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : AdminMemorialController.viewMemorial: получен DTO для админа - ID=5, ФИО='Сочнева Александра Алексеевна', changesUnderModeration=false
2025-06-15 06:23:16.874  INFO 2025-06-15 06:23:16,874 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : ФЛАГ needsModeration НЕ установлен, так как publicationStatus=PUBLISHED
2025-06-15 06:23:16.874  INFO 2025-06-15 06:23:16,874 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : ФЛАГ changesNeedModeration НЕ установлен для мемориала ID=5
2025-06-15 06:23:16.874  INFO 2025-06-15 06:23:16,874 --- [nio-8080-exec-7] r.c.c.admin.AdminMemorialController      : ИТОГОВЫЕ ФЛАГИ для admin/memorial-view: needsModeration=null, changesNeedModeration=null
2025-06-15 06:29:42.835  INFO 2025-06-15 06:29:42,835 --- [nio-8080-exec-8] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:29:42.837  INFO 2025-06-15 06:29:42,837 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:29:42.839  INFO 2025-06-15 06:29:42,839 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : === ЗАПРОС МОИ МЕМОРИАЛЫ С ПАГИНАЦИЕЙ ===
2025-06-15 06:29:42.839  INFO 2025-06-15 06:29:42,839 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authentication = UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_USER]]
2025-06-15 06:29:42.839  INFO 2025-06-15 06:29:42,839 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: principal = org.springframework.security.core.userdetails.User [Username=nastya_kuz, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]]
2025-06-15 06:29:42.840  INFO 2025-06-15 06:29:42,840 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: authenticated = true
2025-06-15 06:29:42.840  INFO 2025-06-15 06:29:42,840 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: извлеченный login = nastya_kuz
2025-06-15 06:29:42.843  INFO 2025-06-15 06:29:42,843 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : getCurrentUser: найден пользователь: id=30, login=nastya_kuz, role=USER
2025-06-15 06:29:42.843  INFO 2025-06-15 06:29:42,843 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Получение 'моих мемориалов' для пользователя: nastya_kuz (страница 0, размер 10)
2025-06-15 06:29:42.843  INFO 2025-06-15 06:29:42,843 --- [nio-8080-exec-3] r.c.services.MemorialService             : Получение мемориалов с пагинацией для пользователя: id=30, login=nastya_kuz, страница=0, размер=10
2025-06-15 06:29:42.850  INFO 2025-06-15 06:29:42,850 --- [nio-8080-exec-3] r.c.services.MemorialService             : Возвращаем 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 06:29:42.850  INFO 2025-06-15 06:29:42,850 --- [nio-8080-exec-3] r.c.controllers.MemorialController       : Найдено 0 мемориалов на странице 1 из 0 для пользователя nastya_kuz
2025-06-15 06:29:42.892  INFO 2025-06-15 06:29:42,892 --- [nio-8080-exec-6] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:29:58.103  INFO 2025-06-15 06:29:58,103 --- [nio-8080-exec-5] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:29:58.412  INFO 2025-06-15 06:29:58,412 --- [nio-8080-exec-7] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:29:59.155  INFO 2025-06-15 06:29:59,155 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:29:59.163 ERROR 2025-06-15 06:29:59,163 --- [nio-8080-exec-4] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/memorials/search/bounds.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 06:29:59.391  INFO 2025-06-15 06:29:59,391 --- [nio-8080-exec-9] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:30:01.632  INFO 2025-06-15 06:30:01,632 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:30:01.636 ERROR 2025-06-15 06:30:01,636 --- [io-8080-exec-10] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/memorials/search/bounds.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 06:30:01.866  INFO 2025-06-15 06:30:01,866 --- [nio-8080-exec-2] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:30:14.335  INFO 2025-06-15 06:30:14,335 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:30:14.344 ERROR 2025-06-15 06:30:14,344 --- [nio-8080-exec-1] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/memorials/search/bounds.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 06:30:14.585  INFO 2025-06-15 06:30:14,585 --- [nio-8080-exec-8] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:30:15.050  INFO 2025-06-15 06:30:15,050 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:30:15.053 ERROR 2025-06-15 06:30:15,053 --- [nio-8080-exec-3] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/memorials/search/bounds.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 06:30:15.267  INFO 2025-06-15 06:30:15,267 --- [nio-8080-exec-6] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:30:18.659  INFO 2025-06-15 06:30:18,659 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:30:18.663 ERROR 2025-06-15 06:30:18,663 --- [nio-8080-exec-5] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/memorials/search/bounds.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 06:30:18.889  INFO 2025-06-15 06:30:18,889 --- [nio-8080-exec-7] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:30:19.402  INFO 2025-06-15 06:30:19,402 --- [nio-8080-exec-4] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:30:19.406 ERROR 2025-06-15 06:30:19,406 --- [nio-8080-exec-4] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/memorials/search/bounds.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 06:30:19.615  INFO 2025-06-15 06:30:19,615 --- [nio-8080-exec-9] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:30:22.858  INFO 2025-06-15 06:30:22,858 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:30:22.861 ERROR 2025-06-15 06:30:22,861 --- [io-8080-exec-10] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/memorials/search/bounds.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 06:30:23.088  INFO 2025-06-15 06:30:23,088 --- [nio-8080-exec-2] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:30:24.500  INFO 2025-06-15 06:30:24,500 --- [nio-8080-exec-1] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:30:24.505 ERROR 2025-06-15 06:30:24,505 --- [nio-8080-exec-1] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/memorials/search/bounds.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 06:30:24.851  INFO 2025-06-15 06:30:24,851 --- [nio-8080-exec-8] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:30:25.149  INFO 2025-06-15 06:30:25,149 --- [nio-8080-exec-3] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:30:25.153 ERROR 2025-06-15 06:30:25,153 --- [nio-8080-exec-3] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/memorials/search/bounds.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 06:30:25.365  INFO 2025-06-15 06:30:25,365 --- [nio-8080-exec-6] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:30:25.823  INFO 2025-06-15 06:30:25,823 --- [nio-8080-exec-5] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:30:25.826 ERROR 2025-06-15 06:30:25,826 --- [nio-8080-exec-5] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/memorials/search/bounds.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 06:30:26.045  INFO 2025-06-15 06:30:26,045 --- [nio-8080-exec-7] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:30:46.486  INFO 2025-06-15 06:30:46,486 --- [io-8080-exec-10] ru.cemeterysystem.services.UserService   : Loading user by username: nastya_kuz, role: USER
2025-06-15 06:30:46.491 ERROR 2025-06-15 06:30:46,491 --- [io-8080-exec-10] r.c.exceptions.GlobalExceptionHandler    : Unexpected exception occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/memorials/search/bounds.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at ru.cemeterysystem.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:94)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:384)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-06-15 06:30:46.729  INFO 2025-06-15 06:30:46,729 --- [nio-8080-exec-2] r.c.services.MemorialService             : getPublicMemorials: Возвращаем 2 публичных мемориалов на странице 1 из 1
2025-06-15 06:31:35.165  INFO 2025-06-15 06:31:35,165 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-15 06:31:35.168  INFO 2025-06-15 06:31:35,168 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-06-15 06:31:35.170  INFO 2025-06-15 06:31:35,170 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
